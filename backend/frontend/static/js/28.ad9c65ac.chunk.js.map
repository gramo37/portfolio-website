{"version":3,"file":"static/js/28.ad9c65ac.chunk.js","mappings":"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","sources":["../node_modules/@emailjs/browser/es/store/store.js","../node_modules/@emailjs/browser/es/utils/validateParams.js","../node_modules/@emailjs/browser/es/models/EmailJSResponseStatus.js","../node_modules/@emailjs/browser/es/api/sendPost.js","../node_modules/@emailjs/browser/es/index.js","../node_modules/@emailjs/browser/es/methods/init/init.js","../node_modules/@emailjs/browser/es/methods/send/send.js","../node_modules/@emailjs/browser/es/methods/sendForm/sendForm.js","../node_modules/@mui/icons-material/ArrowDropUp.js","../node_modules/@mui/icons-material/GitHub.js","../node_modules/@mui/icons-material/LinkedIn.js","../node_modules/@mui/icons-material/School.js","../node_modules/@mui/icons-material/Twitter.js","../node_modules/@mui/icons-material/Work.js","../node_modules/formik/node_modules/deepmerge/dist/es.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/_listCacheClear.js","../node_modules/lodash-es/eq.js","../node_modules/lodash-es/_assocIndexOf.js","../node_modules/lodash-es/_listCacheDelete.js","../node_modules/lodash-es/_listCacheGet.js","../node_modules/lodash-es/_listCacheHas.js","../node_modules/lodash-es/_listCacheSet.js","../node_modules/lodash-es/_ListCache.js","../node_modules/lodash-es/_stackClear.js","../node_modules/lodash-es/_stackDelete.js","../node_modules/lodash-es/_stackGet.js","../node_modules/lodash-es/_stackHas.js","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/isFunction.js","../node_modules/lodash-es/_coreJsData.js","../node_modules/lodash-es/_isMasked.js","../node_modules/lodash-es/_toSource.js","../node_modules/lodash-es/_baseIsNative.js","../node_modules/lodash-es/_getValue.js","../node_modules/lodash-es/_getNative.js","../node_modules/lodash-es/_Map.js","../node_modules/lodash-es/_nativeCreate.js","../node_modules/lodash-es/_hashClear.js","../node_modules/lodash-es/_hashDelete.js","../node_modules/lodash-es/_hashGet.js","../node_modules/lodash-es/_hashHas.js","../node_modules/lodash-es/_hashSet.js","../node_modules/lodash-es/_Hash.js","../node_modules/lodash-es/_mapCacheClear.js","../node_modules/lodash-es/_isKeyable.js","../node_modules/lodash-es/_getMapData.js","../node_modules/lodash-es/_mapCacheDelete.js","../node_modules/lodash-es/_mapCacheGet.js","../node_modules/lodash-es/_mapCacheHas.js","../node_modules/lodash-es/_mapCacheSet.js","../node_modules/lodash-es/_MapCache.js","../node_modules/lodash-es/_stackSet.js","../node_modules/lodash-es/_Stack.js","../node_modules/lodash-es/_arrayEach.js","../node_modules/lodash-es/_defineProperty.js","../node_modules/lodash-es/_baseAssignValue.js","../node_modules/lodash-es/_assignValue.js","../node_modules/lodash-es/_copyObject.js","../node_modules/lodash-es/_baseTimes.js","../node_modules/lodash-es/_baseIsArguments.js","../node_modules/lodash-es/isArguments.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/stubFalse.js","../node_modules/lodash-es/isBuffer.js","../node_modules/lodash-es/_isIndex.js","../node_modules/lodash-es/isLength.js","../node_modules/lodash-es/_baseIsTypedArray.js","../node_modules/lodash-es/_baseUnary.js","../node_modules/lodash-es/_nodeUtil.js","../node_modules/lodash-es/isTypedArray.js","../node_modules/lodash-es/_arrayLikeKeys.js","../node_modules/lodash-es/_isPrototype.js","../node_modules/lodash-es/_nativeKeys.js","../node_modules/lodash-es/_baseKeys.js","../node_modules/lodash-es/isArrayLike.js","../node_modules/lodash-es/keys.js","../node_modules/lodash-es/_baseAssign.js","../node_modules/lodash-es/_nativeKeysIn.js","../node_modules/lodash-es/_baseKeysIn.js","../node_modules/lodash-es/keysIn.js","../node_modules/lodash-es/_baseAssignIn.js","../node_modules/lodash-es/_cloneBuffer.js","../node_modules/lodash-es/_copyArray.js","../node_modules/lodash-es/_arrayFilter.js","../node_modules/lodash-es/stubArray.js","../node_modules/lodash-es/_getSymbols.js","../node_modules/lodash-es/_copySymbols.js","../node_modules/lodash-es/_arrayPush.js","../node_modules/lodash-es/_getSymbolsIn.js","../node_modules/lodash-es/_copySymbolsIn.js","../node_modules/lodash-es/_baseGetAllKeys.js","../node_modules/lodash-es/_getAllKeys.js","../node_modules/lodash-es/_getAllKeysIn.js","../node_modules/lodash-es/_DataView.js","../node_modules/lodash-es/_Promise.js","../node_modules/lodash-es/_Set.js","../node_modules/lodash-es/_WeakMap.js","../node_modules/lodash-es/_getTag.js","../node_modules/lodash-es/_initCloneArray.js","../node_modules/lodash-es/_Uint8Array.js","../node_modules/lodash-es/_cloneArrayBuffer.js","../node_modules/lodash-es/_cloneDataView.js","../node_modules/lodash-es/_cloneRegExp.js","../node_modules/lodash-es/_cloneSymbol.js","../node_modules/lodash-es/_cloneTypedArray.js","../node_modules/lodash-es/_initCloneByTag.js","../node_modules/lodash-es/_baseCreate.js","../node_modules/lodash-es/_initCloneObject.js","../node_modules/lodash-es/_baseIsMap.js","../node_modules/lodash-es/isMap.js","../node_modules/lodash-es/_baseIsSet.js","../node_modules/lodash-es/isSet.js","../node_modules/lodash-es/_baseClone.js","../node_modules/lodash-es/clone.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/memoize.js","../node_modules/lodash-es/_memoizeCapped.js","../node_modules/lodash-es/_stringToPath.js","../node_modules/lodash-es/_toKey.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/toPath.js","../node_modules/tiny-warning/dist/tiny-warning.esm.js","../node_modules/lodash-es/cloneDeep.js","../node_modules/formik/src/utils.ts","../node_modules/formik/src/FormikContext.tsx","../node_modules/formik/src/Formik.tsx","../node_modules/formik/src/Form.tsx","../node_modules/formik/src/FieldArray.tsx","../node_modules/formik/src/ErrorMessage.tsx","../node_modules/formik/src/FastField.tsx","../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../node_modules/hoist-non-react-statics/node_modules/react-is/cjs/react-is.production.min.js","../node_modules/hoist-non-react-statics/node_modules/react-is/index.js","../node_modules/property-expr/index.js","../node_modules/react-fast-compare/index.js","../node_modules/tiny-case/index.js","../node_modules/toposort/index.js","../node_modules/yup/index.esm.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@kurkle/color/dist/color.esm.js","../node_modules/chart.js/src/helpers/helpers.core.ts","../node_modules/chart.js/src/helpers/helpers.math.ts","../node_modules/chart.js/src/helpers/helpers.collection.ts","../node_modules/chart.js/src/helpers/helpers.extras.ts","../node_modules/chart.js/src/helpers/helpers.easing.ts","../node_modules/chart.js/src/helpers/helpers.color.ts","../node_modules/chart.js/src/core/core.animations.defaults.js","../node_modules/chart.js/src/helpers/helpers.intl.ts","../node_modules/chart.js/src/core/core.ticks.js","../node_modules/chart.js/src/core/core.defaults.js","../node_modules/chart.js/src/core/core.layouts.defaults.js","../node_modules/chart.js/src/core/core.scale.defaults.js","../node_modules/chart.js/src/helpers/helpers.canvas.js","../node_modules/chart.js/src/helpers/helpers.options.ts","../node_modules/chart.js/src/helpers/helpers.config.js","../node_modules/chart.js/src/helpers/helpers.curve.ts","../node_modules/chart.js/src/helpers/helpers.dom.ts","../node_modules/chart.js/src/helpers/helpers.interpolation.ts","../node_modules/chart.js/src/helpers/helpers.rtl.ts","../node_modules/chart.js/src/helpers/helpers.segment.js","../node_modules/chart.js/src/core/core.animator.js","../node_modules/chart.js/src/core/core.animation.js","../node_modules/chart.js/src/core/core.animations.js","../node_modules/chart.js/src/core/core.datasetController.js","../node_modules/chart.js/src/controllers/controller.bar.js","../node_modules/chart.js/src/controllers/controller.bubble.js","../node_modules/chart.js/src/controllers/controller.doughnut.js","../node_modules/chart.js/src/controllers/controller.line.js","../node_modules/chart.js/src/controllers/controller.polarArea.js","../node_modules/chart.js/src/controllers/controller.pie.js","../node_modules/chart.js/src/controllers/controller.radar.js","../node_modules/chart.js/src/controllers/controller.scatter.js","../node_modules/chart.js/src/core/core.adapters.ts","../node_modules/chart.js/src/core/core.interaction.js","../node_modules/chart.js/src/core/core.layouts.js","../node_modules/chart.js/src/platform/platform.base.js","../node_modules/chart.js/src/platform/platform.basic.js","../node_modules/chart.js/src/platform/platform.dom.js","../node_modules/chart.js/src/platform/index.js","../node_modules/chart.js/src/core/core.element.ts","../node_modules/chart.js/src/core/core.scale.autoskip.js","../node_modules/chart.js/src/core/core.scale.js","../node_modules/chart.js/src/core/core.typedRegistry.js","../node_modules/chart.js/src/core/core.registry.js","../node_modules/chart.js/src/core/core.plugins.js","../node_modules/chart.js/src/core/core.config.js","../node_modules/chart.js/src/core/core.controller.js","../node_modules/chart.js/src/elements/element.arc.ts","../node_modules/chart.js/src/elements/element.line.js","../node_modules/chart.js/src/elements/element.point.ts","../node_modules/chart.js/src/elements/element.bar.js","../node_modules/chart.js/src/plugins/plugin.filler/index.js","../node_modules/chart.js/src/plugins/plugin.legend.js","../node_modules/chart.js/src/plugins/plugin.subtitle.js","../node_modules/chart.js/src/plugins/plugin.title.js","../node_modules/chart.js/src/plugins/plugin.tooltip.js","../node_modules/chart.js/src/scales/scale.category.js","../node_modules/chart.js/src/scales/scale.linearbase.js","../node_modules/chart.js/src/scales/scale.linear.js","../node_modules/chart.js/src/scales/scale.logarithmic.js","../node_modules/chart.js/src/scales/scale.radialLinear.js","../node_modules/chart.js/src/scales/scale.time.js","../node_modules/chart.js/src/scales/scale.timeseries.js","../node_modules/react-chartjs-2/src/utils.ts","../node_modules/react-chartjs-2/src/chart.tsx","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/react-chartjs-2/src/typedCharts.tsx"],"sourcesContent":["export const store = {\n    _origin: 'https://api.emailjs.com',\n};\n","export const validateParams = (publicKey, serviceID, templateID) => {\n    if (!publicKey) {\n        throw 'The public key is required. Visit https://dashboard.emailjs.com/admin/account';\n    }\n    if (!serviceID) {\n        throw 'The service ID is required. Visit https://dashboard.emailjs.com/admin';\n    }\n    if (!templateID) {\n        throw 'The template ID is required. Visit https://dashboard.emailjs.com/admin/templates';\n    }\n    return true;\n};\n","export class EmailJSResponseStatus {\n    constructor(httpResponse) {\n        this.status = httpResponse ? httpResponse.status : 0;\n        this.text = httpResponse ? httpResponse.responseText : 'Network Error';\n    }\n}\n","import { EmailJSResponseStatus } from '../models/EmailJSResponseStatus';\nimport { store } from '../store/store';\nexport const sendPost = (url, data, headers = {}) => {\n    return new Promise((resolve, reject) => {\n        const xhr = new XMLHttpRequest();\n        xhr.addEventListener('load', ({ target }) => {\n            const responseStatus = new EmailJSResponseStatus(target);\n            if (responseStatus.status === 200 || responseStatus.text === 'OK') {\n                resolve(responseStatus);\n            }\n            else {\n                reject(responseStatus);\n            }\n        });\n        xhr.addEventListener('error', ({ target }) => {\n            reject(new EmailJSResponseStatus(target));\n        });\n        xhr.open('POST', store._origin + url, true);\n        Object.keys(headers).forEach((key) => {\n            xhr.setRequestHeader(key, headers[key]);\n        });\n        xhr.send(data);\n    });\n};\n","import { init } from './methods/init/init';\nimport { send } from './methods/send/send';\nimport { sendForm } from './methods/sendForm/sendForm';\nexport { init, send, sendForm };\nexport default {\n    init,\n    send,\n    sendForm,\n};\n","import { store } from '../../store/store';\n/**\n * Initiation\n * @param {string} publicKey - set the EmailJS public key\n * @param {string} origin - set the EmailJS origin\n */\nexport const init = (publicKey, origin = 'https://api.emailjs.com') => {\n    store._userID = publicKey;\n    store._origin = origin;\n};\n","import { store } from '../../store/store';\nimport { validateParams } from '../../utils/validateParams';\nimport { sendPost } from '../../api/sendPost';\n/**\n * Send a template to the specific EmailJS service\n * @param {string} serviceID - the EmailJS service ID\n * @param {string} templateID - the EmailJS template ID\n * @param {object} templatePrams - the template params, what will be set to the EmailJS template\n * @param {string} publicKey - the EmailJS public key\n * @returns {Promise<EmailJSResponseStatus>}\n */\nexport const send = (serviceID, templateID, templatePrams, publicKey) => {\n    const uID = publicKey || store._userID;\n    validateParams(uID, serviceID, templateID);\n    const params = {\n        lib_version: '3.10.0',\n        user_id: uID,\n        service_id: serviceID,\n        template_id: templateID,\n        template_params: templatePrams,\n    };\n    return sendPost('/api/v1.0/email/send', JSON.stringify(params), {\n        'Content-type': 'application/json',\n    });\n};\n","import { store } from '../../store/store';\nimport { validateParams } from '../../utils/validateParams';\nimport { sendPost } from '../../api/sendPost';\nconst findHTMLForm = (form) => {\n    let currentForm;\n    if (typeof form === 'string') {\n        currentForm = document.querySelector(form);\n    }\n    else {\n        currentForm = form;\n    }\n    if (!currentForm || currentForm.nodeName !== 'FORM') {\n        throw 'The 3rd parameter is expected to be the HTML form element or the style selector of form';\n    }\n    return currentForm;\n};\n/**\n * Send a form the specific EmailJS service\n * @param {string} serviceID - the EmailJS service ID\n * @param {string} templateID - the EmailJS template ID\n * @param {string | HTMLFormElement} form - the form element or selector\n * @param {string} publicKey - the EmailJS public key\n * @returns {Promise<EmailJSResponseStatus>}\n */\nexport const sendForm = (serviceID, templateID, form, publicKey) => {\n    const uID = publicKey || store._userID;\n    const currentForm = findHTMLForm(form);\n    validateParams(uID, serviceID, templateID);\n    const formData = new FormData(currentForm);\n    formData.append('lib_version', '3.10.0');\n    formData.append('service_id', serviceID);\n    formData.append('template_id', templateID);\n    formData.append('user_id', uID);\n    return sendPost('/api/v1.0/email/send-form', formData);\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m7 14 5-5 5 5z\"\n}), 'ArrowDropUp');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27\"\n}), 'GitHub');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z\"\n}), 'LinkedIn');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3 1 9l11 6 9-4.91V17h2V9L12 3z\"\n}), 'School');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z\"\n}), 'Twitter');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z\"\n}), 'Work');\nexports.default = _default;","var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import arrayMap from './_arrayMap.js';\nimport copyArray from './_copyArray.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\nimport stringToPath from './_stringToPath.js';\nimport toKey from './_toKey.js';\nimport toString from './toString.js';\n\n/**\n * Converts `value` to a property path array.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {*} value The value to convert.\n * @returns {Array} Returns the new property path array.\n * @example\n *\n * _.toPath('a.b.c');\n * // => ['a', 'b', 'c']\n *\n * _.toPath('a[0].b.c');\n * // => ['a', '0', 'b', 'c']\n */\nfunction toPath(value) {\n  if (isArray(value)) {\n    return arrayMap(value, toKey);\n  }\n  return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n}\n\nexport default toPath;\n","var isProduction = process.env.NODE_ENV === 'production';\nfunction warning(condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    var text = \"Warning: \" + message;\n\n    if (typeof console !== 'undefined') {\n      console.warn(text);\n    }\n\n    try {\n      throw Error(text);\n    } catch (x) {}\n  }\n}\n\nexport default warning;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import clone from 'lodash/clone';\nimport toPath from 'lodash/toPath';\nimport * as React from 'react';\n\n// Assertions\n\n/** @private is the value an empty array? */\nexport const isEmptyArray = (value?: any) =>\n  Array.isArray(value) && value.length === 0;\n\n/** @private is the given object a Function? */\nexport const isFunction = (obj: any): obj is Function =>\n  typeof obj === 'function';\n\n/** @private is the given object an Object? */\nexport const isObject = (obj: any): obj is Object =>\n  obj !== null && typeof obj === 'object';\n\n/** @private is the given object an integer? */\nexport const isInteger = (obj: any): boolean =>\n  String(Math.floor(Number(obj))) === obj;\n\n/** @private is the given object a string? */\nexport const isString = (obj: any): obj is string =>\n  Object.prototype.toString.call(obj) === '[object String]';\n\n/** @private is the given object a NaN? */\n// eslint-disable-next-line no-self-compare\nexport const isNaN = (obj: any): boolean => obj !== obj;\n\n/** @private Does a React component have exactly 0 children? */\nexport const isEmptyChildren = (children: any): boolean =>\n  React.Children.count(children) === 0;\n\n/** @private is the given object/value a promise? */\nexport const isPromise = (value: any): value is PromiseLike<any> =>\n  isObject(value) && isFunction(value.then);\n\n/** @private is the given object/value a type of synthetic event? */\nexport const isInputEvent = (value: any): value is React.SyntheticEvent<any> =>\n  value && isObject(value) && isObject(value.target);\n\n/**\n * Same as document.activeElement but wraps in a try-catch block. In IE it is\n * not safe to call document.activeElement if there is nothing focused.\n *\n * The activeElement will be null only if the document or document body is not\n * yet defined.\n *\n * @param {?Document} doc Defaults to current document.\n * @return {Element | null}\n * @see https://github.com/facebook/fbjs/blob/master/packages/fbjs/src/core/dom/getActiveElement.js\n */\nexport function getActiveElement(doc?: Document): Element | null {\n  doc = doc || (typeof document !== 'undefined' ? document : undefined);\n  if (typeof doc === 'undefined') {\n    return null;\n  }\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\n\n/**\n * Deeply get a value from an object via its path.\n */\nexport function getIn(\n  obj: any,\n  key: string | string[],\n  def?: any,\n  p: number = 0\n) {\n  const path = toPath(key);\n  while (obj && p < path.length) {\n    obj = obj[path[p++]];\n  }\n  return obj === undefined ? def : obj;\n}\n\n/**\n * Deeply set a value from in object via it's path. If the value at `path`\n * has changed, return a shallow copy of obj with `value` set at `path`.\n * If `value` has not changed, return the original `obj`.\n *\n * Existing objects / arrays along `path` are also shallow copied. Sibling\n * objects along path retain the same internal js reference. Since new\n * objects / arrays are only created along `path`, we can test if anything\n * changed in a nested structure by comparing the object's reference in\n * the old and new object, similar to how russian doll cache invalidation\n * works.\n *\n * In earlier versions of this function, which used cloneDeep, there were\n * issues whereby settings a nested value would mutate the parent\n * instead of creating a new object. `clone` avoids that bug making a\n * shallow copy of the objects along the update path\n * so no object is mutated in place.\n *\n * Before changing this function, please read through the following\n * discussions.\n *\n * @see https://github.com/developit/linkstate\n * @see https://github.com/jaredpalmer/formik/pull/123\n */\nexport function setIn(obj: any, path: string, value: any): any {\n  let res: any = clone(obj); // this keeps inheritance when obj is a class\n  let resVal: any = res;\n  let i = 0;\n  let pathArray = toPath(path);\n\n  for (; i < pathArray.length - 1; i++) {\n    const currentPath: string = pathArray[i];\n    let currentObj: any = getIn(obj, pathArray.slice(0, i + 1));\n\n    if (currentObj && (isObject(currentObj) || Array.isArray(currentObj))) {\n      resVal = resVal[currentPath] = clone(currentObj);\n    } else {\n      const nextPath: string = pathArray[i + 1];\n      resVal = resVal[currentPath] =\n        isInteger(nextPath) && Number(nextPath) >= 0 ? [] : {};\n    }\n  }\n\n  // Return original object if new value is the same as current\n  if ((i === 0 ? obj : resVal)[pathArray[i]] === value) {\n    return obj;\n  }\n\n  if (value === undefined) {\n    delete resVal[pathArray[i]];\n  } else {\n    resVal[pathArray[i]] = value;\n  }\n\n  // If the path array has a single element, the loop did not run.\n  // Deleting on `resVal` had no effect in this scenario, so we delete on the result instead.\n  if (i === 0 && value === undefined) {\n    delete res[pathArray[i]];\n  }\n\n  return res;\n}\n\n/**\n * Recursively a set the same value for all keys and arrays nested object, cloning\n * @param object\n * @param value\n * @param visited\n * @param response\n */\nexport function setNestedObjectValues<T>(\n  object: any,\n  value: any,\n  visited: any = new WeakMap(),\n  response: any = {}\n): T {\n  for (let k of Object.keys(object)) {\n    const val = object[k];\n    if (isObject(val)) {\n      if (!visited.get(val)) {\n        visited.set(val, true);\n        // In order to keep array values consistent for both dot path  and\n        // bracket syntax, we need to check if this is an array so that\n        // this will output  { friends: [true] } and not { friends: { \"0\": true } }\n        response[k] = Array.isArray(val) ? [] : {};\n        setNestedObjectValues(val, value, visited, response[k]);\n      }\n    } else {\n      response[k] = value;\n    }\n  }\n\n  return response;\n}\n","import * as React from 'react';\nimport { FormikContextType } from './types';\nimport invariant from 'tiny-warning';\n\nexport const FormikContext = React.createContext<FormikContextType<any>>(\n  undefined as any\n);\nFormikContext.displayName = 'FormikContext';\n\nexport const FormikProvider = FormikContext.Provider;\nexport const FormikConsumer = FormikContext.Consumer;\n\nexport function useFormikContext<Values>() {\n  const formik = React.useContext<FormikContextType<Values>>(FormikContext);\n\n  invariant(\n    !!formik,\n    `Formik context is undefined, please verify you are calling useFormikContext() as child of a <Formik> component.`\n  );\n\n  return formik;\n}\n","import * as React from 'react';\nimport isEqual from 'react-fast-compare';\nimport deepmerge from 'deepmerge';\nimport isPlainObject from 'lodash/isPlainObject';\nimport {\n  FormikConfig,\n  FormikErrors,\n  FormikState,\n  FormikTouched,\n  FormikValues,\n  FormikProps,\n  FieldMetaProps,\n  FieldHelperProps,\n  FieldInputProps,\n  FormikHelpers,\n  FormikHandlers,\n} from './types';\nimport {\n  isFunction,\n  isString,\n  setIn,\n  isEmptyChildren,\n  isPromise,\n  setNestedObjectValues,\n  getActiveElement,\n  getIn,\n  isObject,\n} from './utils';\nimport { FormikProvider } from './FormikContext';\nimport invariant from 'tiny-warning';\n\ntype FormikMessage<Values> =\n  | { type: 'SUBMIT_ATTEMPT' }\n  | { type: 'SUBMIT_FAILURE' }\n  | { type: 'SUBMIT_SUCCESS' }\n  | { type: 'SET_ISVALIDATING'; payload: boolean }\n  | { type: 'SET_ISSUBMITTING'; payload: boolean }\n  | { type: 'SET_VALUES'; payload: Values }\n  | { type: 'SET_FIELD_VALUE'; payload: { field: string; value?: any } }\n  | { type: 'SET_FIELD_TOUCHED'; payload: { field: string; value?: boolean } }\n  | { type: 'SET_FIELD_ERROR'; payload: { field: string; value?: string } }\n  | { type: 'SET_TOUCHED'; payload: FormikTouched<Values> }\n  | { type: 'SET_ERRORS'; payload: FormikErrors<Values> }\n  | { type: 'SET_STATUS'; payload: any }\n  | {\n      type: 'SET_FORMIK_STATE';\n      payload: (s: FormikState<Values>) => FormikState<Values>;\n    }\n  | {\n      type: 'RESET_FORM';\n      payload: FormikState<Values>;\n    };\n\n// State reducer\nfunction formikReducer<Values>(\n  state: FormikState<Values>,\n  msg: FormikMessage<Values>\n) {\n  switch (msg.type) {\n    case 'SET_VALUES':\n      return { ...state, values: msg.payload };\n    case 'SET_TOUCHED':\n      return { ...state, touched: msg.payload };\n    case 'SET_ERRORS':\n      if (isEqual(state.errors, msg.payload)) {\n        return state;\n      }\n\n      return { ...state, errors: msg.payload };\n    case 'SET_STATUS':\n      return { ...state, status: msg.payload };\n    case 'SET_ISSUBMITTING':\n      return { ...state, isSubmitting: msg.payload };\n    case 'SET_ISVALIDATING':\n      return { ...state, isValidating: msg.payload };\n    case 'SET_FIELD_VALUE':\n      return {\n        ...state,\n        values: setIn(state.values, msg.payload.field, msg.payload.value),\n      };\n    case 'SET_FIELD_TOUCHED':\n      return {\n        ...state,\n        touched: setIn(state.touched, msg.payload.field, msg.payload.value),\n      };\n    case 'SET_FIELD_ERROR':\n      return {\n        ...state,\n        errors: setIn(state.errors, msg.payload.field, msg.payload.value),\n      };\n    case 'RESET_FORM':\n      return { ...state, ...msg.payload };\n    case 'SET_FORMIK_STATE':\n      return msg.payload(state);\n    case 'SUBMIT_ATTEMPT':\n      return {\n        ...state,\n        touched: setNestedObjectValues<FormikTouched<Values>>(\n          state.values,\n          true\n        ),\n        isSubmitting: true,\n        submitCount: state.submitCount + 1,\n      };\n    case 'SUBMIT_FAILURE':\n      return {\n        ...state,\n        isSubmitting: false,\n      };\n    case 'SUBMIT_SUCCESS':\n      return {\n        ...state,\n        isSubmitting: false,\n      };\n    default:\n      return state;\n  }\n}\n\n// Initial empty states // objects\nconst emptyErrors: FormikErrors<unknown> = {};\nconst emptyTouched: FormikTouched<unknown> = {};\n\n// This is an object that contains a map of all registered fields\n// and their validate functions\ninterface FieldRegistry {\n  [field: string]: {\n    validate: (value: any) => string | Promise<string> | undefined;\n  };\n}\n\nexport function useFormik<Values extends FormikValues = FormikValues>({\n  validateOnChange = true,\n  validateOnBlur = true,\n  validateOnMount = false,\n  isInitialValid,\n  enableReinitialize = false,\n  onSubmit,\n  ...rest\n}: FormikConfig<Values>) {\n  const props = {\n    validateOnChange,\n    validateOnBlur,\n    validateOnMount,\n    onSubmit,\n    ...rest,\n  };\n  const initialValues = React.useRef(props.initialValues);\n  const initialErrors = React.useRef(props.initialErrors || emptyErrors);\n  const initialTouched = React.useRef(props.initialTouched || emptyTouched);\n  const initialStatus = React.useRef(props.initialStatus);\n  const isMounted = React.useRef<boolean>(false);\n  const fieldRegistry = React.useRef<FieldRegistry>({});\n  if (__DEV__) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useEffect(() => {\n      invariant(\n        typeof isInitialValid === 'undefined',\n        'isInitialValid has been deprecated and will be removed in future versions of Formik. Please use initialErrors or validateOnMount instead.'\n      );\n      // eslint-disable-next-line\n    }, []);\n  }\n\n  React.useEffect(() => {\n    isMounted.current = true;\n\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  const [state, dispatch] = React.useReducer<\n    React.Reducer<FormikState<Values>, FormikMessage<Values>>\n  >(formikReducer, {\n    values: props.initialValues,\n    errors: props.initialErrors || emptyErrors,\n    touched: props.initialTouched || emptyTouched,\n    status: props.initialStatus,\n    isSubmitting: false,\n    isValidating: false,\n    submitCount: 0,\n  });\n\n  const runValidateHandler = React.useCallback(\n    (values: Values, field?: string): Promise<FormikErrors<Values>> => {\n      return new Promise((resolve, reject) => {\n        const maybePromisedErrors = (props.validate as any)(values, field);\n        if (maybePromisedErrors == null) {\n          // use loose null check here on purpose\n          resolve(emptyErrors);\n        } else if (isPromise(maybePromisedErrors)) {\n          (maybePromisedErrors as Promise<any>).then(\n            errors => {\n              resolve(errors || emptyErrors);\n            },\n            actualException => {\n              if (process.env.NODE_ENV !== 'production') {\n                console.warn(\n                  `Warning: An unhandled error was caught during validation in <Formik validate />`,\n                  actualException\n                );\n              }\n\n              reject(actualException);\n            }\n          );\n        } else {\n          resolve(maybePromisedErrors);\n        }\n      });\n    },\n    [props.validate]\n  );\n\n  /**\n   * Run validation against a Yup schema and optionally run a function if successful\n   */\n  const runValidationSchema = React.useCallback(\n    (values: Values, field?: string): Promise<FormikErrors<Values>> => {\n      const validationSchema = props.validationSchema;\n      const schema = isFunction(validationSchema)\n        ? validationSchema(field)\n        : validationSchema;\n      const promise =\n        field && schema.validateAt\n          ? schema.validateAt(field, values)\n          : validateYupSchema(values, schema);\n      return new Promise((resolve, reject) => {\n        promise.then(\n          () => {\n            resolve(emptyErrors);\n          },\n          (err: any) => {\n            // Yup will throw a validation error if validation fails. We catch those and\n            // resolve them into Formik errors. We can sniff if something is a Yup error\n            // by checking error.name.\n            // @see https://github.com/jquense/yup#validationerrorerrors-string--arraystring-value-any-path-string\n            if (err.name === 'ValidationError') {\n              resolve(yupToFormErrors(err));\n            } else {\n              // We throw any other errors\n              if (process.env.NODE_ENV !== 'production') {\n                console.warn(\n                  `Warning: An unhandled error was caught during validation in <Formik validationSchema />`,\n                  err\n                );\n              }\n\n              reject(err);\n            }\n          }\n        );\n      });\n    },\n    [props.validationSchema]\n  );\n\n  const runSingleFieldLevelValidation = React.useCallback(\n    (field: string, value: void | string): Promise<string> => {\n      return new Promise(resolve =>\n        resolve(fieldRegistry.current[field].validate(value) as string)\n      );\n    },\n    []\n  );\n\n  const runFieldLevelValidations = React.useCallback(\n    (values: Values): Promise<FormikErrors<Values>> => {\n      const fieldKeysWithValidation: string[] = Object.keys(\n        fieldRegistry.current\n      ).filter(f => isFunction(fieldRegistry.current[f].validate));\n\n      // Construct an array with all of the field validation functions\n      const fieldValidations: Promise<string>[] =\n        fieldKeysWithValidation.length > 0\n          ? fieldKeysWithValidation.map(f =>\n              runSingleFieldLevelValidation(f, getIn(values, f))\n            )\n          : [Promise.resolve('DO_NOT_DELETE_YOU_WILL_BE_FIRED')]; // use special case ;)\n\n      return Promise.all(fieldValidations).then((fieldErrorsList: string[]) =>\n        fieldErrorsList.reduce((prev, curr, index) => {\n          if (curr === 'DO_NOT_DELETE_YOU_WILL_BE_FIRED') {\n            return prev;\n          }\n          if (curr) {\n            prev = setIn(prev, fieldKeysWithValidation[index], curr);\n          }\n          return prev;\n        }, {})\n      );\n    },\n    [runSingleFieldLevelValidation]\n  );\n\n  // Run all validations and return the result\n  const runAllValidations = React.useCallback(\n    (values: Values) => {\n      return Promise.all([\n        runFieldLevelValidations(values),\n        props.validationSchema ? runValidationSchema(values) : {},\n        props.validate ? runValidateHandler(values) : {},\n      ]).then(([fieldErrors, schemaErrors, validateErrors]) => {\n        const combinedErrors = deepmerge.all<FormikErrors<Values>>(\n          [fieldErrors, schemaErrors, validateErrors],\n          { arrayMerge }\n        );\n        return combinedErrors;\n      });\n    },\n    [\n      props.validate,\n      props.validationSchema,\n      runFieldLevelValidations,\n      runValidateHandler,\n      runValidationSchema,\n    ]\n  );\n\n  // Run all validations methods and update state accordingly\n  const validateFormWithHighPriority = useEventCallback(\n    (values: Values = state.values) => {\n      dispatch({ type: 'SET_ISVALIDATING', payload: true });\n      return runAllValidations(values).then(combinedErrors => {\n        if (!!isMounted.current) {\n          dispatch({ type: 'SET_ISVALIDATING', payload: false });\n          dispatch({ type: 'SET_ERRORS', payload: combinedErrors });\n        }\n        return combinedErrors;\n      });\n    }\n  );\n\n  React.useEffect(() => {\n    if (\n      validateOnMount &&\n      isMounted.current === true &&\n      isEqual(initialValues.current, props.initialValues)\n    ) {\n      validateFormWithHighPriority(initialValues.current);\n    }\n  }, [validateOnMount, validateFormWithHighPriority]);\n\n  const resetForm = React.useCallback(\n    (nextState?: Partial<FormikState<Values>>) => {\n      const values =\n        nextState && nextState.values\n          ? nextState.values\n          : initialValues.current;\n      const errors =\n        nextState && nextState.errors\n          ? nextState.errors\n          : initialErrors.current\n          ? initialErrors.current\n          : props.initialErrors || {};\n      const touched =\n        nextState && nextState.touched\n          ? nextState.touched\n          : initialTouched.current\n          ? initialTouched.current\n          : props.initialTouched || {};\n      const status =\n        nextState && nextState.status\n          ? nextState.status\n          : initialStatus.current\n          ? initialStatus.current\n          : props.initialStatus;\n      initialValues.current = values;\n      initialErrors.current = errors;\n      initialTouched.current = touched;\n      initialStatus.current = status;\n\n      const dispatchFn = () => {\n        dispatch({\n          type: 'RESET_FORM',\n          payload: {\n            isSubmitting: !!nextState && !!nextState.isSubmitting,\n            errors,\n            touched,\n            status,\n            values,\n            isValidating: !!nextState && !!nextState.isValidating,\n            submitCount:\n              !!nextState &&\n              !!nextState.submitCount &&\n              typeof nextState.submitCount === 'number'\n                ? nextState.submitCount\n                : 0,\n          },\n        });\n      };\n\n      if (props.onReset) {\n        const maybePromisedOnReset = (props.onReset as any)(\n          state.values,\n          imperativeMethods\n        );\n\n        if (isPromise(maybePromisedOnReset)) {\n          (maybePromisedOnReset as Promise<any>).then(dispatchFn);\n        } else {\n          dispatchFn();\n        }\n      } else {\n        dispatchFn();\n      }\n    },\n    [props.initialErrors, props.initialStatus, props.initialTouched]\n  );\n\n  React.useEffect(() => {\n    if (\n      isMounted.current === true &&\n      !isEqual(initialValues.current, props.initialValues)\n    ) {\n      if (enableReinitialize) {\n        initialValues.current = props.initialValues;\n        resetForm();\n      }\n\n      if (validateOnMount) {\n        validateFormWithHighPriority(initialValues.current);\n      }\n    }\n  }, [\n    enableReinitialize,\n    props.initialValues,\n    resetForm,\n    validateOnMount,\n    validateFormWithHighPriority,\n  ]);\n\n  React.useEffect(() => {\n    if (\n      enableReinitialize &&\n      isMounted.current === true &&\n      !isEqual(initialErrors.current, props.initialErrors)\n    ) {\n      initialErrors.current = props.initialErrors || emptyErrors;\n      dispatch({\n        type: 'SET_ERRORS',\n        payload: props.initialErrors || emptyErrors,\n      });\n    }\n  }, [enableReinitialize, props.initialErrors]);\n\n  React.useEffect(() => {\n    if (\n      enableReinitialize &&\n      isMounted.current === true &&\n      !isEqual(initialTouched.current, props.initialTouched)\n    ) {\n      initialTouched.current = props.initialTouched || emptyTouched;\n      dispatch({\n        type: 'SET_TOUCHED',\n        payload: props.initialTouched || emptyTouched,\n      });\n    }\n  }, [enableReinitialize, props.initialTouched]);\n\n  React.useEffect(() => {\n    if (\n      enableReinitialize &&\n      isMounted.current === true &&\n      !isEqual(initialStatus.current, props.initialStatus)\n    ) {\n      initialStatus.current = props.initialStatus;\n      dispatch({\n        type: 'SET_STATUS',\n        payload: props.initialStatus,\n      });\n    }\n  }, [enableReinitialize, props.initialStatus, props.initialTouched]);\n\n  const validateField = useEventCallback((name: string) => {\n    // This will efficiently validate a single field by avoiding state\n    // changes if the validation function is synchronous. It's different from\n    // what is called when using validateForm.\n\n    if (\n      fieldRegistry.current[name] &&\n      isFunction(fieldRegistry.current[name].validate)\n    ) {\n      const value = getIn(state.values, name);\n      const maybePromise = fieldRegistry.current[name].validate(value);\n      if (isPromise(maybePromise)) {\n        // Only flip isValidating if the function is async.\n        dispatch({ type: 'SET_ISVALIDATING', payload: true });\n        return maybePromise\n          .then((x: any) => x)\n          .then((error: string) => {\n            dispatch({\n              type: 'SET_FIELD_ERROR',\n              payload: { field: name, value: error },\n            });\n            dispatch({ type: 'SET_ISVALIDATING', payload: false });\n          });\n      } else {\n        dispatch({\n          type: 'SET_FIELD_ERROR',\n          payload: {\n            field: name,\n            value: maybePromise as string | undefined,\n          },\n        });\n        return Promise.resolve(maybePromise as string | undefined);\n      }\n    } else if (props.validationSchema) {\n      dispatch({ type: 'SET_ISVALIDATING', payload: true });\n      return runValidationSchema(state.values, name)\n        .then((x: any) => x)\n        .then((error: any) => {\n          dispatch({\n            type: 'SET_FIELD_ERROR',\n            payload: { field: name, value: error[name] },\n          });\n          dispatch({ type: 'SET_ISVALIDATING', payload: false });\n        });\n    }\n\n    return Promise.resolve();\n  });\n\n  const registerField = React.useCallback((name: string, { validate }: any) => {\n    fieldRegistry.current[name] = {\n      validate,\n    };\n  }, []);\n\n  const unregisterField = React.useCallback((name: string) => {\n    delete fieldRegistry.current[name];\n  }, []);\n\n  const setTouched = useEventCallback(\n    (touched: FormikTouched<Values>, shouldValidate?: boolean) => {\n      dispatch({ type: 'SET_TOUCHED', payload: touched });\n      const willValidate =\n        shouldValidate === undefined ? validateOnBlur : shouldValidate;\n      return willValidate\n        ? validateFormWithHighPriority(state.values)\n        : Promise.resolve();\n    }\n  );\n\n  const setErrors = React.useCallback((errors: FormikErrors<Values>) => {\n    dispatch({ type: 'SET_ERRORS', payload: errors });\n  }, []);\n\n  const setValues = useEventCallback(\n    (values: React.SetStateAction<Values>, shouldValidate?: boolean) => {\n      const resolvedValues = isFunction(values) ? values(state.values) : values;\n\n      dispatch({ type: 'SET_VALUES', payload: resolvedValues });\n      const willValidate =\n        shouldValidate === undefined ? validateOnChange : shouldValidate;\n      return willValidate\n        ? validateFormWithHighPriority(resolvedValues)\n        : Promise.resolve();\n    }\n  );\n\n  const setFieldError = React.useCallback(\n    (field: string, value: string | undefined) => {\n      dispatch({\n        type: 'SET_FIELD_ERROR',\n        payload: { field, value },\n      });\n    },\n    []\n  );\n\n  const setFieldValue = useEventCallback(\n    (field: string, value: any, shouldValidate?: boolean) => {\n      dispatch({\n        type: 'SET_FIELD_VALUE',\n        payload: {\n          field,\n          value,\n        },\n      });\n      const willValidate =\n        shouldValidate === undefined ? validateOnChange : shouldValidate;\n      return willValidate\n        ? validateFormWithHighPriority(setIn(state.values, field, value))\n        : Promise.resolve();\n    }\n  );\n\n  const executeChange = React.useCallback(\n    (eventOrTextValue: string | React.ChangeEvent<any>, maybePath?: string) => {\n      // By default, assume that the first argument is a string. This allows us to use\n      // handleChange with React Native and React Native Web's onChangeText prop which\n      // provides just the value of the input.\n      let field = maybePath;\n      let val = eventOrTextValue;\n      let parsed;\n      // If the first argument is not a string though, it has to be a synthetic React Event (or a fake one),\n      // so we handle like we would a normal HTML change event.\n      if (!isString(eventOrTextValue)) {\n        // If we can, persist the event\n        // @see https://reactjs.org/docs/events.html#event-pooling\n        if ((eventOrTextValue as any).persist) {\n          (eventOrTextValue as React.ChangeEvent<any>).persist();\n        }\n        const target = eventOrTextValue.target\n          ? (eventOrTextValue as React.ChangeEvent<any>).target\n          : (eventOrTextValue as React.ChangeEvent<any>).currentTarget;\n\n        const {\n          type,\n          name,\n          id,\n          value,\n          checked,\n          outerHTML,\n          options,\n          multiple,\n        } = target;\n\n        field = maybePath ? maybePath : name ? name : id;\n        if (!field && __DEV__) {\n          warnAboutMissingIdentifier({\n            htmlContent: outerHTML,\n            documentationAnchorLink: 'handlechange-e-reactchangeeventany--void',\n            handlerName: 'handleChange',\n          });\n        }\n        val = /number|range/.test(type)\n          ? ((parsed = parseFloat(value)), isNaN(parsed) ? '' : parsed)\n          : /checkbox/.test(type) // checkboxes\n          ? getValueForCheckbox(getIn(state.values, field!), checked, value)\n          : options && multiple // <select multiple>\n          ? getSelectedValues(options)\n          : value;\n      }\n\n      if (field) {\n        // Set form fields by name\n        setFieldValue(field, val);\n      }\n    },\n    [setFieldValue, state.values]\n  );\n\n  const handleChange = useEventCallback<FormikHandlers['handleChange']>(\n    (\n      eventOrPath: string | React.ChangeEvent<any>\n    ): void | ((eventOrTextValue: string | React.ChangeEvent<any>) => void) => {\n      if (isString(eventOrPath)) {\n        return event => executeChange(event, eventOrPath);\n      } else {\n        executeChange(eventOrPath);\n      }\n    }\n  );\n\n  const setFieldTouched = useEventCallback(\n    (field: string, touched: boolean = true, shouldValidate?: boolean) => {\n      dispatch({\n        type: 'SET_FIELD_TOUCHED',\n        payload: {\n          field,\n          value: touched,\n        },\n      });\n      const willValidate =\n        shouldValidate === undefined ? validateOnBlur : shouldValidate;\n      return willValidate\n        ? validateFormWithHighPriority(state.values)\n        : Promise.resolve();\n    }\n  );\n\n  const executeBlur = React.useCallback(\n    (e: any, path?: string) => {\n      if (e.persist) {\n        e.persist();\n      }\n      const { name, id, outerHTML } = e.target;\n      const field = path ? path : name ? name : id;\n\n      if (!field && __DEV__) {\n        warnAboutMissingIdentifier({\n          htmlContent: outerHTML,\n          documentationAnchorLink: 'handleblur-e-any--void',\n          handlerName: 'handleBlur',\n        });\n      }\n\n      setFieldTouched(field, true);\n    },\n    [setFieldTouched]\n  );\n\n  const handleBlur = useEventCallback<FormikHandlers['handleBlur']>(\n    (eventOrString: any): void | ((e: any) => void) => {\n      if (isString(eventOrString)) {\n        return event => executeBlur(event, eventOrString);\n      } else {\n        executeBlur(eventOrString);\n      }\n    }\n  );\n\n  const setFormikState = React.useCallback(\n    (\n      stateOrCb:\n        | FormikState<Values>\n        | ((state: FormikState<Values>) => FormikState<Values>)\n    ): void => {\n      if (isFunction(stateOrCb)) {\n        dispatch({ type: 'SET_FORMIK_STATE', payload: stateOrCb });\n      } else {\n        dispatch({ type: 'SET_FORMIK_STATE', payload: () => stateOrCb });\n      }\n    },\n    []\n  );\n\n  const setStatus = React.useCallback((status: any) => {\n    dispatch({ type: 'SET_STATUS', payload: status });\n  }, []);\n\n  const setSubmitting = React.useCallback((isSubmitting: boolean) => {\n    dispatch({ type: 'SET_ISSUBMITTING', payload: isSubmitting });\n  }, []);\n\n  const submitForm = useEventCallback(() => {\n    dispatch({ type: 'SUBMIT_ATTEMPT' });\n    return validateFormWithHighPriority().then(\n      (combinedErrors: FormikErrors<Values>) => {\n        // In case an error was thrown and passed to the resolved Promise,\n        // `combinedErrors` can be an instance of an Error. We need to check\n        // that and abort the submit.\n        // If we don't do that, calling `Object.keys(new Error())` yields an\n        // empty array, which causes the validation to pass and the form\n        // to be submitted.\n\n        const isInstanceOfError = combinedErrors instanceof Error;\n        const isActuallyValid =\n          !isInstanceOfError && Object.keys(combinedErrors).length === 0;\n        if (isActuallyValid) {\n          // Proceed with submit...\n          //\n          // To respect sync submit fns, we can't simply wrap executeSubmit in a promise and\n          // _always_ dispatch SUBMIT_SUCCESS because isSubmitting would then always be false.\n          // This would be fine in simple cases, but make it impossible to disable submit\n          // buttons where people use callbacks or promises as side effects (which is basically\n          // all of v1 Formik code). Instead, recall that we are inside of a promise chain already,\n          //  so we can try/catch executeSubmit(), if it returns undefined, then just bail.\n          // If there are errors, throw em. Otherwise, wrap executeSubmit in a promise and handle\n          // cleanup of isSubmitting on behalf of the consumer.\n          let promiseOrUndefined;\n          try {\n            promiseOrUndefined = executeSubmit();\n            // Bail if it's sync, consumer is responsible for cleaning up\n            // via setSubmitting(false)\n            if (promiseOrUndefined === undefined) {\n              return;\n            }\n          } catch (error) {\n            throw error;\n          }\n\n          return Promise.resolve(promiseOrUndefined)\n            .then(result => {\n              if (!!isMounted.current) {\n                dispatch({ type: 'SUBMIT_SUCCESS' });\n              }\n              return result;\n            })\n            .catch(_errors => {\n              if (!!isMounted.current) {\n                dispatch({ type: 'SUBMIT_FAILURE' });\n                // This is a legit error rejected by the onSubmit fn\n                // so we don't want to break the promise chain\n                throw _errors;\n              }\n            });\n        } else if (!!isMounted.current) {\n          // ^^^ Make sure Formik is still mounted before updating state\n          dispatch({ type: 'SUBMIT_FAILURE' });\n          // throw combinedErrors;\n          if (isInstanceOfError) {\n            throw combinedErrors;\n          }\n        }\n        return;\n      }\n    );\n  });\n\n  const handleSubmit = useEventCallback(\n    (e?: React.FormEvent<HTMLFormElement>) => {\n      if (e && e.preventDefault && isFunction(e.preventDefault)) {\n        e.preventDefault();\n      }\n\n      if (e && e.stopPropagation && isFunction(e.stopPropagation)) {\n        e.stopPropagation();\n      }\n\n      // Warn if form submission is triggered by a <button> without a\n      // specified `type` attribute during development. This mitigates\n      // a common gotcha in forms with both reset and submit buttons,\n      // where the dev forgets to add type=\"button\" to the reset button.\n      if (__DEV__ && typeof document !== 'undefined') {\n        // Safely get the active element (works with IE)\n        const activeElement = getActiveElement();\n        if (\n          activeElement !== null &&\n          activeElement instanceof HTMLButtonElement\n        ) {\n          invariant(\n            activeElement.attributes &&\n              activeElement.attributes.getNamedItem('type'),\n            'You submitted a Formik form using a button with an unspecified `type` attribute.  Most browsers default button elements to `type=\"submit\"`. If this is not a submit button, please add `type=\"button\"`.'\n          );\n        }\n      }\n\n      submitForm().catch(reason => {\n        console.warn(\n          `Warning: An unhandled error was caught from submitForm()`,\n          reason\n        );\n      });\n    }\n  );\n\n  const imperativeMethods: FormikHelpers<Values> = {\n    resetForm,\n    validateForm: validateFormWithHighPriority,\n    validateField,\n    setErrors,\n    setFieldError,\n    setFieldTouched,\n    setFieldValue,\n    setStatus,\n    setSubmitting,\n    setTouched,\n    setValues,\n    setFormikState,\n    submitForm,\n  };\n\n  const executeSubmit = useEventCallback(() => {\n    return onSubmit(state.values, imperativeMethods);\n  });\n\n  const handleReset = useEventCallback(e => {\n    if (e && e.preventDefault && isFunction(e.preventDefault)) {\n      e.preventDefault();\n    }\n\n    if (e && e.stopPropagation && isFunction(e.stopPropagation)) {\n      e.stopPropagation();\n    }\n\n    resetForm();\n  });\n\n  const getFieldMeta = React.useCallback(\n    (name: string): FieldMetaProps<any> => {\n      return {\n        value: getIn(state.values, name),\n        error: getIn(state.errors, name),\n        touched: !!getIn(state.touched, name),\n        initialValue: getIn(initialValues.current, name),\n        initialTouched: !!getIn(initialTouched.current, name),\n        initialError: getIn(initialErrors.current, name),\n      };\n    },\n    [state.errors, state.touched, state.values]\n  );\n\n  const getFieldHelpers = React.useCallback(\n    (name: string): FieldHelperProps<any> => {\n      return {\n        setValue: (value: any, shouldValidate?: boolean) =>\n          setFieldValue(name, value, shouldValidate),\n        setTouched: (value: boolean, shouldValidate?: boolean) =>\n          setFieldTouched(name, value, shouldValidate),\n        setError: (value: any) => setFieldError(name, value),\n      };\n    },\n    [setFieldValue, setFieldTouched, setFieldError]\n  );\n\n  const getFieldProps = React.useCallback(\n    (nameOrOptions): FieldInputProps<any> => {\n      const isAnObject = isObject(nameOrOptions);\n      const name = isAnObject ? nameOrOptions.name : nameOrOptions;\n      const valueState = getIn(state.values, name);\n\n      const field: FieldInputProps<any> = {\n        name,\n        value: valueState,\n        onChange: handleChange,\n        onBlur: handleBlur,\n      };\n      if (isAnObject) {\n        const {\n          type,\n          value: valueProp, // value is special for checkboxes\n          as: is,\n          multiple,\n        } = nameOrOptions;\n\n        if (type === 'checkbox') {\n          if (valueProp === undefined) {\n            field.checked = !!valueState;\n          } else {\n            field.checked = !!(\n              Array.isArray(valueState) && ~valueState.indexOf(valueProp)\n            );\n            field.value = valueProp;\n          }\n        } else if (type === 'radio') {\n          field.checked = valueState === valueProp;\n          field.value = valueProp;\n        } else if (is === 'select' && multiple) {\n          field.value = field.value || [];\n          field.multiple = true;\n        }\n      }\n      return field;\n    },\n    [handleBlur, handleChange, state.values]\n  );\n\n  const dirty = React.useMemo(\n    () => !isEqual(initialValues.current, state.values),\n    [initialValues.current, state.values]\n  );\n\n  const isValid = React.useMemo(\n    () =>\n      typeof isInitialValid !== 'undefined'\n        ? dirty\n          ? state.errors && Object.keys(state.errors).length === 0\n          : isInitialValid !== false && isFunction(isInitialValid)\n          ? (isInitialValid as (props: FormikConfig<Values>) => boolean)(props)\n          : (isInitialValid as boolean)\n        : state.errors && Object.keys(state.errors).length === 0,\n    [isInitialValid, dirty, state.errors, props]\n  );\n\n  const ctx = {\n    ...state,\n    initialValues: initialValues.current,\n    initialErrors: initialErrors.current,\n    initialTouched: initialTouched.current,\n    initialStatus: initialStatus.current,\n    handleBlur,\n    handleChange,\n    handleReset,\n    handleSubmit,\n    resetForm,\n    setErrors,\n    setFormikState,\n    setFieldTouched,\n    setFieldValue,\n    setFieldError,\n    setStatus,\n    setSubmitting,\n    setTouched,\n    setValues,\n    submitForm,\n    validateForm: validateFormWithHighPriority,\n    validateField,\n    isValid,\n    dirty,\n    unregisterField,\n    registerField,\n    getFieldProps,\n    getFieldMeta,\n    getFieldHelpers,\n    validateOnBlur,\n    validateOnChange,\n    validateOnMount,\n  };\n\n  return ctx;\n}\n\nexport function Formik<\n  Values extends FormikValues = FormikValues,\n  ExtraProps = {}\n>(props: FormikConfig<Values> & ExtraProps) {\n  const formikbag = useFormik<Values>(props);\n  const { component, children, render, innerRef } = props;\n\n  // This allows folks to pass a ref to <Formik />\n  React.useImperativeHandle(innerRef, () => formikbag);\n\n  if (__DEV__) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useEffect(() => {\n      invariant(\n        !props.render,\n        `<Formik render> has been deprecated and will be removed in future versions of Formik. Please use a child callback function instead. To get rid of this warning, replace <Formik render={(props) => ...} /> with <Formik>{(props) => ...}</Formik>`\n      );\n      // eslint-disable-next-line\n    }, []);\n  }\n  return (\n    <FormikProvider value={formikbag}>\n      {component\n        ? React.createElement(component as any, formikbag)\n        : render\n        ? render(formikbag)\n        : children // children come last, always called\n        ? isFunction(children)\n          ? (children as (bag: FormikProps<Values>) => React.ReactNode)(\n              formikbag as FormikProps<Values>\n            )\n          : !isEmptyChildren(children)\n          ? React.Children.only(children)\n          : null\n        : null}\n    </FormikProvider>\n  );\n}\n\nfunction warnAboutMissingIdentifier({\n  htmlContent,\n  documentationAnchorLink,\n  handlerName,\n}: {\n  htmlContent: string;\n  documentationAnchorLink: string;\n  handlerName: string;\n}) {\n  console.warn(\n    `Warning: Formik called \\`${handlerName}\\`, but you forgot to pass an \\`id\\` or \\`name\\` attribute to your input:\n    ${htmlContent}\n    Formik cannot determine which value to update. For more info see https://formik.org/docs/api/formik#${documentationAnchorLink}\n  `\n  );\n}\n\n/**\n * Transform Yup ValidationError to a more usable object\n */\nexport function yupToFormErrors<Values>(yupError: any): FormikErrors<Values> {\n  let errors: FormikErrors<Values> = {};\n  if (yupError.inner) {\n    if (yupError.inner.length === 0) {\n      return setIn(errors, yupError.path, yupError.message);\n    }\n    for (let err of yupError.inner) {\n      if (!getIn(errors, err.path)) {\n        errors = setIn(errors, err.path, err.message);\n      }\n    }\n  }\n  return errors;\n}\n\n/**\n * Validate a yup schema.\n */\nexport function validateYupSchema<T extends FormikValues>(\n  values: T,\n  schema: any,\n  sync: boolean = false,\n  context: any = {}\n): Promise<Partial<T>> {\n  const validateData: FormikValues = prepareDataForValidation(values);\n  return schema[sync ? 'validateSync' : 'validate'](validateData, {\n    abortEarly: false,\n    context: context,\n  });\n}\n\n/**\n * Recursively prepare values.\n */\nexport function prepareDataForValidation<T extends FormikValues>(\n  values: T\n): FormikValues {\n  let data: FormikValues = Array.isArray(values) ? [] : {};\n  for (let k in values) {\n    if (Object.prototype.hasOwnProperty.call(values, k)) {\n      const key = String(k);\n      if (Array.isArray(values[key]) === true) {\n        data[key] = values[key].map((value: any) => {\n          if (Array.isArray(value) === true || isPlainObject(value)) {\n            return prepareDataForValidation(value);\n          } else {\n            return value !== '' ? value : undefined;\n          }\n        });\n      } else if (isPlainObject(values[key])) {\n        data[key] = prepareDataForValidation(values[key]);\n      } else {\n        data[key] = values[key] !== '' ? values[key] : undefined;\n      }\n    }\n  }\n  return data;\n}\n\n/**\n * deepmerge array merging algorithm\n * https://github.com/KyleAMathews/deepmerge#combine-array\n */\nfunction arrayMerge(target: any[], source: any[], options: any): any[] {\n  const destination = target.slice();\n\n  source.forEach(function merge(e: any, i: number) {\n    if (typeof destination[i] === 'undefined') {\n      const cloneRequested = options.clone !== false;\n      const shouldClone = cloneRequested && options.isMergeableObject(e);\n      destination[i] = shouldClone\n        ? deepmerge(Array.isArray(e) ? [] : {}, e, options)\n        : e;\n    } else if (options.isMergeableObject(e)) {\n      destination[i] = deepmerge(target[i], e, options);\n    } else if (target.indexOf(e) === -1) {\n      destination.push(e);\n    }\n  });\n  return destination;\n}\n\n/** Return multi select values based on an array of options */\nfunction getSelectedValues(options: any[]) {\n  return Array.from(options)\n    .filter(el => el.selected)\n    .map(el => el.value);\n}\n\n/** Return the next value for a checkbox */\nfunction getValueForCheckbox(\n  currentValue: string | any[],\n  checked: boolean,\n  valueProp: any\n) {\n  // If the current value was a boolean, return a boolean\n  if (typeof currentValue === 'boolean') {\n    return Boolean(checked);\n  }\n\n  // If the currentValue was not a boolean we want to return an array\n  let currentArrayOfValues = [];\n  let isValueInArray = false;\n  let index = -1;\n\n  if (!Array.isArray(currentValue)) {\n    // eslint-disable-next-line eqeqeq\n    if (!valueProp || valueProp == 'true' || valueProp == 'false') {\n      return Boolean(checked);\n    }\n  } else {\n    // If the current value is already an array, use it\n    currentArrayOfValues = currentValue;\n    index = currentValue.indexOf(valueProp);\n    isValueInArray = index >= 0;\n  }\n\n  // If the checkbox was checked and the value is not already present in the aray we want to add the new value to the array of values\n  if (checked && valueProp && !isValueInArray) {\n    return currentArrayOfValues.concat(valueProp);\n  }\n\n  // If the checkbox was unchecked and the value is not in the array, simply return the already existing array of values\n  if (!isValueInArray) {\n    return currentArrayOfValues;\n  }\n\n  // If the checkbox was unchecked and the value is in the array, remove the value and return the array\n  return currentArrayOfValues\n    .slice(0, index)\n    .concat(currentArrayOfValues.slice(index + 1));\n}\n\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\n// @see https://gist.github.com/gaearon/e7d97cdf38a2907924ea12e4ebdf3c85\nconst useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n    ? React.useLayoutEffect\n    : React.useEffect;\n\nfunction useEventCallback<T extends (...args: any[]) => any>(fn: T): T {\n  const ref: any = React.useRef(fn);\n\n  // we copy a ref to the callback scoped to the current state/props on each render\n  useIsomorphicLayoutEffect(() => {\n    ref.current = fn;\n  });\n\n  return React.useCallback(\n    (...args: any[]) => ref.current.apply(void 0, args),\n    []\n  ) as T;\n}\n","import * as React from 'react';\nimport { useFormikContext } from './FormikContext';\n\nexport type FormikFormProps = Pick<\n  React.FormHTMLAttributes<HTMLFormElement>,\n  Exclude<\n    keyof React.FormHTMLAttributes<HTMLFormElement>,\n    'onReset' | 'onSubmit'\n  >\n>;\n\ntype FormProps = React.ComponentPropsWithoutRef<'form'>;\n\n// @todo tests\nexport const Form = React.forwardRef<HTMLFormElement, FormProps>(\n  (props: FormikFormProps, ref) => {\n    // iOS needs an \"action\" attribute for nice input: https://stackoverflow.com/a/39485162/406725\n    // We default the action to \"#\" in case the preventDefault fails (just updates the URL hash)\n    const { action, ...rest } = props;\n    const _action = action ?? '#';\n    const { handleReset, handleSubmit } = useFormikContext();\n    return (\n      <form\n        onSubmit={handleSubmit}\n        ref={ref}\n        onReset={handleReset}\n        action={_action}\n        {...rest}\n      />\n    );\n  }\n);\n\nForm.displayName = 'Form';\n","import * as React from 'react';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { connect } from './connect';\nimport {\n  FormikContextType,\n  FormikState,\n  SharedRenderProps,\n  FormikProps,\n} from './types';\nimport {\n  getIn,\n  isEmptyChildren,\n  isFunction,\n  setIn,\n  isEmptyArray,\n} from './utils';\nimport isEqual from 'react-fast-compare';\n\nexport type FieldArrayRenderProps = ArrayHelpers & {\n  form: FormikProps<any>;\n  name: string;\n};\n\nexport type FieldArrayConfig = {\n  /** Really the path to the array field to be updated */\n  name: string;\n  /** Should field array validate the form AFTER array updates/changes? */\n  validateOnChange?: boolean;\n} & SharedRenderProps<FieldArrayRenderProps>;\nexport interface ArrayHelpers {\n  /** Imperatively add a value to the end of an array */\n  push: (obj: any) => void;\n  /** Curried fn to add a value to the end of an array */\n  handlePush: (obj: any) => () => void;\n  /** Imperatively swap two values in an array */\n  swap: (indexA: number, indexB: number) => void;\n  /** Curried fn to swap two values in an array */\n  handleSwap: (indexA: number, indexB: number) => () => void;\n  /** Imperatively move an element in an array to another index */\n  move: (from: number, to: number) => void;\n  /** Imperatively move an element in an array to another index */\n  handleMove: (from: number, to: number) => () => void;\n  /** Imperatively insert an element at a given index into the array */\n  insert: (index: number, value: any) => void;\n  /** Curried fn to insert an element at a given index into the array */\n  handleInsert: (index: number, value: any) => () => void;\n  /** Imperatively replace a value at an index of an array  */\n  replace: (index: number, value: any) => void;\n  /** Curried fn to replace an element at a given index into the array */\n  handleReplace: (index: number, value: any) => () => void;\n  /** Imperatively add an element to the beginning of an array and return its length */\n  unshift: (value: any) => number;\n  /** Curried fn to add an element to the beginning of an array */\n  handleUnshift: (value: any) => () => void;\n  /** Curried fn to remove an element at an index of an array */\n  handleRemove: (index: number) => () => void;\n  /** Curried fn to remove a value from the end of the array */\n  handlePop: () => () => void;\n  /** Imperatively remove and element at an index of an array */\n  remove<T>(index: number): T | undefined;\n  /** Imperatively remove and return value from the end of the array */\n  pop<T>(): T | undefined;\n}\n\n/**\n * Some array helpers!\n */\nexport const move = (array: any[], from: number, to: number) => {\n  const copy = copyArrayLike(array);\n  const value = copy[from];\n  copy.splice(from, 1);\n  copy.splice(to, 0, value);\n  return copy;\n};\n\nexport const swap = (\n  arrayLike: ArrayLike<any>,\n  indexA: number,\n  indexB: number\n) => {\n  const copy = copyArrayLike(arrayLike);\n  const a = copy[indexA];\n  copy[indexA] = copy[indexB];\n  copy[indexB] = a;\n  return copy;\n};\n\nexport const insert = (\n  arrayLike: ArrayLike<any>,\n  index: number,\n  value: any\n) => {\n  const copy = copyArrayLike(arrayLike);\n  copy.splice(index, 0, value);\n  return copy;\n};\n\nexport const replace = (\n  arrayLike: ArrayLike<any>,\n  index: number,\n  value: any\n) => {\n  const copy = copyArrayLike(arrayLike);\n  copy[index] = value;\n  return copy;\n};\n\nconst copyArrayLike = (arrayLike: ArrayLike<any>) => {\n  if (!arrayLike) {\n    return [];\n  } else if (Array.isArray(arrayLike)) {\n    return [...arrayLike];\n  } else {\n    const maxIndex = Object.keys(arrayLike)\n      .map(key => parseInt(key))\n      .reduce((max, el) => (el > max ? el : max), 0);\n    return Array.from({ ...arrayLike, length: maxIndex + 1 });\n  }\n};\n\nclass FieldArrayInner<Values = {}> extends React.Component<\n  FieldArrayConfig & { formik: FormikContextType<Values> },\n  {}\n> {\n  static defaultProps = {\n    validateOnChange: true,\n  };\n\n  constructor(props: FieldArrayConfig & { formik: FormikContextType<Values> }) {\n    super(props);\n    // We need TypeScript generics on these, so we'll bind them in the constructor\n    // @todo Fix TS 3.2.1\n    this.remove = this.remove.bind(this) as any;\n    this.pop = this.pop.bind(this) as any;\n  }\n\n  componentDidUpdate(\n    prevProps: FieldArrayConfig & { formik: FormikContextType<Values> }\n  ) {\n    if (\n      this.props.validateOnChange &&\n      this.props.formik.validateOnChange &&\n      !isEqual(\n        getIn(prevProps.formik.values, prevProps.name),\n        getIn(this.props.formik.values, this.props.name)\n      )\n    ) {\n      this.props.formik.validateForm(this.props.formik.values);\n    }\n  }\n\n  updateArrayField = (\n    fn: Function,\n    alterTouched: boolean | Function,\n    alterErrors: boolean | Function\n  ) => {\n    const {\n      name,\n\n      formik: { setFormikState },\n    } = this.props;\n    setFormikState((prevState: FormikState<any>) => {\n      let updateErrors = typeof alterErrors === 'function' ? alterErrors : fn;\n      let updateTouched =\n        typeof alterTouched === 'function' ? alterTouched : fn;\n\n      // values fn should be executed before updateErrors and updateTouched,\n      // otherwise it causes an error with unshift.\n      let values = setIn(\n        prevState.values,\n        name,\n        fn(getIn(prevState.values, name))\n      );\n\n      let fieldError = alterErrors\n        ? updateErrors(getIn(prevState.errors, name))\n        : undefined;\n      let fieldTouched = alterTouched\n        ? updateTouched(getIn(prevState.touched, name))\n        : undefined;\n\n      if (isEmptyArray(fieldError)) {\n        fieldError = undefined;\n      }\n      if (isEmptyArray(fieldTouched)) {\n        fieldTouched = undefined;\n      }\n\n      return {\n        ...prevState,\n        values,\n        errors: alterErrors\n          ? setIn(prevState.errors, name, fieldError)\n          : prevState.errors,\n        touched: alterTouched\n          ? setIn(prevState.touched, name, fieldTouched)\n          : prevState.touched,\n      };\n    });\n  };\n\n  push = (value: any) =>\n    this.updateArrayField(\n      (arrayLike: ArrayLike<any>) => [\n        ...copyArrayLike(arrayLike),\n        cloneDeep(value),\n      ],\n      false,\n      false\n    );\n\n  handlePush = (value: any) => () => this.push(value);\n\n  swap = (indexA: number, indexB: number) =>\n    this.updateArrayField(\n      (array: any[]) => swap(array, indexA, indexB),\n      true,\n      true\n    );\n\n  handleSwap = (indexA: number, indexB: number) => () =>\n    this.swap(indexA, indexB);\n\n  move = (from: number, to: number) =>\n    this.updateArrayField((array: any[]) => move(array, from, to), true, true);\n\n  handleMove = (from: number, to: number) => () => this.move(from, to);\n\n  insert = (index: number, value: any) =>\n    this.updateArrayField(\n      (array: any[]) => insert(array, index, value),\n      (array: any[]) => insert(array, index, null),\n      (array: any[]) => insert(array, index, null)\n    );\n\n  handleInsert = (index: number, value: any) => () => this.insert(index, value);\n\n  replace = (index: number, value: any) =>\n    this.updateArrayField(\n      (array: any[]) => replace(array, index, value),\n      false,\n      false\n    );\n\n  handleReplace = (index: number, value: any) => () =>\n    this.replace(index, value);\n\n  unshift = (value: any) => {\n    let length = -1;\n    this.updateArrayField(\n      (array: any[]) => {\n        const arr = array ? [value, ...array] : [value];\n        if (length < 0) {\n          length = arr.length;\n        }\n        return arr;\n      },\n      (array: any[]) => {\n        const arr = array ? [null, ...array] : [null];\n        if (length < 0) {\n          length = arr.length;\n        }\n        return arr;\n      },\n      (array: any[]) => {\n        const arr = array ? [null, ...array] : [null];\n        if (length < 0) {\n          length = arr.length;\n        }\n        return arr;\n      }\n    );\n    return length;\n  };\n\n  handleUnshift = (value: any) => () => this.unshift(value);\n\n  remove<T>(index: number): T {\n    // We need to make sure we also remove relevant pieces of `touched` and `errors`\n    let result: any;\n    this.updateArrayField(\n      // so this gets call 3 times\n      (array?: any[]) => {\n        const copy = array ? copyArrayLike(array) : [];\n        if (!result) {\n          result = copy[index];\n        }\n        if (isFunction(copy.splice)) {\n          copy.splice(index, 1);\n        }\n        return copy;\n      },\n      true,\n      true\n    );\n\n    return result as T;\n  }\n\n  handleRemove = (index: number) => () => this.remove<any>(index);\n\n  pop<T>(): T {\n    // Remove relevant pieces of `touched` and `errors` too!\n    let result: any;\n    this.updateArrayField(\n      // so this gets call 3 times\n      (array: any[]) => {\n        const tmp = array;\n        if (!result) {\n          result = tmp && tmp.pop && tmp.pop();\n        }\n        return tmp;\n      },\n      true,\n      true\n    );\n\n    return result as T;\n  }\n\n  handlePop = () => () => this.pop<any>();\n\n  render() {\n    const arrayHelpers: ArrayHelpers = {\n      push: this.push,\n      pop: this.pop,\n      swap: this.swap,\n      move: this.move,\n      insert: this.insert,\n      replace: this.replace,\n      unshift: this.unshift,\n      remove: this.remove,\n      handlePush: this.handlePush,\n      handlePop: this.handlePop,\n      handleSwap: this.handleSwap,\n      handleMove: this.handleMove,\n      handleInsert: this.handleInsert,\n      handleReplace: this.handleReplace,\n      handleUnshift: this.handleUnshift,\n      handleRemove: this.handleRemove,\n    };\n\n    const {\n      component,\n      render,\n      children,\n      name,\n      formik: {\n        validate: _validate,\n        validationSchema: _validationSchema,\n        ...restOfFormik\n      },\n    } = this.props;\n\n    const props: FieldArrayRenderProps = {\n      ...arrayHelpers,\n      form: restOfFormik,\n      name,\n    };\n\n    return component\n      ? React.createElement(component as any, props)\n      : render\n      ? (render as any)(props)\n      : children // children come last, always called\n      ? typeof children === 'function'\n        ? (children as any)(props)\n        : !isEmptyChildren(children)\n        ? React.Children.only(children)\n        : null\n      : null;\n  }\n}\n\nexport const FieldArray = connect<FieldArrayConfig, any>(FieldArrayInner);\n","import * as React from 'react';\nimport { FormikContextType } from './types';\nimport { getIn, isFunction } from './utils';\nimport { connect } from './connect';\n\nexport interface ErrorMessageProps {\n  name: string;\n  className?: string;\n  component?: string | React.ComponentType;\n  children?: (errorMessage: string) => React.ReactNode;\n  render?: (errorMessage: string) => React.ReactNode;\n}\n\nclass ErrorMessageImpl extends React.Component<\n  ErrorMessageProps & { formik: FormikContextType<any> }\n> {\n  shouldComponentUpdate(\n    props: ErrorMessageProps & { formik: FormikContextType<any> }\n  ) {\n    if (\n      getIn(this.props.formik.errors, this.props.name) !==\n        getIn(props.formik.errors, this.props.name) ||\n      getIn(this.props.formik.touched, this.props.name) !==\n        getIn(props.formik.touched, this.props.name) ||\n      Object.keys(this.props).length !== Object.keys(props).length\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    let { component, formik, render, children, name, ...rest } = this.props;\n\n    const touch = getIn(formik.touched, name);\n    const error = getIn(formik.errors, name);\n\n    return !!touch && !!error\n      ? render\n        ? isFunction(render)\n          ? render(error)\n          : null\n        : children\n        ? isFunction(children)\n          ? children(error)\n          : null\n        : component\n        ? React.createElement(component, rest as any, error)\n        : error\n      : null;\n  }\n}\n\nexport const ErrorMessage = connect<\n  ErrorMessageProps,\n  ErrorMessageProps & { formik: FormikContextType<any> }\n>(ErrorMessageImpl);\n","import * as React from 'react';\n\nimport {\n  FormikProps,\n  GenericFieldHTMLAttributes,\n  FormikContextType,\n  FieldMetaProps,\n  FieldInputProps,\n} from './types';\nimport invariant from 'tiny-warning';\nimport { getIn, isEmptyChildren, isFunction } from './utils';\nimport { FieldConfig } from './Field';\nimport { connect } from './connect';\n\ntype $FixMe = any;\n\nexport interface FastFieldProps<V = any> {\n  field: FieldInputProps<V>;\n  meta: FieldMetaProps<V>;\n  form: FormikProps<V>; // if ppl want to restrict this for a given form, let them.\n}\n\nexport type FastFieldConfig<T> = FieldConfig & {\n  /** Override FastField's default shouldComponentUpdate */\n  shouldUpdate?: (\n    nextProps: T & GenericFieldHTMLAttributes,\n    props: {}\n  ) => boolean;\n};\n\nexport type FastFieldAttributes<T> = GenericFieldHTMLAttributes &\n  FastFieldConfig<T> &\n  T;\n\ntype FastFieldInnerProps<Values = {}, Props = {}> = FastFieldAttributes<\n  Props\n> & { formik: FormikContextType<Values> };\n\n/**\n * Custom Field component for quickly hooking into Formik\n * context and wiring up forms.\n */\nclass FastFieldInner<Values = {}, Props = {}> extends React.Component<\n  FastFieldInnerProps<Values, Props>,\n  {}\n> {\n  constructor(props: FastFieldInnerProps<Values, Props>) {\n    super(props);\n    const { render, children, component, as: is, name } = props;\n    invariant(\n      !render,\n      `<FastField render> has been deprecated. Please use a child callback function instead: <FastField name={${name}}>{props => ...}</FastField> instead.`\n    );\n    invariant(\n      !(component && render),\n      'You should not use <FastField component> and <FastField render> in the same <FastField> component; <FastField component> will be ignored'\n    );\n\n    invariant(\n      !(is && children && isFunction(children)),\n      'You should not use <FastField as> and <FastField children> as a function in the same <FastField> component; <FastField as> will be ignored.'\n    );\n\n    invariant(\n      !(component && children && isFunction(children)),\n      'You should not use <FastField component> and <FastField children> as a function in the same <FastField> component; <FastField component> will be ignored.'\n    );\n\n    invariant(\n      !(render && children && !isEmptyChildren(children)),\n      'You should not use <FastField render> and <FastField children> in the same <FastField> component; <FastField children> will be ignored'\n    );\n  }\n\n  shouldComponentUpdate(props: FastFieldInnerProps<Values, Props>) {\n    if (this.props.shouldUpdate) {\n      return this.props.shouldUpdate(props, this.props);\n    } else if (\n      props.name !== this.props.name ||\n      getIn(props.formik.values, this.props.name) !==\n        getIn(this.props.formik.values, this.props.name) ||\n      getIn(props.formik.errors, this.props.name) !==\n        getIn(this.props.formik.errors, this.props.name) ||\n      getIn(props.formik.touched, this.props.name) !==\n        getIn(this.props.formik.touched, this.props.name) ||\n      Object.keys(this.props).length !== Object.keys(props).length ||\n      props.formik.isSubmitting !== this.props.formik.isSubmitting\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  componentDidMount() {\n    // Register the Field with the parent Formik. Parent will cycle through\n    // registered Field's validate fns right prior to submit\n    this.props.formik.registerField(this.props.name, {\n      validate: this.props.validate,\n    });\n  }\n\n  componentDidUpdate(prevProps: FastFieldAttributes<Props>) {\n    if (this.props.name !== prevProps.name) {\n      this.props.formik.unregisterField(prevProps.name);\n      this.props.formik.registerField(this.props.name, {\n        validate: this.props.validate,\n      });\n    }\n\n    if (this.props.validate !== prevProps.validate) {\n      this.props.formik.registerField(this.props.name, {\n        validate: this.props.validate,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.formik.unregisterField(this.props.name);\n  }\n\n  render() {\n    const {\n      validate,\n      name,\n      render,\n      as: is,\n      children,\n      component,\n      shouldUpdate,\n      formik,\n      ...props\n    } = this.props as FastFieldInnerProps<Values, Props>;\n\n    const {\n      validate: _validate,\n      validationSchema: _validationSchema,\n      ...restOfFormik\n    } = formik;\n    const field = formik.getFieldProps({ name, ...props });\n    const meta = {\n      value: getIn(formik.values, name),\n      error: getIn(formik.errors, name),\n      touched: !!getIn(formik.touched, name),\n      initialValue: getIn(formik.initialValues, name),\n      initialTouched: !!getIn(formik.initialTouched, name),\n      initialError: getIn(formik.initialErrors, name),\n    };\n\n    const bag = { field, meta, form: restOfFormik };\n\n    if (render) {\n      return (render as any)(bag);\n    }\n\n    if (isFunction(children)) {\n      return (children as (props: FastFieldProps<any>) => React.ReactNode)(bag);\n    }\n\n    if (component) {\n      // This behavior is backwards compat with earlier Formik 0.9 to 1.x\n      if (typeof component === 'string') {\n        const { innerRef, ...rest } = props;\n        return React.createElement(\n          component,\n          { ref: innerRef, ...field, ...(rest as $FixMe) },\n          children\n        );\n      }\n      // We don't pass `meta` for backwards compat\n      return React.createElement(\n        component as React.ComponentClass<$FixMe>,\n        { field, form: formik, ...props },\n        children\n      );\n    }\n\n    // default to input here so we can check for both `as` and `children` above\n    const asElement = is || 'input';\n\n    if (typeof asElement === 'string') {\n      const { innerRef, ...rest } = props;\n      return React.createElement(\n        asElement,\n        { ref: innerRef, ...field, ...(rest as $FixMe) },\n        children\n      );\n    }\n\n    return React.createElement(\n      asElement as React.ComponentClass,\n      { ...field, ...props },\n      children\n    );\n  }\n}\n\nexport const FastField = connect<FastFieldAttributes<any>, any>(FastFieldInner);\n","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/**\n * Based on Kendo UI Core expression code <https://github.com/telerik/kendo-ui-core#license-information>\n */\n'use strict'\n\nfunction Cache(maxSize) {\n  this._maxSize = maxSize\n  this.clear()\n}\nCache.prototype.clear = function () {\n  this._size = 0\n  this._values = Object.create(null)\n}\nCache.prototype.get = function (key) {\n  return this._values[key]\n}\nCache.prototype.set = function (key, value) {\n  this._size >= this._maxSize && this.clear()\n  if (!(key in this._values)) this._size++\n\n  return (this._values[key] = value)\n}\n\nvar SPLIT_REGEX = /[^.^\\]^[]+|(?=\\[\\]|\\.\\.)/g,\n  DIGIT_REGEX = /^\\d+$/,\n  LEAD_DIGIT_REGEX = /^\\d/,\n  SPEC_CHAR_REGEX = /[~`!#$%\\^&*+=\\-\\[\\]\\\\';,/{}|\\\\\":<>\\?]/g,\n  CLEAN_QUOTES_REGEX = /^\\s*(['\"]?)(.*?)(\\1)\\s*$/,\n  MAX_CACHE_SIZE = 512\n\nvar pathCache = new Cache(MAX_CACHE_SIZE),\n  setCache = new Cache(MAX_CACHE_SIZE),\n  getCache = new Cache(MAX_CACHE_SIZE)\n\nvar config\n\nmodule.exports = {\n  Cache: Cache,\n\n  split: split,\n\n  normalizePath: normalizePath,\n\n  setter: function (path) {\n    var parts = normalizePath(path)\n\n    return (\n      setCache.get(path) ||\n      setCache.set(path, function setter(obj, value) {\n        var index = 0\n        var len = parts.length\n        var data = obj\n\n        while (index < len - 1) {\n          var part = parts[index]\n          if (\n            part === '__proto__' ||\n            part === 'constructor' ||\n            part === 'prototype'\n          ) {\n            return obj\n          }\n\n          data = data[parts[index++]]\n        }\n        data[parts[index]] = value\n      })\n    )\n  },\n\n  getter: function (path, safe) {\n    var parts = normalizePath(path)\n    return (\n      getCache.get(path) ||\n      getCache.set(path, function getter(data) {\n        var index = 0,\n          len = parts.length\n        while (index < len) {\n          if (data != null || !safe) data = data[parts[index++]]\n          else return\n        }\n        return data\n      })\n    )\n  },\n\n  join: function (segments) {\n    return segments.reduce(function (path, part) {\n      return (\n        path +\n        (isQuoted(part) || DIGIT_REGEX.test(part)\n          ? '[' + part + ']'\n          : (path ? '.' : '') + part)\n      )\n    }, '')\n  },\n\n  forEach: function (path, cb, thisArg) {\n    forEach(Array.isArray(path) ? path : split(path), cb, thisArg)\n  },\n}\n\nfunction normalizePath(path) {\n  return (\n    pathCache.get(path) ||\n    pathCache.set(\n      path,\n      split(path).map(function (part) {\n        return part.replace(CLEAN_QUOTES_REGEX, '$2')\n      })\n    )\n  )\n}\n\nfunction split(path) {\n  return path.match(SPLIT_REGEX) || ['']\n}\n\nfunction forEach(parts, iter, thisArg) {\n  var len = parts.length,\n    part,\n    idx,\n    isArray,\n    isBracket\n\n  for (idx = 0; idx < len; idx++) {\n    part = parts[idx]\n\n    if (part) {\n      if (shouldBeQuoted(part)) {\n        part = '\"' + part + '\"'\n      }\n\n      isBracket = isQuoted(part)\n      isArray = !isBracket && /^\\d+$/.test(part)\n\n      iter.call(thisArg, part, isBracket, isArray, idx, parts)\n    }\n  }\n}\n\nfunction isQuoted(str) {\n  return (\n    typeof str === 'string' && str && [\"'\", '\"'].indexOf(str.charAt(0)) !== -1\n  )\n}\n\nfunction hasLeadingNumber(part) {\n  return part.match(LEAD_DIGIT_REGEX) && !part.match(DIGIT_REGEX)\n}\n\nfunction hasSpecialChars(part) {\n  return SPEC_CHAR_REGEX.test(part)\n}\n\nfunction shouldBeQuoted(part) {\n  return !isQuoted(part) && (hasLeadingNumber(part) || hasSpecialChars(part))\n}\n","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\nvar hasElementType = typeof Element !== 'undefined';\n\nfunction equal(a, b) {\n  // fast-deep-equal index.js 2.0.1\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n    // end fast-deep-equal\n\n    // start react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element && b instanceof Element)\n      return a === b;\n\n    // custom handling for React\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of a react element\n        continue;\n      } else {\n        // all other properties should be traversed as usual\n        if (!equal(a[key], b[key])) return false;\n      }\n    }\n    // end react-fast-compare\n\n    // fast-deep-equal index.js 2.0.1\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function exportedEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if ((error.message && error.message.match(/stack|recursion/i)) || (error.number === -2146828260)) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('Warning: react-fast-compare does not handle circular references.', error.name, error.message);\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","const reWords = /[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+|(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*/g\n\nconst words = (str) => str.match(reWords) || []\n\nconst upperFirst = (str) => str[0].toUpperCase() + str.slice(1)\n\nconst join = (str, d) => words(str).join(d).toLowerCase()\n\nconst camelCase = (str) =>\n  words(str).reduce(\n    (acc, next) =>\n      `${acc}${\n        !acc\n          ? next.toLowerCase()\n          : next[0].toUpperCase() + next.slice(1).toLowerCase()\n      }`,\n    '',\n  )\n\nconst pascalCase = (str) => upperFirst(camelCase(str))\n\nconst snakeCase = (str) => join(str, '_')\n\nconst kebabCase = (str) => join(str, '-')\n\nconst sentenceCase = (str) => upperFirst(join(str, ' '))\n\nconst titleCase = (str) => words(str).map(upperFirst).join(' ')\n\nmodule.exports = {\n  words,\n  upperFirst,\n  camelCase,\n  pascalCase,\n  snakeCase,\n  kebabCase,\n  sentenceCase,\n  titleCase,\n}\n","\n/**\n * Topological sorting function\n *\n * @param {Array} edges\n * @returns {Array}\n */\n\nmodule.exports = function(edges) {\n  return toposort(uniqueNodes(edges), edges)\n}\n\nmodule.exports.array = toposort\n\nfunction toposort(nodes, edges) {\n  var cursor = nodes.length\n    , sorted = new Array(cursor)\n    , visited = {}\n    , i = cursor\n    // Better data structures make algorithm much faster.\n    , outgoingEdges = makeOutgoingEdges(edges)\n    , nodesHash = makeNodesHash(nodes)\n\n  // check for unknown nodes\n  edges.forEach(function(edge) {\n    if (!nodesHash.has(edge[0]) || !nodesHash.has(edge[1])) {\n      throw new Error('Unknown node. There is an unknown node in the supplied edges.')\n    }\n  })\n\n  while (i--) {\n    if (!visited[i]) visit(nodes[i], i, new Set())\n  }\n\n  return sorted\n\n  function visit(node, i, predecessors) {\n    if(predecessors.has(node)) {\n      var nodeRep\n      try {\n        nodeRep = \", node was:\" + JSON.stringify(node)\n      } catch(e) {\n        nodeRep = \"\"\n      }\n      throw new Error('Cyclic dependency' + nodeRep)\n    }\n\n    if (!nodesHash.has(node)) {\n      throw new Error('Found unknown node. Make sure to provided all involved nodes. Unknown node: '+JSON.stringify(node))\n    }\n\n    if (visited[i]) return;\n    visited[i] = true\n\n    var outgoing = outgoingEdges.get(node) || new Set()\n    outgoing = Array.from(outgoing)\n\n    if (i = outgoing.length) {\n      predecessors.add(node)\n      do {\n        var child = outgoing[--i]\n        visit(child, nodesHash.get(child), predecessors)\n      } while (i)\n      predecessors.delete(node)\n    }\n\n    sorted[--cursor] = node\n  }\n}\n\nfunction uniqueNodes(arr){\n  var res = new Set()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    var edge = arr[i]\n    res.add(edge[0])\n    res.add(edge[1])\n  }\n  return Array.from(res)\n}\n\nfunction makeOutgoingEdges(arr){\n  var edges = new Map()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    var edge = arr[i]\n    if (!edges.has(edge[0])) edges.set(edge[0], new Set())\n    if (!edges.has(edge[1])) edges.set(edge[1], new Set())\n    edges.get(edge[0]).add(edge[1])\n  }\n  return edges\n}\n\nfunction makeNodesHash(arr){\n  var res = new Map()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    res.set(arr[i], i)\n  }\n  return res\n}\n","import { getter, forEach, split, normalizePath, join } from 'property-expr';\nimport { camelCase, snakeCase } from 'tiny-case';\nimport toposort from 'toposort';\n\nconst toString = Object.prototype.toString;\nconst errorToString = Error.prototype.toString;\nconst regExpToString = RegExp.prototype.toString;\nconst symbolToString = typeof Symbol !== 'undefined' ? Symbol.prototype.toString : () => '';\nconst SYMBOL_REGEXP = /^Symbol\\((.*)\\)(.*)$/;\nfunction printNumber(val) {\n  if (val != +val) return 'NaN';\n  const isNegativeZero = val === 0 && 1 / val < 0;\n  return isNegativeZero ? '-0' : '' + val;\n}\nfunction printSimpleValue(val, quoteStrings = false) {\n  if (val == null || val === true || val === false) return '' + val;\n  const typeOf = typeof val;\n  if (typeOf === 'number') return printNumber(val);\n  if (typeOf === 'string') return quoteStrings ? `\"${val}\"` : val;\n  if (typeOf === 'function') return '[Function ' + (val.name || 'anonymous') + ']';\n  if (typeOf === 'symbol') return symbolToString.call(val).replace(SYMBOL_REGEXP, 'Symbol($1)');\n  const tag = toString.call(val).slice(8, -1);\n  if (tag === 'Date') return isNaN(val.getTime()) ? '' + val : val.toISOString(val);\n  if (tag === 'Error' || val instanceof Error) return '[' + errorToString.call(val) + ']';\n  if (tag === 'RegExp') return regExpToString.call(val);\n  return null;\n}\nfunction printValue(value, quoteStrings) {\n  let result = printSimpleValue(value, quoteStrings);\n  if (result !== null) return result;\n  return JSON.stringify(value, function (key, value) {\n    let result = printSimpleValue(this[key], quoteStrings);\n    if (result !== null) return result;\n    return value;\n  }, 2);\n}\n\nfunction toArray(value) {\n  return value == null ? [] : [].concat(value);\n}\n\nlet strReg = /\\$\\{\\s*(\\w+)\\s*\\}/g;\nclass ValidationError extends Error {\n  static formatError(message, params) {\n    const path = params.label || params.path || 'this';\n    if (path !== params.path) params = Object.assign({}, params, {\n      path\n    });\n    if (typeof message === 'string') return message.replace(strReg, (_, key) => printValue(params[key]));\n    if (typeof message === 'function') return message(params);\n    return message;\n  }\n  static isError(err) {\n    return err && err.name === 'ValidationError';\n  }\n  constructor(errorOrErrors, value, field, type) {\n    super();\n    this.value = void 0;\n    this.path = void 0;\n    this.type = void 0;\n    this.errors = void 0;\n    this.params = void 0;\n    this.inner = void 0;\n    this.name = 'ValidationError';\n    this.value = value;\n    this.path = field;\n    this.type = type;\n    this.errors = [];\n    this.inner = [];\n    toArray(errorOrErrors).forEach(err => {\n      if (ValidationError.isError(err)) {\n        this.errors.push(...err.errors);\n        this.inner = this.inner.concat(err.inner.length ? err.inner : err);\n      } else {\n        this.errors.push(err);\n      }\n    });\n    this.message = this.errors.length > 1 ? `${this.errors.length} errors occurred` : this.errors[0];\n    if (Error.captureStackTrace) Error.captureStackTrace(this, ValidationError);\n  }\n}\n\nlet mixed = {\n  default: '${path} is invalid',\n  required: '${path} is a required field',\n  defined: '${path} must be defined',\n  notNull: '${path} cannot be null',\n  oneOf: '${path} must be one of the following values: ${values}',\n  notOneOf: '${path} must not be one of the following values: ${values}',\n  notType: ({\n    path,\n    type,\n    value,\n    originalValue\n  }) => {\n    const castMsg = originalValue != null && originalValue !== value ? ` (cast from the value \\`${printValue(originalValue, true)}\\`).` : '.';\n    return type !== 'mixed' ? `${path} must be a \\`${type}\\` type, ` + `but the final value was: \\`${printValue(value, true)}\\`` + castMsg : `${path} must match the configured type. ` + `The validated value was: \\`${printValue(value, true)}\\`` + castMsg;\n  }\n};\nlet string = {\n  length: '${path} must be exactly ${length} characters',\n  min: '${path} must be at least ${min} characters',\n  max: '${path} must be at most ${max} characters',\n  matches: '${path} must match the following: \"${regex}\"',\n  email: '${path} must be a valid email',\n  url: '${path} must be a valid URL',\n  uuid: '${path} must be a valid UUID',\n  trim: '${path} must be a trimmed string',\n  lowercase: '${path} must be a lowercase string',\n  uppercase: '${path} must be a upper case string'\n};\nlet number = {\n  min: '${path} must be greater than or equal to ${min}',\n  max: '${path} must be less than or equal to ${max}',\n  lessThan: '${path} must be less than ${less}',\n  moreThan: '${path} must be greater than ${more}',\n  positive: '${path} must be a positive number',\n  negative: '${path} must be a negative number',\n  integer: '${path} must be an integer'\n};\nlet date = {\n  min: '${path} field must be later than ${min}',\n  max: '${path} field must be at earlier than ${max}'\n};\nlet boolean = {\n  isValue: '${path} field must be ${value}'\n};\nlet object = {\n  noUnknown: '${path} field has unspecified keys: ${unknown}'\n};\nlet array = {\n  min: '${path} field must have at least ${min} items',\n  max: '${path} field must have less than or equal to ${max} items',\n  length: '${path} must have ${length} items'\n};\nlet tuple = {\n  notType: params => {\n    const {\n      path,\n      value,\n      spec\n    } = params;\n    const typeLen = spec.types.length;\n    if (Array.isArray(value)) {\n      if (value.length < typeLen) return `${path} tuple value has too few items, expected a length of ${typeLen} but got ${value.length} for value: \\`${printValue(value, true)}\\``;\n      if (value.length > typeLen) return `${path} tuple value has too many items, expected a length of ${typeLen} but got ${value.length} for value: \\`${printValue(value, true)}\\``;\n    }\n    return ValidationError.formatError(mixed.notType, params);\n  }\n};\nvar locale = Object.assign(Object.create(null), {\n  mixed,\n  string,\n  number,\n  date,\n  object,\n  array,\n  boolean\n});\n\nconst isSchema = obj => obj && obj.__isYupSchema__;\n\nclass Condition {\n  static fromOptions(refs, config) {\n    if (!config.then && !config.otherwise) throw new TypeError('either `then:` or `otherwise:` is required for `when()` conditions');\n    let {\n      is,\n      then,\n      otherwise\n    } = config;\n    let check = typeof is === 'function' ? is : (...values) => values.every(value => value === is);\n    return new Condition(refs, (values, schema) => {\n      var _branch;\n      let branch = check(...values) ? then : otherwise;\n      return (_branch = branch == null ? void 0 : branch(schema)) != null ? _branch : schema;\n    });\n  }\n  constructor(refs, builder) {\n    this.fn = void 0;\n    this.refs = refs;\n    this.refs = refs;\n    this.fn = builder;\n  }\n  resolve(base, options) {\n    let values = this.refs.map(ref =>\n    // TODO: ? operator here?\n    ref.getValue(options == null ? void 0 : options.value, options == null ? void 0 : options.parent, options == null ? void 0 : options.context));\n    let schema = this.fn(values, base, options);\n    if (schema === undefined ||\n    // @ts-ignore this can be base\n    schema === base) {\n      return base;\n    }\n    if (!isSchema(schema)) throw new TypeError('conditions must return a schema object');\n    return schema.resolve(options);\n  }\n}\n\nconst prefixes = {\n  context: '$',\n  value: '.'\n};\nfunction create$9(key, options) {\n  return new Reference(key, options);\n}\nclass Reference {\n  constructor(key, options = {}) {\n    this.key = void 0;\n    this.isContext = void 0;\n    this.isValue = void 0;\n    this.isSibling = void 0;\n    this.path = void 0;\n    this.getter = void 0;\n    this.map = void 0;\n    if (typeof key !== 'string') throw new TypeError('ref must be a string, got: ' + key);\n    this.key = key.trim();\n    if (key === '') throw new TypeError('ref must be a non-empty string');\n    this.isContext = this.key[0] === prefixes.context;\n    this.isValue = this.key[0] === prefixes.value;\n    this.isSibling = !this.isContext && !this.isValue;\n    let prefix = this.isContext ? prefixes.context : this.isValue ? prefixes.value : '';\n    this.path = this.key.slice(prefix.length);\n    this.getter = this.path && getter(this.path, true);\n    this.map = options.map;\n  }\n  getValue(value, parent, context) {\n    let result = this.isContext ? context : this.isValue ? value : parent;\n    if (this.getter) result = this.getter(result || {});\n    if (this.map) result = this.map(result);\n    return result;\n  }\n\n  /**\n   *\n   * @param {*} value\n   * @param {Object} options\n   * @param {Object=} options.context\n   * @param {Object=} options.parent\n   */\n  cast(value, options) {\n    return this.getValue(value, options == null ? void 0 : options.parent, options == null ? void 0 : options.context);\n  }\n  resolve() {\n    return this;\n  }\n  describe() {\n    return {\n      type: 'ref',\n      key: this.key\n    };\n  }\n  toString() {\n    return `Ref(${this.key})`;\n  }\n  static isRef(value) {\n    return value && value.__isYupRef;\n  }\n}\n\n// @ts-ignore\nReference.prototype.__isYupRef = true;\n\nconst isAbsent = value => value == null;\n\nfunction createValidation(config) {\n  function validate({\n    value,\n    path = '',\n    options,\n    originalValue,\n    schema\n  }, panic, next) {\n    const {\n      name,\n      test,\n      params,\n      message,\n      skipAbsent\n    } = config;\n    let {\n      parent,\n      context,\n      abortEarly = schema.spec.abortEarly\n    } = options;\n    function resolve(item) {\n      return Reference.isRef(item) ? item.getValue(value, parent, context) : item;\n    }\n    function createError(overrides = {}) {\n      const nextParams = Object.assign({\n        value,\n        originalValue,\n        label: schema.spec.label,\n        path: overrides.path || path,\n        spec: schema.spec\n      }, params, overrides.params);\n      for (const key of Object.keys(nextParams)) nextParams[key] = resolve(nextParams[key]);\n      const error = new ValidationError(ValidationError.formatError(overrides.message || message, nextParams), value, nextParams.path, overrides.type || name);\n      error.params = nextParams;\n      return error;\n    }\n    const invalid = abortEarly ? panic : next;\n    let ctx = {\n      path,\n      parent,\n      type: name,\n      from: options.from,\n      createError,\n      resolve,\n      options,\n      originalValue,\n      schema\n    };\n    const handleResult = validOrError => {\n      if (ValidationError.isError(validOrError)) invalid(validOrError);else if (!validOrError) invalid(createError());else next(null);\n    };\n    const handleError = err => {\n      if (ValidationError.isError(err)) invalid(err);else panic(err);\n    };\n    const shouldSkip = skipAbsent && isAbsent(value);\n    if (!options.sync) {\n      try {\n        Promise.resolve(!shouldSkip ? test.call(ctx, value, ctx) : true).then(handleResult, handleError);\n      } catch (err) {\n        handleError(err);\n      }\n      return;\n    }\n    let result;\n    try {\n      var _result;\n      result = !shouldSkip ? test.call(ctx, value, ctx) : true;\n      if (typeof ((_result = result) == null ? void 0 : _result.then) === 'function') {\n        throw new Error(`Validation test of type: \"${ctx.type}\" returned a Promise during a synchronous validate. ` + `This test will finish after the validate call has returned`);\n      }\n    } catch (err) {\n      handleError(err);\n      return;\n    }\n    handleResult(result);\n  }\n  validate.OPTIONS = config;\n  return validate;\n}\n\nfunction getIn(schema, path, value, context = value) {\n  let parent, lastPart, lastPartDebug;\n\n  // root path: ''\n  if (!path) return {\n    parent,\n    parentPath: path,\n    schema\n  };\n  forEach(path, (_part, isBracket, isArray) => {\n    let part = isBracket ? _part.slice(1, _part.length - 1) : _part;\n    schema = schema.resolve({\n      context,\n      parent,\n      value\n    });\n    let isTuple = schema.type === 'tuple';\n    let idx = isArray ? parseInt(part, 10) : 0;\n    if (schema.innerType || isTuple) {\n      if (isTuple && !isArray) throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part \"${lastPartDebug}\" must contain an index to the tuple element, e.g. \"${lastPartDebug}[0]\"`);\n      if (value && idx >= value.length) {\n        throw new Error(`Yup.reach cannot resolve an array item at index: ${_part}, in the path: ${path}. ` + `because there is no value at that index. `);\n      }\n      parent = value;\n      value = value && value[idx];\n      schema = isTuple ? schema.spec.types[idx] : schema.innerType;\n    }\n\n    // sometimes the array index part of a path doesn't exist: \"nested.arr.child\"\n    // in these cases the current part is the next schema and should be processed\n    // in this iteration. For cases where the index signature is included this\n    // check will fail and we'll handle the `child` part on the next iteration like normal\n    if (!isArray) {\n      if (!schema.fields || !schema.fields[part]) throw new Error(`The schema does not contain the path: ${path}. ` + `(failed at: ${lastPartDebug} which is a type: \"${schema.type}\")`);\n      parent = value;\n      value = value && value[part];\n      schema = schema.fields[part];\n    }\n    lastPart = part;\n    lastPartDebug = isBracket ? '[' + _part + ']' : '.' + _part;\n  });\n  return {\n    schema,\n    parent,\n    parentPath: lastPart\n  };\n}\nfunction reach(obj, path, value, context) {\n  return getIn(obj, path, value, context).schema;\n}\n\nclass ReferenceSet extends Set {\n  describe() {\n    const description = [];\n    for (const item of this.values()) {\n      description.push(Reference.isRef(item) ? item.describe() : item);\n    }\n    return description;\n  }\n  resolveAll(resolve) {\n    let result = [];\n    for (const item of this.values()) {\n      result.push(resolve(item));\n    }\n    return result;\n  }\n  clone() {\n    return new ReferenceSet(this.values());\n  }\n  merge(newItems, removeItems) {\n    const next = this.clone();\n    newItems.forEach(value => next.add(value));\n    removeItems.forEach(value => next.delete(value));\n    return next;\n  }\n}\n\n// tweaked from https://github.com/Kelin2025/nanoclone/blob/0abeb7635bda9b68ef2277093f76dbe3bf3948e1/src/index.js\nfunction clone(src, seen = new Map()) {\n  if (isSchema(src) || !src || typeof src !== 'object') return src;\n  if (seen.has(src)) return seen.get(src);\n  let copy;\n  if (src instanceof Date) {\n    // Date\n    copy = new Date(src.getTime());\n    seen.set(src, copy);\n  } else if (src instanceof RegExp) {\n    // RegExp\n    copy = new RegExp(src);\n    seen.set(src, copy);\n  } else if (Array.isArray(src)) {\n    // Array\n    copy = new Array(src.length);\n    seen.set(src, copy);\n    for (let i = 0; i < src.length; i++) copy[i] = clone(src[i], seen);\n  } else if (src instanceof Map) {\n    // Map\n    copy = new Map();\n    seen.set(src, copy);\n    for (const [k, v] of src.entries()) copy.set(k, clone(v, seen));\n  } else if (src instanceof Set) {\n    // Set\n    copy = new Set();\n    seen.set(src, copy);\n    for (const v of src) copy.add(clone(v, seen));\n  } else if (src instanceof Object) {\n    // Object\n    copy = {};\n    seen.set(src, copy);\n    for (const [k, v] of Object.entries(src)) copy[k] = clone(v, seen);\n  } else {\n    throw Error(`Unable to clone ${src}`);\n  }\n  return copy;\n}\n\nclass Schema {\n  constructor(options) {\n    this.type = void 0;\n    this.deps = [];\n    this.tests = void 0;\n    this.transforms = void 0;\n    this.conditions = [];\n    this._mutate = void 0;\n    this.internalTests = {};\n    this._whitelist = new ReferenceSet();\n    this._blacklist = new ReferenceSet();\n    this.exclusiveTests = Object.create(null);\n    this._typeCheck = void 0;\n    this.spec = void 0;\n    this.tests = [];\n    this.transforms = [];\n    this.withMutation(() => {\n      this.typeError(mixed.notType);\n    });\n    this.type = options.type;\n    this._typeCheck = options.check;\n    this.spec = Object.assign({\n      strip: false,\n      strict: false,\n      abortEarly: true,\n      recursive: true,\n      nullable: false,\n      optional: true,\n      coerce: true\n    }, options == null ? void 0 : options.spec);\n    this.withMutation(s => {\n      s.nonNullable();\n    });\n  }\n\n  // TODO: remove\n  get _type() {\n    return this.type;\n  }\n  clone(spec) {\n    if (this._mutate) {\n      if (spec) Object.assign(this.spec, spec);\n      return this;\n    }\n\n    // if the nested value is a schema we can skip cloning, since\n    // they are already immutable\n    const next = Object.create(Object.getPrototypeOf(this));\n\n    // @ts-expect-error this is readonly\n    next.type = this.type;\n    next._typeCheck = this._typeCheck;\n    next._whitelist = this._whitelist.clone();\n    next._blacklist = this._blacklist.clone();\n    next.internalTests = Object.assign({}, this.internalTests);\n    next.exclusiveTests = Object.assign({}, this.exclusiveTests);\n\n    // @ts-expect-error this is readonly\n    next.deps = [...this.deps];\n    next.conditions = [...this.conditions];\n    next.tests = [...this.tests];\n    next.transforms = [...this.transforms];\n    next.spec = clone(Object.assign({}, this.spec, spec));\n    return next;\n  }\n  label(label) {\n    let next = this.clone();\n    next.spec.label = label;\n    return next;\n  }\n  meta(...args) {\n    if (args.length === 0) return this.spec.meta;\n    let next = this.clone();\n    next.spec.meta = Object.assign(next.spec.meta || {}, args[0]);\n    return next;\n  }\n  withMutation(fn) {\n    let before = this._mutate;\n    this._mutate = true;\n    let result = fn(this);\n    this._mutate = before;\n    return result;\n  }\n  concat(schema) {\n    if (!schema || schema === this) return this;\n    if (schema.type !== this.type && this.type !== 'mixed') throw new TypeError(`You cannot \\`concat()\\` schema's of different types: ${this.type} and ${schema.type}`);\n    let base = this;\n    let combined = schema.clone();\n    const mergedSpec = Object.assign({}, base.spec, combined.spec);\n    combined.spec = mergedSpec;\n    combined.internalTests = Object.assign({}, base.internalTests, combined.internalTests);\n\n    // manually merge the blacklist/whitelist (the other `schema` takes\n    // precedence in case of conflicts)\n    combined._whitelist = base._whitelist.merge(schema._whitelist, schema._blacklist);\n    combined._blacklist = base._blacklist.merge(schema._blacklist, schema._whitelist);\n\n    // start with the current tests\n    combined.tests = base.tests;\n    combined.exclusiveTests = base.exclusiveTests;\n\n    // manually add the new tests to ensure\n    // the deduping logic is consistent\n    combined.withMutation(next => {\n      schema.tests.forEach(fn => {\n        next.test(fn.OPTIONS);\n      });\n    });\n    combined.transforms = [...base.transforms, ...combined.transforms];\n    return combined;\n  }\n  isType(v) {\n    if (v == null) {\n      if (this.spec.nullable && v === null) return true;\n      if (this.spec.optional && v === undefined) return true;\n      return false;\n    }\n    return this._typeCheck(v);\n  }\n  resolve(options) {\n    let schema = this;\n    if (schema.conditions.length) {\n      let conditions = schema.conditions;\n      schema = schema.clone();\n      schema.conditions = [];\n      schema = conditions.reduce((prevSchema, condition) => condition.resolve(prevSchema, options), schema);\n      schema = schema.resolve(options);\n    }\n    return schema;\n  }\n  resolveOptions(options) {\n    var _options$strict, _options$abortEarly, _options$recursive;\n    return Object.assign({}, options, {\n      from: options.from || [],\n      strict: (_options$strict = options.strict) != null ? _options$strict : this.spec.strict,\n      abortEarly: (_options$abortEarly = options.abortEarly) != null ? _options$abortEarly : this.spec.abortEarly,\n      recursive: (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive\n    });\n  }\n\n  /**\n   * Run the configured transform pipeline over an input value.\n   */\n\n  cast(value, options = {}) {\n    let resolvedSchema = this.resolve(Object.assign({\n      value\n    }, options));\n    let allowOptionality = options.assert === 'ignore-optionality';\n    let result = resolvedSchema._cast(value, options);\n    if (options.assert !== false && !resolvedSchema.isType(result)) {\n      if (allowOptionality && isAbsent(result)) {\n        return result;\n      }\n      let formattedValue = printValue(value);\n      let formattedResult = printValue(result);\n      throw new TypeError(`The value of ${options.path || 'field'} could not be cast to a value ` + `that satisfies the schema type: \"${resolvedSchema.type}\". \\n\\n` + `attempted value: ${formattedValue} \\n` + (formattedResult !== formattedValue ? `result of cast: ${formattedResult}` : ''));\n    }\n    return result;\n  }\n  _cast(rawValue, _options) {\n    let value = rawValue === undefined ? rawValue : this.transforms.reduce((prevValue, fn) => fn.call(this, prevValue, rawValue, this), rawValue);\n    if (value === undefined) {\n      value = this.getDefault();\n    }\n    return value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let {\n      path,\n      originalValue = _value,\n      strict = this.spec.strict\n    } = options;\n    let value = _value;\n    if (!strict) {\n      value = this._cast(value, Object.assign({\n        assert: false\n      }, options));\n    }\n    let initialTests = [];\n    for (let test of Object.values(this.internalTests)) {\n      if (test) initialTests.push(test);\n    }\n    this.runTests({\n      path,\n      value,\n      originalValue,\n      options,\n      tests: initialTests\n    }, panic, initialErrors => {\n      // even if we aren't ending early we can't proceed further if the types aren't correct\n      if (initialErrors.length) {\n        return next(initialErrors, value);\n      }\n      this.runTests({\n        path,\n        value,\n        originalValue,\n        options,\n        tests: this.tests\n      }, panic, next);\n    });\n  }\n\n  /**\n   * Executes a set of validations, either schema, produced Tests or a nested\n   * schema validate result.\n   */\n  runTests(runOptions, panic, next) {\n    let fired = false;\n    let {\n      tests,\n      value,\n      originalValue,\n      path,\n      options\n    } = runOptions;\n    let panicOnce = arg => {\n      if (fired) return;\n      fired = true;\n      panic(arg, value);\n    };\n    let nextOnce = arg => {\n      if (fired) return;\n      fired = true;\n      next(arg, value);\n    };\n    let count = tests.length;\n    let nestedErrors = [];\n    if (!count) return nextOnce([]);\n    let args = {\n      value,\n      originalValue,\n      path,\n      options,\n      schema: this\n    };\n    for (let i = 0; i < tests.length; i++) {\n      const test = tests[i];\n      test(args, panicOnce, function finishTestRun(err) {\n        if (err) {\n          nestedErrors = nestedErrors.concat(err);\n        }\n        if (--count <= 0) {\n          nextOnce(nestedErrors);\n        }\n      });\n    }\n  }\n  asNestedTest({\n    key,\n    index,\n    parent,\n    parentPath,\n    originalParent,\n    options\n  }) {\n    const k = key != null ? key : index;\n    if (k == null) {\n      throw TypeError('Must include `key` or `index` for nested validations');\n    }\n    const isIndex = typeof k === 'number';\n    let value = parent[k];\n    const testOptions = Object.assign({}, options, {\n      // Nested validations fields are always strict:\n      //    1. parent isn't strict so the casting will also have cast inner values\n      //    2. parent is strict in which case the nested values weren't cast either\n      strict: true,\n      parent,\n      value,\n      originalValue: originalParent[k],\n      // FIXME: tests depend on `index` being passed around deeply,\n      //   we should not let the options.key/index bleed through\n      key: undefined,\n      // index: undefined,\n      [isIndex ? 'index' : 'key']: k,\n      path: isIndex || k.includes('.') ? `${parentPath || ''}[${value ? k : `\"${k}\"`}]` : (parentPath ? `${parentPath}.` : '') + key\n    });\n    return (_, panic, next) => this.resolve(testOptions)._validate(value, testOptions, panic, next);\n  }\n  validate(value, options) {\n    let schema = this.resolve(Object.assign({}, options, {\n      value\n    }));\n    return new Promise((resolve, reject) => schema._validate(value, options, (error, parsed) => {\n      if (ValidationError.isError(error)) error.value = parsed;\n      reject(error);\n    }, (errors, validated) => {\n      if (errors.length) reject(new ValidationError(errors, validated));else resolve(validated);\n    }));\n  }\n  validateSync(value, options) {\n    let schema = this.resolve(Object.assign({}, options, {\n      value\n    }));\n    let result;\n    schema._validate(value, Object.assign({}, options, {\n      sync: true\n    }), (error, parsed) => {\n      if (ValidationError.isError(error)) error.value = parsed;\n      throw error;\n    }, (errors, validated) => {\n      if (errors.length) throw new ValidationError(errors, value);\n      result = validated;\n    });\n    return result;\n  }\n  isValid(value, options) {\n    return this.validate(value, options).then(() => true, err => {\n      if (ValidationError.isError(err)) return false;\n      throw err;\n    });\n  }\n  isValidSync(value, options) {\n    try {\n      this.validateSync(value, options);\n      return true;\n    } catch (err) {\n      if (ValidationError.isError(err)) return false;\n      throw err;\n    }\n  }\n  _getDefault() {\n    let defaultValue = this.spec.default;\n    if (defaultValue == null) {\n      return defaultValue;\n    }\n    return typeof defaultValue === 'function' ? defaultValue.call(this) : clone(defaultValue);\n  }\n  getDefault(options\n  // If schema is defaulted we know it's at least not undefined\n  ) {\n    let schema = this.resolve(options || {});\n    return schema._getDefault();\n  }\n  default(def) {\n    if (arguments.length === 0) {\n      return this._getDefault();\n    }\n    let next = this.clone({\n      default: def\n    });\n    return next;\n  }\n  strict(isStrict = true) {\n    return this.clone({\n      strict: isStrict\n    });\n  }\n  nullability(nullable, message) {\n    const next = this.clone({\n      nullable\n    });\n    next.internalTests.nullable = createValidation({\n      message,\n      name: 'nullable',\n      test(value) {\n        return value === null ? this.schema.spec.nullable : true;\n      }\n    });\n    return next;\n  }\n  optionality(optional, message) {\n    const next = this.clone({\n      optional\n    });\n    next.internalTests.optionality = createValidation({\n      message,\n      name: 'optionality',\n      test(value) {\n        return value === undefined ? this.schema.spec.optional : true;\n      }\n    });\n    return next;\n  }\n  optional() {\n    return this.optionality(true);\n  }\n  defined(message = mixed.defined) {\n    return this.optionality(false, message);\n  }\n  nullable() {\n    return this.nullability(true);\n  }\n  nonNullable(message = mixed.notNull) {\n    return this.nullability(false, message);\n  }\n  required(message = mixed.required) {\n    return this.clone().withMutation(next => next.nonNullable(message).defined(message));\n  }\n  notRequired() {\n    return this.clone().withMutation(next => next.nullable().optional());\n  }\n  transform(fn) {\n    let next = this.clone();\n    next.transforms.push(fn);\n    return next;\n  }\n\n  /**\n   * Adds a test function to the schema's queue of tests.\n   * tests can be exclusive or non-exclusive.\n   *\n   * - exclusive tests, will replace any existing tests of the same name.\n   * - non-exclusive: can be stacked\n   *\n   * If a non-exclusive test is added to a schema with an exclusive test of the same name\n   * the exclusive test is removed and further tests of the same name will be stacked.\n   *\n   * If an exclusive test is added to a schema with non-exclusive tests of the same name\n   * the previous tests are removed and further tests of the same name will replace each other.\n   */\n\n  test(...args) {\n    let opts;\n    if (args.length === 1) {\n      if (typeof args[0] === 'function') {\n        opts = {\n          test: args[0]\n        };\n      } else {\n        opts = args[0];\n      }\n    } else if (args.length === 2) {\n      opts = {\n        name: args[0],\n        test: args[1]\n      };\n    } else {\n      opts = {\n        name: args[0],\n        message: args[1],\n        test: args[2]\n      };\n    }\n    if (opts.message === undefined) opts.message = mixed.default;\n    if (typeof opts.test !== 'function') throw new TypeError('`test` is a required parameters');\n    let next = this.clone();\n    let validate = createValidation(opts);\n    let isExclusive = opts.exclusive || opts.name && next.exclusiveTests[opts.name] === true;\n    if (opts.exclusive) {\n      if (!opts.name) throw new TypeError('Exclusive tests must provide a unique `name` identifying the test');\n    }\n    if (opts.name) next.exclusiveTests[opts.name] = !!opts.exclusive;\n    next.tests = next.tests.filter(fn => {\n      if (fn.OPTIONS.name === opts.name) {\n        if (isExclusive) return false;\n        if (fn.OPTIONS.test === validate.OPTIONS.test) return false;\n      }\n      return true;\n    });\n    next.tests.push(validate);\n    return next;\n  }\n  when(keys, options) {\n    if (!Array.isArray(keys) && typeof keys !== 'string') {\n      options = keys;\n      keys = '.';\n    }\n    let next = this.clone();\n    let deps = toArray(keys).map(key => new Reference(key));\n    deps.forEach(dep => {\n      // @ts-ignore readonly array\n      if (dep.isSibling) next.deps.push(dep.key);\n    });\n    next.conditions.push(typeof options === 'function' ? new Condition(deps, options) : Condition.fromOptions(deps, options));\n    return next;\n  }\n  typeError(message) {\n    let next = this.clone();\n    next.internalTests.typeError = createValidation({\n      message,\n      name: 'typeError',\n      test(value) {\n        if (!isAbsent(value) && !this.schema._typeCheck(value)) return this.createError({\n          params: {\n            type: this.schema.type\n          }\n        });\n        return true;\n      }\n    });\n    return next;\n  }\n  oneOf(enums, message = mixed.oneOf) {\n    let next = this.clone();\n    enums.forEach(val => {\n      next._whitelist.add(val);\n      next._blacklist.delete(val);\n    });\n    next.internalTests.whiteList = createValidation({\n      message,\n      name: 'oneOf',\n      skipAbsent: true,\n      test(value) {\n        let valids = this.schema._whitelist;\n        let resolved = valids.resolveAll(this.resolve);\n        return resolved.includes(value) ? true : this.createError({\n          params: {\n            values: Array.from(valids).join(', '),\n            resolved\n          }\n        });\n      }\n    });\n    return next;\n  }\n  notOneOf(enums, message = mixed.notOneOf) {\n    let next = this.clone();\n    enums.forEach(val => {\n      next._blacklist.add(val);\n      next._whitelist.delete(val);\n    });\n    next.internalTests.blacklist = createValidation({\n      message,\n      name: 'notOneOf',\n      test(value) {\n        let invalids = this.schema._blacklist;\n        let resolved = invalids.resolveAll(this.resolve);\n        if (resolved.includes(value)) return this.createError({\n          params: {\n            values: Array.from(invalids).join(', '),\n            resolved\n          }\n        });\n        return true;\n      }\n    });\n    return next;\n  }\n  strip(strip = true) {\n    let next = this.clone();\n    next.spec.strip = strip;\n    return next;\n  }\n\n  /**\n   * Return a serialized description of the schema including validations, flags, types etc.\n   *\n   * @param options Provide any needed context for resolving runtime schema alterations (lazy, when conditions, etc).\n   */\n  describe(options) {\n    const next = (options ? this.resolve(options) : this).clone();\n    const {\n      label,\n      meta,\n      optional,\n      nullable\n    } = next.spec;\n    const description = {\n      meta,\n      label,\n      optional,\n      nullable,\n      default: next.getDefault(options),\n      type: next.type,\n      oneOf: next._whitelist.describe(),\n      notOneOf: next._blacklist.describe(),\n      tests: next.tests.map(fn => ({\n        name: fn.OPTIONS.name,\n        params: fn.OPTIONS.params\n      })).filter((n, idx, list) => list.findIndex(c => c.name === n.name) === idx)\n    };\n    return description;\n  }\n}\n// @ts-expect-error\nSchema.prototype.__isYupSchema__ = true;\nfor (const method of ['validate', 'validateSync']) Schema.prototype[`${method}At`] = function (path, value, options = {}) {\n  const {\n    parent,\n    parentPath,\n    schema\n  } = getIn(this, path, value, options.context);\n  return schema[method](parent && parent[parentPath], Object.assign({}, options, {\n    parent,\n    path\n  }));\n};\nfor (const alias of ['equals', 'is']) Schema.prototype[alias] = Schema.prototype.oneOf;\nfor (const alias of ['not', 'nope']) Schema.prototype[alias] = Schema.prototype.notOneOf;\n\nconst returnsTrue = () => true;\nfunction create$8(spec) {\n  return new MixedSchema(spec);\n}\nclass MixedSchema extends Schema {\n  constructor(spec) {\n    super(typeof spec === 'function' ? {\n      type: 'mixed',\n      check: spec\n    } : Object.assign({\n      type: 'mixed',\n      check: returnsTrue\n    }, spec));\n  }\n}\ncreate$8.prototype = MixedSchema.prototype;\n\nfunction create$7() {\n  return new BooleanSchema();\n}\nclass BooleanSchema extends Schema {\n  constructor() {\n    super({\n      type: 'boolean',\n      check(v) {\n        if (v instanceof Boolean) v = v.valueOf();\n        return typeof v === 'boolean';\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (ctx.spec.coerce && !ctx.isType(value)) {\n          if (/^(true|1)$/i.test(String(value))) return true;\n          if (/^(false|0)$/i.test(String(value))) return false;\n        }\n        return value;\n      });\n    });\n  }\n  isTrue(message = boolean.isValue) {\n    return this.test({\n      message,\n      name: 'is-value',\n      exclusive: true,\n      params: {\n        value: 'true'\n      },\n      test(value) {\n        return isAbsent(value) || value === true;\n      }\n    });\n  }\n  isFalse(message = boolean.isValue) {\n    return this.test({\n      message,\n      name: 'is-value',\n      exclusive: true,\n      params: {\n        value: 'false'\n      },\n      test(value) {\n        return isAbsent(value) || value === false;\n      }\n    });\n  }\n  default(def) {\n    return super.default(def);\n  }\n  defined(msg) {\n    return super.defined(msg);\n  }\n  optional() {\n    return super.optional();\n  }\n  required(msg) {\n    return super.required(msg);\n  }\n  notRequired() {\n    return super.notRequired();\n  }\n  nullable() {\n    return super.nullable();\n  }\n  nonNullable(msg) {\n    return super.nonNullable(msg);\n  }\n  strip(v) {\n    return super.strip(v);\n  }\n}\ncreate$7.prototype = BooleanSchema.prototype;\n\n// Taken from HTML spec: https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address\nlet rEmail =\n// eslint-disable-next-line\n/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\nlet rUrl =\n// eslint-disable-next-line\n/^((https?|ftp):)?\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i;\n\n// eslint-disable-next-line\nlet rUUID = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\nlet isTrimmed = value => isAbsent(value) || value === value.trim();\nlet objStringTag = {}.toString();\nfunction create$6() {\n  return new StringSchema();\n}\nclass StringSchema extends Schema {\n  constructor() {\n    super({\n      type: 'string',\n      check(value) {\n        if (value instanceof String) value = value.valueOf();\n        return typeof value === 'string';\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce || ctx.isType(value)) return value;\n\n        // don't ever convert arrays\n        if (Array.isArray(value)) return value;\n        const strValue = value != null && value.toString ? value.toString() : value;\n\n        // no one wants plain objects converted to [Object object]\n        if (strValue === objStringTag) return value;\n        return strValue;\n      });\n    });\n  }\n  required(message) {\n    return super.required(message).withMutation(schema => schema.test({\n      message: message || mixed.required,\n      name: 'required',\n      skipAbsent: true,\n      test: value => !!value.length\n    }));\n  }\n  notRequired() {\n    return super.notRequired().withMutation(schema => {\n      schema.tests = schema.tests.filter(t => t.OPTIONS.name !== 'required');\n      return schema;\n    });\n  }\n  length(length, message = string.length) {\n    return this.test({\n      message,\n      name: 'length',\n      exclusive: true,\n      params: {\n        length\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length === this.resolve(length);\n      }\n    });\n  }\n  min(min, message = string.min) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message = string.max) {\n    return this.test({\n      name: 'max',\n      exclusive: true,\n      message,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length <= this.resolve(max);\n      }\n    });\n  }\n  matches(regex, options) {\n    let excludeEmptyString = false;\n    let message;\n    let name;\n    if (options) {\n      if (typeof options === 'object') {\n        ({\n          excludeEmptyString = false,\n          message,\n          name\n        } = options);\n      } else {\n        message = options;\n      }\n    }\n    return this.test({\n      name: name || 'matches',\n      message: message || string.matches,\n      params: {\n        regex\n      },\n      skipAbsent: true,\n      test: value => value === '' && excludeEmptyString || value.search(regex) !== -1\n    });\n  }\n  email(message = string.email) {\n    return this.matches(rEmail, {\n      name: 'email',\n      message,\n      excludeEmptyString: true\n    });\n  }\n  url(message = string.url) {\n    return this.matches(rUrl, {\n      name: 'url',\n      message,\n      excludeEmptyString: true\n    });\n  }\n  uuid(message = string.uuid) {\n    return this.matches(rUUID, {\n      name: 'uuid',\n      message,\n      excludeEmptyString: false\n    });\n  }\n\n  //-- transforms --\n  ensure() {\n    return this.default('').transform(val => val === null ? '' : val);\n  }\n  trim(message = string.trim) {\n    return this.transform(val => val != null ? val.trim() : val).test({\n      message,\n      name: 'trim',\n      test: isTrimmed\n    });\n  }\n  lowercase(message = string.lowercase) {\n    return this.transform(value => !isAbsent(value) ? value.toLowerCase() : value).test({\n      message,\n      name: 'string_case',\n      exclusive: true,\n      skipAbsent: true,\n      test: value => isAbsent(value) || value === value.toLowerCase()\n    });\n  }\n  uppercase(message = string.uppercase) {\n    return this.transform(value => !isAbsent(value) ? value.toUpperCase() : value).test({\n      message,\n      name: 'string_case',\n      exclusive: true,\n      skipAbsent: true,\n      test: value => isAbsent(value) || value === value.toUpperCase()\n    });\n  }\n}\ncreate$6.prototype = StringSchema.prototype;\n\n//\n// String Interfaces\n//\n\nlet isNaN$1 = value => value != +value;\nfunction create$5() {\n  return new NumberSchema();\n}\nclass NumberSchema extends Schema {\n  constructor() {\n    super({\n      type: 'number',\n      check(value) {\n        if (value instanceof Number) value = value.valueOf();\n        return typeof value === 'number' && !isNaN$1(value);\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce) return value;\n        let parsed = value;\n        if (typeof parsed === 'string') {\n          parsed = parsed.replace(/\\s/g, '');\n          if (parsed === '') return NaN;\n          // don't use parseFloat to avoid positives on alpha-numeric strings\n          parsed = +parsed;\n        }\n        if (ctx.isType(parsed)) return parsed;\n        return parseFloat(parsed);\n      });\n    });\n  }\n  min(min, message = number.min) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message = number.max) {\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value <= this.resolve(max);\n      }\n    });\n  }\n  lessThan(less, message = number.lessThan) {\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        less\n      },\n      skipAbsent: true,\n      test(value) {\n        return value < this.resolve(less);\n      }\n    });\n  }\n  moreThan(more, message = number.moreThan) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        more\n      },\n      skipAbsent: true,\n      test(value) {\n        return value > this.resolve(more);\n      }\n    });\n  }\n  positive(msg = number.positive) {\n    return this.moreThan(0, msg);\n  }\n  negative(msg = number.negative) {\n    return this.lessThan(0, msg);\n  }\n  integer(message = number.integer) {\n    return this.test({\n      name: 'integer',\n      message,\n      skipAbsent: true,\n      test: val => Number.isInteger(val)\n    });\n  }\n  truncate() {\n    return this.transform(value => !isAbsent(value) ? value | 0 : value);\n  }\n  round(method) {\n    var _method;\n    let avail = ['ceil', 'floor', 'round', 'trunc'];\n    method = ((_method = method) == null ? void 0 : _method.toLowerCase()) || 'round';\n\n    // this exists for symemtry with the new Math.trunc\n    if (method === 'trunc') return this.truncate();\n    if (avail.indexOf(method.toLowerCase()) === -1) throw new TypeError('Only valid options for round() are: ' + avail.join(', '));\n    return this.transform(value => !isAbsent(value) ? Math[method](value) : value);\n  }\n}\ncreate$5.prototype = NumberSchema.prototype;\n\n//\n// Number Interfaces\n//\n\n/* eslint-disable */\n/**\n *\n * Date.parse with progressive enhancement for ISO 8601 <https://github.com/csnover/js-iso8601>\n * NON-CONFORMANT EDITION.\n * © 2011 Colin Snover <http://zetafleet.com>\n * Released under MIT license.\n */\n\n//              1 YYYY                 2 MM        3 DD              4 HH     5 mm        6 ss            7 msec         8 Z 9 ±    10 tzHH    11 tzmm\nvar isoReg = /^(\\d{4}|[+\\-]\\d{6})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:[ T]?(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\nfunction parseIsoDate(date) {\n  var numericKeys = [1, 4, 5, 6, 7, 10, 11],\n    minutesOffset = 0,\n    timestamp,\n    struct;\n  if (struct = isoReg.exec(date)) {\n    // avoid NaN timestamps caused by “undefined” values being passed to Date.UTC\n    for (var i = 0, k; k = numericKeys[i]; ++i) struct[k] = +struct[k] || 0;\n\n    // allow undefined days and months\n    struct[2] = (+struct[2] || 1) - 1;\n    struct[3] = +struct[3] || 1;\n\n    // allow arbitrary sub-second precision beyond milliseconds\n    struct[7] = struct[7] ? String(struct[7]).substr(0, 3) : 0;\n\n    // timestamps without timezone identifiers should be considered local time\n    if ((struct[8] === undefined || struct[8] === '') && (struct[9] === undefined || struct[9] === '')) timestamp = +new Date(struct[1], struct[2], struct[3], struct[4], struct[5], struct[6], struct[7]);else {\n      if (struct[8] !== 'Z' && struct[9] !== undefined) {\n        minutesOffset = struct[10] * 60 + struct[11];\n        if (struct[9] === '+') minutesOffset = 0 - minutesOffset;\n      }\n      timestamp = Date.UTC(struct[1], struct[2], struct[3], struct[4], struct[5] + minutesOffset, struct[6], struct[7]);\n    }\n  } else timestamp = Date.parse ? Date.parse(date) : NaN;\n  return timestamp;\n}\n\n// @ts-ignore\nlet invalidDate = new Date('');\nlet isDate = obj => Object.prototype.toString.call(obj) === '[object Date]';\nfunction create$4() {\n  return new DateSchema();\n}\nclass DateSchema extends Schema {\n  constructor() {\n    super({\n      type: 'date',\n      check(v) {\n        return isDate(v) && !isNaN(v.getTime());\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce || ctx.isType(value)) return value;\n        value = parseIsoDate(value);\n\n        // 0 is a valid timestamp equivalent to 1970-01-01T00:00:00Z(unix epoch) or before.\n        return !isNaN(value) ? new Date(value) : DateSchema.INVALID_DATE;\n      });\n    });\n  }\n  prepareParam(ref, name) {\n    let param;\n    if (!Reference.isRef(ref)) {\n      let cast = this.cast(ref);\n      if (!this._typeCheck(cast)) throw new TypeError(`\\`${name}\\` must be a Date or a value that can be \\`cast()\\` to a Date`);\n      param = cast;\n    } else {\n      param = ref;\n    }\n    return param;\n  }\n  min(min, message = date.min) {\n    let limit = this.prepareParam(min, 'min');\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value >= this.resolve(limit);\n      }\n    });\n  }\n  max(max, message = date.max) {\n    let limit = this.prepareParam(max, 'max');\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value <= this.resolve(limit);\n      }\n    });\n  }\n}\nDateSchema.INVALID_DATE = invalidDate;\ncreate$4.prototype = DateSchema.prototype;\ncreate$4.INVALID_DATE = invalidDate;\n\n// @ts-expect-error\nfunction sortFields(fields, excludedEdges = []) {\n  let edges = [];\n  let nodes = new Set();\n  let excludes = new Set(excludedEdges.map(([a, b]) => `${a}-${b}`));\n  function addNode(depPath, key) {\n    let node = split(depPath)[0];\n    nodes.add(node);\n    if (!excludes.has(`${key}-${node}`)) edges.push([key, node]);\n  }\n  for (const key of Object.keys(fields)) {\n    let value = fields[key];\n    nodes.add(key);\n    if (Reference.isRef(value) && value.isSibling) addNode(value.path, key);else if (isSchema(value) && 'deps' in value) value.deps.forEach(path => addNode(path, key));\n  }\n  return toposort.array(Array.from(nodes), edges).reverse();\n}\n\nfunction findIndex(arr, err) {\n  let idx = Infinity;\n  arr.some((key, ii) => {\n    var _err$path;\n    if ((_err$path = err.path) != null && _err$path.includes(key)) {\n      idx = ii;\n      return true;\n    }\n  });\n  return idx;\n}\nfunction sortByKeyOrder(keys) {\n  return (a, b) => {\n    return findIndex(keys, a) - findIndex(keys, b);\n  };\n}\n\nconst parseJson = (value, _, ctx) => {\n  if (typeof value !== 'string') {\n    return value;\n  }\n  let parsed = value;\n  try {\n    parsed = JSON.parse(value);\n  } catch (err) {\n    /* */\n  }\n  return ctx.isType(parsed) ? parsed : value;\n};\n\n// @ts-ignore\nfunction deepPartial(schema) {\n  if ('fields' in schema) {\n    const partial = {};\n    for (const [key, fieldSchema] of Object.entries(schema.fields)) {\n      partial[key] = deepPartial(fieldSchema);\n    }\n    return schema.setFields(partial);\n  }\n  if (schema.type === 'array') {\n    const nextArray = schema.optional();\n    if (nextArray.innerType) nextArray.innerType = deepPartial(nextArray.innerType);\n    return nextArray;\n  }\n  if (schema.type === 'tuple') {\n    return schema.optional().clone({\n      types: schema.spec.types.map(deepPartial)\n    });\n  }\n  if ('optional' in schema) {\n    return schema.optional();\n  }\n  return schema;\n}\nconst deepHas = (obj, p) => {\n  const path = [...normalizePath(p)];\n  if (path.length === 1) return path[0] in obj;\n  let last = path.pop();\n  let parent = getter(join(path), true)(obj);\n  return !!(parent && last in parent);\n};\nlet isObject = obj => Object.prototype.toString.call(obj) === '[object Object]';\nfunction unknown(ctx, value) {\n  let known = Object.keys(ctx.fields);\n  return Object.keys(value).filter(key => known.indexOf(key) === -1);\n}\nconst defaultSort = sortByKeyOrder([]);\nfunction create$3(spec) {\n  return new ObjectSchema(spec);\n}\nclass ObjectSchema extends Schema {\n  constructor(spec) {\n    super({\n      type: 'object',\n      check(value) {\n        return isObject(value) || typeof value === 'function';\n      }\n    });\n    this.fields = Object.create(null);\n    this._sortErrors = defaultSort;\n    this._nodes = [];\n    this._excludedEdges = [];\n    this.withMutation(() => {\n      if (spec) {\n        this.shape(spec);\n      }\n    });\n  }\n  _cast(_value, options = {}) {\n    var _options$stripUnknown;\n    let value = super._cast(_value, options);\n\n    //should ignore nulls here\n    if (value === undefined) return this.getDefault();\n    if (!this._typeCheck(value)) return value;\n    let fields = this.fields;\n    let strip = (_options$stripUnknown = options.stripUnknown) != null ? _options$stripUnknown : this.spec.noUnknown;\n    let props = [].concat(this._nodes, Object.keys(value).filter(v => !this._nodes.includes(v)));\n    let intermediateValue = {}; // is filled during the transform below\n    let innerOptions = Object.assign({}, options, {\n      parent: intermediateValue,\n      __validating: options.__validating || false\n    });\n    let isChanged = false;\n    for (const prop of props) {\n      let field = fields[prop];\n      let exists = (prop in value);\n      if (field) {\n        let fieldValue;\n        let inputValue = value[prop];\n\n        // safe to mutate since this is fired in sequence\n        innerOptions.path = (options.path ? `${options.path}.` : '') + prop;\n        field = field.resolve({\n          value: inputValue,\n          context: options.context,\n          parent: intermediateValue\n        });\n        let fieldSpec = field instanceof Schema ? field.spec : undefined;\n        let strict = fieldSpec == null ? void 0 : fieldSpec.strict;\n        if (fieldSpec != null && fieldSpec.strip) {\n          isChanged = isChanged || prop in value;\n          continue;\n        }\n        fieldValue = !options.__validating || !strict ?\n        // TODO: use _cast, this is double resolving\n        field.cast(value[prop], innerOptions) : value[prop];\n        if (fieldValue !== undefined) {\n          intermediateValue[prop] = fieldValue;\n        }\n      } else if (exists && !strip) {\n        intermediateValue[prop] = value[prop];\n      }\n      if (exists !== prop in intermediateValue || intermediateValue[prop] !== value[prop]) {\n        isChanged = true;\n      }\n    }\n    return isChanged ? intermediateValue : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let {\n      from = [],\n      originalValue = _value,\n      recursive = this.spec.recursive\n    } = options;\n    options.from = [{\n      schema: this,\n      value: originalValue\n    }, ...from];\n    // this flag is needed for handling `strict` correctly in the context of\n    // validation vs just casting. e.g strict() on a field is only used when validating\n    options.__validating = true;\n    options.originalValue = originalValue;\n    super._validate(_value, options, panic, (objectErrors, value) => {\n      if (!recursive || !isObject(value)) {\n        next(objectErrors, value);\n        return;\n      }\n      originalValue = originalValue || value;\n      let tests = [];\n      for (let key of this._nodes) {\n        let field = this.fields[key];\n        if (!field || Reference.isRef(field)) {\n          continue;\n        }\n        tests.push(field.asNestedTest({\n          options,\n          key,\n          parent: value,\n          parentPath: options.path,\n          originalParent: originalValue\n        }));\n      }\n      this.runTests({\n        tests,\n        value,\n        originalValue,\n        options\n      }, panic, fieldErrors => {\n        next(fieldErrors.sort(this._sortErrors).concat(objectErrors), value);\n      });\n    });\n  }\n  clone(spec) {\n    const next = super.clone(spec);\n    next.fields = Object.assign({}, this.fields);\n    next._nodes = this._nodes;\n    next._excludedEdges = this._excludedEdges;\n    next._sortErrors = this._sortErrors;\n    return next;\n  }\n  concat(schema) {\n    let next = super.concat(schema);\n    let nextFields = next.fields;\n    for (let [field, schemaOrRef] of Object.entries(this.fields)) {\n      const target = nextFields[field];\n      nextFields[field] = target === undefined ? schemaOrRef : target;\n    }\n    return next.withMutation(s => s.setFields(nextFields, this._excludedEdges));\n  }\n  _getDefault() {\n    if ('default' in this.spec) {\n      return super._getDefault();\n    }\n\n    // if there is no default set invent one\n    if (!this._nodes.length) {\n      return undefined;\n    }\n    let dft = {};\n    this._nodes.forEach(key => {\n      const field = this.fields[key];\n      dft[key] = field && 'getDefault' in field ? field.getDefault() : undefined;\n    });\n    return dft;\n  }\n  setFields(shape, excludedEdges) {\n    let next = this.clone();\n    next.fields = shape;\n    next._nodes = sortFields(shape, excludedEdges);\n    next._sortErrors = sortByKeyOrder(Object.keys(shape));\n    // XXX: this carries over edges which may not be what you want\n    if (excludedEdges) next._excludedEdges = excludedEdges;\n    return next;\n  }\n  shape(additions, excludes = []) {\n    return this.clone().withMutation(next => {\n      let edges = next._excludedEdges;\n      if (excludes.length) {\n        if (!Array.isArray(excludes[0])) excludes = [excludes];\n        edges = [...next._excludedEdges, ...excludes];\n      }\n\n      // XXX: excludes here is wrong\n      return next.setFields(Object.assign(next.fields, additions), edges);\n    });\n  }\n  partial() {\n    const partial = {};\n    for (const [key, schema] of Object.entries(this.fields)) {\n      partial[key] = 'optional' in schema && schema.optional instanceof Function ? schema.optional() : schema;\n    }\n    return this.setFields(partial);\n  }\n  deepPartial() {\n    const next = deepPartial(this);\n    return next;\n  }\n  pick(keys) {\n    const picked = {};\n    for (const key of keys) {\n      if (this.fields[key]) picked[key] = this.fields[key];\n    }\n    return this.setFields(picked);\n  }\n  omit(keys) {\n    const fields = Object.assign({}, this.fields);\n    for (const key of keys) {\n      delete fields[key];\n    }\n    return this.setFields(fields);\n  }\n  from(from, to, alias) {\n    let fromGetter = getter(from, true);\n    return this.transform(obj => {\n      if (!obj) return obj;\n      let newObj = obj;\n      if (deepHas(obj, from)) {\n        newObj = Object.assign({}, obj);\n        if (!alias) delete newObj[from];\n        newObj[to] = fromGetter(obj);\n      }\n      return newObj;\n    });\n  }\n\n  /** Parse an input JSON string to an object */\n  json() {\n    return this.transform(parseJson);\n  }\n  noUnknown(noAllow = true, message = object.noUnknown) {\n    if (typeof noAllow !== 'boolean') {\n      message = noAllow;\n      noAllow = true;\n    }\n    let next = this.test({\n      name: 'noUnknown',\n      exclusive: true,\n      message: message,\n      test(value) {\n        if (value == null) return true;\n        const unknownKeys = unknown(this.schema, value);\n        return !noAllow || unknownKeys.length === 0 || this.createError({\n          params: {\n            unknown: unknownKeys.join(', ')\n          }\n        });\n      }\n    });\n    next.spec.noUnknown = noAllow;\n    return next;\n  }\n  unknown(allow = true, message = object.noUnknown) {\n    return this.noUnknown(!allow, message);\n  }\n  transformKeys(fn) {\n    return this.transform(obj => {\n      if (!obj) return obj;\n      const result = {};\n      for (const key of Object.keys(obj)) result[fn(key)] = obj[key];\n      return result;\n    });\n  }\n  camelCase() {\n    return this.transformKeys(camelCase);\n  }\n  snakeCase() {\n    return this.transformKeys(snakeCase);\n  }\n  constantCase() {\n    return this.transformKeys(key => snakeCase(key).toUpperCase());\n  }\n  describe(options) {\n    let base = super.describe(options);\n    base.fields = {};\n    for (const [key, value] of Object.entries(this.fields)) {\n      var _innerOptions;\n      let innerOptions = options;\n      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {\n        innerOptions = Object.assign({}, innerOptions, {\n          parent: innerOptions.value,\n          value: innerOptions.value[key]\n        });\n      }\n      base.fields[key] = value.describe(innerOptions);\n    }\n    return base;\n  }\n}\ncreate$3.prototype = ObjectSchema.prototype;\n\nfunction create$2(type) {\n  return new ArraySchema(type);\n}\nclass ArraySchema extends Schema {\n  constructor(type) {\n    super({\n      type: 'array',\n      check(v) {\n        return Array.isArray(v);\n      }\n    });\n\n    // `undefined` specifically means uninitialized, as opposed to \"no subtype\"\n    this.innerType = void 0;\n    this.innerType = type;\n  }\n  _cast(_value, _opts) {\n    const value = super._cast(_value, _opts);\n\n    // should ignore nulls here\n    if (!this._typeCheck(value) || !this.innerType) {\n      return value;\n    }\n    let isChanged = false;\n    const castArray = value.map((v, idx) => {\n      const castElement = this.innerType.cast(v, Object.assign({}, _opts, {\n        path: `${_opts.path || ''}[${idx}]`\n      }));\n      if (castElement !== v) {\n        isChanged = true;\n      }\n      return castElement;\n    });\n    return isChanged ? castArray : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    var _options$recursive;\n    // let sync = options.sync;\n    // let path = options.path;\n    let innerType = this.innerType;\n    // let endEarly = options.abortEarly ?? this.spec.abortEarly;\n    let recursive = (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive;\n    options.originalValue != null ? options.originalValue : _value;\n    super._validate(_value, options, panic, (arrayErrors, value) => {\n      var _options$originalValu2;\n      if (!recursive || !innerType || !this._typeCheck(value)) {\n        next(arrayErrors, value);\n        return;\n      }\n\n      // #950 Ensure that sparse array empty slots are validated\n      let tests = new Array(value.length);\n      for (let index = 0; index < value.length; index++) {\n        var _options$originalValu;\n        tests[index] = innerType.asNestedTest({\n          options,\n          index,\n          parent: value,\n          parentPath: options.path,\n          originalParent: (_options$originalValu = options.originalValue) != null ? _options$originalValu : _value\n        });\n      }\n      this.runTests({\n        value,\n        tests,\n        originalValue: (_options$originalValu2 = options.originalValue) != null ? _options$originalValu2 : _value,\n        options\n      }, panic, innerTypeErrors => next(innerTypeErrors.concat(arrayErrors), value));\n    });\n  }\n  clone(spec) {\n    const next = super.clone(spec);\n    // @ts-expect-error readonly\n    next.innerType = this.innerType;\n    return next;\n  }\n\n  /** Parse an input JSON string to an object */\n  json() {\n    return this.transform(parseJson);\n  }\n  concat(schema) {\n    let next = super.concat(schema);\n\n    // @ts-expect-error readonly\n    next.innerType = this.innerType;\n    if (schema.innerType)\n      // @ts-expect-error readonly\n      next.innerType = next.innerType ?\n      // @ts-expect-error Lazy doesn't have concat and will break\n      next.innerType.concat(schema.innerType) : schema.innerType;\n    return next;\n  }\n  of(schema) {\n    // FIXME: this should return a new instance of array without the default to be\n    let next = this.clone();\n    if (!isSchema(schema)) throw new TypeError('`array.of()` sub-schema must be a valid yup schema not: ' + printValue(schema));\n\n    // @ts-expect-error readonly\n    next.innerType = schema;\n    return next;\n  }\n  length(length, message = array.length) {\n    return this.test({\n      message,\n      name: 'length',\n      exclusive: true,\n      params: {\n        length\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length === this.resolve(length);\n      }\n    });\n  }\n  min(min, message) {\n    message = message || array.min;\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      // FIXME(ts): Array<typeof T>\n      test(value) {\n        return value.length >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message) {\n    message = message || array.max;\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length <= this.resolve(max);\n      }\n    });\n  }\n  ensure() {\n    return this.default(() => []).transform((val, original) => {\n      // We don't want to return `null` for nullable schema\n      if (this._typeCheck(val)) return val;\n      return original == null ? [] : [].concat(original);\n    });\n  }\n  compact(rejector) {\n    let reject = !rejector ? v => !!v : (v, i, a) => !rejector(v, i, a);\n    return this.transform(values => values != null ? values.filter(reject) : values);\n  }\n  describe(options) {\n    let base = super.describe();\n    if (this.innerType) {\n      var _innerOptions;\n      let innerOptions = options;\n      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {\n        innerOptions = Object.assign({}, innerOptions, {\n          parent: innerOptions.value,\n          value: innerOptions.value[0]\n        });\n      }\n      base.innerType = this.innerType.describe(options);\n    }\n    return base;\n  }\n}\ncreate$2.prototype = ArraySchema.prototype;\n\n// @ts-ignore\nfunction create$1(schemas) {\n  return new TupleSchema(schemas);\n}\nclass TupleSchema extends Schema {\n  constructor(schemas) {\n    super({\n      type: 'tuple',\n      spec: {\n        types: schemas\n      },\n      check(v) {\n        const types = this.spec.types;\n        return Array.isArray(v) && v.length === types.length;\n      }\n    });\n    this.withMutation(() => {\n      this.typeError(tuple.notType);\n    });\n  }\n  _cast(inputValue, options) {\n    const {\n      types\n    } = this.spec;\n    const value = super._cast(inputValue, options);\n    if (!this._typeCheck(value)) {\n      return value;\n    }\n    let isChanged = false;\n    const castArray = types.map((type, idx) => {\n      const castElement = type.cast(value[idx], Object.assign({}, options, {\n        path: `${options.path || ''}[${idx}]`\n      }));\n      if (castElement !== value[idx]) isChanged = true;\n      return castElement;\n    });\n    return isChanged ? castArray : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let itemTypes = this.spec.types;\n    super._validate(_value, options, panic, (tupleErrors, value) => {\n      var _options$originalValu2;\n      // intentionally not respecting recursive\n      if (!this._typeCheck(value)) {\n        next(tupleErrors, value);\n        return;\n      }\n      let tests = [];\n      for (let [index, itemSchema] of itemTypes.entries()) {\n        var _options$originalValu;\n        tests[index] = itemSchema.asNestedTest({\n          options,\n          index,\n          parent: value,\n          parentPath: options.path,\n          originalParent: (_options$originalValu = options.originalValue) != null ? _options$originalValu : _value\n        });\n      }\n      this.runTests({\n        value,\n        tests,\n        originalValue: (_options$originalValu2 = options.originalValue) != null ? _options$originalValu2 : _value,\n        options\n      }, panic, innerTypeErrors => next(innerTypeErrors.concat(tupleErrors), value));\n    });\n  }\n}\ncreate$1.prototype = TupleSchema.prototype;\n\nfunction create(builder) {\n  return new Lazy(builder);\n}\nclass Lazy {\n  constructor(builder) {\n    this.type = 'lazy';\n    this.__isYupSchema__ = true;\n    this.spec = void 0;\n    this._resolve = (value, options = {}) => {\n      let schema = this.builder(value, options);\n      if (!isSchema(schema)) throw new TypeError('lazy() functions must return a valid schema');\n      if (this.spec.optional) schema = schema.optional();\n      return schema.resolve(options);\n    };\n    this.builder = builder;\n    this.spec = {\n      meta: undefined,\n      optional: false\n    };\n  }\n  clone(spec) {\n    const next = new Lazy(this.builder);\n    next.spec = Object.assign({}, this.spec, spec);\n    return next;\n  }\n  optionality(optional) {\n    const next = this.clone({\n      optional\n    });\n    return next;\n  }\n  optional() {\n    return this.optionality(true);\n  }\n  resolve(options) {\n    return this._resolve(options.value, options);\n  }\n  cast(value, options) {\n    return this._resolve(value, options).cast(value, options);\n  }\n  asNestedTest(config) {\n    let {\n      key,\n      index,\n      parent,\n      options\n    } = config;\n    let value = parent[index != null ? index : key];\n    return this._resolve(value, Object.assign({}, options, {\n      value,\n      parent\n    })).asNestedTest(config);\n  }\n  validate(value, options) {\n    return this._resolve(value, options).validate(value, options);\n  }\n  validateSync(value, options) {\n    return this._resolve(value, options).validateSync(value, options);\n  }\n  validateAt(path, value, options) {\n    return this._resolve(value, options).validateAt(path, value, options);\n  }\n  validateSyncAt(path, value, options) {\n    return this._resolve(value, options).validateSyncAt(path, value, options);\n  }\n  isValid(value, options) {\n    return this._resolve(value, options).isValid(value, options);\n  }\n  isValidSync(value, options) {\n    return this._resolve(value, options).isValidSync(value, options);\n  }\n  describe(options) {\n    return options ? this.resolve(options).describe(options) : {\n      type: 'lazy',\n      meta: this.spec.meta,\n      label: undefined\n    };\n  }\n  meta(...args) {\n    if (args.length === 0) return this.spec.meta;\n    let next = this.clone();\n    next.spec.meta = Object.assign(next.spec.meta || {}, args[0]);\n    return next;\n  }\n}\n\nfunction setLocale(custom) {\n  Object.keys(custom).forEach(type => {\n    // @ts-ignore\n    Object.keys(custom[type]).forEach(method => {\n      // @ts-ignore\n      locale[type][method] = custom[type][method];\n    });\n  });\n}\n\nfunction addMethod(schemaType, name, fn) {\n  if (!schemaType || !isSchema(schemaType.prototype)) throw new TypeError('You must provide a yup schema constructor function');\n  if (typeof name !== 'string') throw new TypeError('A Method name must be provided');\n  if (typeof fn !== 'function') throw new TypeError('Method function must be provided');\n  schemaType.prototype[name] = fn;\n}\n\nexport { ArraySchema, BooleanSchema, DateSchema, MixedSchema, NumberSchema, ObjectSchema, Schema, StringSchema, TupleSchema, ValidationError, addMethod, create$2 as array, create$7 as bool, create$7 as boolean, create$4 as date, getIn, isSchema, create as lazy, create$8 as mixed, create$5 as number, create$3 as object, reach, create$9 as ref, setLocale, create$6 as string, create$1 as tuple };\n","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","/*!\n * @kurkle/color v0.3.2\n * https://github.com/kurkle/color#readme\n * (c) 2023 Jukka Kurkela\n * Released under the MIT License\n */\nfunction round(v) {\n  return v + 0.5 | 0;\n}\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\nfunction p2b(v) {\n  return lim(round(v * 2.55), 0, 255);\n}\nfunction b2p(v) {\n  return lim(round(v / 2.55), 0, 100);\n}\nfunction n2b(v) {\n  return lim(round(v * 255), 0, 255);\n}\nfunction b2n(v) {\n  return lim(round(v / 2.55) / 100, 0, 1);\n}\nfunction n2p(v) {\n  return lim(round(v * 100), 0, 100);\n}\n\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\nconst hex = [...'0123456789ABCDEF'];\nconst h1 = b => hex[b & 0xF];\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\nfunction hexParse(str) {\n  var len = str.length;\n  var ret;\n  if (str[0] === '#') {\n    if (len === 4 || len === 5) {\n      ret = {\n        r: 255 & map$1[str[1]] * 17,\n        g: 255 & map$1[str[2]] * 17,\n        b: 255 & map$1[str[3]] * 17,\n        a: len === 5 ? map$1[str[4]] * 17 : 255\n      };\n    } else if (len === 7 || len === 9) {\n      ret = {\n        r: map$1[str[1]] << 4 | map$1[str[2]],\n        g: map$1[str[3]] << 4 | map$1[str[4]],\n        b: map$1[str[5]] << 4 | map$1[str[6]],\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\n      };\n    }\n  }\n  return ret;\n}\nconst alpha = (a, f) => a < 255 ? f(a) : '';\nfunction hexString(v) {\n  var f = isShort(v) ? h1 : h2;\n  return v\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\n    : undefined;\n}\n\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction hsl2rgbn(h, s, l) {\n  const a = s * Math.min(l, 1 - l);\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\nfunction hsv2rgbn(h, s, v) {\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  return [f(5), f(3), f(1)];\n}\nfunction hwb2rgbn(h, w, b) {\n  const rgb = hsl2rgbn(h, 1, 0.5);\n  let i;\n  if (w + b > 1) {\n    i = 1 / (w + b);\n    w *= i;\n    b *= i;\n  }\n  for (i = 0; i < 3; i++) {\n    rgb[i] *= 1 - w - b;\n    rgb[i] += w;\n  }\n  return rgb;\n}\nfunction hueValue(r, g, b, d, max) {\n  if (r === max) {\n    return ((g - b) / d) + (g < b ? 6 : 0);\n  }\n  if (g === max) {\n    return (b - r) / d + 2;\n  }\n  return (r - g) / d + 4;\n}\nfunction rgb2hsl(v) {\n  const range = 255;\n  const r = v.r / range;\n  const g = v.g / range;\n  const b = v.b / range;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  let h, s, d;\n  if (max !== min) {\n    d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    h = hueValue(r, g, b, d, max);\n    h = h * 60 + 0.5;\n  }\n  return [h | 0, s || 0, l];\n}\nfunction calln(f, a, b, c) {\n  return (\n    Array.isArray(a)\n      ? f(a[0], a[1], a[2])\n      : f(a, b, c)\n  ).map(n2b);\n}\nfunction hsl2rgb(h, s, l) {\n  return calln(hsl2rgbn, h, s, l);\n}\nfunction hwb2rgb(h, w, b) {\n  return calln(hwb2rgbn, h, w, b);\n}\nfunction hsv2rgb(h, s, v) {\n  return calln(hsv2rgbn, h, s, v);\n}\nfunction hue(h) {\n  return (h % 360 + 360) % 360;\n}\nfunction hueParse(str) {\n  const m = HUE_RE.exec(str);\n  let a = 255;\n  let v;\n  if (!m) {\n    return;\n  }\n  if (m[5] !== v) {\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\n  }\n  const h = hue(+m[2]);\n  const p1 = +m[3] / 100;\n  const p2 = +m[4] / 100;\n  if (m[1] === 'hwb') {\n    v = hwb2rgb(h, p1, p2);\n  } else if (m[1] === 'hsv') {\n    v = hsv2rgb(h, p1, p2);\n  } else {\n    v = hsl2rgb(h, p1, p2);\n  }\n  return {\n    r: v[0],\n    g: v[1],\n    b: v[2],\n    a: a\n  };\n}\nfunction rotate(v, deg) {\n  var h = rgb2hsl(v);\n  h[0] = hue(h[0] + deg);\n  h = hsl2rgb(h);\n  v.r = h[0];\n  v.g = h[1];\n  v.b = h[2];\n}\nfunction hslString(v) {\n  if (!v) {\n    return;\n  }\n  const a = rgb2hsl(v);\n  const h = a[0];\n  const s = n2p(a[1]);\n  const l = n2p(a[2]);\n  return v.a < 255\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\n\nconst map = {\n  x: 'dark',\n  Z: 'light',\n  Y: 're',\n  X: 'blu',\n  W: 'gr',\n  V: 'medium',\n  U: 'slate',\n  A: 'ee',\n  T: 'ol',\n  S: 'or',\n  B: 'ra',\n  C: 'lateg',\n  D: 'ights',\n  R: 'in',\n  Q: 'turquois',\n  E: 'hi',\n  P: 'ro',\n  O: 'al',\n  N: 'le',\n  M: 'de',\n  L: 'yello',\n  F: 'en',\n  K: 'ch',\n  G: 'arks',\n  H: 'ea',\n  I: 'ightg',\n  J: 'wh'\n};\nconst names$1 = {\n  OiceXe: 'f0f8ff',\n  antiquewEte: 'faebd7',\n  aqua: 'ffff',\n  aquamarRe: '7fffd4',\n  azuY: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '0',\n  blanKedOmond: 'ffebcd',\n  Xe: 'ff',\n  XeviTet: '8a2be2',\n  bPwn: 'a52a2a',\n  burlywood: 'deb887',\n  caMtXe: '5f9ea0',\n  KartYuse: '7fff00',\n  KocTate: 'd2691e',\n  cSO: 'ff7f50',\n  cSnflowerXe: '6495ed',\n  cSnsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: 'ffff',\n  xXe: '8b',\n  xcyan: '8b8b',\n  xgTMnPd: 'b8860b',\n  xWay: 'a9a9a9',\n  xgYF: '6400',\n  xgYy: 'a9a9a9',\n  xkhaki: 'bdb76b',\n  xmagFta: '8b008b',\n  xTivegYF: '556b2f',\n  xSange: 'ff8c00',\n  xScEd: '9932cc',\n  xYd: '8b0000',\n  xsOmon: 'e9967a',\n  xsHgYF: '8fbc8f',\n  xUXe: '483d8b',\n  xUWay: '2f4f4f',\n  xUgYy: '2f4f4f',\n  xQe: 'ced1',\n  xviTet: '9400d3',\n  dAppRk: 'ff1493',\n  dApskyXe: 'bfff',\n  dimWay: '696969',\n  dimgYy: '696969',\n  dodgerXe: '1e90ff',\n  fiYbrick: 'b22222',\n  flSOwEte: 'fffaf0',\n  foYstWAn: '228b22',\n  fuKsia: 'ff00ff',\n  gaRsbSo: 'dcdcdc',\n  ghostwEte: 'f8f8ff',\n  gTd: 'ffd700',\n  gTMnPd: 'daa520',\n  Way: '808080',\n  gYF: '8000',\n  gYFLw: 'adff2f',\n  gYy: '808080',\n  honeyMw: 'f0fff0',\n  hotpRk: 'ff69b4',\n  RdianYd: 'cd5c5c',\n  Rdigo: '4b0082',\n  ivSy: 'fffff0',\n  khaki: 'f0e68c',\n  lavFMr: 'e6e6fa',\n  lavFMrXsh: 'fff0f5',\n  lawngYF: '7cfc00',\n  NmoncEffon: 'fffacd',\n  ZXe: 'add8e6',\n  ZcSO: 'f08080',\n  Zcyan: 'e0ffff',\n  ZgTMnPdLw: 'fafad2',\n  ZWay: 'd3d3d3',\n  ZgYF: '90ee90',\n  ZgYy: 'd3d3d3',\n  ZpRk: 'ffb6c1',\n  ZsOmon: 'ffa07a',\n  ZsHgYF: '20b2aa',\n  ZskyXe: '87cefa',\n  ZUWay: '778899',\n  ZUgYy: '778899',\n  ZstAlXe: 'b0c4de',\n  ZLw: 'ffffe0',\n  lime: 'ff00',\n  limegYF: '32cd32',\n  lRF: 'faf0e6',\n  magFta: 'ff00ff',\n  maPon: '800000',\n  VaquamarRe: '66cdaa',\n  VXe: 'cd',\n  VScEd: 'ba55d3',\n  VpurpN: '9370db',\n  VsHgYF: '3cb371',\n  VUXe: '7b68ee',\n  VsprRggYF: 'fa9a',\n  VQe: '48d1cc',\n  VviTetYd: 'c71585',\n  midnightXe: '191970',\n  mRtcYam: 'f5fffa',\n  mistyPse: 'ffe4e1',\n  moccasR: 'ffe4b5',\n  navajowEte: 'ffdead',\n  navy: '80',\n  Tdlace: 'fdf5e6',\n  Tive: '808000',\n  TivedBb: '6b8e23',\n  Sange: 'ffa500',\n  SangeYd: 'ff4500',\n  ScEd: 'da70d6',\n  pOegTMnPd: 'eee8aa',\n  pOegYF: '98fb98',\n  pOeQe: 'afeeee',\n  pOeviTetYd: 'db7093',\n  papayawEp: 'ffefd5',\n  pHKpuff: 'ffdab9',\n  peru: 'cd853f',\n  pRk: 'ffc0cb',\n  plum: 'dda0dd',\n  powMrXe: 'b0e0e6',\n  purpN: '800080',\n  YbeccapurpN: '663399',\n  Yd: 'ff0000',\n  Psybrown: 'bc8f8f',\n  PyOXe: '4169e1',\n  saddNbPwn: '8b4513',\n  sOmon: 'fa8072',\n  sandybPwn: 'f4a460',\n  sHgYF: '2e8b57',\n  sHshell: 'fff5ee',\n  siFna: 'a0522d',\n  silver: 'c0c0c0',\n  skyXe: '87ceeb',\n  UXe: '6a5acd',\n  UWay: '708090',\n  UgYy: '708090',\n  snow: 'fffafa',\n  sprRggYF: 'ff7f',\n  stAlXe: '4682b4',\n  tan: 'd2b48c',\n  teO: '8080',\n  tEstN: 'd8bfd8',\n  tomato: 'ff6347',\n  Qe: '40e0d0',\n  viTet: 'ee82ee',\n  JHt: 'f5deb3',\n  wEte: 'ffffff',\n  wEtesmoke: 'f5f5f5',\n  Lw: 'ffff00',\n  LwgYF: '9acd32'\n};\nfunction unpack() {\n  const unpacked = {};\n  const keys = Object.keys(names$1);\n  const tkeys = Object.keys(map);\n  let i, j, k, ok, nk;\n  for (i = 0; i < keys.length; i++) {\n    ok = nk = keys[i];\n    for (j = 0; j < tkeys.length; j++) {\n      k = tkeys[j];\n      nk = nk.replace(k, map[k]);\n    }\n    k = parseInt(names$1[ok], 16);\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\n  }\n  return unpacked;\n}\n\nlet names;\nfunction nameParse(str) {\n  if (!names) {\n    names = unpack();\n    names.transparent = [0, 0, 0, 0];\n  }\n  const a = names[str.toLowerCase()];\n  return a && {\n    r: a[0],\n    g: a[1],\n    b: a[2],\n    a: a.length === 4 ? a[3] : 255\n  };\n}\n\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction rgbParse(str) {\n  const m = RGB_RE.exec(str);\n  let a = 255;\n  let r, g, b;\n  if (!m) {\n    return;\n  }\n  if (m[7] !== r) {\n    const v = +m[7];\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\n  }\n  r = +m[1];\n  g = +m[3];\n  b = +m[5];\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nfunction rgbString(v) {\n  return v && (\n    v.a < 255\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\n  );\n}\n\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\nfunction interpolate(rgb1, rgb2, t) {\n  const r = from(b2n(rgb1.r));\n  const g = from(b2n(rgb1.g));\n  const b = from(b2n(rgb1.b));\n  return {\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\n  };\n}\n\nfunction modHSL(v, i, ratio) {\n  if (v) {\n    let tmp = rgb2hsl(v);\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\n    tmp = hsl2rgb(tmp);\n    v.r = tmp[0];\n    v.g = tmp[1];\n    v.b = tmp[2];\n  }\n}\nfunction clone(v, proto) {\n  return v ? Object.assign(proto || {}, v) : v;\n}\nfunction fromObject(input) {\n  var v = {r: 0, g: 0, b: 0, a: 255};\n  if (Array.isArray(input)) {\n    if (input.length >= 3) {\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\n      if (input.length > 3) {\n        v.a = n2b(input[3]);\n      }\n    }\n  } else {\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\n    v.a = n2b(v.a);\n  }\n  return v;\n}\nfunction functionParse(str) {\n  if (str.charAt(0) === 'r') {\n    return rgbParse(str);\n  }\n  return hueParse(str);\n}\nclass Color {\n  constructor(input) {\n    if (input instanceof Color) {\n      return input;\n    }\n    const type = typeof input;\n    let v;\n    if (type === 'object') {\n      v = fromObject(input);\n    } else if (type === 'string') {\n      v = hexParse(input) || nameParse(input) || functionParse(input);\n    }\n    this._rgb = v;\n    this._valid = !!v;\n  }\n  get valid() {\n    return this._valid;\n  }\n  get rgb() {\n    var v = clone(this._rgb);\n    if (v) {\n      v.a = b2n(v.a);\n    }\n    return v;\n  }\n  set rgb(obj) {\n    this._rgb = fromObject(obj);\n  }\n  rgbString() {\n    return this._valid ? rgbString(this._rgb) : undefined;\n  }\n  hexString() {\n    return this._valid ? hexString(this._rgb) : undefined;\n  }\n  hslString() {\n    return this._valid ? hslString(this._rgb) : undefined;\n  }\n  mix(color, weight) {\n    if (color) {\n      const c1 = this.rgb;\n      const c2 = color.rgb;\n      let w2;\n      const p = weight === w2 ? 0.5 : weight;\n      const w = 2 * p - 1;\n      const a = c1.a - c2.a;\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n      w2 = 1 - w1;\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\n      c1.a = p * c1.a + (1 - p) * c2.a;\n      this.rgb = c1;\n    }\n    return this;\n  }\n  interpolate(color, t) {\n    if (color) {\n      this._rgb = interpolate(this._rgb, color._rgb, t);\n    }\n    return this;\n  }\n  clone() {\n    return new Color(this.rgb);\n  }\n  alpha(a) {\n    this._rgb.a = n2b(a);\n    return this;\n  }\n  clearer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 - ratio;\n    return this;\n  }\n  greyscale() {\n    const rgb = this._rgb;\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\n    rgb.r = rgb.g = rgb.b = val;\n    return this;\n  }\n  opaquer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 + ratio;\n    return this;\n  }\n  negate() {\n    const v = this._rgb;\n    v.r = 255 - v.r;\n    v.g = 255 - v.g;\n    v.b = 255 - v.b;\n    return this;\n  }\n  lighten(ratio) {\n    modHSL(this._rgb, 2, ratio);\n    return this;\n  }\n  darken(ratio) {\n    modHSL(this._rgb, 2, -ratio);\n    return this;\n  }\n  saturate(ratio) {\n    modHSL(this._rgb, 1, ratio);\n    return this;\n  }\n  desaturate(ratio) {\n    modHSL(this._rgb, 1, -ratio);\n    return this;\n  }\n  rotate(deg) {\n    rotate(this._rgb, deg);\n    return this;\n  }\n}\n\nfunction index_esm(input) {\n  return new Color(input);\n}\n\nexport { Color, b2n, b2p, index_esm as default, hexParse, hexString, hsl2rgb, hslString, hsv2rgb, hueParse, hwb2rgb, lim, n2b, n2p, nameParse, p2b, rgb2hsl, rgbParse, rgbString, rotate, round };\n","/**\n * @namespace Chart.helpers\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ActiveDataPoint, ChartEvent} from '../types/index.js';\n\n/**\n * An empty function that can be used, for example, for optional callback.\n */\nexport function noop() {\n  /* noop */\n}\n\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */\nexport const uid = (() => {\n  let id = 0;\n  return () => id++;\n})();\n\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isNullOrUndef(value: unknown): value is null | undefined {\n  return value === null || typeof value === 'undefined';\n}\n\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */\nexport function isArray<T = unknown>(value: unknown): value is T[] {\n  if (Array.isArray && Array.isArray(value)) {\n    return true;\n  }\n  const type = Object.prototype.toString.call(value);\n  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isObject(value: unknown): value is AnyObject {\n  return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */\nfunction isNumberFinite(value: unknown): value is number {\n  return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\nexport {\n  isNumberFinite as isFinite,\n};\n\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */\nexport function finiteOrDefault(value: unknown, defaultValue: number) {\n  return isNumberFinite(value) ? value : defaultValue;\n}\n\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */\nexport function valueOrDefault<T>(value: T | undefined, defaultValue: T) {\n  return typeof value === 'undefined' ? defaultValue : value;\n}\n\nexport const toPercentage = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100\n    : +value / dimension;\n\nexport const toDimension = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100 * dimension\n    : +value;\n\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */\nexport function callback<T extends (this: TA, ...restArgs: unknown[]) => R, TA, R>(\n  fn: T | undefined,\n  args: unknown[],\n  thisArg?: TA\n): R | undefined {\n  if (fn && typeof fn.call === 'function') {\n    return fn.apply(thisArg, args);\n  }\n}\n\n/**\n * Note(SB) for performance sake, this method should only be used when loopable type\n * is unknown or in none intensive code (not called often and small loopable). Else\n * it's preferable to use a regular for() loop and save extra function calls.\n * @param loopable - The object or array to be iterated.\n * @param fn - The function to call for each item.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n * @param [reverse] - If true, iterates backward on the loopable.\n */\nexport function each<T, TA>(\n  loopable: Record<string, T>,\n  fn: (this: TA, v: T, i: string) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[],\n  fn: (this: TA, v: T, i: number) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[] | Record<string, T>,\n  fn: (this: TA, v: T, i: any) => void,\n  thisArg?: TA,\n  reverse?: boolean\n) {\n  let i: number, len: number, keys: string[];\n  if (isArray(loopable)) {\n    len = loopable.length;\n    if (reverse) {\n      for (i = len - 1; i >= 0; i--) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    }\n  } else if (isObject(loopable)) {\n    keys = Object.keys(loopable);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      fn.call(thisArg, loopable[keys[i]], keys[i]);\n    }\n  }\n}\n\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */\nexport function _elementsEqual(a0: ActiveDataPoint[], a1: ActiveDataPoint[]) {\n  let i: number, ilen: number, v0: ActiveDataPoint, v1: ActiveDataPoint;\n\n  if (!a0 || !a1 || a0.length !== a1.length) {\n    return false;\n  }\n\n  for (i = 0, ilen = a0.length; i < ilen; ++i) {\n    v0 = a0[i];\n    v1 = a1[i];\n\n    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */\nexport function clone<T>(source: T): T {\n  if (isArray(source)) {\n    return source.map(clone) as unknown as T;\n  }\n\n  if (isObject(source)) {\n    const target = Object.create(null);\n    const keys = Object.keys(source);\n    const klen = keys.length;\n    let k = 0;\n\n    for (; k < klen; ++k) {\n      target[keys[k]] = clone(source[keys[k]]);\n    }\n\n    return target;\n  }\n\n  return source;\n}\n\nfunction isValidKey(key: string) {\n  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\n}\n\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */\nexport function _merger(key: string, target: AnyObject, source: AnyObject, options: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    merge(tval, sval, options);\n  } else {\n    target[key] = clone(sval);\n  }\n}\n\nexport interface MergeOptions {\n  merger?: (key: string, target: AnyObject, source: AnyObject, options?: AnyObject) => void;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` with the given `options`.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @param [options] - Merging options:\n * @param [options.merger] - The merge method (key, target, source, options)\n * @returns The `target` object.\n */\nexport function merge<T>(target: T, source: [], options?: MergeOptions): T;\nexport function merge<T, S1>(target: T, source: S1, options?: MergeOptions): T & S1;\nexport function merge<T, S1>(target: T, source: [S1], options?: MergeOptions): T & S1;\nexport function merge<T, S1, S2>(target: T, source: [S1, S2], options?: MergeOptions): T & S1 & S2;\nexport function merge<T, S1, S2, S3>(target: T, source: [S1, S2, S3], options?: MergeOptions): T & S1 & S2 & S3;\nexport function merge<T, S1, S2, S3, S4>(\n  target: T,\n  source: [S1, S2, S3, S4],\n  options?: MergeOptions\n): T & S1 & S2 & S3 & S4;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject {\n  const sources = isArray(source) ? source : [source];\n  const ilen = sources.length;\n\n  if (!isObject(target)) {\n    return target as AnyObject;\n  }\n\n  options = options || {};\n  const merger = options.merger || _merger;\n  let current: AnyObject;\n\n  for (let i = 0; i < ilen; ++i) {\n    current = sources[i];\n    if (!isObject(current)) {\n      continue;\n    }\n\n    const keys = Object.keys(current);\n    for (let k = 0, klen = keys.length; k < klen; ++k) {\n      merger(keys[k], target, current, options as AnyObject);\n    }\n  }\n\n  return target;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` *only* if not defined in target.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @returns The `target` object.\n */\nexport function mergeIf<T>(target: T, source: []): T;\nexport function mergeIf<T, S1>(target: T, source: S1): T & S1;\nexport function mergeIf<T, S1>(target: T, source: [S1]): T & S1;\nexport function mergeIf<T, S1, S2>(target: T, source: [S1, S2]): T & S1 & S2;\nexport function mergeIf<T, S1, S2, S3>(target: T, source: [S1, S2, S3]): T & S1 & S2 & S3;\nexport function mergeIf<T, S1, S2, S3, S4>(target: T, source: [S1, S2, S3, S4]): T & S1 & S2 & S3 & S4;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return merge<T>(target, source, {merger: _mergerIf});\n}\n\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */\nexport function _mergerIf(key: string, target: AnyObject, source: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    mergeIf(tval, sval);\n  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n    target[key] = clone(sval);\n  }\n}\n\n/**\n * @private\n */\nexport function _deprecated(scope: string, value: unknown, previous: string, current: string) {\n  if (value !== undefined) {\n    console.warn(scope + ': \"' + previous +\n      '\" is deprecated. Please use \"' + current + '\" instead');\n  }\n}\n\n// resolveObjectKey resolver cache\nconst keyResolvers = {\n  // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n  '': v => v,\n  // default resolvers\n  x: o => o.x,\n  y: o => o.y\n};\n\n/**\n * @private\n */\nexport function _splitKey(key: string) {\n  const parts = key.split('.');\n  const keys: string[] = [];\n  let tmp = '';\n  for (const part of parts) {\n    tmp += part;\n    if (tmp.endsWith('\\\\')) {\n      tmp = tmp.slice(0, -1) + '.';\n    } else {\n      keys.push(tmp);\n      tmp = '';\n    }\n  }\n  return keys;\n}\n\nfunction _getKeyResolver(key: string) {\n  const keys = _splitKey(key);\n  return obj => {\n    for (const k of keys) {\n      if (k === '') {\n        // For backward compatibility:\n        // Chart.helpers.core resolveObjectKey should break at empty key\n        break;\n      }\n      obj = obj && obj[k];\n    }\n    return obj;\n  };\n}\n\nexport function resolveObjectKey(obj: AnyObject, key: string): AnyObject {\n  const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n  return resolver(obj);\n}\n\n/**\n * @private\n */\nexport function _capitalize(str: string) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\nexport const defined = (value: unknown) => typeof value !== 'undefined';\n\nexport const isFunction = (value: unknown): value is (...args: any[]) => any => typeof value === 'function';\n\n// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\nexport const setsEqual = <T>(a: Set<T>, b: Set<T>) => {\n  if (a.size !== b.size) {\n    return false;\n  }\n\n  for (const item of a) {\n    if (!b.has(item)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @param e - The event\n * @private\n */\nexport function _isClickEvent(e: ChartEvent) {\n  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n","import type {Point} from '../types/geometric.js';\nimport {isFinite as isFiniteNumber} from './helpers.core.js';\n\n/**\n * @alias Chart.helpers.math\n * @namespace\n */\n\nexport const PI = Math.PI;\nexport const TAU = 2 * PI;\nexport const PITAU = TAU + PI;\nexport const INFINITY = Number.POSITIVE_INFINITY;\nexport const RAD_PER_DEG = PI / 180;\nexport const HALF_PI = PI / 2;\nexport const QUARTER_PI = PI / 4;\nexport const TWO_THIRDS_PI = PI * 2 / 3;\n\nexport const log10 = Math.log10;\nexport const sign = Math.sign;\n\nexport function almostEquals(x: number, y: number, epsilon: number) {\n  return Math.abs(x - y) < epsilon;\n}\n\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */\nexport function niceNum(range: number) {\n  const roundedRange = Math.round(range);\n  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n  const niceRange = Math.pow(10, Math.floor(log10(range)));\n  const fraction = range / niceRange;\n  const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n  return niceFraction * niceRange;\n}\n\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */\nexport function _factorize(value: number) {\n  const result: number[] = [];\n  const sqrt = Math.sqrt(value);\n  let i: number;\n\n  for (i = 1; i < sqrt; i++) {\n    if (value % i === 0) {\n      result.push(i);\n      result.push(value / i);\n    }\n  }\n  if (sqrt === (sqrt | 0)) { // if value is a square number\n    result.push(sqrt);\n  }\n\n  result.sort((a, b) => a - b).pop();\n  return result;\n}\n\nexport function isNumber(n: unknown): n is number {\n  return !isNaN(parseFloat(n as string)) && isFinite(n as number);\n}\n\nexport function almostWhole(x: number, epsilon: number) {\n  const rounded = Math.round(x);\n  return ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\n}\n\n/**\n * @private\n */\nexport function _setMinAndMaxByKey(\n  array: Record<string, number>[],\n  target: { min: number, max: number },\n  property: string\n) {\n  let i: number, ilen: number, value: number;\n\n  for (i = 0, ilen = array.length; i < ilen; i++) {\n    value = array[i][property];\n    if (!isNaN(value)) {\n      target.min = Math.min(target.min, value);\n      target.max = Math.max(target.max, value);\n    }\n  }\n}\n\nexport function toRadians(degrees: number) {\n  return degrees * (PI / 180);\n}\n\nexport function toDegrees(radians: number) {\n  return radians * (180 / PI);\n}\n\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */\nexport function _decimalPlaces(x: number) {\n  if (!isFiniteNumber(x)) {\n    return;\n  }\n  let e = 1;\n  let p = 0;\n  while (Math.round(x * e) / e !== x) {\n    e *= 10;\n    p++;\n  }\n  return p;\n}\n\n// Gets the angle from vertical upright to the point about a centre.\nexport function getAngleFromPoint(\n  centrePoint: Point,\n  anglePoint: Point\n) {\n  const distanceFromXCenter = anglePoint.x - centrePoint.x;\n  const distanceFromYCenter = anglePoint.y - centrePoint.y;\n  const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n  let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n  if (angle < (-0.5 * PI)) {\n    angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n  }\n\n  return {\n    angle,\n    distance: radialDistanceFromCenter\n  };\n}\n\nexport function distanceBetweenPoints(pt1: Point, pt2: Point) {\n  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */\nexport function _angleDiff(a: number, b: number) {\n  return (a - b + PITAU) % TAU - PI;\n}\n\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */\nexport function _normalizeAngle(a: number) {\n  return (a % TAU + TAU) % TAU;\n}\n\n/**\n * @private\n */\nexport function _angleBetween(angle: number, start: number, end: number, sameAngleIsFullCircle?: boolean) {\n  const a = _normalizeAngle(angle);\n  const s = _normalizeAngle(start);\n  const e = _normalizeAngle(end);\n  const angleToStart = _normalizeAngle(s - a);\n  const angleToEnd = _normalizeAngle(e - a);\n  const startToAngle = _normalizeAngle(a - s);\n  const endToAngle = _normalizeAngle(a - e);\n  return a === s || a === e || (sameAngleIsFullCircle && s === e)\n    || (angleToStart > angleToEnd && startToAngle < endToAngle);\n}\n\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */\nexport function _limitValue(value: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * @param {number} value\n * @private\n */\nexport function _int16Range(value: number) {\n  return _limitValue(value, -32768, 32767);\n}\n\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */\nexport function _isBetween(value: number, start: number, end: number, epsilon = 1e-6) {\n  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n","import {_capitalize} from './helpers.core.js';\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param value - value to find\n * @param cmp\n * @private\n */\nexport function _lookup(\n  table: number[],\n  value: number,\n  cmp?: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup<T>(\n  table: T[],\n  value: number,\n  cmp: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup(\n  table: unknown[],\n  value: number,\n  cmp?: (value: number) => boolean\n) {\n  cmp = cmp || ((index) => table[index] < value);\n  let hi = table.length - 1;\n  let lo = 0;\n  let mid: number;\n\n  while (hi - lo > 1) {\n    mid = (lo + hi) >> 1;\n    if (cmp(mid)) {\n      lo = mid;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return {lo, hi};\n}\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */\nexport const _lookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number,\n  last?: boolean\n) =>\n  _lookup(table, value, last\n    ? index => {\n      const ti = table[index][key];\n      return ti < value || ti === value && table[index + 1][key] === value;\n    }\n    : index => table[index][key] < value);\n\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */\nexport const _rlookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number\n) =>\n  _lookup(table, value, index => table[index][key] >= value);\n\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */\nexport function _filterBetween(values: number[], min: number, max: number) {\n  let start = 0;\n  let end = values.length;\n\n  while (start < end && values[start] < min) {\n    start++;\n  }\n  while (end > start && values[end - 1] > max) {\n    end--;\n  }\n\n  return start > 0 || end < values.length\n    ? values.slice(start, end)\n    : values;\n}\n\nconst arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'] as const;\n\nexport interface ArrayListener<T> {\n  _onDataPush?(...item: T[]): void;\n  _onDataPop?(): void;\n  _onDataShift?(): void;\n  _onDataSplice?(index: number, deleteCount: number, ...items: T[]): void;\n  _onDataUnshift?(...item: T[]): void;\n}\n\n/**\n * Hooks the array methods that add or remove values ('push', pop', 'shift', 'splice',\n * 'unshift') and notify the listener AFTER the array has been altered. Listeners are\n * called on the '_onData*' callbacks (e.g. _onDataPush, etc.) with same arguments.\n */\nexport function listenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function listenArrayEvents(array, listener) {\n  if (array._chartjs) {\n    array._chartjs.listeners.push(listener);\n    return;\n  }\n\n  Object.defineProperty(array, '_chartjs', {\n    configurable: true,\n    enumerable: false,\n    value: {\n      listeners: [listener]\n    }\n  });\n\n  arrayEvents.forEach((key) => {\n    const method = '_onData' + _capitalize(key);\n    const base = array[key];\n\n    Object.defineProperty(array, key, {\n      configurable: true,\n      enumerable: false,\n      value(...args) {\n        const res = base.apply(this, args);\n\n        array._chartjs.listeners.forEach((object) => {\n          if (typeof object[method] === 'function') {\n            object[method](...args);\n          }\n        });\n\n        return res;\n      }\n    });\n  });\n}\n\n\n/**\n * Removes the given array event listener and cleanup extra attached properties (such as\n * the _chartjs stub and overridden methods) if array doesn't have any more listeners.\n */\nexport function unlistenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function unlistenArrayEvents(array, listener) {\n  const stub = array._chartjs;\n  if (!stub) {\n    return;\n  }\n\n  const listeners = stub.listeners;\n  const index = listeners.indexOf(listener);\n  if (index !== -1) {\n    listeners.splice(index, 1);\n  }\n\n  if (listeners.length > 0) {\n    return;\n  }\n\n  arrayEvents.forEach((key) => {\n    delete array[key];\n  });\n\n  delete array._chartjs;\n}\n\n/**\n * @param items\n */\nexport function _arrayUnique<T>(items: T[]) {\n  const set = new Set<T>();\n  let i: number, ilen: number;\n\n  for (i = 0, ilen = items.length; i < ilen; ++i) {\n    set.add(items[i]);\n  }\n\n  if (set.size === ilen) {\n    return items;\n  }\n\n  return Array.from(set);\n}\n","import type {ChartMeta, PointElement} from '../types/index.js';\n\nimport {_limitValue} from './helpers.math.js';\nimport {_lookupByKey} from './helpers.collection.js';\n\nexport function fontString(pixelSize: number, fontStyle: string, fontFamily: string) {\n  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n\n/**\n* Request animation polyfill\n*/\nexport const requestAnimFrame = (function() {\n  if (typeof window === 'undefined') {\n    return function(callback) {\n      return callback();\n    };\n  }\n  return window.requestAnimationFrame;\n}());\n\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */\nexport function throttled<TArgs extends Array<any>>(\n  fn: (...args: TArgs) => void,\n  thisArg: any,\n) {\n  let argsToUse = [] as TArgs;\n  let ticking = false;\n\n  return function(...args: TArgs) {\n    // Save the args for use later\n    argsToUse = args;\n    if (!ticking) {\n      ticking = true;\n      requestAnimFrame.call(window, () => {\n        ticking = false;\n        fn.apply(thisArg, argsToUse);\n      });\n    }\n  };\n}\n\n/**\n * Debounces calling `fn` for `delay` ms\n */\nexport function debounce<TArgs extends Array<any>>(fn: (...args: TArgs) => void, delay: number) {\n  let timeout;\n  return function(...args: TArgs) {\n    if (delay) {\n      clearTimeout(timeout);\n      timeout = setTimeout(fn, delay, args);\n    } else {\n      fn.apply(this, args);\n    }\n    return delay;\n  };\n}\n\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */\nexport const _toLeftRightCenter = (align: 'start' | 'end' | 'center') => align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */\nexport const _alignStartEnd = (align: 'start' | 'end' | 'center', start: number, end: number) => align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */\nexport const _textX = (align: 'left' | 'right' | 'center', left: number, right: number, rtl: boolean) => {\n  const check = rtl ? 'left' : 'right';\n  return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n\n/**\n * Return start and count of visible points.\n * @private\n */\nexport function _getStartAndCountOfVisiblePoints(meta: ChartMeta<'line' | 'scatter'>, points: PointElement[], animationsDisabled: boolean) {\n  const pointCount = points.length;\n\n  let start = 0;\n  let count = pointCount;\n\n  if (meta._sorted) {\n    const {iScale, _parsed} = meta;\n    const axis = iScale.axis;\n    const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\n\n    if (minDefined) {\n      start = _limitValue(Math.min(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, iScale.axis, min).lo,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo),\n      0, pointCount - 1);\n    }\n    if (maxDefined) {\n      count = _limitValue(Math.max(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, iScale.axis, max, true).hi + 1,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1),\n      start, pointCount) - start;\n    } else {\n      count = pointCount - start;\n    }\n  }\n\n  return {start, count};\n}\n\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */\nexport function _scaleRangesChanged(meta) {\n  const {xScale, yScale, _scaleRanges} = meta;\n  const newRanges = {\n    xmin: xScale.min,\n    xmax: xScale.max,\n    ymin: yScale.min,\n    ymax: yScale.max\n  };\n  if (!_scaleRanges) {\n    meta._scaleRanges = newRanges;\n    return true;\n  }\n  const changed = _scaleRanges.xmin !== xScale.min\n\t\t|| _scaleRanges.xmax !== xScale.max\n\t\t|| _scaleRanges.ymin !== yScale.min\n\t\t|| _scaleRanges.ymax !== yScale.max;\n\n  Object.assign(_scaleRanges, newRanges);\n  return changed;\n}\n","import {PI, TAU, HALF_PI} from './helpers.math.js';\n\nconst atEdge = (t: number) => t === 0 || t === 1;\nconst elasticIn = (t: number, s: number, p: number) => -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t: number, s: number, p: number) => Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */\nconst effects = {\n  linear: (t: number) => t,\n\n  easeInQuad: (t: number) => t * t,\n\n  easeOutQuad: (t: number) => -t * (t - 2),\n\n  easeInOutQuad: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t\n    : -0.5 * ((--t) * (t - 2) - 1),\n\n  easeInCubic: (t: number) => t * t * t,\n\n  easeOutCubic: (t: number) => (t -= 1) * t * t + 1,\n\n  easeInOutCubic: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t\n    : 0.5 * ((t -= 2) * t * t + 2),\n\n  easeInQuart: (t: number) => t * t * t * t,\n\n  easeOutQuart: (t: number) => -((t -= 1) * t * t * t - 1),\n\n  easeInOutQuart: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t\n    : -0.5 * ((t -= 2) * t * t * t - 2),\n\n  easeInQuint: (t: number) => t * t * t * t * t,\n\n  easeOutQuint: (t: number) => (t -= 1) * t * t * t * t + 1,\n\n  easeInOutQuint: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t * t\n    : 0.5 * ((t -= 2) * t * t * t * t + 2),\n\n  easeInSine: (t: number) => -Math.cos(t * HALF_PI) + 1,\n\n  easeOutSine: (t: number) => Math.sin(t * HALF_PI),\n\n  easeInOutSine: (t: number) => -0.5 * (Math.cos(PI * t) - 1),\n\n  easeInExpo: (t: number) => (t === 0) ? 0 : Math.pow(2, 10 * (t - 1)),\n\n  easeOutExpo: (t: number) => (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1,\n\n  easeInOutExpo: (t: number) => atEdge(t) ? t : t < 0.5\n    ? 0.5 * Math.pow(2, 10 * (t * 2 - 1))\n    : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n\n  easeInCirc: (t: number) => (t >= 1) ? t : -(Math.sqrt(1 - t * t) - 1),\n\n  easeOutCirc: (t: number) => Math.sqrt(1 - (t -= 1) * t),\n\n  easeInOutCirc: (t: number) => ((t /= 0.5) < 1)\n    ? -0.5 * (Math.sqrt(1 - t * t) - 1)\n    : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n\n  easeInElastic: (t: number) => atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n\n  easeOutElastic: (t: number) => atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n\n  easeInOutElastic(t: number) {\n    const s = 0.1125;\n    const p = 0.45;\n    return atEdge(t) ? t :\n      t < 0.5\n        ? 0.5 * elasticIn(t * 2, s, p)\n        : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n  },\n\n  easeInBack(t: number) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n\n  easeOutBack(t: number) {\n    const s = 1.70158;\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\n  },\n\n  easeInOutBack(t: number) {\n    let s = 1.70158;\n    if ((t /= 0.5) < 1) {\n      return 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\n    }\n    return 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n  },\n\n  easeInBounce: (t: number) => 1 - effects.easeOutBounce(1 - t),\n\n  easeOutBounce(t: number) {\n    const m = 7.5625;\n    const d = 2.75;\n    if (t < (1 / d)) {\n      return m * t * t;\n    }\n    if (t < (2 / d)) {\n      return m * (t -= (1.5 / d)) * t + 0.75;\n    }\n    if (t < (2.5 / d)) {\n      return m * (t -= (2.25 / d)) * t + 0.9375;\n    }\n    return m * (t -= (2.625 / d)) * t + 0.984375;\n  },\n\n  easeInOutBounce: (t: number) => (t < 0.5)\n    ? effects.easeInBounce(t * 2) * 0.5\n    : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5,\n} as const;\n\nexport type EasingFunction = keyof typeof effects\n\nexport default effects;\n","import {Color} from '@kurkle/color';\n\nexport function isPatternOrGradient(value: unknown): value is CanvasPattern | CanvasGradient {\n  if (value && typeof value === 'object') {\n    const type = value.toString();\n    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n  }\n\n  return false;\n}\n\nexport function color(value: CanvasGradient): CanvasGradient;\nexport function color(value: CanvasPattern): CanvasPattern;\nexport function color(\n  value:\n  | string\n  | { r: number; g: number; b: number; a: number }\n  | [number, number, number]\n  | [number, number, number, number]\n): Color;\nexport function color(value) {\n  return isPatternOrGradient(value) ? value : new Color(value);\n}\n\nexport function getHoverColor(value: CanvasGradient): CanvasGradient;\nexport function getHoverColor(value: CanvasPattern): CanvasPattern;\nexport function getHoverColor(value: string): string;\nexport function getHoverColor(value) {\n  return isPatternOrGradient(value)\n    ? value\n    : new Color(value).saturate(0.5).darken(0.1).hexString();\n}\n","const numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];\nconst colors = ['color', 'borderColor', 'backgroundColor'];\n\nexport function applyAnimationsDefaults(defaults) {\n  defaults.set('animation', {\n    delay: undefined,\n    duration: 1000,\n    easing: 'easeOutQuart',\n    fn: undefined,\n    from: undefined,\n    loop: undefined,\n    to: undefined,\n    type: undefined,\n  });\n\n  defaults.describe('animation', {\n    _fallback: false,\n    _indexable: false,\n    _scriptable: (name) => name !== 'onProgress' && name !== 'onComplete' && name !== 'fn',\n  });\n\n  defaults.set('animations', {\n    colors: {\n      type: 'color',\n      properties: colors\n    },\n    numbers: {\n      type: 'number',\n      properties: numbers\n    },\n  });\n\n  defaults.describe('animations', {\n    _fallback: 'animation',\n  });\n\n  defaults.set('transitions', {\n    active: {\n      animation: {\n        duration: 400\n      }\n    },\n    resize: {\n      animation: {\n        duration: 0\n      }\n    },\n    show: {\n      animations: {\n        colors: {\n          from: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          duration: 0 // show immediately\n        },\n      }\n    },\n    hide: {\n      animations: {\n        colors: {\n          to: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          easing: 'linear',\n          fn: v => v | 0 // for keeping the dataset visible all the way through the animation\n        },\n      }\n    }\n  });\n}\n","\nconst intlCache = new Map<string, Intl.NumberFormat>();\n\nfunction getNumberFormat(locale: string, options?: Intl.NumberFormatOptions) {\n  options = options || {};\n  const cacheKey = locale + JSON.stringify(options);\n  let formatter = intlCache.get(cacheKey);\n  if (!formatter) {\n    formatter = new Intl.NumberFormat(locale, options);\n    intlCache.set(cacheKey, formatter);\n  }\n  return formatter;\n}\n\nexport function formatNumber(num: number, locale: string, options?: Intl.NumberFormatOptions) {\n  return getNumberFormat(locale, options).format(num);\n}\n","import {isArray} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {log10} from '../helpers/helpers.math.js';\n\n/**\n * Namespace to hold formatters for different types of ticks\n * @namespace Chart.Ticks.formatters\n */\nconst formatters = {\n  /**\n   * Formatter for value labels\n   * @method Chart.Ticks.formatters.values\n   * @param value the value to display\n   * @return {string|string[]} the label to display\n   */\n  values(value) {\n    return isArray(value) ? /** @type {string[]} */ (value) : '' + value;\n  },\n\n  /**\n   * Formatter for numeric ticks\n   * @method Chart.Ticks.formatters.numeric\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  numeric(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0'; // never show decimal places for 0\n    }\n\n    const locale = this.chart.options.locale;\n    let notation;\n    let delta = tickValue; // This is used when there are less than 2 ticks as the tick interval.\n\n    if (ticks.length > 1) {\n      // all ticks are small or there huge numbers; use scientific notation\n      const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n      if (maxTick < 1e-4 || maxTick > 1e+15) {\n        notation = 'scientific';\n      }\n\n      delta = calculateDelta(tickValue, ticks);\n    }\n\n    const logDelta = log10(Math.abs(delta));\n    const numDecimal = Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0); // toFixed has a max of 20 decimal places\n\n    const options = {notation, minimumFractionDigits: numDecimal, maximumFractionDigits: numDecimal};\n    Object.assign(options, this.options.ticks.format);\n\n    return formatNumber(tickValue, locale, options);\n  },\n\n\n  /**\n   * Formatter for logarithmic ticks\n   * @method Chart.Ticks.formatters.logarithmic\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  logarithmic(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n    const remain = ticks[index].significand || (tickValue / (Math.pow(10, Math.floor(log10(tickValue)))));\n    if ([1, 2, 3, 5, 10, 15].includes(remain) || index > 0.8 * ticks.length) {\n      return formatters.numeric.call(this, tickValue, index, ticks);\n    }\n    return '';\n  }\n\n};\n\n\nfunction calculateDelta(tickValue, ticks) {\n  // Figure out how many digits to show\n  // The space between the first two ticks might be smaller than normal spacing\n  let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n\n  // If we have a number like 2.5 as the delta, figure out how many decimal places we need\n  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n    // not an integer\n    delta = tickValue - Math.floor(tickValue);\n  }\n  return delta;\n}\n\n/**\n * Namespace to hold static tick generation functions\n * @namespace Chart.Ticks\n */\nexport default {formatters};\n","import {getHoverColor} from '../helpers/helpers.color.js';\nimport {isObject, merge, valueOrDefault} from '../helpers/helpers.core.js';\nimport {applyAnimationsDefaults} from './core.animations.defaults.js';\nimport {applyLayoutsDefaults} from './core.layouts.defaults.js';\nimport {applyScaleDefaults} from './core.scale.defaults.js';\n\nexport const overrides = Object.create(null);\nexport const descriptors = Object.create(null);\n\n/**\n * @param {object} node\n * @param {string} key\n * @return {object}\n */\nfunction getScope(node, key) {\n  if (!key) {\n    return node;\n  }\n  const keys = key.split('.');\n  for (let i = 0, n = keys.length; i < n; ++i) {\n    const k = keys[i];\n    node = node[k] || (node[k] = Object.create(null));\n  }\n  return node;\n}\n\nfunction set(root, scope, values) {\n  if (typeof scope === 'string') {\n    return merge(getScope(root, scope), values);\n  }\n  return merge(getScope(root, ''), scope);\n}\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Defaults {\n  constructor(_descriptors, _appliers) {\n    this.animation = undefined;\n    this.backgroundColor = 'rgba(0,0,0,0.1)';\n    this.borderColor = 'rgba(0,0,0,0.1)';\n    this.color = '#666';\n    this.datasets = {};\n    this.devicePixelRatio = (context) => context.chart.platform.getDevicePixelRatio();\n    this.elements = {};\n    this.events = [\n      'mousemove',\n      'mouseout',\n      'click',\n      'touchstart',\n      'touchmove'\n    ];\n    this.font = {\n      family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n      size: 12,\n      style: 'normal',\n      lineHeight: 1.2,\n      weight: null\n    };\n    this.hover = {};\n    this.hoverBackgroundColor = (ctx, options) => getHoverColor(options.backgroundColor);\n    this.hoverBorderColor = (ctx, options) => getHoverColor(options.borderColor);\n    this.hoverColor = (ctx, options) => getHoverColor(options.color);\n    this.indexAxis = 'x';\n    this.interaction = {\n      mode: 'nearest',\n      intersect: true,\n      includeInvisible: false\n    };\n    this.maintainAspectRatio = true;\n    this.onHover = null;\n    this.onClick = null;\n    this.parsing = true;\n    this.plugins = {};\n    this.responsive = true;\n    this.scale = undefined;\n    this.scales = {};\n    this.showLine = true;\n    this.drawActiveElementsOnTop = true;\n\n    this.describe(_descriptors);\n    this.apply(_appliers);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  set(scope, values) {\n    return set(this, scope, values);\n  }\n\n  /**\n\t * @param {string} scope\n\t */\n  get(scope) {\n    return getScope(this, scope);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  describe(scope, values) {\n    return set(descriptors, scope, values);\n  }\n\n  override(scope, values) {\n    return set(overrides, scope, values);\n  }\n\n  /**\n\t * Routes the named defaults to fallback to another scope/name.\n\t * This routing is useful when those target values, like defaults.color, are changed runtime.\n\t * If the values would be copied, the runtime change would not take effect. By routing, the\n\t * fallback is evaluated at each access, so its always up to date.\n\t *\n\t * Example:\n\t *\n\t * \tdefaults.route('elements.arc', 'backgroundColor', '', 'color')\n\t *   - reads the backgroundColor from defaults.color when undefined locally\n\t *\n\t * @param {string} scope Scope this route applies to.\n\t * @param {string} name Property name that should be routed to different namespace when not defined here.\n\t * @param {string} targetScope The namespace where those properties should be routed to.\n\t * Empty string ('') is the root of defaults.\n\t * @param {string} targetName The target name in the target scope the property should be routed to.\n\t */\n  route(scope, name, targetScope, targetName) {\n    const scopeObject = getScope(this, scope);\n    const targetScopeObject = getScope(this, targetScope);\n    const privateName = '_' + name;\n\n    Object.defineProperties(scopeObject, {\n      // A private property is defined to hold the actual value, when this property is set in its scope (set in the setter)\n      [privateName]: {\n        value: scopeObject[name],\n        writable: true\n      },\n      // The actual property is defined as getter/setter so we can do the routing when value is not locally set.\n      [name]: {\n        enumerable: true,\n        get() {\n          const local = this[privateName];\n          const target = targetScopeObject[targetName];\n          if (isObject(local)) {\n            return Object.assign({}, target, local);\n          }\n          return valueOrDefault(local, target);\n        },\n        set(value) {\n          this[privateName] = value;\n        }\n      }\n    });\n  }\n\n  apply(appliers) {\n    appliers.forEach((apply) => apply(this));\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Defaults({\n  _scriptable: (name) => !name.startsWith('on'),\n  _indexable: (name) => name !== 'events',\n  hover: {\n    _fallback: 'interaction'\n  },\n  interaction: {\n    _scriptable: false,\n    _indexable: false,\n  }\n}, [applyAnimationsDefaults, applyLayoutsDefaults, applyScaleDefaults]);\n","export function applyLayoutsDefaults(defaults) {\n  defaults.set('layout', {\n    autoPadding: true,\n    padding: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }\n  });\n}\n","import Ticks from './core.ticks.js';\n\nexport function applyScaleDefaults(defaults) {\n  defaults.set('scale', {\n    display: true,\n    offset: false,\n    reverse: false,\n    beginAtZero: false,\n\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 3.0.0\n     */\n    bounds: 'ticks',\n\n    /**\n     * Addition grace added to max and reduced from min data value.\n     * @since 3.0.0\n     */\n    grace: 0,\n\n    // grid line settings\n    grid: {\n      display: true,\n      lineWidth: 1,\n      drawOnChartArea: true,\n      drawTicks: true,\n      tickLength: 8,\n      tickWidth: (_ctx, options) => options.lineWidth,\n      tickColor: (_ctx, options) => options.color,\n      offset: false,\n    },\n\n    border: {\n      display: true,\n      dash: [],\n      dashOffset: 0.0,\n      width: 1\n    },\n\n    // scale title\n    title: {\n      // display property\n      display: false,\n\n      // actual label\n      text: '',\n\n      // top/bottom padding\n      padding: {\n        top: 4,\n        bottom: 4\n      }\n    },\n\n    // label settings\n    ticks: {\n      minRotation: 0,\n      maxRotation: 50,\n      mirror: false,\n      textStrokeWidth: 0,\n      textStrokeColor: '',\n      padding: 3,\n      display: true,\n      autoSkip: true,\n      autoSkipPadding: 3,\n      labelOffset: 0,\n      // We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\n      callback: Ticks.formatters.values,\n      minor: {},\n      major: {},\n      align: 'center',\n      crossAlign: 'near',\n\n      showLabelBackdrop: false,\n      backdropColor: 'rgba(255, 255, 255, 0.75)',\n      backdropPadding: 2,\n    }\n  });\n\n  defaults.route('scale.ticks', 'color', '', 'color');\n  defaults.route('scale.grid', 'color', '', 'borderColor');\n  defaults.route('scale.border', 'color', '', 'borderColor');\n  defaults.route('scale.title', 'color', '', 'color');\n\n  defaults.describe('scale', {\n    _fallback: false,\n    _scriptable: (name) => !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n    _indexable: (name) => name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash',\n  });\n\n  defaults.describe('scales', {\n    _fallback: 'scale',\n  });\n\n  defaults.describe('scale.ticks', {\n    _scriptable: (name) => name !== 'backdropPadding' && name !== 'callback',\n    _indexable: (name) => name !== 'backdropPadding',\n  });\n}\n","import {isArray, isNullOrUndef} from './helpers.core.js';\nimport {PI, TAU, HALF_PI, QUARTER_PI, TWO_THIRDS_PI, RAD_PER_DEG} from './helpers.math.js';\n\n/**\n * Note: typedefs are auto-exported, so use a made-up `canvas` namespace where\n * necessary to avoid duplicates with `export * from './helpers`; see\n * https://github.com/microsoft/TypeScript/issues/46011\n * @typedef { import('../core/core.controller.js').default } canvas.Chart\n * @typedef { import('../types/index.js').Point } Point\n */\n\n/**\n * @namespace Chart.helpers.canvas\n */\n\n/**\n * Converts the given font object into a CSS font string.\n * @param {object} font - A font object.\n * @return {string|null} The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\n * @private\n */\nexport function toFontString(font) {\n  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n    return null;\n  }\n\n  return (font.style ? font.style + ' ' : '')\n\t\t+ (font.weight ? font.weight + ' ' : '')\n\t\t+ font.size + 'px '\n\t\t+ font.family;\n}\n\n/**\n * @private\n */\nexport function _measureText(ctx, data, gc, longest, string) {\n  let textWidth = data[string];\n  if (!textWidth) {\n    textWidth = data[string] = ctx.measureText(string).width;\n    gc.push(string);\n  }\n  if (textWidth > longest) {\n    longest = textWidth;\n  }\n  return longest;\n}\n\n/**\n * @private\n */\nexport function _longestText(ctx, font, arrayOfThings, cache) {\n  cache = cache || {};\n  let data = cache.data = cache.data || {};\n  let gc = cache.garbageCollect = cache.garbageCollect || [];\n\n  if (cache.font !== font) {\n    data = cache.data = {};\n    gc = cache.garbageCollect = [];\n    cache.font = font;\n  }\n\n  ctx.save();\n\n  ctx.font = font;\n  let longest = 0;\n  const ilen = arrayOfThings.length;\n  let i, j, jlen, thing, nestedThing;\n  for (i = 0; i < ilen; i++) {\n    thing = arrayOfThings[i];\n\n    // Undefined strings and arrays should not be measured\n    if (thing !== undefined && thing !== null && isArray(thing) !== true) {\n      longest = _measureText(ctx, data, gc, longest, thing);\n    } else if (isArray(thing)) {\n      // if it is an array lets measure each element\n      // to do maybe simplify this function a bit so we can do this more recursively?\n      for (j = 0, jlen = thing.length; j < jlen; j++) {\n        nestedThing = thing[j];\n        // Undefined strings and arrays should not be measured\n        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n          longest = _measureText(ctx, data, gc, longest, nestedThing);\n        }\n      }\n    }\n  }\n\n  ctx.restore();\n\n  const gcLen = gc.length / 2;\n  if (gcLen > arrayOfThings.length) {\n    for (i = 0; i < gcLen; i++) {\n      delete data[gc[i]];\n    }\n    gc.splice(0, gcLen);\n  }\n  return longest;\n}\n\n/**\n * Returns the aligned pixel value to avoid anti-aliasing blur\n * @param {canvas.Chart} chart - The chart instance.\n * @param {number} pixel - A pixel value.\n * @param {number} width - The width of the element.\n * @returns {number} The aligned pixel value.\n * @private\n */\nexport function _alignPixel(chart, pixel, width) {\n  const devicePixelRatio = chart.currentDevicePixelRatio;\n  const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n\n/**\n * Clears the entire canvas.\n * @param {HTMLCanvasElement} canvas\n * @param {CanvasRenderingContext2D} [ctx]\n */\nexport function clearCanvas(canvas, ctx) {\n  ctx = ctx || canvas.getContext('2d');\n\n  ctx.save();\n  // canvas.width and canvas.height do not consider the canvas transform,\n  // while clearRect does\n  ctx.resetTransform();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.restore();\n}\n\nexport function drawPoint(ctx, options, x, y) {\n  drawPointLegend(ctx, options, x, y, null);\n}\n\nexport function drawPointLegend(ctx, options, x, y, w) {\n  let type, xOffset, yOffset, size, cornerRadius, width, xOffsetW, yOffsetW;\n  const style = options.pointStyle;\n  const rotation = options.rotation;\n  const radius = options.radius;\n  let rad = (rotation || 0) * RAD_PER_DEG;\n\n  if (style && typeof style === 'object') {\n    type = style.toString();\n    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.rotate(rad);\n      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n      ctx.restore();\n      return;\n    }\n  }\n\n  if (isNaN(radius) || radius <= 0) {\n    return;\n  }\n\n  ctx.beginPath();\n\n  switch (style) {\n  // Default includes circle\n  default:\n    if (w) {\n      ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n    } else {\n      ctx.arc(x, y, radius, 0, TAU);\n    }\n    ctx.closePath();\n    break;\n  case 'triangle':\n    width = w ? w / 2 : radius;\n    ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n    rad += TWO_THIRDS_PI;\n    ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n    rad += TWO_THIRDS_PI;\n    ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n    ctx.closePath();\n    break;\n  case 'rectRounded':\n    // NOTE: the rounded rect implementation changed to use `arc` instead of\n    // `quadraticCurveTo` since it generates better results when rect is\n    // almost a circle. 0.516 (instead of 0.5) produces results with visually\n    // closer proportion to the previous impl and it is inscribed in the\n    // circle with `radius`. For more details, see the following PRs:\n    // https://github.com/chartjs/Chart.js/issues/5597\n    // https://github.com/chartjs/Chart.js/issues/5858\n    cornerRadius = radius * 0.516;\n    size = radius - cornerRadius;\n    xOffset = Math.cos(rad + QUARTER_PI) * size;\n    xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n    yOffset = Math.sin(rad + QUARTER_PI) * size;\n    yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n    ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n    ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n    ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n    ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n    ctx.closePath();\n    break;\n  case 'rect':\n    if (!rotation) {\n      size = Math.SQRT1_2 * radius;\n      width = w ? w / 2 : size;\n      ctx.rect(x - width, y - size, 2 * width, 2 * size);\n      break;\n    }\n    rad += QUARTER_PI;\n    /* falls through */\n  case 'rectRot':\n    xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n    ctx.moveTo(x - xOffsetW, y - yOffset);\n    ctx.lineTo(x + yOffsetW, y - xOffset);\n    ctx.lineTo(x + xOffsetW, y + yOffset);\n    ctx.lineTo(x - yOffsetW, y + xOffset);\n    ctx.closePath();\n    break;\n  case 'crossRot':\n    rad += QUARTER_PI;\n    /* falls through */\n  case 'cross':\n    xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n    ctx.moveTo(x - xOffsetW, y - yOffset);\n    ctx.lineTo(x + xOffsetW, y + yOffset);\n    ctx.moveTo(x + yOffsetW, y - xOffset);\n    ctx.lineTo(x - yOffsetW, y + xOffset);\n    break;\n  case 'star':\n    xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n    ctx.moveTo(x - xOffsetW, y - yOffset);\n    ctx.lineTo(x + xOffsetW, y + yOffset);\n    ctx.moveTo(x + yOffsetW, y - xOffset);\n    ctx.lineTo(x - yOffsetW, y + xOffset);\n    rad += QUARTER_PI;\n    xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n    ctx.moveTo(x - xOffsetW, y - yOffset);\n    ctx.lineTo(x + xOffsetW, y + yOffset);\n    ctx.moveTo(x + yOffsetW, y - xOffset);\n    ctx.lineTo(x - yOffsetW, y + xOffset);\n    break;\n  case 'line':\n    xOffset = w ? w / 2 : Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    break;\n  case 'dash':\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n    break;\n  case false:\n    ctx.closePath();\n    break;\n  }\n\n  ctx.fill();\n  if (options.borderWidth > 0) {\n    ctx.stroke();\n  }\n}\n\n/**\n * Returns true if the point is inside the rectangle\n * @param {Point} point - The point to test\n * @param {object} area - The rectangle\n * @param {number} [margin] - allowed margin\n * @returns {boolean}\n * @private\n */\nexport function _isPointInArea(point, area, margin) {\n  margin = margin || 0.5; // margin - default is to match rounded decimals\n\n  return !area || (point && point.x > area.left - margin && point.x < area.right + margin &&\n\t\tpoint.y > area.top - margin && point.y < area.bottom + margin);\n}\n\nexport function clipArea(ctx, area) {\n  ctx.save();\n  ctx.beginPath();\n  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n  ctx.clip();\n}\n\nexport function unclipArea(ctx) {\n  ctx.restore();\n}\n\n/**\n * @private\n */\nexport function _steppedLineTo(ctx, previous, target, flip, mode) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  if (mode === 'middle') {\n    const midpoint = (previous.x + target.x) / 2.0;\n    ctx.lineTo(midpoint, previous.y);\n    ctx.lineTo(midpoint, target.y);\n  } else if (mode === 'after' !== !!flip) {\n    ctx.lineTo(previous.x, target.y);\n  } else {\n    ctx.lineTo(target.x, previous.y);\n  }\n  ctx.lineTo(target.x, target.y);\n}\n\n/**\n * @private\n */\nexport function _bezierCurveTo(ctx, previous, target, flip) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  ctx.bezierCurveTo(\n    flip ? previous.cp1x : previous.cp2x,\n    flip ? previous.cp1y : previous.cp2y,\n    flip ? target.cp2x : target.cp1x,\n    flip ? target.cp2y : target.cp1y,\n    target.x,\n    target.y);\n}\n\n/**\n * Render text onto the canvas\n */\nexport function renderText(ctx, text, x, y, font, opts = {}) {\n  const lines = isArray(text) ? text : [text];\n  const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n  let i, line;\n\n  ctx.save();\n  ctx.font = font.string;\n  setRenderOpts(ctx, opts);\n\n  for (i = 0; i < lines.length; ++i) {\n    line = lines[i];\n\n    if (opts.backdrop) {\n      drawBackdrop(ctx, opts.backdrop);\n    }\n\n    if (stroke) {\n      if (opts.strokeColor) {\n        ctx.strokeStyle = opts.strokeColor;\n      }\n\n      if (!isNullOrUndef(opts.strokeWidth)) {\n        ctx.lineWidth = opts.strokeWidth;\n      }\n\n      ctx.strokeText(line, x, y, opts.maxWidth);\n    }\n\n    ctx.fillText(line, x, y, opts.maxWidth);\n    decorateText(ctx, x, y, line, opts);\n\n    y += font.lineHeight;\n  }\n\n  ctx.restore();\n}\n\nfunction setRenderOpts(ctx, opts) {\n  if (opts.translation) {\n    ctx.translate(opts.translation[0], opts.translation[1]);\n  }\n\n  if (!isNullOrUndef(opts.rotation)) {\n    ctx.rotate(opts.rotation);\n  }\n\n  if (opts.color) {\n    ctx.fillStyle = opts.color;\n  }\n\n  if (opts.textAlign) {\n    ctx.textAlign = opts.textAlign;\n  }\n\n  if (opts.textBaseline) {\n    ctx.textBaseline = opts.textBaseline;\n  }\n}\n\nfunction decorateText(ctx, x, y, line, opts) {\n  if (opts.strikethrough || opts.underline) {\n    /**\n     * Now that IE11 support has been dropped, we can use more\n     * of the TextMetrics object. The actual bounding boxes\n     * are unflagged in Chrome, Firefox, Edge, and Safari so they\n     * can be safely used.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility\n     */\n    const metrics = ctx.measureText(line);\n    const left = x - metrics.actualBoundingBoxLeft;\n    const right = x + metrics.actualBoundingBoxRight;\n    const top = y - metrics.actualBoundingBoxAscent;\n    const bottom = y + metrics.actualBoundingBoxDescent;\n    const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n\n    ctx.strokeStyle = ctx.fillStyle;\n    ctx.beginPath();\n    ctx.lineWidth = opts.decorationWidth || 2;\n    ctx.moveTo(left, yDecoration);\n    ctx.lineTo(right, yDecoration);\n    ctx.stroke();\n  }\n}\n\nfunction drawBackdrop(ctx, opts) {\n  const oldColor = ctx.fillStyle;\n\n  ctx.fillStyle = opts.color;\n  ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n  ctx.fillStyle = oldColor;\n}\n\n/**\n * Add a path of a rectangle with rounded corners to the current sub-path\n * @param {CanvasRenderingContext2D} ctx Context\n * @param {*} rect Bounding rect\n */\nexport function addRoundedRectPath(ctx, rect) {\n  const {x, y, w, h, radius} = rect;\n\n  // top left arc\n  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, -HALF_PI, PI, true);\n\n  // line from top left to bottom left\n  ctx.lineTo(x, y + h - radius.bottomLeft);\n\n  // bottom left arc\n  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n\n  // line from bottom left to bottom right\n  ctx.lineTo(x + w - radius.bottomRight, y + h);\n\n  // bottom right arc\n  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n\n  // line from bottom right to top right\n  ctx.lineTo(x + w, y + radius.topRight);\n\n  // top right arc\n  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n\n  // line from top right to top left\n  ctx.lineTo(x + radius.topLeft, y);\n}\n","import defaults from '../core/core.defaults.js';\nimport {isArray, isObject, toDimension, valueOrDefault} from './helpers.core.js';\nimport {Point, toFontString} from './helpers.canvas.js';\nimport type {ChartArea, FontSpec} from '../types/index.js';\nimport type {TRBL, TRBLCorners} from '../types/geometric.js';\n\nconst LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nconst FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n\n/**\n * @alias Chart.helpers.options\n * @namespace\n */\n/**\n * Converts the given line height `value` in pixels for a specific font `size`.\n * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n * @param size - The font size (in pixels) used to resolve relative `value`.\n * @returns The effective line height in pixels (size * 1.2 if value is invalid).\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n * @since 2.7.0\n */\nexport function toLineHeight(value: number | string, size: number): number {\n  const matches = ('' + value).match(LINE_HEIGHT);\n  if (!matches || matches[1] === 'normal') {\n    return size * 1.2;\n  }\n\n  value = +matches[2];\n\n  switch (matches[3]) {\n    case 'px':\n      return value;\n    case '%':\n      value /= 100;\n      break;\n    default:\n      break;\n  }\n\n  return size * value;\n}\n\nconst numberOrZero = (v: unknown) => +v || 0;\n\n/**\n * @param value\n * @param props\n */\nexport function _readValueToProps<K extends string>(value: number | Record<K, number>, props: K[]): Record<K, number>;\nexport function _readValueToProps<K extends string, T extends string>(value: number | Record<K & T, number>, props: Record<T, K>): Record<T, number>;\nexport function _readValueToProps(value: number | Record<string, number>, props: string[] | Record<string, string>) {\n  const ret = {};\n  const objProps = isObject(props);\n  const keys = objProps ? Object.keys(props) : props;\n  const read = isObject(value)\n    ? objProps\n      ? prop => valueOrDefault(value[prop], value[props[prop]])\n      : prop => value[prop]\n    : () => value;\n\n  for (const prop of keys) {\n    ret[prop] = numberOrZero(read(prop));\n  }\n  return ret;\n}\n\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */\nexport function toTRBL(value: number | TRBL | Point) {\n  return _readValueToProps(value, {top: 'y', right: 'x', bottom: 'y', left: 'x'});\n}\n\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */\nexport function toTRBLCorners(value: number | TRBLCorners) {\n  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);\n}\n\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */\nexport function toPadding(value?: number | TRBL): ChartArea {\n  const obj = toTRBL(value) as ChartArea;\n\n  obj.width = obj.left + obj.right;\n  obj.height = obj.top + obj.bottom;\n\n  return obj;\n}\n\nexport interface CanvasFontSpec extends FontSpec {\n  string: string;\n}\n\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */\n\nexport function toFont(options: Partial<FontSpec>, fallback?: Partial<FontSpec>) {\n  options = options || {};\n  fallback = fallback || defaults.font as FontSpec;\n\n  let size = valueOrDefault(options.size, fallback.size);\n\n  if (typeof size === 'string') {\n    size = parseInt(size, 10);\n  }\n  let style = valueOrDefault(options.style, fallback.style);\n  if (style && !('' + style).match(FONT_STYLE)) {\n    console.warn('Invalid font style specified: \"' + style + '\"');\n    style = undefined;\n  }\n\n  const font = {\n    family: valueOrDefault(options.family, fallback.family),\n    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n    size,\n    style,\n    weight: valueOrDefault(options.weight, fallback.weight),\n    string: ''\n  };\n\n  font.string = toFontString(font);\n  return font;\n}\n\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */\nexport function resolve(inputs: Array<unknown>, context?: object, index?: number, info?: { cacheable: boolean }) {\n  let cacheable = true;\n  let i: number, ilen: number, value: unknown;\n\n  for (i = 0, ilen = inputs.length; i < ilen; ++i) {\n    value = inputs[i];\n    if (value === undefined) {\n      continue;\n    }\n    if (context !== undefined && typeof value === 'function') {\n      value = value(context);\n      cacheable = false;\n    }\n    if (index !== undefined && isArray(value)) {\n      value = value[index % value.length];\n      cacheable = false;\n    }\n    if (value !== undefined) {\n      if (info && !cacheable) {\n        info.cacheable = false;\n      }\n      return value;\n    }\n  }\n}\n\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */\nexport function _addGrace(minmax: { min: number; max: number; }, grace: number | string, beginAtZero: boolean) {\n  const {min, max} = minmax;\n  const change = toDimension(grace, (max - min) / 2);\n  const keepZero = (value: number, add: number) => beginAtZero && value === 0 ? 0 : value + add;\n  return {\n    min: keepZero(min, -Math.abs(change)),\n    max: keepZero(max, change)\n  };\n}\n\n/**\n * Create a context inheriting parentContext\n * @param parentContext\n * @param context\n * @returns\n */\nexport function createContext<T extends object>(parentContext: null, context: T): T;\nexport function createContext<T extends object, P extends T>(parentContext: P, context: T): P & T;\nexport function createContext(parentContext: object, context: object) {\n  return Object.assign(Object.create(parentContext), context);\n}\n","import {defined, isArray, isFunction, isObject, resolveObjectKey, _capitalize} from './helpers.core.js';\n\n/**\n * Creates a Proxy for resolving raw values for options.\n * @param {object[]} scopes - The option scopes to look for values, in resolution order\n * @param {string[]} [prefixes] - The prefixes for values, in resolution order.\n * @param {object[]} [rootScopes] - The root option scopes\n * @param {string|boolean} [fallback] - Parent scopes fallback\n * @param {function} [getTarget] - callback for getting the target for changed values\n * @returns Proxy\n * @private\n */\nexport function _createResolver(scopes, prefixes = [''], rootScopes = scopes, fallback, getTarget = () => scopes[0]) {\n  if (!defined(fallback)) {\n    fallback = _resolve('_fallback', scopes);\n  }\n  const cache = {\n    [Symbol.toStringTag]: 'Object',\n    _cacheable: true,\n    _scopes: scopes,\n    _rootScopes: rootScopes,\n    _fallback: fallback,\n    _getTarget: getTarget,\n    override: (scope) => _createResolver([scope, ...scopes], prefixes, rootScopes, fallback),\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n      delete target._keys; // remove cached keys\n      delete scopes[0][prop]; // remove from top level scope\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop) {\n      return _cached(target, prop,\n        () => _resolveWithPrefixes(prop, prefixes, scopes, target));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(scopes[0]);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop) {\n      return getKeysFromAllScopes(target).includes(prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys(target) {\n      return getKeysFromAllScopes(target);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop, value) {\n      const storage = target._storage || (target._storage = getTarget());\n      target[prop] = storage[prop] = value; // set to top level scope + cache\n      delete target._keys; // remove cached keys\n      return true;\n    }\n  });\n}\n\n/**\n * Returns an Proxy for resolving option values with context.\n * @param {object} proxy - The Proxy returned by `_createResolver`\n * @param {object} context - Context object for scriptable/indexable options\n * @param {object} [subProxy] - The proxy provided for scriptable options\n * @param {{scriptable: boolean, indexable: boolean, allKeys?: boolean}} [descriptorDefaults] - Defaults for descriptors\n * @private\n */\nexport function _attachContext(proxy, context, subProxy, descriptorDefaults) {\n  const cache = {\n    _cacheable: false,\n    _proxy: proxy,\n    _context: context,\n    _subProxy: subProxy,\n    _stack: new Set(),\n    _descriptors: _descriptors(proxy, descriptorDefaults),\n    setContext: (ctx) => _attachContext(proxy, ctx, subProxy, descriptorDefaults),\n    override: (scope) => _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n      delete proxy[prop]; // remove from proxy\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop, receiver) {\n      return _cached(target, prop,\n        () => _resolveWithContext(target, prop, receiver));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return target._descriptors.allKeys\n        ? Reflect.has(proxy, prop) ? {enumerable: true, configurable: true} : undefined\n        : Reflect.getOwnPropertyDescriptor(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(proxy);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop) {\n      return Reflect.has(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys() {\n      return Reflect.ownKeys(proxy);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop, value) {\n      proxy[prop] = value; // set to proxy\n      delete target[prop]; // remove from cache\n      return true;\n    }\n  });\n}\n\n/**\n * @private\n */\nexport function _descriptors(proxy, defaults = {scriptable: true, indexable: true}) {\n  const {_scriptable = defaults.scriptable, _indexable = defaults.indexable, _allKeys = defaults.allKeys} = proxy;\n  return {\n    allKeys: _allKeys,\n    scriptable: _scriptable,\n    indexable: _indexable,\n    isScriptable: isFunction(_scriptable) ? _scriptable : () => _scriptable,\n    isIndexable: isFunction(_indexable) ? _indexable : () => _indexable\n  };\n}\n\nconst readKey = (prefix, name) => prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop, value) => isObject(value) && prop !== 'adapters' &&\n  (Object.getPrototypeOf(value) === null || value.constructor === Object);\n\nfunction _cached(target, prop, resolve) {\n  if (Object.prototype.hasOwnProperty.call(target, prop)) {\n    return target[prop];\n  }\n\n  const value = resolve();\n  // cache the resolved value\n  target[prop] = value;\n  return value;\n}\n\nfunction _resolveWithContext(target, prop, receiver) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n  let value = _proxy[prop]; // resolve from proxy\n\n  // resolve with context\n  if (isFunction(value) && descriptors.isScriptable(prop)) {\n    value = _resolveScriptable(prop, value, target, receiver);\n  }\n  if (isArray(value) && value.length) {\n    value = _resolveArray(prop, value, target, descriptors.isIndexable);\n  }\n  if (needsSubResolver(prop, value)) {\n    // if the resolved value is an object, create a sub resolver for it\n    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n  }\n  return value;\n}\n\nfunction _resolveScriptable(prop, value, target, receiver) {\n  const {_proxy, _context, _subProxy, _stack} = target;\n  if (_stack.has(prop)) {\n    // @ts-ignore\n    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n  }\n  _stack.add(prop);\n  value = value(_context, _subProxy || receiver);\n  _stack.delete(prop);\n  if (needsSubResolver(prop, value)) {\n    // When scriptable option returns an object, create a resolver on that.\n    value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n  }\n  return value;\n}\n\nfunction _resolveArray(prop, value, target, isIndexable) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n\n  if (defined(_context.index) && isIndexable(prop)) {\n    value = value[_context.index % value.length];\n  } else if (isObject(value[0])) {\n    // Array of objects, return array or resolvers\n    const arr = value;\n    const scopes = _proxy._scopes.filter(s => s !== arr);\n    value = [];\n    for (const item of arr) {\n      const resolver = createSubResolver(scopes, _proxy, prop, item);\n      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n    }\n  }\n  return value;\n}\n\nfunction resolveFallback(fallback, prop, value) {\n  return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\n\nconst getScope = (key, parent) => key === true ? parent\n  : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\n\nfunction addScopes(set, parentScopes, key, parentFallback, value) {\n  for (const parent of parentScopes) {\n    const scope = getScope(key, parent);\n    if (scope) {\n      set.add(scope);\n      const fallback = resolveFallback(scope._fallback, key, value);\n      if (defined(fallback) && fallback !== key && fallback !== parentFallback) {\n        // When we reach the descriptor that defines a new _fallback, return that.\n        // The fallback will resume to that new scope.\n        return fallback;\n      }\n    } else if (scope === false && defined(parentFallback) && key !== parentFallback) {\n      // Fallback to `false` results to `false`, when falling back to different key.\n      // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`\n      return null;\n    }\n  }\n  return false;\n}\n\nfunction createSubResolver(parentScopes, resolver, prop, value) {\n  const rootScopes = resolver._rootScopes;\n  const fallback = resolveFallback(resolver._fallback, prop, value);\n  const allScopes = [...parentScopes, ...rootScopes];\n  const set = new Set();\n  set.add(value);\n  let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n  if (key === null) {\n    return false;\n  }\n  if (defined(fallback) && fallback !== prop) {\n    key = addScopesFromKey(set, allScopes, fallback, key, value);\n    if (key === null) {\n      return false;\n    }\n  }\n  return _createResolver(Array.from(set), [''], rootScopes, fallback,\n    () => subGetTarget(resolver, prop, value));\n}\n\nfunction addScopesFromKey(set, allScopes, key, fallback, item) {\n  while (key) {\n    key = addScopes(set, allScopes, key, fallback, item);\n  }\n  return key;\n}\n\nfunction subGetTarget(resolver, prop, value) {\n  const parent = resolver._getTarget();\n  if (!(prop in parent)) {\n    parent[prop] = {};\n  }\n  const target = parent[prop];\n  if (isArray(target) && isObject(value)) {\n    // For array of objects, the object is used to store updated values\n    return value;\n  }\n  return target || {};\n}\n\nfunction _resolveWithPrefixes(prop, prefixes, scopes, proxy) {\n  let value;\n  for (const prefix of prefixes) {\n    value = _resolve(readKey(prefix, prop), scopes);\n    if (defined(value)) {\n      return needsSubResolver(prop, value)\n        ? createSubResolver(scopes, proxy, prop, value)\n        : value;\n    }\n  }\n}\n\nfunction _resolve(key, scopes) {\n  for (const scope of scopes) {\n    if (!scope) {\n      continue;\n    }\n    const value = scope[key];\n    if (defined(value)) {\n      return value;\n    }\n  }\n}\n\nfunction getKeysFromAllScopes(target) {\n  let keys = target._keys;\n  if (!keys) {\n    keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n  }\n  return keys;\n}\n\nfunction resolveKeysFromAllScopes(scopes) {\n  const set = new Set();\n  for (const scope of scopes) {\n    for (const key of Object.keys(scope).filter(k => !k.startsWith('_'))) {\n      set.add(key);\n    }\n  }\n  return Array.from(set);\n}\n\nexport function _parseObjectDataRadialScale(meta, data, start, count) {\n  const {iScale} = meta;\n  const {key = 'r'} = this._parsing;\n  const parsed = new Array(count);\n  let i, ilen, index, item;\n\n  for (i = 0, ilen = count; i < ilen; ++i) {\n    index = i + start;\n    item = data[index];\n    parsed[i] = {\n      r: iScale.parse(resolveObjectKey(item, key), index)\n    };\n  }\n  return parsed;\n}\n","import {almostEquals, distanceBetweenPoints, sign} from './helpers.math.js';\nimport {_isPointInArea} from './helpers.canvas.js';\nimport type {ChartArea} from '../types/index.js';\n\nexport interface SplinePoint {\n  x: number;\n  y: number;\n  skip?: boolean;\n\n  // Both Bezier and monotone interpolations have these fields\n  // but they are added in different spots\n  cp1x?: number;\n  cp1y?: number;\n  cp2x?: number;\n  cp2y?: number;\n}\n\nconst EPSILON = Number.EPSILON || 1e-14;\n\ntype OptionalSplinePoint = SplinePoint | false\nconst getPoint = (points: SplinePoint[], i: number): OptionalSplinePoint => i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis: 'x' | 'y') => indexAxis === 'x' ? 'y' : 'x';\n\nexport function splineCurve(\n  firstPoint: SplinePoint,\n  middlePoint: SplinePoint,\n  afterPoint: SplinePoint,\n  t: number\n): {\n    previous: SplinePoint\n    next: SplinePoint\n  } {\n  // Props to Rob Spencer at scaled innovation for his post on splining between points\n  // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n  // This function must also respect \"skipped\" points\n\n  const previous = firstPoint.skip ? middlePoint : firstPoint;\n  const current = middlePoint;\n  const next = afterPoint.skip ? middlePoint : afterPoint;\n  const d01 = distanceBetweenPoints(current, previous);\n  const d12 = distanceBetweenPoints(next, current);\n\n  let s01 = d01 / (d01 + d12);\n  let s12 = d12 / (d01 + d12);\n\n  // If all points are the same, s01 & s02 will be inf\n  s01 = isNaN(s01) ? 0 : s01;\n  s12 = isNaN(s12) ? 0 : s12;\n\n  const fa = t * s01; // scaling factor for triangle Ta\n  const fb = t * s12;\n\n  return {\n    previous: {\n      x: current.x - fa * (next.x - previous.x),\n      y: current.y - fa * (next.y - previous.y)\n    },\n    next: {\n      x: current.x + fb * (next.x - previous.x),\n      y: current.y + fb * (next.y - previous.y)\n    }\n  };\n}\n\n/**\n * Adjust tangents to ensure monotonic properties\n */\nfunction monotoneAdjust(points: SplinePoint[], deltaK: number[], mK: number[]) {\n  const pointsLen = points.length;\n\n  let alphaK: number, betaK: number, tauK: number, squaredMagnitude: number, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n  for (let i = 0; i < pointsLen - 1; ++i) {\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent || !pointAfter) {\n      continue;\n    }\n\n    if (almostEquals(deltaK[i], 0, EPSILON)) {\n      mK[i] = mK[i + 1] = 0;\n      continue;\n    }\n\n    alphaK = mK[i] / deltaK[i];\n    betaK = mK[i + 1] / deltaK[i];\n    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n    if (squaredMagnitude <= 9) {\n      continue;\n    }\n\n    tauK = 3 / Math.sqrt(squaredMagnitude);\n    mK[i] = alphaK * tauK * deltaK[i];\n    mK[i + 1] = betaK * tauK * deltaK[i];\n  }\n}\n\nfunction monotoneCompute(points: SplinePoint[], mK: number[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  let delta: number, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (let i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    const iPixel = pointCurrent[indexAxis];\n    const vPixel = pointCurrent[valueAxis];\n    if (pointBefore) {\n      delta = (iPixel - pointBefore[indexAxis]) / 3;\n      pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n      pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n    }\n    if (pointAfter) {\n      delta = (pointAfter[indexAxis] - iPixel) / 3;\n      pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n      pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n    }\n  }\n}\n\n/**\n * This function calculates Bézier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */\nexport function splineCurveMonotone(points: SplinePoint[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  const deltaK: number[] = Array(pointsLen).fill(0);\n  const mK: number[] = Array(pointsLen);\n\n  // Calculate slopes (deltaK) and initialize tangents (mK)\n  let i, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    if (pointAfter) {\n      const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n\n      // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n    }\n    mK[i] = !pointBefore ? deltaK[i]\n      : !pointAfter ? deltaK[i - 1]\n        : (sign(deltaK[i - 1]) !== sign(deltaK[i])) ? 0\n          : (deltaK[i - 1] + deltaK[i]) / 2;\n  }\n\n  monotoneAdjust(points, deltaK, mK);\n\n  monotoneCompute(points, mK, indexAxis);\n}\n\nfunction capControlPoint(pt: number, min: number, max: number) {\n  return Math.max(Math.min(pt, max), min);\n}\n\nfunction capBezierPoints(points: SplinePoint[], area: ChartArea) {\n  let i, ilen, point, inArea, inAreaPrev;\n  let inAreaNext = _isPointInArea(points[0], area);\n  for (i = 0, ilen = points.length; i < ilen; ++i) {\n    inAreaPrev = inArea;\n    inArea = inAreaNext;\n    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n    if (!inArea) {\n      continue;\n    }\n    point = points[i];\n    if (inAreaPrev) {\n      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n    }\n    if (inAreaNext) {\n      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n    }\n  }\n}\n\n/**\n * @private\n */\nexport function _updateBezierControlPoints(\n  points: SplinePoint[],\n  options,\n  area: ChartArea,\n  loop: boolean,\n  indexAxis: 'x' | 'y'\n) {\n  let i: number, ilen: number, point: SplinePoint, controlPoints: ReturnType<typeof splineCurve>;\n\n  // Only consider points that are drawn in case the spanGaps option is used\n  if (options.spanGaps) {\n    points = points.filter((pt) => !pt.skip);\n  }\n\n  if (options.cubicInterpolationMode === 'monotone') {\n    splineCurveMonotone(points, indexAxis);\n  } else {\n    let prev = loop ? points[points.length - 1] : points[0];\n    for (i = 0, ilen = points.length; i < ilen; ++i) {\n      point = points[i];\n      controlPoints = splineCurve(\n        prev,\n        point,\n        points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen],\n        options.tension\n      );\n      point.cp1x = controlPoints.previous.x;\n      point.cp1y = controlPoints.previous.y;\n      point.cp2x = controlPoints.next.x;\n      point.cp2y = controlPoints.next.y;\n      prev = point;\n    }\n  }\n\n  if (options.capBezierPoints) {\n    capBezierPoints(points, area);\n  }\n}\n","import type {ChartArea, Scale} from '../types/index.js';\nimport type Chart from '../core/core.controller.js';\nimport type {ChartEvent} from '../types.js';\nimport {INFINITY} from './helpers.math.js';\n\n/**\n * Note: typedefs are auto-exported, so use a made-up `dom` namespace where\n * necessary to avoid duplicates with `export * from './helpers`; see\n * https://github.com/microsoft/TypeScript/issues/46011\n * @typedef { import('../core/core.controller.js').default } dom.Chart\n * @typedef { import('../../types').ChartEvent } ChartEvent\n */\n\n/**\n * @private\n */\nexport function _isDomSupported(): boolean {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n\n/**\n * @private\n */\nexport function _getParentNode(domNode: HTMLCanvasElement): HTMLCanvasElement {\n  let parent = domNode.parentNode;\n  if (parent && parent.toString() === '[object ShadowRoot]') {\n    parent = (parent as ShadowRoot).host;\n  }\n  return parent as HTMLCanvasElement;\n}\n\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */\n\nfunction parseMaxStyle(styleValue: string | number, node: HTMLElement, parentProperty: string) {\n  let valueInPixels: number;\n  if (typeof styleValue === 'string') {\n    valueInPixels = parseInt(styleValue, 10);\n\n    if (styleValue.indexOf('%') !== -1) {\n      // percentage * size in dimension\n      valueInPixels = (valueInPixels / 100) * node.parentNode[parentProperty];\n    }\n  } else {\n    valueInPixels = styleValue;\n  }\n\n  return valueInPixels;\n}\n\nconst getComputedStyle = (element: HTMLElement): CSSStyleDeclaration =>\n  element.ownerDocument.defaultView.getComputedStyle(element, null);\n\nexport function getStyle(el: HTMLElement, property: string): string {\n  return getComputedStyle(el).getPropertyValue(property);\n}\n\nconst positions = ['top', 'right', 'bottom', 'left'];\nfunction getPositionedStyle(styles: CSSStyleDeclaration, style: string, suffix?: string): ChartArea {\n  const result = {} as ChartArea;\n  suffix = suffix ? '-' + suffix : '';\n  for (let i = 0; i < 4; i++) {\n    const pos = positions[i];\n    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n  }\n  result.width = result.left + result.right;\n  result.height = result.top + result.bottom;\n  return result;\n}\n\nconst useOffsetPos = (x: number, y: number, target: HTMLElement | EventTarget) =>\n  (x > 0 || y > 0) && (!target || !(target as HTMLElement).shadowRoot);\n\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */\nfunction getCanvasPosition(\n  e: Event | TouchEvent | MouseEvent,\n  canvas: HTMLCanvasElement\n): {\n    x: number;\n    y: number;\n    box: boolean;\n  } {\n  const touches = (e as TouchEvent).touches;\n  const source = (touches && touches.length ? touches[0] : e) as MouseEvent;\n  const {offsetX, offsetY} = source as MouseEvent;\n  let box = false;\n  let x, y;\n  if (useOffsetPos(offsetX, offsetY, e.target)) {\n    x = offsetX;\n    y = offsetY;\n  } else {\n    const rect = canvas.getBoundingClientRect();\n    x = source.clientX - rect.left;\n    y = source.clientY - rect.top;\n    box = true;\n  }\n  return {x, y, box};\n}\n\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */\n\nexport function getRelativePosition(\n  event: Event | ChartEvent | TouchEvent | MouseEvent,\n  chart: Chart\n): { x: number; y: number } {\n  if ('native' in event) {\n    return event;\n  }\n\n  const {canvas, currentDevicePixelRatio} = chart;\n  const style = getComputedStyle(canvas);\n  const borderBox = style.boxSizing === 'border-box';\n  const paddings = getPositionedStyle(style, 'padding');\n  const borders = getPositionedStyle(style, 'border', 'width');\n  const {x, y, box} = getCanvasPosition(event, canvas);\n  const xOffset = paddings.left + (box && borders.left);\n  const yOffset = paddings.top + (box && borders.top);\n\n  let {width, height} = chart;\n  if (borderBox) {\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  return {\n    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n  };\n}\n\nfunction getContainerSize(canvas: HTMLCanvasElement, width: number, height: number): Partial<Scale> {\n  let maxWidth: number, maxHeight: number;\n\n  if (width === undefined || height === undefined) {\n    const container = _getParentNode(canvas);\n    if (!container) {\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n    } else {\n      const rect = container.getBoundingClientRect(); // this is the border box of the container\n      const containerStyle = getComputedStyle(container);\n      const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n      const containerPadding = getPositionedStyle(containerStyle, 'padding');\n      width = rect.width - containerPadding.width - containerBorder.width;\n      height = rect.height - containerPadding.height - containerBorder.height;\n      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n    }\n  }\n  return {\n    width,\n    height,\n    maxWidth: maxWidth || INFINITY,\n    maxHeight: maxHeight || INFINITY\n  };\n}\n\nconst round1 = (v: number) => Math.round(v * 10) / 10;\n\n// eslint-disable-next-line complexity\nexport function getMaximumSize(\n  canvas: HTMLCanvasElement,\n  bbWidth?: number,\n  bbHeight?: number,\n  aspectRatio?: number\n): { width: number; height: number } {\n  const style = getComputedStyle(canvas);\n  const margins = getPositionedStyle(style, 'margin');\n  const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n  const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n  const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n  let {width, height} = containerSize;\n\n  if (style.boxSizing === 'content-box') {\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const paddings = getPositionedStyle(style, 'padding');\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  width = Math.max(0, width - margins.width);\n  height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);\n  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n  if (width && !height) {\n    // https://github.com/chartjs/Chart.js/issues/4659\n    // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n    height = round1(width / 2);\n  }\n\n  const maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n\n  if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n    height = containerSize.height;\n    width = round1(Math.floor(height * aspectRatio));\n  }\n\n  return {width, height};\n}\n\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */\nexport function retinaScale(\n  chart: Chart,\n  forceRatio: number,\n  forceStyle?: boolean\n): boolean | void {\n  const pixelRatio = forceRatio || 1;\n  const deviceHeight = Math.floor(chart.height * pixelRatio);\n  const deviceWidth = Math.floor(chart.width * pixelRatio);\n\n  chart.height = Math.floor(chart.height);\n  chart.width = Math.floor(chart.width);\n\n  const canvas = chart.canvas;\n\n  // If no style has been set on the canvas, the render size is used as display size,\n  // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n  // See https://github.com/chartjs/Chart.js/issues/3575\n  if (canvas.style && (forceStyle || (!canvas.style.height && !canvas.style.width))) {\n    canvas.style.height = `${chart.height}px`;\n    canvas.style.width = `${chart.width}px`;\n  }\n\n  if (chart.currentDevicePixelRatio !== pixelRatio\n      || canvas.height !== deviceHeight\n      || canvas.width !== deviceWidth) {\n    chart.currentDevicePixelRatio = pixelRatio;\n    canvas.height = deviceHeight;\n    canvas.width = deviceWidth;\n    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */\nexport const supportsEventListenerOptions = (function() {\n  let passiveSupported = false;\n  try {\n    const options = {\n      get passive() { // This function will be called when the browser attempts to access the passive property.\n        passiveSupported = true;\n        return false;\n      }\n    } as EventListenerOptions;\n\n    window.addEventListener('test', null, options);\n    window.removeEventListener('test', null, options);\n  } catch (e) {\n    // continue regardless of error\n  }\n  return passiveSupported;\n}());\n\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */\n\nexport function readUsedSize(\n  element: HTMLElement,\n  property: 'width' | 'height'\n): number | undefined {\n  const value = getStyle(element, property);\n  const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n  return matches ? +matches[1] : undefined;\n}\n","import type {Point} from '../types/geometric.js';\nimport type {SplinePoint} from './helpers.curve.js';\n\n/**\n * @private\n */\nexport function _pointInLine(p1: Point, p2: Point, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: p1.y + t * (p2.y - p1.y)\n  };\n}\n\n/**\n * @private\n */\nexport function _steppedInterpolation(\n  p1: Point,\n  p2: Point,\n  t: number, mode: 'middle' | 'after' | unknown\n) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y\n      : mode === 'after' ? t < 1 ? p1.y : p2.y\n        : t > 0 ? p2.y : p1.y\n  };\n}\n\n/**\n * @private\n */\nexport function _bezierInterpolation(p1: SplinePoint, p2: SplinePoint, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  const cp1 = {x: p1.cp2x, y: p1.cp2y};\n  const cp2 = {x: p2.cp1x, y: p2.cp1y};\n  const a = _pointInLine(p1, cp1, t);\n  const b = _pointInLine(cp1, cp2, t);\n  const c = _pointInLine(cp2, p2, t);\n  const d = _pointInLine(a, b, t);\n  const e = _pointInLine(b, c, t);\n  return _pointInLine(d, e, t);\n}\n","export interface RTLAdapter {\n  x(x: number): number;\n  setWidth(w: number): void;\n  textAlign(align: 'center' | 'left' | 'right'): 'center' | 'left' | 'right';\n  xPlus(x: number, value: number): number;\n  leftForLtr(x: number, itemWidth: number): number;\n}\n\nconst getRightToLeftAdapter = function(rectX: number, width: number): RTLAdapter {\n  return {\n    x(x) {\n      return rectX + rectX + width - x;\n    },\n    setWidth(w) {\n      width = w;\n    },\n    textAlign(align) {\n      if (align === 'center') {\n        return align;\n      }\n      return align === 'right' ? 'left' : 'right';\n    },\n    xPlus(x, value) {\n      return x - value;\n    },\n    leftForLtr(x, itemWidth) {\n      return x - itemWidth;\n    },\n  };\n};\n\nconst getLeftToRightAdapter = function(): RTLAdapter {\n  return {\n    x(x) {\n      return x;\n    },\n    setWidth(w) { // eslint-disable-line no-unused-vars\n    },\n    textAlign(align) {\n      return align;\n    },\n    xPlus(x, value) {\n      return x + value;\n    },\n    leftForLtr(x, _itemWidth) { // eslint-disable-line @typescript-eslint/no-unused-vars\n      return x;\n    },\n  };\n};\n\nexport function getRtlAdapter(rtl: boolean, rectX: number, width: number) {\n  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\n\nexport function overrideTextDirection(ctx: CanvasRenderingContext2D, direction: 'ltr' | 'rtl') {\n  let style: CSSStyleDeclaration, original: [string, string];\n  if (direction === 'ltr' || direction === 'rtl') {\n    style = ctx.canvas.style;\n    original = [\n      style.getPropertyValue('direction'),\n      style.getPropertyPriority('direction'),\n    ];\n\n    style.setProperty('direction', direction, 'important');\n    (ctx as { prevTextDirection?: [string, string] }).prevTextDirection = original;\n  }\n}\n\nexport function restoreTextDirection(ctx: CanvasRenderingContext2D, original?: [string, string]) {\n  if (original !== undefined) {\n    delete (ctx as { prevTextDirection?: [string, string] }).prevTextDirection;\n    ctx.canvas.style.setProperty('direction', original[0], original[1]);\n  }\n}\n","import {_angleBetween, _angleDiff, _isBetween, _normalizeAngle} from './helpers.math.js';\nimport {createContext} from './helpers.options.js';\n\n/**\n * @typedef { import('../elements/element.line.js').default } LineElement\n * @typedef { import('../elements/element.point.js').default } PointElement\n * @typedef {{start: number, end: number, loop: boolean, style?: any}} Segment\n */\n\nfunction propertyFn(property) {\n  if (property === 'angle') {\n    return {\n      between: _angleBetween,\n      compare: _angleDiff,\n      normalize: _normalizeAngle,\n    };\n  }\n  return {\n    between: _isBetween,\n    compare: (a, b) => a - b,\n    normalize: x => x\n  };\n}\n\nfunction normalizeSegment({start, end, count, loop, style}) {\n  return {\n    start: start % count,\n    end: end % count,\n    loop: loop && (end - start + 1) % count === 0,\n    style\n  };\n}\n\nfunction getSegment(segment, points, bounds) {\n  const {property, start: startBound, end: endBound} = bounds;\n  const {between, normalize} = propertyFn(property);\n  const count = points.length;\n  // eslint-disable-next-line prefer-const\n  let {start, end, loop} = segment;\n  let i, ilen;\n\n  if (loop) {\n    start += count;\n    end += count;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n        break;\n      }\n      start--;\n      end--;\n    }\n    start %= count;\n    end %= count;\n  }\n\n  if (end < start) {\n    end += count;\n  }\n  return {start, end, loop, style: segment.style};\n}\n\n/**\n * Returns the sub-segment(s) of a line segment that fall in the given bounds\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} [segment.style] - segment style\n * @param {PointElement[]} points - the points that this segment refers to\n * @param {object} [bounds]\n * @param {string} bounds.property - the property of a `PointElement` we are bounding. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the property\n * @param {number} bounds.end - end value of the property\n * @private\n **/\nexport function _boundSegment(segment, points, bounds) {\n  if (!bounds) {\n    return [segment];\n  }\n\n  const {property, start: startBound, end: endBound} = bounds;\n  const count = points.length;\n  const {compare, between, normalize} = propertyFn(property);\n  const {start, end, loop, style} = getSegment(segment, points, bounds);\n\n  const result = [];\n  let inside = false;\n  let subStart = null;\n  let value, point, prevValue;\n\n  const startIsBefore = () => between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n  const endIsBefore = () => compare(endBound, value) === 0 || between(endBound, prevValue, value);\n  const shouldStart = () => inside || startIsBefore();\n  const shouldStop = () => !inside || endIsBefore();\n\n  for (let i = start, prev = start; i <= end; ++i) {\n    point = points[i % count];\n\n    if (point.skip) {\n      continue;\n    }\n\n    value = normalize(point[property]);\n\n    if (value === prevValue) {\n      continue;\n    }\n\n    inside = between(value, startBound, endBound);\n\n    if (subStart === null && shouldStart()) {\n      subStart = compare(value, startBound) === 0 ? i : prev;\n    }\n\n    if (subStart !== null && shouldStop()) {\n      result.push(normalizeSegment({start: subStart, end: i, loop, count, style}));\n      subStart = null;\n    }\n    prev = i;\n    prevValue = value;\n  }\n\n  if (subStart !== null) {\n    result.push(normalizeSegment({start: subStart, end, loop, count, style}));\n  }\n\n  return result;\n}\n\n\n/**\n * Returns the segments of the line that are inside given bounds\n * @param {LineElement} line\n * @param {object} [bounds]\n * @param {string} bounds.property - the property we are bounding with. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the `property`\n * @param {number} bounds.end - end value of the `property`\n * @private\n */\nexport function _boundSegments(line, bounds) {\n  const result = [];\n  const segments = line.segments;\n\n  for (let i = 0; i < segments.length; i++) {\n    const sub = _boundSegment(segments[i], line.points, bounds);\n    if (sub.length) {\n      result.push(...sub);\n    }\n  }\n  return result;\n}\n\n/**\n * Find start and end index of a line.\n */\nfunction findStartAndEnd(points, count, loop, spanGaps) {\n  let start = 0;\n  let end = count - 1;\n\n  if (loop && !spanGaps) {\n    // loop and not spanning gaps, first find a gap to start from\n    while (start < count && !points[start].skip) {\n      start++;\n    }\n  }\n\n  // find first non skipped point (after the first gap possibly)\n  while (start < count && points[start].skip) {\n    start++;\n  }\n\n  // if we looped to count, start needs to be 0\n  start %= count;\n\n  if (loop) {\n    // loop will go past count, if start > 0\n    end += start;\n  }\n\n  while (end > start && points[end % count].skip) {\n    end--;\n  }\n\n  // end could be more than count, normalize\n  end %= count;\n\n  return {start, end};\n}\n\n/**\n * Compute solid segments from Points, when spanGaps === false\n * @param {PointElement[]} points - the points\n * @param {number} start - start index\n * @param {number} max - max index (can go past count on a loop)\n * @param {boolean} loop - boolean indicating that this would be a loop if no gaps are found\n */\nfunction solidSegments(points, start, max, loop) {\n  const count = points.length;\n  const result = [];\n  let last = start;\n  let prev = points[start];\n  let end;\n\n  for (end = start + 1; end <= max; ++end) {\n    const cur = points[end % count];\n    if (cur.skip || cur.stop) {\n      if (!prev.skip) {\n        loop = false;\n        result.push({start: start % count, end: (end - 1) % count, loop});\n        // @ts-ignore\n        start = last = cur.stop ? end : null;\n      }\n    } else {\n      last = end;\n      if (prev.skip) {\n        start = end;\n      }\n    }\n    prev = cur;\n  }\n\n  if (last !== null) {\n    result.push({start: start % count, end: last % count, loop});\n  }\n\n  return result;\n}\n\n/**\n * Compute the continuous segments that define the whole line\n * There can be skipped points within a segment, if spanGaps is true.\n * @param {LineElement} line\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n * @private\n */\nexport function _computeSegments(line, segmentOptions) {\n  const points = line.points;\n  const spanGaps = line.options.spanGaps;\n  const count = points.length;\n\n  if (!count) {\n    return [];\n  }\n\n  const loop = !!line._loop;\n  const {start, end} = findStartAndEnd(points, count, loop, spanGaps);\n\n  if (spanGaps === true) {\n    return splitByStyles(line, [{start, end, loop}], points, segmentOptions);\n  }\n\n  const max = end < start ? end + count : end;\n  const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n\n/**\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction splitByStyles(line, segments, points, segmentOptions) {\n  if (!segmentOptions || !segmentOptions.setContext || !points) {\n    return segments;\n  }\n  return doSplitByStyles(line, segments, points, segmentOptions);\n}\n\n/**\n * @param {LineElement} line\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction doSplitByStyles(line, segments, points, segmentOptions) {\n  const chartContext = line._chart.getContext();\n  const baseStyle = readStyle(line.options);\n  const {_datasetIndex: datasetIndex, options: {spanGaps}} = line;\n  const count = points.length;\n  const result = [];\n  let prevStyle = baseStyle;\n  let start = segments[0].start;\n  let i = start;\n\n  function addStyle(s, e, l, st) {\n    const dir = spanGaps ? -1 : 1;\n    if (s === e) {\n      return;\n    }\n    // Style can not start/end on a skipped point, adjust indices accordingly\n    s += count;\n    while (points[s % count].skip) {\n      s -= dir;\n    }\n    while (points[e % count].skip) {\n      e += dir;\n    }\n    if (s % count !== e % count) {\n      result.push({start: s % count, end: e % count, loop: l, style: st});\n      prevStyle = st;\n      start = e % count;\n    }\n  }\n\n  for (const segment of segments) {\n    start = spanGaps ? start : segment.start;\n    let prev = points[start % count];\n    let style;\n    for (i = start + 1; i <= segment.end; i++) {\n      const pt = points[i % count];\n      style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n        type: 'segment',\n        p0: prev,\n        p1: pt,\n        p0DataIndex: (i - 1) % count,\n        p1DataIndex: i % count,\n        datasetIndex\n      })));\n      if (styleChanged(style, prevStyle)) {\n        addStyle(start, i - 1, segment.loop, prevStyle);\n      }\n      prev = pt;\n      prevStyle = style;\n    }\n    if (start < i - 1) {\n      addStyle(start, i - 1, segment.loop, prevStyle);\n    }\n  }\n\n  return result;\n}\n\nfunction readStyle(options) {\n  return {\n    backgroundColor: options.backgroundColor,\n    borderCapStyle: options.borderCapStyle,\n    borderDash: options.borderDash,\n    borderDashOffset: options.borderDashOffset,\n    borderJoinStyle: options.borderJoinStyle,\n    borderWidth: options.borderWidth,\n    borderColor: options.borderColor\n  };\n}\n\nfunction styleChanged(style, prevStyle) {\n  return prevStyle && JSON.stringify(style) !== JSON.stringify(prevStyle);\n}\n","import {requestAnimFrame} from '../helpers/helpers.extras.js';\n\n/**\n * @typedef { import('./core.animation.js').default } Animation\n * @typedef { import('./core.controller.js').default } Chart\n */\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is export for typedoc\n */\nexport class Animator {\n  constructor() {\n    this._request = null;\n    this._charts = new Map();\n    this._running = false;\n    this._lastDate = undefined;\n  }\n\n  /**\n\t * @private\n\t */\n  _notify(chart, anims, date, type) {\n    const callbacks = anims.listeners[type];\n    const numSteps = anims.duration;\n\n    callbacks.forEach(fn => fn({\n      chart,\n      initial: anims.initial,\n      numSteps,\n      currentStep: Math.min(date - anims.start, numSteps)\n    }));\n  }\n\n  /**\n\t * @private\n\t */\n  _refresh() {\n    if (this._request) {\n      return;\n    }\n    this._running = true;\n\n    this._request = requestAnimFrame.call(window, () => {\n      this._update();\n      this._request = null;\n\n      if (this._running) {\n        this._refresh();\n      }\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _update(date = Date.now()) {\n    let remaining = 0;\n\n    this._charts.forEach((anims, chart) => {\n      if (!anims.running || !anims.items.length) {\n        return;\n      }\n      const items = anims.items;\n      let i = items.length - 1;\n      let draw = false;\n      let item;\n\n      for (; i >= 0; --i) {\n        item = items[i];\n\n        if (item._active) {\n          if (item._total > anims.duration) {\n            // if the animation has been updated and its duration prolonged,\n            // update to total duration of current animations run (for progress event)\n            anims.duration = item._total;\n          }\n          item.tick(date);\n          draw = true;\n        } else {\n          // Remove the item by replacing it with last item and removing the last\n          // A lot faster than splice.\n          items[i] = items[items.length - 1];\n          items.pop();\n        }\n      }\n\n      if (draw) {\n        chart.draw();\n        this._notify(chart, anims, date, 'progress');\n      }\n\n      if (!items.length) {\n        anims.running = false;\n        this._notify(chart, anims, date, 'complete');\n        anims.initial = false;\n      }\n\n      remaining += items.length;\n    });\n\n    this._lastDate = date;\n\n    if (remaining === 0) {\n      this._running = false;\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _getAnims(chart) {\n    const charts = this._charts;\n    let anims = charts.get(chart);\n    if (!anims) {\n      anims = {\n        running: false,\n        initial: true,\n        items: [],\n        listeners: {\n          complete: [],\n          progress: []\n        }\n      };\n      charts.set(chart, anims);\n    }\n    return anims;\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @param {string} event - event name\n\t * @param {Function} cb - callback\n\t */\n  listen(chart, event, cb) {\n    this._getAnims(chart).listeners[event].push(cb);\n  }\n\n  /**\n\t * Add animations\n\t * @param {Chart} chart\n\t * @param {Animation[]} items - animations\n\t */\n  add(chart, items) {\n    if (!items || !items.length) {\n      return;\n    }\n    this._getAnims(chart).items.push(...items);\n  }\n\n  /**\n\t * Counts number of active animations for the chart\n\t * @param {Chart} chart\n\t */\n  has(chart) {\n    return this._getAnims(chart).items.length > 0;\n  }\n\n  /**\n\t * Start animating (all charts)\n\t * @param {Chart} chart\n\t */\n  start(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims) {\n      return;\n    }\n    anims.running = true;\n    anims.start = Date.now();\n    anims.duration = anims.items.reduce((acc, cur) => Math.max(acc, cur._duration), 0);\n    this._refresh();\n  }\n\n  running(chart) {\n    if (!this._running) {\n      return false;\n    }\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.running || !anims.items.length) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n\t * Stop all animations for the chart\n\t * @param {Chart} chart\n\t */\n  stop(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.items.length) {\n      return;\n    }\n    const items = anims.items;\n    let i = items.length - 1;\n\n    for (; i >= 0; --i) {\n      items[i].cancel();\n    }\n    anims.items = [];\n    this._notify(chart, anims, Date.now(), 'complete');\n  }\n\n  /**\n\t * Remove chart from Animator\n\t * @param {Chart} chart\n\t */\n  remove(chart) {\n    return this._charts.delete(chart);\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Animator();\n","import effects from '../helpers/helpers.easing.js';\nimport {resolve} from '../helpers/helpers.options.js';\nimport {color as helpersColor} from '../helpers/helpers.color.js';\n\nconst transparent = 'transparent';\nconst interpolators = {\n  boolean(from, to, factor) {\n    return factor > 0.5 ? to : from;\n  },\n  /**\n   * @param {string} from\n   * @param {string} to\n   * @param {number} factor\n   */\n  color(from, to, factor) {\n    const c0 = helpersColor(from || transparent);\n    const c1 = c0.valid && helpersColor(to || transparent);\n    return c1 && c1.valid\n      ? c1.mix(c0, factor).hexString()\n      : to;\n  },\n  number(from, to, factor) {\n    return from + (to - from) * factor;\n  }\n};\n\nexport default class Animation {\n  constructor(cfg, target, prop, to) {\n    const currentValue = target[prop];\n\n    to = resolve([cfg.to, to, currentValue, cfg.from]);\n    const from = resolve([cfg.from, currentValue, to]);\n\n    this._active = true;\n    this._fn = cfg.fn || interpolators[cfg.type || typeof from];\n    this._easing = effects[cfg.easing] || effects.linear;\n    this._start = Math.floor(Date.now() + (cfg.delay || 0));\n    this._duration = this._total = Math.floor(cfg.duration);\n    this._loop = !!cfg.loop;\n    this._target = target;\n    this._prop = prop;\n    this._from = from;\n    this._to = to;\n    this._promises = undefined;\n  }\n\n  active() {\n    return this._active;\n  }\n\n  update(cfg, to, date) {\n    if (this._active) {\n      this._notify(false);\n\n      const currentValue = this._target[this._prop];\n      const elapsed = date - this._start;\n      const remain = this._duration - elapsed;\n      this._start = date;\n      this._duration = Math.floor(Math.max(remain, cfg.duration));\n      this._total += elapsed;\n      this._loop = !!cfg.loop;\n      this._to = resolve([cfg.to, to, currentValue, cfg.from]);\n      this._from = resolve([cfg.from, currentValue, to]);\n    }\n  }\n\n  cancel() {\n    if (this._active) {\n      // update current evaluated value, for smoother animations\n      this.tick(Date.now());\n      this._active = false;\n      this._notify(false);\n    }\n  }\n\n  tick(date) {\n    const elapsed = date - this._start;\n    const duration = this._duration;\n    const prop = this._prop;\n    const from = this._from;\n    const loop = this._loop;\n    const to = this._to;\n    let factor;\n\n    this._active = from !== to && (loop || (elapsed < duration));\n\n    if (!this._active) {\n      this._target[prop] = to;\n      this._notify(true);\n      return;\n    }\n\n    if (elapsed < 0) {\n      this._target[prop] = from;\n      return;\n    }\n\n    factor = (elapsed / duration) % 2;\n    factor = loop && factor > 1 ? 2 - factor : factor;\n    factor = this._easing(Math.min(1, Math.max(0, factor)));\n\n    this._target[prop] = this._fn(from, to, factor);\n  }\n\n  wait() {\n    const promises = this._promises || (this._promises = []);\n    return new Promise((res, rej) => {\n      promises.push({res, rej});\n    });\n  }\n\n  _notify(resolved) {\n    const method = resolved ? 'res' : 'rej';\n    const promises = this._promises || [];\n    for (let i = 0; i < promises.length; i++) {\n      promises[i][method]();\n    }\n  }\n}\n","import animator from './core.animator.js';\nimport Animation from './core.animation.js';\nimport defaults from './core.defaults.js';\nimport {isArray, isObject} from '../helpers/helpers.core.js';\n\nexport default class Animations {\n  constructor(chart, config) {\n    this._chart = chart;\n    this._properties = new Map();\n    this.configure(config);\n  }\n\n  configure(config) {\n    if (!isObject(config)) {\n      return;\n    }\n\n    const animationOptions = Object.keys(defaults.animation);\n    const animatedProps = this._properties;\n\n    Object.getOwnPropertyNames(config).forEach(key => {\n      const cfg = config[key];\n      if (!isObject(cfg)) {\n        return;\n      }\n      const resolved = {};\n      for (const option of animationOptions) {\n        resolved[option] = cfg[option];\n      }\n\n      (isArray(cfg.properties) && cfg.properties || [key]).forEach((prop) => {\n        if (prop === key || !animatedProps.has(prop)) {\n          animatedProps.set(prop, resolved);\n        }\n      });\n    });\n  }\n\n  /**\n\t * Utility to handle animation of `options`.\n\t * @private\n\t */\n  _animateOptions(target, values) {\n    const newOptions = values.options;\n    const options = resolveTargetOptions(target, newOptions);\n    if (!options) {\n      return [];\n    }\n\n    const animations = this._createAnimations(options, newOptions);\n    if (newOptions.$shared) {\n      // Going to shared options:\n      // After all animations are done, assign the shared options object to the element\n      // So any new updates to the shared options are observed\n      awaitAll(target.options.$animations, newOptions).then(() => {\n        target.options = newOptions;\n      }, () => {\n        // rejected, noop\n      });\n    }\n\n    return animations;\n  }\n\n  /**\n\t * @private\n\t */\n  _createAnimations(target, values) {\n    const animatedProps = this._properties;\n    const animations = [];\n    const running = target.$animations || (target.$animations = {});\n    const props = Object.keys(values);\n    const date = Date.now();\n    let i;\n\n    for (i = props.length - 1; i >= 0; --i) {\n      const prop = props[i];\n      if (prop.charAt(0) === '$') {\n        continue;\n      }\n\n      if (prop === 'options') {\n        animations.push(...this._animateOptions(target, values));\n        continue;\n      }\n      const value = values[prop];\n      let animation = running[prop];\n      const cfg = animatedProps.get(prop);\n\n      if (animation) {\n        if (cfg && animation.active()) {\n          // There is an existing active animation, let's update that\n          animation.update(cfg, value, date);\n          continue;\n        } else {\n          animation.cancel();\n        }\n      }\n      if (!cfg || !cfg.duration) {\n        // not animated, set directly to new value\n        target[prop] = value;\n        continue;\n      }\n\n      running[prop] = animation = new Animation(cfg, target, prop, value);\n      animations.push(animation);\n    }\n    return animations;\n  }\n\n\n  /**\n\t * Update `target` properties to new values, using configured animations\n\t * @param {object} target - object to update\n\t * @param {object} values - new target properties\n\t * @returns {boolean|undefined} - `true` if animations were started\n\t **/\n  update(target, values) {\n    if (this._properties.size === 0) {\n      // Nothing is animated, just apply the new values.\n      Object.assign(target, values);\n      return;\n    }\n\n    const animations = this._createAnimations(target, values);\n\n    if (animations.length) {\n      animator.add(this._chart, animations);\n      return true;\n    }\n  }\n}\n\nfunction awaitAll(animations, properties) {\n  const running = [];\n  const keys = Object.keys(properties);\n  for (let i = 0; i < keys.length; i++) {\n    const anim = animations[keys[i]];\n    if (anim && anim.active()) {\n      running.push(anim.wait());\n    }\n  }\n  // @ts-ignore\n  return Promise.all(running);\n}\n\nfunction resolveTargetOptions(target, newOptions) {\n  if (!newOptions) {\n    return;\n  }\n  let options = target.options;\n  if (!options) {\n    target.options = newOptions;\n    return;\n  }\n  if (options.$shared) {\n    // Going from shared options to distinct one:\n    // Create new options object containing the old shared values and start updating that.\n    target.options = options = Object.assign({}, options, {$shared: false, $animations: {}});\n  }\n  return options;\n}\n","import Animations from './core.animations.js';\nimport defaults from './core.defaults.js';\nimport {isArray, isFinite, isObject, valueOrDefault, resolveObjectKey, defined} from '../helpers/helpers.core.js';\nimport {listenArrayEvents, unlistenArrayEvents} from '../helpers/helpers.collection.js';\nimport {createContext, sign} from '../helpers/index.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('./core.scale.js').default } Scale\n */\n\nfunction scaleClip(scale, allowedOverflow) {\n  const opts = scale && scale.options || {};\n  const reverse = opts.reverse;\n  const min = opts.min === undefined ? allowedOverflow : 0;\n  const max = opts.max === undefined ? allowedOverflow : 0;\n  return {\n    start: reverse ? max : min,\n    end: reverse ? min : max\n  };\n}\n\nfunction defaultClip(xScale, yScale, allowedOverflow) {\n  if (allowedOverflow === false) {\n    return false;\n  }\n  const x = scaleClip(xScale, allowedOverflow);\n  const y = scaleClip(yScale, allowedOverflow);\n\n  return {\n    top: y.end,\n    right: x.end,\n    bottom: y.start,\n    left: x.start\n  };\n}\n\nfunction toClip(value) {\n  let t, r, b, l;\n\n  if (isObject(value)) {\n    t = value.top;\n    r = value.right;\n    b = value.bottom;\n    l = value.left;\n  } else {\n    t = r = b = l = value;\n  }\n\n  return {\n    top: t,\n    right: r,\n    bottom: b,\n    left: l,\n    disabled: value === false\n  };\n}\n\nfunction getSortedDatasetIndices(chart, filterVisible) {\n  const keys = [];\n  const metasets = chart._getSortedDatasetMetas(filterVisible);\n  let i, ilen;\n\n  for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n    keys.push(metasets[i].index);\n  }\n  return keys;\n}\n\nfunction applyStack(stack, value, dsIndex, options = {}) {\n  const keys = stack.keys;\n  const singleMode = options.mode === 'single';\n  let i, ilen, datasetIndex, otherValue;\n\n  if (value === null) {\n    return;\n  }\n\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    datasetIndex = +keys[i];\n    if (datasetIndex === dsIndex) {\n      if (options.all) {\n        continue;\n      }\n      break;\n    }\n    otherValue = stack.values[datasetIndex];\n    if (isFinite(otherValue) && (singleMode || (value === 0 || sign(value) === sign(otherValue)))) {\n      value += otherValue;\n    }\n  }\n  return value;\n}\n\nfunction convertObjectDataToArray(data) {\n  const keys = Object.keys(data);\n  const adata = new Array(keys.length);\n  let i, ilen, key;\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    key = keys[i];\n    adata[i] = {\n      x: key,\n      y: data[key]\n    };\n  }\n  return adata;\n}\n\nfunction isStacked(scale, meta) {\n  const stacked = scale && scale.options.stacked;\n  return stacked || (stacked === undefined && meta.stack !== undefined);\n}\n\nfunction getStackKey(indexScale, valueScale, meta) {\n  return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\n}\n\nfunction getUserBounds(scale) {\n  const {min, max, minDefined, maxDefined} = scale.getUserBounds();\n  return {\n    min: minDefined ? min : Number.NEGATIVE_INFINITY,\n    max: maxDefined ? max : Number.POSITIVE_INFINITY\n  };\n}\n\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\n  const subStack = stacks[stackKey] || (stacks[stackKey] = {});\n  return subStack[indexValue] || (subStack[indexValue] = {});\n}\n\nfunction getLastIndexInStack(stack, vScale, positive, type) {\n  for (const meta of vScale.getMatchingVisibleMetas(type).reverse()) {\n    const value = stack[meta.index];\n    if ((positive && value > 0) || (!positive && value < 0)) {\n      return meta.index;\n    }\n  }\n\n  return null;\n}\n\nfunction updateStacks(controller, parsed) {\n  const {chart, _cachedMeta: meta} = controller;\n  const stacks = chart._stacks || (chart._stacks = {}); // map structure is {stackKey: {datasetIndex: value}}\n  const {iScale, vScale, index: datasetIndex} = meta;\n  const iAxis = iScale.axis;\n  const vAxis = vScale.axis;\n  const key = getStackKey(iScale, vScale, meta);\n  const ilen = parsed.length;\n  let stack;\n\n  for (let i = 0; i < ilen; ++i) {\n    const item = parsed[i];\n    const {[iAxis]: index, [vAxis]: value} = item;\n    const itemStacks = item._stacks || (item._stacks = {});\n    stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\n    stack[datasetIndex] = value;\n\n    stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\n    stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\n\n    const visualValues = stack._visualValues || (stack._visualValues = {});\n    visualValues[datasetIndex] = value;\n  }\n}\n\nfunction getFirstScaleId(chart, axis) {\n  const scales = chart.scales;\n  return Object.keys(scales).filter(key => scales[key].axis === axis).shift();\n}\n\nfunction createDatasetContext(parent, index) {\n  return createContext(parent,\n    {\n      active: false,\n      dataset: undefined,\n      datasetIndex: index,\n      index,\n      mode: 'default',\n      type: 'dataset'\n    }\n  );\n}\n\nfunction createDataContext(parent, index, element) {\n  return createContext(parent, {\n    active: false,\n    dataIndex: index,\n    parsed: undefined,\n    raw: undefined,\n    element,\n    index,\n    mode: 'default',\n    type: 'data'\n  });\n}\n\nfunction clearStacks(meta, items) {\n  // Not using meta.index here, because it might be already updated if the dataset changed location\n  const datasetIndex = meta.controller.index;\n  const axis = meta.vScale && meta.vScale.axis;\n  if (!axis) {\n    return;\n  }\n\n  items = items || meta._parsed;\n  for (const parsed of items) {\n    const stacks = parsed._stacks;\n    if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\n      return;\n    }\n    delete stacks[axis][datasetIndex];\n    if (stacks[axis]._visualValues !== undefined && stacks[axis]._visualValues[datasetIndex] !== undefined) {\n      delete stacks[axis]._visualValues[datasetIndex];\n    }\n  }\n}\n\nconst isDirectUpdateMode = (mode) => mode === 'reset' || mode === 'none';\nconst cloneIfNotShared = (cached, shared) => shared ? cached : Object.assign({}, cached);\nconst createStack = (canStack, meta, chart) => canStack && !meta.hidden && meta._stacked\n  && {keys: getSortedDatasetIndices(chart, true), values: null};\n\nexport default class DatasetController {\n\n  /**\n   * @type {any}\n   */\n  static defaults = {};\n\n  /**\n   * Element type used to generate a meta dataset (e.g. Chart.element.LineElement).\n   */\n  static datasetElementType = null;\n\n  /**\n   * Element type used to generate a meta data (e.g. Chart.element.PointElement).\n   */\n  static dataElementType = null;\n\n  /**\n\t * @param {Chart} chart\n\t * @param {number} datasetIndex\n\t */\n  constructor(chart, datasetIndex) {\n    this.chart = chart;\n    this._ctx = chart.ctx;\n    this.index = datasetIndex;\n    this._cachedDataOpts = {};\n    this._cachedMeta = this.getMeta();\n    this._type = this._cachedMeta.type;\n    this.options = undefined;\n    /** @type {boolean | object} */\n    this._parsing = false;\n    this._data = undefined;\n    this._objectData = undefined;\n    this._sharedOptions = undefined;\n    this._drawStart = undefined;\n    this._drawCount = undefined;\n    this.enableOptionSharing = false;\n    this.supportsDecimation = false;\n    this.$context = undefined;\n    this._syncList = [];\n    this.datasetElementType = new.target.datasetElementType;\n    this.dataElementType = new.target.dataElementType;\n\n    this.initialize();\n  }\n\n  initialize() {\n    const meta = this._cachedMeta;\n    this.configure();\n    this.linkScales();\n    meta._stacked = isStacked(meta.vScale, meta);\n    this.addElements();\n\n    if (this.options.fill && !this.chart.isPluginEnabled('filler')) {\n      console.warn(\"Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options\");\n    }\n  }\n\n  updateIndex(datasetIndex) {\n    if (this.index !== datasetIndex) {\n      clearStacks(this._cachedMeta);\n    }\n    this.index = datasetIndex;\n  }\n\n  linkScales() {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n\n    const chooseId = (axis, x, y, r) => axis === 'x' ? x : axis === 'r' ? r : y;\n\n    const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\n    const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\n    const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\n    const indexAxis = meta.indexAxis;\n    const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\n    const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\n    meta.xScale = this.getScaleForId(xid);\n    meta.yScale = this.getScaleForId(yid);\n    meta.rScale = this.getScaleForId(rid);\n    meta.iScale = this.getScaleForId(iid);\n    meta.vScale = this.getScaleForId(vid);\n  }\n\n  getDataset() {\n    return this.chart.data.datasets[this.index];\n  }\n\n  getMeta() {\n    return this.chart.getDatasetMeta(this.index);\n  }\n\n  /**\n\t * @param {string} scaleID\n\t * @return {Scale}\n\t */\n  getScaleForId(scaleID) {\n    return this.chart.scales[scaleID];\n  }\n\n  /**\n\t * @private\n\t */\n  _getOtherScale(scale) {\n    const meta = this._cachedMeta;\n    return scale === meta.iScale\n      ? meta.vScale\n      : meta.iScale;\n  }\n\n  reset() {\n    this._update('reset');\n  }\n\n  /**\n\t * @private\n\t */\n  _destroy() {\n    const meta = this._cachedMeta;\n    if (this._data) {\n      unlistenArrayEvents(this._data, this);\n    }\n    if (meta._stacked) {\n      clearStacks(meta);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _dataCheck() {\n    const dataset = this.getDataset();\n    const data = dataset.data || (dataset.data = []);\n    const _data = this._data;\n\n    // In order to correctly handle data addition/deletion animation (an thus simulate\n    // real-time charts), we need to monitor these data modifications and synchronize\n    // the internal meta data accordingly.\n\n    if (isObject(data)) {\n      this._data = convertObjectDataToArray(data);\n    } else if (_data !== data) {\n      if (_data) {\n        // This case happens when the user replaced the data array instance.\n        unlistenArrayEvents(_data, this);\n        // Discard old parsed data and stacks\n        const meta = this._cachedMeta;\n        clearStacks(meta);\n        meta._parsed = [];\n      }\n      if (data && Object.isExtensible(data)) {\n        listenArrayEvents(data, this);\n      }\n      this._syncList = [];\n      this._data = data;\n    }\n  }\n\n  addElements() {\n    const meta = this._cachedMeta;\n\n    this._dataCheck();\n\n    if (this.datasetElementType) {\n      meta.dataset = new this.datasetElementType();\n    }\n  }\n\n  buildOrUpdateElements(resetNewElements) {\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n    let stackChanged = false;\n\n    this._dataCheck();\n\n    // make sure cached _stacked status is current\n    const oldStacked = meta._stacked;\n    meta._stacked = isStacked(meta.vScale, meta);\n\n    // detect change in stack option\n    if (meta.stack !== dataset.stack) {\n      stackChanged = true;\n      // remove values from old stack\n      clearStacks(meta);\n      meta.stack = dataset.stack;\n    }\n\n    // Re-sync meta data in case the user replaced the data array or if we missed\n    // any updates and so make sure that we handle number of datapoints changing.\n    this._resyncElements(resetNewElements);\n\n    // if stack changed, update stack values for the whole dataset\n    if (stackChanged || oldStacked !== meta._stacked) {\n      updateStacks(this, meta._parsed);\n    }\n  }\n\n  /**\n\t * Merges user-supplied and default dataset-level options\n\t * @private\n\t */\n  configure() {\n    const config = this.chart.config;\n    const scopeKeys = config.datasetScopeKeys(this._type);\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\n    this.options = config.createResolver(scopes, this.getContext());\n    this._parsing = this.options.parsing;\n    this._cachedDataOpts = {};\n  }\n\n  /**\n\t * @param {number} start\n\t * @param {number} count\n\t */\n  parse(start, count) {\n    const {_cachedMeta: meta, _data: data} = this;\n    const {iScale, _stacked} = meta;\n    const iAxis = iScale.axis;\n\n    let sorted = start === 0 && count === data.length ? true : meta._sorted;\n    let prev = start > 0 && meta._parsed[start - 1];\n    let i, cur, parsed;\n\n    if (this._parsing === false) {\n      meta._parsed = data;\n      meta._sorted = true;\n      parsed = data;\n    } else {\n      if (isArray(data[start])) {\n        parsed = this.parseArrayData(meta, data, start, count);\n      } else if (isObject(data[start])) {\n        parsed = this.parseObjectData(meta, data, start, count);\n      } else {\n        parsed = this.parsePrimitiveData(meta, data, start, count);\n      }\n\n      const isNotInOrderComparedToPrev = () => cur[iAxis] === null || (prev && cur[iAxis] < prev[iAxis]);\n      for (i = 0; i < count; ++i) {\n        meta._parsed[i + start] = cur = parsed[i];\n        if (sorted) {\n          if (isNotInOrderComparedToPrev()) {\n            sorted = false;\n          }\n          prev = cur;\n        }\n      }\n      meta._sorted = sorted;\n    }\n\n    if (_stacked) {\n      updateStacks(this, parsed);\n    }\n  }\n\n  /**\n\t * Parse array of primitive values\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [1,3,4]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id.\n\t * Example: {xScale0: 0, yScale0: 1}\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const labels = iScale.getLabels();\n    const singleScale = iScale === vScale;\n    const parsed = new Array(count);\n    let i, ilen, index;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      parsed[i] = {\n        [iAxis]: singleScale || iScale.parse(labels[index], index),\n        [vAxis]: vScale.parse(data[index], index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of arrays\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [[1,2],[3,4]]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id.\n\t * Example: {x: 0, y: 1}\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(item[0], index),\n        y: yScale.parse(item[1], index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of objects\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [{x:1, y:5}, {x:2, y:10}]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id. _custom is optional\n\t * Example: {xScale0: 0, yScale0: 1, _custom: {r: 10, foo: 'bar'}}\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\n        y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  getParsed(index) {\n    return this._cachedMeta._parsed[index];\n  }\n\n  /**\n\t * @protected\n\t */\n  getDataElement(index) {\n    return this._cachedMeta.data[index];\n  }\n\n  /**\n\t * @protected\n\t */\n  applyStack(scale, parsed, mode) {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const value = parsed[scale.axis];\n    const stack = {\n      keys: getSortedDatasetIndices(chart, true),\n      values: parsed._stacks[scale.axis]._visualValues\n    };\n    return applyStack(stack, value, meta.index, {mode});\n  }\n\n  /**\n\t * @protected\n\t */\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    const parsedValue = parsed[scale.axis];\n    let value = parsedValue === null ? NaN : parsedValue;\n    const values = stack && parsed._stacks[scale.axis];\n    if (stack && values) {\n      stack.values = values;\n      value = applyStack(stack, parsedValue, this._cachedMeta.index);\n    }\n    range.min = Math.min(range.min, value);\n    range.max = Math.max(range.max, value);\n  }\n\n  /**\n\t * @protected\n\t */\n  getMinMax(scale, canStack) {\n    const meta = this._cachedMeta;\n    const _parsed = meta._parsed;\n    const sorted = meta._sorted && scale === meta.iScale;\n    const ilen = _parsed.length;\n    const otherScale = this._getOtherScale(scale);\n    const stack = createStack(canStack, meta, this.chart);\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n    const {min: otherMin, max: otherMax} = getUserBounds(otherScale);\n    let i, parsed;\n\n    function _skip() {\n      parsed = _parsed[i];\n      const otherValue = parsed[otherScale.axis];\n      return !isFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\n    }\n\n    for (i = 0; i < ilen; ++i) {\n      if (_skip()) {\n        continue;\n      }\n      this.updateRangeFromParsed(range, scale, parsed, stack);\n      if (sorted) {\n        // if the data is sorted, we don't need to check further from this end of array\n        break;\n      }\n    }\n    if (sorted) {\n      // in the sorted case, find first non-skipped value from other end of array\n      for (i = ilen - 1; i >= 0; --i) {\n        if (_skip()) {\n          continue;\n        }\n        this.updateRangeFromParsed(range, scale, parsed, stack);\n        break;\n      }\n    }\n    return range;\n  }\n\n  getAllParsedValues(scale) {\n    const parsed = this._cachedMeta._parsed;\n    const values = [];\n    let i, ilen, value;\n\n    for (i = 0, ilen = parsed.length; i < ilen; ++i) {\n      value = parsed[i][scale.axis];\n      if (isFinite(value)) {\n        values.push(value);\n      }\n    }\n    return values;\n  }\n\n  /**\n\t * @return {number|boolean}\n\t * @protected\n\t */\n  getMaxOverflow() {\n    return false;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const vScale = meta.vScale;\n    const parsed = this.getParsed(index);\n    return {\n      label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\n      value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\n    };\n  }\n\n  /**\n\t * @private\n\t */\n  _update(mode) {\n    const meta = this._cachedMeta;\n    this.update(mode || 'default');\n    meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\n  }\n\n  /**\n\t * @param {string} mode\n\t */\n  update(mode) {} // eslint-disable-line no-unused-vars\n\n  draw() {\n    const ctx = this._ctx;\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const elements = meta.data || [];\n    const area = chart.chartArea;\n    const active = [];\n    const start = this._drawStart || 0;\n    const count = this._drawCount || (elements.length - start);\n    const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\n    let i;\n\n    if (meta.dataset) {\n      meta.dataset.draw(ctx, area, start, count);\n    }\n\n    for (i = start; i < start + count; ++i) {\n      const element = elements[i];\n      if (element.hidden) {\n        continue;\n      }\n      if (element.active && drawActiveElementsOnTop) {\n        active.push(element);\n      } else {\n        element.draw(ctx, area);\n      }\n    }\n\n    for (i = 0; i < active.length; ++i) {\n      active[i].draw(ctx, area);\n    }\n  }\n\n  /**\n\t * Returns a set of predefined style properties that should be used to represent the dataset\n\t * or the data if the index is specified\n\t * @param {number} index - data index\n\t * @param {boolean} [active] - true if hover\n\t * @return {object} style object\n\t */\n  getStyle(index, active) {\n    const mode = active ? 'active' : 'default';\n    return index === undefined && this._cachedMeta.dataset\n      ? this.resolveDatasetElementOptions(mode)\n      : this.resolveDataElementOptions(index || 0, mode);\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext(index, active, mode) {\n    const dataset = this.getDataset();\n    let context;\n    if (index >= 0 && index < this._cachedMeta.data.length) {\n      const element = this._cachedMeta.data[index];\n      context = element.$context ||\n        (element.$context = createDataContext(this.getContext(), index, element));\n      context.parsed = this.getParsed(index);\n      context.raw = dataset.data[index];\n      context.index = context.dataIndex = index;\n    } else {\n      context = this.$context ||\n        (this.$context = createDatasetContext(this.chart.getContext(), this.index));\n      context.dataset = dataset;\n      context.index = context.datasetIndex = this.index;\n    }\n\n    context.active = !!active;\n    context.mode = mode;\n    return context;\n  }\n\n  /**\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDatasetElementOptions(mode) {\n    return this._resolveElementOptions(this.datasetElementType.id, mode);\n  }\n\n  /**\n\t * @param {number} index\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDataElementOptions(index, mode) {\n    return this._resolveElementOptions(this.dataElementType.id, mode, index);\n  }\n\n  /**\n\t * @private\n\t */\n  _resolveElementOptions(elementType, mode = 'default', index) {\n    const active = mode === 'active';\n    const cache = this._cachedDataOpts;\n    const cacheKey = elementType + '-' + mode;\n    const cached = cache[cacheKey];\n    const sharing = this.enableOptionSharing && defined(index);\n    if (cached) {\n      return cloneIfNotShared(cached, sharing);\n    }\n    const config = this.chart.config;\n    const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\n    const prefixes = active ? [`${elementType}Hover`, 'hover', elementType, ''] : [elementType, ''];\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n    const names = Object.keys(defaults.elements[elementType]);\n    // context is provided as a function, and is called only if needed,\n    // so we don't create a context for each element if not needed.\n    const context = () => this.getContext(index, active, mode);\n    const values = config.resolveNamedOptions(scopes, names, context, prefixes);\n\n    if (values.$shared) {\n      // `$shared` indicates this set of options can be shared between multiple elements.\n      // Sharing is used to reduce number of properties to change during animation.\n      values.$shared = sharing;\n\n      // We cache options by `mode`, which can be 'active' for example. This enables us\n      // to have the 'active' element options and 'default' options to switch between\n      // when interacting.\n      cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\n    }\n\n    return values;\n  }\n\n\n  /**\n\t * @private\n\t */\n  _resolveAnimations(index, transition, active) {\n    const chart = this.chart;\n    const cache = this._cachedDataOpts;\n    const cacheKey = `animation-${transition}`;\n    const cached = cache[cacheKey];\n    if (cached) {\n      return cached;\n    }\n    let options;\n    if (chart.options.animation !== false) {\n      const config = this.chart.config;\n      const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\n      const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n      options = config.createResolver(scopes, this.getContext(index, active, transition));\n    }\n    const animations = new Animations(chart, options && options.animations);\n    if (options && options._cacheable) {\n      cache[cacheKey] = Object.freeze(animations);\n    }\n    return animations;\n  }\n\n  /**\n\t * Utility for getting the options object shared between elements\n\t * @protected\n\t */\n  getSharedOptions(options) {\n    if (!options.$shared) {\n      return;\n    }\n    return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\n  }\n\n  /**\n\t * Utility for determining if `options` should be included in the updated properties\n\t * @protected\n\t */\n  includeOptions(mode, sharedOptions) {\n    return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\n  }\n\n  /**\n   * @todo v4, rename to getSharedOptions and remove excess functions\n   */\n  _getSharedOptions(start, mode) {\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const previouslySharedOptions = this._sharedOptions;\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions) || (sharedOptions !== previouslySharedOptions);\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n    return {sharedOptions, includeOptions};\n  }\n\n  /**\n\t * Utility for updating an element with new properties, using animations when appropriate.\n\t * @protected\n\t */\n  updateElement(element, index, properties, mode) {\n    if (isDirectUpdateMode(mode)) {\n      Object.assign(element, properties);\n    } else {\n      this._resolveAnimations(index, mode).update(element, properties);\n    }\n  }\n\n  /**\n\t * Utility to animate the shared options, that are potentially affecting multiple elements.\n\t * @protected\n\t */\n  updateSharedOptions(sharedOptions, mode, newOptions) {\n    if (sharedOptions && !isDirectUpdateMode(mode)) {\n      this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _setStyle(element, index, mode, active) {\n    element.active = active;\n    const options = this.getStyle(index, active);\n    this._resolveAnimations(index, mode, active).update(element, {\n      // When going from active to inactive, we need to update to the shared options.\n      // This way the once hovered element will end up with the same original shared options instance, after animation.\n      options: (!active && this.getSharedOptions(options)) || options\n    });\n  }\n\n  removeHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', false);\n  }\n\n  setHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', true);\n  }\n\n  /**\n\t * @private\n\t */\n  _removeDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n\n    if (element) {\n      this._setStyle(element, undefined, 'active', false);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _setDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n\n    if (element) {\n      this._setStyle(element, undefined, 'active', true);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _resyncElements(resetNewElements) {\n    const data = this._data;\n    const elements = this._cachedMeta.data;\n\n    // Apply changes detected through array listeners\n    for (const [method, arg1, arg2] of this._syncList) {\n      this[method](arg1, arg2);\n    }\n    this._syncList = [];\n\n    const numMeta = elements.length;\n    const numData = data.length;\n    const count = Math.min(numData, numMeta);\n\n    if (count) {\n      // TODO: It is not optimal to always parse the old data\n      // This is done because we are not detecting direct assignments:\n      // chart.data.datasets[0].data[5] = 10;\n      // chart.data.datasets[0].data[5].y = 10;\n      this.parse(0, count);\n    }\n\n    if (numData > numMeta) {\n      this._insertElements(numMeta, numData - numMeta, resetNewElements);\n    } else if (numData < numMeta) {\n      this._removeElements(numData, numMeta - numData);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _insertElements(start, count, resetNewElements = true) {\n    const meta = this._cachedMeta;\n    const data = meta.data;\n    const end = start + count;\n    let i;\n\n    const move = (arr) => {\n      arr.length += count;\n      for (i = arr.length - 1; i >= end; i--) {\n        arr[i] = arr[i - count];\n      }\n    };\n    move(data);\n\n    for (i = start; i < end; ++i) {\n      data[i] = new this.dataElementType();\n    }\n\n    if (this._parsing) {\n      move(meta._parsed);\n    }\n    this.parse(start, count);\n\n    if (resetNewElements) {\n      this.updateElements(data, start, count, 'reset');\n    }\n  }\n\n  updateElements(element, start, count, mode) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * @private\n\t */\n  _removeElements(start, count) {\n    const meta = this._cachedMeta;\n    if (this._parsing) {\n      const removed = meta._parsed.splice(start, count);\n      if (meta._stacked) {\n        clearStacks(meta, removed);\n      }\n    }\n    meta.data.splice(start, count);\n  }\n\n  /**\n\t * @private\n   */\n  _sync(args) {\n    if (this._parsing) {\n      this._syncList.push(args);\n    } else {\n      const [method, arg1, arg2] = args;\n      this[method](arg1, arg2);\n    }\n    this.chart._dataChanges.push([this.index, ...args]);\n  }\n\n  _onDataPush() {\n    const count = arguments.length;\n    this._sync(['_insertElements', this.getDataset().data.length - count, count]);\n  }\n\n  _onDataPop() {\n    this._sync(['_removeElements', this._cachedMeta.data.length - 1, 1]);\n  }\n\n  _onDataShift() {\n    this._sync(['_removeElements', 0, 1]);\n  }\n\n  _onDataSplice(start, count) {\n    if (count) {\n      this._sync(['_removeElements', start, count]);\n    }\n    const newCount = arguments.length - 2;\n    if (newCount) {\n      this._sync(['_insertElements', start, newCount]);\n    }\n  }\n\n  _onDataUnshift() {\n    this._sync(['_insertElements', 0, arguments.length]);\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {\n  _arrayUnique, isArray, isNullOrUndef,\n  valueOrDefault, resolveObjectKey, sign, defined\n} from '../helpers/index.js';\n\nfunction getAllScaleValues(scale, type) {\n  if (!scale._cache.$bar) {\n    const visibleMetas = scale.getMatchingVisibleMetas(type);\n    let values = [];\n\n    for (let i = 0, ilen = visibleMetas.length; i < ilen; i++) {\n      values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\n    }\n    scale._cache.$bar = _arrayUnique(values.sort((a, b) => a - b));\n  }\n  return scale._cache.$bar;\n}\n\n/**\n * Computes the \"optimal\" sample size to maintain bars equally sized while preventing overlap.\n * @private\n */\nfunction computeMinSampleSize(meta) {\n  const scale = meta.iScale;\n  const values = getAllScaleValues(scale, meta.type);\n  let min = scale._length;\n  let i, ilen, curr, prev;\n  const updateMinAndPrev = () => {\n    if (curr === 32767 || curr === -32768) {\n      // Ignore truncated pixels\n      return;\n    }\n    if (defined(prev)) {\n      // curr - prev === 0 is ignored\n      min = Math.min(min, Math.abs(curr - prev) || min);\n    }\n    prev = curr;\n  };\n\n  for (i = 0, ilen = values.length; i < ilen; ++i) {\n    curr = scale.getPixelForValue(values[i]);\n    updateMinAndPrev();\n  }\n\n  prev = undefined;\n  for (i = 0, ilen = scale.ticks.length; i < ilen; ++i) {\n    curr = scale.getPixelForTick(i);\n    updateMinAndPrev();\n  }\n\n  return min;\n}\n\n/**\n * Computes an \"ideal\" category based on the absolute bar thickness or, if undefined or null,\n * uses the smallest interval (see computeMinSampleSize) that prevents bar overlapping. This\n * mode currently always generates bars equally sized (until we introduce scriptable options?).\n * @private\n */\nfunction computeFitCategoryTraits(index, ruler, options, stackCount) {\n  const thickness = options.barThickness;\n  let size, ratio;\n\n  if (isNullOrUndef(thickness)) {\n    size = ruler.min * options.categoryPercentage;\n    ratio = options.barPercentage;\n  } else {\n    // When bar thickness is enforced, category and bar percentages are ignored.\n    // Note(SB): we could add support for relative bar thickness (e.g. barThickness: '50%')\n    // and deprecate barPercentage since this value is ignored when thickness is absolute.\n    size = thickness * stackCount;\n    ratio = 1;\n  }\n\n  return {\n    chunk: size / stackCount,\n    ratio,\n    start: ruler.pixels[index] - (size / 2)\n  };\n}\n\n/**\n * Computes an \"optimal\" category that globally arranges bars side by side (no gap when\n * percentage options are 1), based on the previous and following categories. This mode\n * generates bars with different widths when data are not evenly spaced.\n * @private\n */\nfunction computeFlexCategoryTraits(index, ruler, options, stackCount) {\n  const pixels = ruler.pixels;\n  const curr = pixels[index];\n  let prev = index > 0 ? pixels[index - 1] : null;\n  let next = index < pixels.length - 1 ? pixels[index + 1] : null;\n  const percent = options.categoryPercentage;\n\n  if (prev === null) {\n    // first data: its size is double based on the next point or,\n    // if it's also the last data, we use the scale size.\n    prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\n  }\n\n  if (next === null) {\n    // last data: its size is also double based on the previous point.\n    next = curr + curr - prev;\n  }\n\n  const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\n  const size = Math.abs(next - prev) / 2 * percent;\n\n  return {\n    chunk: size / stackCount,\n    ratio: options.barPercentage,\n    start\n  };\n}\n\nfunction parseFloatBar(entry, item, vScale, i) {\n  const startValue = vScale.parse(entry[0], i);\n  const endValue = vScale.parse(entry[1], i);\n  const min = Math.min(startValue, endValue);\n  const max = Math.max(startValue, endValue);\n  let barStart = min;\n  let barEnd = max;\n\n  if (Math.abs(min) > Math.abs(max)) {\n    barStart = max;\n    barEnd = min;\n  }\n\n  // Store `barEnd` (furthest away from origin) as parsed value,\n  // to make stacking straight forward\n  item[vScale.axis] = barEnd;\n\n  item._custom = {\n    barStart,\n    barEnd,\n    start: startValue,\n    end: endValue,\n    min,\n    max\n  };\n}\n\nfunction parseValue(entry, item, vScale, i) {\n  if (isArray(entry)) {\n    parseFloatBar(entry, item, vScale, i);\n  } else {\n    item[vScale.axis] = vScale.parse(entry, i);\n  }\n  return item;\n}\n\nfunction parseArrayOrPrimitive(meta, data, start, count) {\n  const iScale = meta.iScale;\n  const vScale = meta.vScale;\n  const labels = iScale.getLabels();\n  const singleScale = iScale === vScale;\n  const parsed = [];\n  let i, ilen, item, entry;\n\n  for (i = start, ilen = start + count; i < ilen; ++i) {\n    entry = data[i];\n    item = {};\n    item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\n    parsed.push(parseValue(entry, item, vScale, i));\n  }\n  return parsed;\n}\n\nfunction isFloatBar(custom) {\n  return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\n}\n\nfunction barSign(size, vScale, actualBase) {\n  if (size !== 0) {\n    return sign(size);\n  }\n  return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\n}\n\nfunction borderProps(properties) {\n  let reverse, start, end, top, bottom;\n  if (properties.horizontal) {\n    reverse = properties.base > properties.x;\n    start = 'left';\n    end = 'right';\n  } else {\n    reverse = properties.base < properties.y;\n    start = 'bottom';\n    end = 'top';\n  }\n  if (reverse) {\n    top = 'end';\n    bottom = 'start';\n  } else {\n    top = 'start';\n    bottom = 'end';\n  }\n  return {start, end, reverse, top, bottom};\n}\n\nfunction setBorderSkipped(properties, options, stack, index) {\n  let edge = options.borderSkipped;\n  const res = {};\n\n  if (!edge) {\n    properties.borderSkipped = res;\n    return;\n  }\n\n  if (edge === true) {\n    properties.borderSkipped = {top: true, right: true, bottom: true, left: true};\n    return;\n  }\n\n  const {start, end, reverse, top, bottom} = borderProps(properties);\n\n  if (edge === 'middle' && stack) {\n    properties.enableBorderRadius = true;\n    if ((stack._top || 0) === index) {\n      edge = top;\n    } else if ((stack._bottom || 0) === index) {\n      edge = bottom;\n    } else {\n      res[parseEdge(bottom, start, end, reverse)] = true;\n      edge = top;\n    }\n  }\n\n  res[parseEdge(edge, start, end, reverse)] = true;\n  properties.borderSkipped = res;\n}\n\nfunction parseEdge(edge, a, b, reverse) {\n  if (reverse) {\n    edge = swap(edge, a, b);\n    edge = startEnd(edge, b, a);\n  } else {\n    edge = startEnd(edge, a, b);\n  }\n  return edge;\n}\n\nfunction swap(orig, v1, v2) {\n  return orig === v1 ? v2 : orig === v2 ? v1 : orig;\n}\n\nfunction startEnd(v, start, end) {\n  return v === 'start' ? start : v === 'end' ? end : v;\n}\n\nfunction setInflateAmount(properties, {inflateAmount}, ratio) {\n  properties.inflateAmount = inflateAmount === 'auto'\n    ? ratio === 1 ? 0.33 : 0\n    : inflateAmount;\n}\n\nexport default class BarController extends DatasetController {\n\n  static id = 'bar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'bar',\n\n    categoryPercentage: 0.8,\n    barPercentage: 0.9,\n    grouped: true,\n\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'base', 'width', 'height']\n      }\n    }\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      _index_: {\n        type: 'category',\n        offset: true,\n        grid: {\n          offset: true\n        }\n      },\n      _value_: {\n        type: 'linear',\n        beginAtZero: true,\n      }\n    }\n  };\n\n\n  /**\n\t * Overriding primitive data parsing since we support mixed primitive/array\n\t * data for float bars\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n\n  /**\n\t * Overriding array data parsing since we support mixed primitive/array\n\t * data for float bars\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n\n  /**\n\t * Overriding object data parsing since we support mixed primitive/array\n\t * value-scale data for float bars\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const parsed = [];\n    let i, ilen, item, obj;\n    for (i = start, ilen = start + count; i < ilen; ++i) {\n      obj = data[i];\n      item = {};\n      item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\n      parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    super.updateRangeFromParsed(range, scale, parsed, stack);\n    const custom = parsed._custom;\n    if (custom && scale === this._cachedMeta.vScale) {\n      // float bar: only one end of the bar is considered by `super`\n      range.min = Math.min(range.min, custom.min);\n      range.max = Math.max(range.max, custom.max);\n    }\n  }\n\n  /**\n\t * @return {number|boolean}\n\t * @protected\n\t */\n  getMaxOverflow() {\n    return 0;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const {iScale, vScale} = meta;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const value = isFloatBar(custom)\n      ? '[' + custom.start + ', ' + custom.end + ']'\n      : '' + vScale.getLabelForValue(parsed[vScale.axis]);\n\n    return {\n      label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\n      value\n    };\n  }\n\n  initialize() {\n    this.enableOptionSharing = true;\n\n    super.initialize();\n\n    const meta = this._cachedMeta;\n    meta.stack = this.getDataset().stack;\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    this.updateElements(meta.data, 0, meta.data.length, mode);\n  }\n\n  updateElements(bars, start, count, mode) {\n    const reset = mode === 'reset';\n    const {index, _cachedMeta: {vScale}} = this;\n    const base = vScale.getBasePixel();\n    const horizontal = vScale.isHorizontal();\n    const ruler = this._getRuler();\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n\n    for (let i = start; i < start + count; i++) {\n      const parsed = this.getParsed(i);\n      const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {base, head: base} : this._calculateBarValuePixels(i);\n      const ipixels = this._calculateBarIndexPixels(i, ruler);\n      const stack = (parsed._stacks || {})[vScale.axis];\n\n      const properties = {\n        horizontal,\n        base: vpixels.base,\n        enableBorderRadius: !stack || isFloatBar(parsed._custom) || (index === stack._top || index === stack._bottom),\n        x: horizontal ? vpixels.head : ipixels.center,\n        y: horizontal ? ipixels.center : vpixels.head,\n        height: horizontal ? ipixels.size : Math.abs(vpixels.size),\n        width: horizontal ? Math.abs(vpixels.size) : ipixels.size\n      };\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\n      }\n      const options = properties.options || bars[i].options;\n      setBorderSkipped(properties, options, stack, index);\n      setInflateAmount(properties, options, ruler.ratio);\n      this.updateElement(bars[i], i, properties, mode);\n    }\n  }\n\n  /**\n\t * Returns the stacks based on groups and bar visibility.\n\t * @param {number} [last] - The dataset index\n\t * @param {number} [dataIndex] - The data index of the ruler\n\t * @returns {string[]} The list of stack IDs\n\t * @private\n\t */\n  _getStacks(last, dataIndex) {\n    const {iScale} = this._cachedMeta;\n    const metasets = iScale.getMatchingVisibleMetas(this._type)\n      .filter(meta => meta.controller.options.grouped);\n    const stacked = iScale.options.stacked;\n    const stacks = [];\n\n    const skipNull = (meta) => {\n      const parsed = meta.controller.getParsed(dataIndex);\n      const val = parsed && parsed[meta.vScale.axis];\n\n      if (isNullOrUndef(val) || isNaN(val)) {\n        return true;\n      }\n    };\n\n    for (const meta of metasets) {\n      if (dataIndex !== undefined && skipNull(meta)) {\n        continue;\n      }\n\n      // stacked   | meta.stack\n      //           | found | not found | undefined\n      // false     |   x   |     x     |     x\n      // true      |       |     x     |\n      // undefined |       |     x     |     x\n      if (stacked === false || stacks.indexOf(meta.stack) === -1 ||\n\t\t\t\t(stacked === undefined && meta.stack === undefined)) {\n        stacks.push(meta.stack);\n      }\n      if (meta.index === last) {\n        break;\n      }\n    }\n\n    // No stacks? that means there is no visible data. Let's still initialize an `undefined`\n    // stack where possible invisible bars will be located.\n    // https://github.com/chartjs/Chart.js/issues/6368\n    if (!stacks.length) {\n      stacks.push(undefined);\n    }\n\n    return stacks;\n  }\n\n  /**\n\t * Returns the effective number of stacks based on groups and bar visibility.\n\t * @private\n\t */\n  _getStackCount(index) {\n    return this._getStacks(undefined, index).length;\n  }\n\n  /**\n\t * Returns the stack index for the given dataset based on groups and bar visibility.\n\t * @param {number} [datasetIndex] - The dataset index\n\t * @param {string} [name] - The stack name to find\n   * @param {number} [dataIndex]\n\t * @returns {number} The stack index\n\t * @private\n\t */\n  _getStackIndex(datasetIndex, name, dataIndex) {\n    const stacks = this._getStacks(datasetIndex, dataIndex);\n    const index = (name !== undefined)\n      ? stacks.indexOf(name)\n      : -1; // indexOf returns -1 if element is not present\n\n    return (index === -1)\n      ? stacks.length - 1\n      : index;\n  }\n\n  /**\n\t * @private\n\t */\n  _getRuler() {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const pixels = [];\n    let i, ilen;\n\n    for (i = 0, ilen = meta.data.length; i < ilen; ++i) {\n      pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\n    }\n\n    const barThickness = opts.barThickness;\n    const min = barThickness || computeMinSampleSize(meta);\n\n    return {\n      min,\n      pixels,\n      start: iScale._startPixel,\n      end: iScale._endPixel,\n      stackCount: this._getStackCount(),\n      scale: iScale,\n      grouped: opts.grouped,\n      // bar thickness ratio used for non-grouped bars\n      ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\n    };\n  }\n\n  /**\n\t * Note: pixel values are not clamped to the scale area.\n\t * @private\n\t */\n  _calculateBarValuePixels(index) {\n    const {_cachedMeta: {vScale, _stacked, index: datasetIndex}, options: {base: baseValue, minBarLength}} = this;\n    const actualBase = baseValue || 0;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const floating = isFloatBar(custom);\n    let value = parsed[vScale.axis];\n    let start = 0;\n    let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\n    let head, size;\n\n    if (length !== value) {\n      start = length - value;\n      length = value;\n    }\n\n    if (floating) {\n      value = custom.barStart;\n      length = custom.barEnd - custom.barStart;\n      // bars crossing origin are not stacked\n      if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\n        start = 0;\n      }\n      start += value;\n    }\n\n    const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\n    let base = vScale.getPixelForValue(startValue);\n\n    if (this.chart.getDataVisibility(index)) {\n      head = vScale.getPixelForValue(start + length);\n    } else {\n      // When not visible, no height\n      head = base;\n    }\n\n    size = head - base;\n\n    if (Math.abs(size) < minBarLength) {\n      size = barSign(size, vScale, actualBase) * minBarLength;\n      if (value === actualBase) {\n        base -= size / 2;\n      }\n      const startPixel = vScale.getPixelForDecimal(0);\n      const endPixel = vScale.getPixelForDecimal(1);\n      const min = Math.min(startPixel, endPixel);\n      const max = Math.max(startPixel, endPixel);\n      base = Math.max(Math.min(base, max), min);\n      head = base + size;\n\n      if (_stacked && !floating) {\n        // visual data coordinates after applying minBarLength\n        parsed._stacks[vScale.axis]._visualValues[datasetIndex] = vScale.getValueForPixel(head) - vScale.getValueForPixel(base);\n      }\n    }\n\n    if (base === vScale.getPixelForValue(actualBase)) {\n      const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\n      base += halfGrid;\n      size -= halfGrid;\n    }\n\n    return {\n      size,\n      base,\n      head,\n      center: head + size / 2\n    };\n  }\n\n  /**\n\t * @private\n\t */\n  _calculateBarIndexPixels(index, ruler) {\n    const scale = ruler.scale;\n    const options = this.options;\n    const skipNull = options.skipNull;\n    const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\n    let center, size;\n    if (ruler.grouped) {\n      const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\n      const range = options.barThickness === 'flex'\n        ? computeFlexCategoryTraits(index, ruler, options, stackCount)\n        : computeFitCategoryTraits(index, ruler, options, stackCount);\n\n      const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined);\n      center = range.start + (range.chunk * stackIndex) + (range.chunk / 2);\n      size = Math.min(maxBarThickness, range.chunk * range.ratio);\n    } else {\n      // For non-grouped bar charts, exact pixel values are used\n      center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\n      size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\n    }\n\n    return {\n      base: center - size / 2,\n      head: center + size / 2,\n      center,\n      size\n    };\n  }\n\n  draw() {\n    const meta = this._cachedMeta;\n    const vScale = meta.vScale;\n    const rects = meta.data;\n    const ilen = rects.length;\n    let i = 0;\n\n    for (; i < ilen; ++i) {\n      if (this.getParsed(i)[vScale.axis] !== null) {\n        rects[i].draw(this._ctx);\n      }\n    }\n  }\n\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {valueOrDefault} from '../helpers/helpers.core.js';\n\nexport default class BubbleController extends DatasetController {\n\n  static id = 'bubble';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'point',\n\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'borderWidth', 'radius']\n      }\n    }\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      x: {\n        type: 'linear'\n      },\n      y: {\n        type: 'linear'\n      }\n    }\n  };\n\n  initialize() {\n    this.enableOptionSharing = true;\n    super.initialize();\n  }\n\n  /**\n\t * Parse array of primitive values\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    const parsed = super.parsePrimitiveData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of arrays\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    const parsed = super.parseArrayData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of objects\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const parsed = super.parseObjectData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const data = this._cachedMeta.data;\n\n    let max = 0;\n    for (let i = data.length - 1; i >= 0; --i) {\n      max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n    }\n    return max > 0 && max;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const labels = this.chart.data.labels || [];\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n    const r = parsed._custom;\n\n    return {\n      label: labels[index] || '',\n      value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\n    };\n  }\n\n  update(mode) {\n    const points = this._cachedMeta.data;\n\n    // Update Points\n    this.updateElements(points, 0, points.length, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const parsed = !reset && this.getParsed(i);\n      const properties = {};\n      const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\n      const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel);\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n\n        if (reset) {\n          properties.options.radius = 0;\n        }\n      }\n\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n\n  /**\n\t * @param {number} index\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDataElementOptions(index, mode) {\n    const parsed = this.getParsed(index);\n    let values = super.resolveDataElementOptions(index, mode);\n\n    // In case values were cached (and thus frozen), we need to clone the values\n    if (values.$shared) {\n      values = Object.assign({}, values, {$shared: false});\n    }\n\n    // Custom radius resolution\n    const radius = values.radius;\n    if (mode !== 'active') {\n      values.radius = 0;\n    }\n    values.radius += valueOrDefault(parsed && parsed._custom, radius);\n\n    return values;\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isObject, resolveObjectKey, toPercentage, toDimension, valueOrDefault} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {toRadians, PI, TAU, HALF_PI, _angleBetween} from '../helpers/helpers.math.js';\n\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\nfunction getRatioAndOffset(rotation, circumference, cutout) {\n  let ratioX = 1;\n  let ratioY = 1;\n  let offsetX = 0;\n  let offsetY = 0;\n  // If the chart's circumference isn't a full circle, calculate size as a ratio of the width/height of the arc\n  if (circumference < TAU) {\n    const startAngle = rotation;\n    const endAngle = startAngle + circumference;\n    const startX = Math.cos(startAngle);\n    const startY = Math.sin(startAngle);\n    const endX = Math.cos(endAngle);\n    const endY = Math.sin(endAngle);\n    const calcMax = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\n    const calcMin = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\n    const maxX = calcMax(0, startX, endX);\n    const maxY = calcMax(HALF_PI, startY, endY);\n    const minX = calcMin(PI, startX, endX);\n    const minY = calcMin(PI + HALF_PI, startY, endY);\n    ratioX = (maxX - minX) / 2;\n    ratioY = (maxY - minY) / 2;\n    offsetX = -(maxX + minX) / 2;\n    offsetY = -(maxY + minY) / 2;\n  }\n  return {ratioX, ratioY, offsetX, offsetY};\n}\n\nexport default class DoughnutController extends DatasetController {\n\n  static id = 'doughnut';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'arc',\n    animation: {\n      // Boolean - Whether we animate the rotation of the Doughnut\n      animateRotate: true,\n      // Boolean - Whether we animate scaling the Doughnut from the centre\n      animateScale: false\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['circumference', 'endAngle', 'innerRadius', 'outerRadius', 'startAngle', 'x', 'y', 'offset', 'borderWidth', 'spacing']\n      },\n    },\n    // The percentage of the chart that we cut out of the middle.\n    cutout: '50%',\n\n    // The rotation of the chart, where the first data arc begins.\n    rotation: 0,\n\n    // The total circumference of the chart.\n    circumference: 360,\n\n    // The outr radius of the chart\n    radius: '100%',\n\n    // Spacing between arcs\n    spacing: 0,\n\n    indexAxis: 'r',\n  };\n\n  static descriptors = {\n    _scriptable: (name) => name !== 'spacing',\n    _indexable: (name) => name !== 'spacing',\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    // Need to override these to give a nice default\n    plugins: {\n      legend: {\n        labels: {\n          generateLabels(chart) {\n            const data = chart.data;\n            if (data.labels.length && data.datasets.length) {\n              const {labels: {pointStyle, color}} = chart.legend.options;\n\n              return data.labels.map((label, i) => {\n                const meta = chart.getDatasetMeta(0);\n                const style = meta.controller.getStyle(i);\n\n                return {\n                  text: label,\n                  fillStyle: style.backgroundColor,\n                  strokeStyle: style.borderColor,\n                  fontColor: color,\n                  lineWidth: style.borderWidth,\n                  pointStyle: pointStyle,\n                  hidden: !chart.getDataVisibility(i),\n\n                  // Extra data used for toggling the correct item\n                  index: i\n                };\n              });\n            }\n            return [];\n          }\n        },\n\n        onClick(e, legendItem, legend) {\n          legend.chart.toggleDataVisibility(legendItem.index);\n          legend.chart.update();\n        }\n      }\n    }\n  };\n\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n\n    this.enableOptionSharing = true;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.offsetX = undefined;\n    this.offsetY = undefined;\n  }\n\n  linkScales() {}\n\n  /**\n\t * Override data parsing, since we are not using scales\n\t */\n  parse(start, count) {\n    const data = this.getDataset().data;\n    const meta = this._cachedMeta;\n\n    if (this._parsing === false) {\n      meta._parsed = data;\n    } else {\n      let getter = (i) => +data[i];\n\n      if (isObject(data[start])) {\n        const {key = 'value'} = this._parsing;\n        getter = (i) => +resolveObjectKey(data[i], key);\n      }\n\n      let i, ilen;\n      for (i = start, ilen = start + count; i < ilen; ++i) {\n        meta._parsed[i] = getter(i);\n      }\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _getRotation() {\n    return toRadians(this.options.rotation - 90);\n  }\n\n  /**\n\t * @private\n\t */\n  _getCircumference() {\n    return toRadians(this.options.circumference);\n  }\n\n  /**\n\t * Get the maximal rotation & circumference extents\n\t * across all visible datasets.\n\t */\n  _getRotationExtents() {\n    let min = TAU;\n    let max = -TAU;\n\n    for (let i = 0; i < this.chart.data.datasets.length; ++i) {\n      if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {\n        const controller = this.chart.getDatasetMeta(i).controller;\n        const rotation = controller._getRotation();\n        const circumference = controller._getCircumference();\n\n        min = Math.min(min, rotation);\n        max = Math.max(max, rotation + circumference);\n      }\n    }\n\n    return {\n      rotation: min,\n      circumference: max - min,\n    };\n  }\n\n  /**\n\t * @param {string} mode\n\t */\n  update(mode) {\n    const chart = this.chart;\n    const {chartArea} = chart;\n    const meta = this._cachedMeta;\n    const arcs = meta.data;\n    const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\n    const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\n    const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\n    const chartWeight = this._getRingWeight(this.index);\n\n    // Compute the maximal rotation & circumference limits.\n    // If we only consider our dataset, this can cause problems when two datasets\n    // are both less than a circle with different rotations (starting angles)\n    const {circumference, rotation} = this._getRotationExtents();\n    const {ratioX, ratioY, offsetX, offsetY} = getRatioAndOffset(rotation, circumference, cutout);\n    const maxWidth = (chartArea.width - spacing) / ratioX;\n    const maxHeight = (chartArea.height - spacing) / ratioY;\n    const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\n    const outerRadius = toDimension(this.options.radius, maxRadius);\n    const innerRadius = Math.max(outerRadius * cutout, 0);\n    const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\n    this.offsetX = offsetX * outerRadius;\n    this.offsetY = offsetY * outerRadius;\n\n    meta.total = this.calculateTotal();\n\n    this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\n    this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\n\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n\n  /**\n   * @private\n   */\n  _circumference(i, reset) {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const circumference = this._getCircumference();\n    if ((reset && opts.animation.animateRotate) || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\n      return 0;\n    }\n    return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\n  }\n\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const centerX = (chartArea.left + chartArea.right) / 2;\n    const centerY = (chartArea.top + chartArea.bottom) / 2;\n    const animateScale = reset && animationOpts.animateScale;\n    const innerRadius = animateScale ? 0 : this.innerRadius;\n    const outerRadius = animateScale ? 0 : this.outerRadius;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    let startAngle = this._getRotation();\n    let i;\n\n    for (i = 0; i < start; ++i) {\n      startAngle += this._circumference(i, reset);\n    }\n\n    for (i = start; i < start + count; ++i) {\n      const circumference = this._circumference(i, reset);\n      const arc = arcs[i];\n      const properties = {\n        x: centerX + this.offsetX,\n        y: centerY + this.offsetY,\n        startAngle,\n        endAngle: startAngle + circumference,\n        circumference,\n        outerRadius,\n        innerRadius\n      };\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\n      }\n      startAngle += circumference;\n\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n\n  calculateTotal() {\n    const meta = this._cachedMeta;\n    const metaData = meta.data;\n    let total = 0;\n    let i;\n\n    for (i = 0; i < metaData.length; i++) {\n      const value = meta._parsed[i];\n      if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\n        total += Math.abs(value);\n      }\n    }\n\n    return total;\n  }\n\n  calculateCircumference(value) {\n    const total = this._cachedMeta.total;\n    if (total > 0 && !isNaN(value)) {\n      return TAU * (Math.abs(value) / total);\n    }\n    return 0;\n  }\n\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index], chart.options.locale);\n\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n\n  getMaxBorderWidth(arcs) {\n    let max = 0;\n    const chart = this.chart;\n    let i, ilen, meta, controller, options;\n\n    if (!arcs) {\n      // Find the outmost visible dataset\n      for (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\n        if (chart.isDatasetVisible(i)) {\n          meta = chart.getDatasetMeta(i);\n          arcs = meta.data;\n          controller = meta.controller;\n          break;\n        }\n      }\n    }\n\n    if (!arcs) {\n      return 0;\n    }\n\n    for (i = 0, ilen = arcs.length; i < ilen; ++i) {\n      options = controller.resolveDataElementOptions(i);\n      if (options.borderAlign !== 'inner') {\n        max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\n      }\n    }\n    return max;\n  }\n\n  getMaxOffset(arcs) {\n    let max = 0;\n\n    for (let i = 0, ilen = arcs.length; i < ilen; ++i) {\n      const options = this.resolveDataElementOptions(i);\n      max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\n    }\n    return max;\n  }\n\n  /**\n\t * Get radius length offset of the dataset in relation to the visible datasets weights. This allows determining the inner and outer radius correctly\n\t * @private\n\t */\n  _getRingWeightOffset(datasetIndex) {\n    let ringWeightOffset = 0;\n\n    for (let i = 0; i < datasetIndex; ++i) {\n      if (this.chart.isDatasetVisible(i)) {\n        ringWeightOffset += this._getRingWeight(i);\n      }\n    }\n\n    return ringWeightOffset;\n  }\n\n  /**\n\t * @private\n\t */\n  _getRingWeight(datasetIndex) {\n    return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\n  }\n\n  /**\n\t * Returns the sum of all visible data set weights.\n\t * @private\n\t */\n  _getVisibleDatasetWeightTotal() {\n    return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isNullOrUndef} from '../helpers/index.js';\nimport {isNumber} from '../helpers/helpers.math.js';\nimport {_getStartAndCountOfVisiblePoints, _scaleRangesChanged} from '../helpers/helpers.extras.js';\n\nexport default class LineController extends DatasetController {\n\n  static id = 'line';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: 'line',\n    dataElementType: 'point',\n\n    showLine: true,\n    spanGaps: false,\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      _index_: {\n        type: 'category',\n      },\n      _value_: {\n        type: 'linear',\n      },\n    }\n  };\n\n  initialize() {\n    this.enableOptionSharing = true;\n    this.supportsDecimation = true;\n    super.initialize();\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {dataset: line, data: points = [], _dataset} = meta;\n    // @ts-ignore\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n\n    this._drawStart = start;\n    this._drawCount = count;\n\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n\n    // Update Line\n    line._chart = this.chart;\n    line._datasetIndex = this.index;\n    line._decimated = !!_dataset._decimated;\n    line.points = points;\n\n    const options = this.resolveDatasetElementOptions(mode);\n    if (!this.options.showLine) {\n      options.borderWidth = 0;\n    }\n    options.segment = this.options.segment;\n    this.updateElement(line, undefined, {\n      animated: !animationsDisabled,\n      options\n    }, mode);\n\n    // Update Points\n    this.updateElements(points, start, count, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    const end = start + count;\n    const pointsCount = points.length;\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n\n    for (let i = 0; i < pointsCount; ++i) {\n      const point = points[i];\n      const properties = directUpdate ? point : {};\n\n      if (i < start || i >= end) {\n        properties.skip = true;\n        continue;\n      }\n\n      const parsed = this.getParsed(i);\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n\n      prevParsed = parsed;\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n    const data = meta.data || [];\n    if (!data.length) {\n      return border;\n    }\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n\n  draw() {\n    const meta = this._cachedMeta;\n    meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\n    super.draw();\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {toRadians, PI, formatNumber, _parseObjectDataRadialScale} from '../helpers/index.js';\n\nexport default class PolarAreaController extends DatasetController {\n\n  static id = 'polarArea';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    dataElementType: 'arc',\n    animation: {\n      animateRotate: true,\n      animateScale: true\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'startAngle', 'endAngle', 'innerRadius', 'outerRadius']\n      },\n    },\n    indexAxis: 'r',\n    startAngle: 0,\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    plugins: {\n      legend: {\n        labels: {\n          generateLabels(chart) {\n            const data = chart.data;\n            if (data.labels.length && data.datasets.length) {\n              const {labels: {pointStyle, color}} = chart.legend.options;\n\n              return data.labels.map((label, i) => {\n                const meta = chart.getDatasetMeta(0);\n                const style = meta.controller.getStyle(i);\n\n                return {\n                  text: label,\n                  fillStyle: style.backgroundColor,\n                  strokeStyle: style.borderColor,\n                  fontColor: color,\n                  lineWidth: style.borderWidth,\n                  pointStyle: pointStyle,\n                  hidden: !chart.getDataVisibility(i),\n\n                  // Extra data used for toggling the correct item\n                  index: i\n                };\n              });\n            }\n            return [];\n          }\n        },\n\n        onClick(e, legendItem, legend) {\n          legend.chart.toggleDataVisibility(legendItem.index);\n          legend.chart.update();\n        }\n      }\n    },\n\n    scales: {\n      r: {\n        type: 'radialLinear',\n        angleLines: {\n          display: false\n        },\n        beginAtZero: true,\n        grid: {\n          circular: true\n        },\n        pointLabels: {\n          display: false\n        },\n        startAngle: 0\n      }\n    }\n  };\n\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n  }\n\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index].r, chart.options.locale);\n\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n\n  update(mode) {\n    const arcs = this._cachedMeta.data;\n\n    this._updateRadius();\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n\n  /**\n   * @protected\n   */\n  getMinMax() {\n    const meta = this._cachedMeta;\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n\n    meta.data.forEach((element, index) => {\n      const parsed = this.getParsed(index).r;\n\n      if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\n        if (parsed < range.min) {\n          range.min = parsed;\n        }\n\n        if (parsed > range.max) {\n          range.max = parsed;\n        }\n      }\n    });\n\n    return range;\n  }\n\n  /**\n\t * @private\n\t */\n  _updateRadius() {\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n\n    const outerRadius = Math.max(minSize / 2, 0);\n    const innerRadius = Math.max(opts.cutoutPercentage ? (outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\n    const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\n\n    this.outerRadius = outerRadius - (radiusLength * this.index);\n    this.innerRadius = this.outerRadius - radiusLength;\n  }\n\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const scale = this._cachedMeta.rScale;\n    const centerX = scale.xCenter;\n    const centerY = scale.yCenter;\n    const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\n    let angle = datasetStartAngle;\n    let i;\n\n    const defaultAngle = 360 / this.countVisibleElements();\n\n    for (i = 0; i < start; ++i) {\n      angle += this._computeAngle(i, mode, defaultAngle);\n    }\n    for (i = start; i < start + count; i++) {\n      const arc = arcs[i];\n      let startAngle = angle;\n      let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\n      let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\n      angle = endAngle;\n\n      if (reset) {\n        if (animationOpts.animateScale) {\n          outerRadius = 0;\n        }\n        if (animationOpts.animateRotate) {\n          startAngle = endAngle = datasetStartAngle;\n        }\n      }\n\n      const properties = {\n        x: centerX,\n        y: centerY,\n        innerRadius: 0,\n        outerRadius,\n        startAngle,\n        endAngle,\n        options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\n      };\n\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n\n  countVisibleElements() {\n    const meta = this._cachedMeta;\n    let count = 0;\n\n    meta.data.forEach((element, index) => {\n      if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\n        count++;\n      }\n    });\n\n    return count;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeAngle(index, mode, defaultAngle) {\n    return this.chart.getDataVisibility(index)\n      ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle)\n      : 0;\n  }\n}\n","import DoughnutController from './controller.doughnut.js';\n\n// Pie charts are Doughnut chart with different defaults\nexport default class PieController extends DoughnutController {\n\n  static id = 'pie';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    // The percentage of the chart that we cut out of the middle.\n    cutout: 0,\n\n    // The rotation of the chart, where the first data arc begins.\n    rotation: 0,\n\n    // The total circumference of the chart.\n    circumference: 360,\n\n    // The outr radius of the chart\n    radius: '100%'\n  };\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {_parseObjectDataRadialScale} from '../helpers/index.js';\n\nexport default class RadarController extends DatasetController {\n\n  static id = 'radar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: 'line',\n    dataElementType: 'point',\n    indexAxis: 'r',\n    showLine: true,\n    elements: {\n      line: {\n        fill: 'start'\n      }\n    },\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    scales: {\n      r: {\n        type: 'radialLinear',\n      }\n    }\n  };\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const vScale = this._cachedMeta.vScale;\n    const parsed = this.getParsed(index);\n\n    return {\n      label: vScale.getLabels()[index],\n      value: '' + vScale.getLabelForValue(parsed[vScale.axis])\n    };\n  }\n\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const line = meta.dataset;\n    const points = meta.data || [];\n    const labels = meta.iScale.getLabels();\n\n    // Update Line\n    line.points = points;\n    // In resize mode only point locations change, so no need to set the points or options.\n    if (mode !== 'resize') {\n      const options = this.resolveDatasetElementOptions(mode);\n      if (!this.options.showLine) {\n        options.borderWidth = 0;\n      }\n\n      const properties = {\n        _loop: true,\n        _fullLoop: labels.length === points.length,\n        options\n      };\n\n      this.updateElement(line, undefined, properties, mode);\n    }\n\n    // Update Points\n    this.updateElements(points, 0, points.length, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const scale = this._cachedMeta.rScale;\n    const reset = mode === 'reset';\n\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\n\n      const x = reset ? scale.xCenter : pointPosition.x;\n      const y = reset ? scale.yCenter : pointPosition.y;\n\n      const properties = {\n        x,\n        y,\n        angle: pointPosition.angle,\n        skip: isNaN(x) || isNaN(y),\n        options\n      };\n\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isNullOrUndef} from '../helpers/index.js';\nimport {isNumber} from '../helpers/helpers.math.js';\nimport {_getStartAndCountOfVisiblePoints, _scaleRangesChanged} from '../helpers/helpers.extras.js';\n\nexport default class ScatterController extends DatasetController {\n\n  static id = 'scatter';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'point',\n    showLine: false,\n    fill: false\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n\n    interaction: {\n      mode: 'point'\n    },\n\n    scales: {\n      x: {\n        type: 'linear'\n      },\n      y: {\n        type: 'linear'\n      }\n    }\n  };\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const labels = this.chart.data.labels || [];\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n\n    return {\n      label: labels[index] || '',\n      value: '(' + x + ', ' + y + ')'\n    };\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {data: points = []} = meta;\n    // @ts-ignore\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n\n    this._drawStart = start;\n    this._drawCount = count;\n\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n\n    if (this.options.showLine) {\n\n      const {dataset: line, _dataset} = meta;\n\n      // Update Line\n      line._chart = this.chart;\n      line._datasetIndex = this.index;\n      line._decimated = !!_dataset._decimated;\n      line.points = points;\n\n      const options = this.resolveDatasetElementOptions(mode);\n      options.segment = this.options.segment;\n      this.updateElement(line, undefined, {\n        animated: !animationsDisabled,\n        options\n      }, mode);\n    }\n\n    // Update Points\n    this.updateElements(points, start, count, mode);\n  }\n\n  addElements() {\n    const {showLine} = this.options;\n\n    if (!this.datasetElementType && showLine) {\n      this.datasetElementType = this.chart.registry.getElement('line');\n    }\n\n    super.addElements();\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n\n    for (let i = start; i < start + count; ++i) {\n      const point = points[i];\n      const parsed = this.getParsed(i);\n      const properties = directUpdate ? point : {};\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n\n      prevParsed = parsed;\n    }\n\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const data = meta.data || [];\n\n    if (!this.options.showLine) {\n      let max = 0;\n      for (let i = data.length - 1; i >= 0; --i) {\n        max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n      }\n      return max > 0 && max;\n    }\n\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n\n    if (!data.length) {\n      return border;\n    }\n\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n}\n","/**\n * @namespace Chart._adapters\n * @since 2.8.0\n * @private\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ChartOptions} from '../types/index.js';\n\nexport type TimeUnit = 'millisecond' | 'second' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'quarter' | 'year';\n\nexport interface DateAdapter<T extends AnyObject = AnyObject> {\n  readonly options: T;\n  /**\n   * Will called with chart options after adapter creation.\n   */\n  init(this: DateAdapter<T>, chartOptions: ChartOptions): void;\n  /**\n   * Returns a map of time formats for the supported formatting units defined\n   * in Unit as well as 'datetime' representing a detailed date/time string.\n   */\n  formats(this: DateAdapter<T>): Record<string, string>;\n  /**\n   * Parses the given `value` and return the associated timestamp.\n   * @param value - the value to parse (usually comes from the data)\n   * @param [format] - the expected data format\n   */\n  parse(this: DateAdapter<T>, value: unknown, format?: TimeUnit): number | null;\n  /**\n   * Returns the formatted date in the specified `format` for a given `timestamp`.\n   * @param timestamp - the timestamp to format\n   * @param format - the date/time token\n   */\n  format(this: DateAdapter<T>, timestamp: number, format: TimeUnit): string;\n  /**\n   * Adds the specified `amount` of `unit` to the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param amount - the amount to add\n   * @param unit - the unit as string\n   */\n  add(this: DateAdapter<T>, timestamp: number, amount: number, unit: TimeUnit): number;\n  /**\n   * Returns the number of `unit` between the given timestamps.\n   * @param a - the input timestamp (reference)\n   * @param b - the timestamp to subtract\n   * @param unit - the unit as string\n   */\n  diff(this: DateAdapter<T>, a: number, b: number, unit: TimeUnit): number;\n  /**\n   * Returns start of `unit` for the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param unit - the unit as string\n   * @param [weekday] - the ISO day of the week with 1 being Monday\n   * and 7 being Sunday (only needed if param *unit* is `isoWeek`).\n   */\n  startOf(this: DateAdapter<T>, timestamp: number, unit: TimeUnit | 'isoWeek', weekday?: number): number;\n  /**\n   * Returns end of `unit` for the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param unit - the unit as string\n   */\n  endOf(this: DateAdapter<T>, timestamp: number, unit: TimeUnit | 'isoWeek'): number;\n}\n\nfunction abstract<T = void>(): T {\n  throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\n}\n\n/**\n * Date adapter (current used by the time scale)\n * @namespace Chart._adapters._date\n * @memberof Chart._adapters\n * @private\n */\nclass DateAdapterBase implements DateAdapter {\n\n  /**\n   * Override default date adapter methods.\n   * Accepts type parameter to define options type.\n   * @example\n   * Chart._adapters._date.override<{myAdapterOption: string}>({\n   *   init() {\n   *     console.log(this.options.myAdapterOption);\n   *   }\n   * })\n   */\n  static override<T extends AnyObject = AnyObject>(\n    members: Partial<Omit<DateAdapter<T>, 'options'>>\n  ) {\n    Object.assign(DateAdapterBase.prototype, members);\n  }\n\n  readonly options: AnyObject;\n\n  constructor(options: AnyObject) {\n    this.options = options || {};\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  init() {}\n\n  formats(): Record<string, string> {\n    return abstract();\n  }\n\n  parse(): number | null {\n    return abstract();\n  }\n\n  format(): string {\n    return abstract();\n  }\n\n  add(): number {\n    return abstract();\n  }\n\n  diff(): number {\n    return abstract();\n  }\n\n  startOf(): number {\n    return abstract();\n  }\n\n  endOf(): number {\n    return abstract();\n  }\n}\n\nexport default {\n  _date: DateAdapterBase\n};\n","import {_lookupByKey, _rlookupByKey} from '../helpers/helpers.collection.js';\nimport {getRelativePosition} from '../helpers/helpers.dom.js';\nimport {_angleBetween, getAngleFromPoint} from '../helpers/helpers.math.js';\nimport {_isPointInArea} from '../helpers/index.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef {{axis?: string, intersect?: boolean, includeInvisible?: boolean}} InteractionOptions\n * @typedef {{datasetIndex: number, index: number, element: import('./core.element.js').default}} InteractionItem\n * @typedef { import('../types/index.js').Point } Point\n */\n\n/**\n * Helper function to do binary search when possible\n * @param {object} metaset - the dataset meta\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {number} value - the value to find\n * @param {boolean} [intersect] - should the element intersect\n * @returns {{lo:number, hi:number}} indices to search data array between\n */\nfunction binarySearch(metaset, axis, value, intersect) {\n  const {controller, data, _sorted} = metaset;\n  const iScale = controller._cachedMeta.iScale;\n  if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\n    const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\n    if (!intersect) {\n      return lookupMethod(data, axis, value);\n    } else if (controller._sharedOptions) {\n      // _sharedOptions indicates that each element has equal options -> equal proportions\n      // So we can do a ranged binary search based on the range of first element and\n      // be confident to get the full range of indices that can intersect with the value.\n      const el = data[0];\n      const range = typeof el.getRange === 'function' && el.getRange(axis);\n      if (range) {\n        const start = lookupMethod(data, axis, value - range);\n        const end = lookupMethod(data, axis, value + range);\n        return {lo: start.lo, hi: end.hi};\n      }\n    }\n  }\n  // Default to all elements, when binary search can not be used.\n  return {lo: 0, hi: data.length - 1};\n}\n\n/**\n * Helper function to select candidate elements for interaction\n * @param {Chart} chart - the chart\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {function} handler - the callback to execute for each visible item\n * @param {boolean} [intersect] - consider intersecting items\n */\nfunction evaluateInteractionItems(chart, axis, position, handler, intersect) {\n  const metasets = chart.getSortedVisibleDatasetMetas();\n  const value = position[axis];\n  for (let i = 0, ilen = metasets.length; i < ilen; ++i) {\n    const {index, data} = metasets[i];\n    const {lo, hi} = binarySearch(metasets[i], axis, value, intersect);\n    for (let j = lo; j <= hi; ++j) {\n      const element = data[j];\n      if (!element.skip) {\n        handler(element, index, j);\n      }\n    }\n  }\n}\n\n/**\n * Get a distance metric function for two points based on the\n * axis mode setting\n * @param {string} axis - the axis mode. x|y|xy|r\n */\nfunction getDistanceMetricForAxis(axis) {\n  const useX = axis.indexOf('x') !== -1;\n  const useY = axis.indexOf('y') !== -1;\n\n  return function(pt1, pt2) {\n    const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\n    const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\n    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n  };\n}\n\n/**\n * Helper function to get the items that intersect the event position\n * @param {Chart} chart - the chart\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\n  const items = [];\n\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return items;\n  }\n\n  const evaluationFunc = function(element, datasetIndex, index) {\n    if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\n      return;\n    }\n    if (element.inRange(position.x, position.y, useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n    }\n  };\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position for a radial chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestRadialItems(chart, position, axis, useFinalPosition) {\n  let items = [];\n\n  function evaluationFunc(element, datasetIndex, index) {\n    const {startAngle, endAngle} = element.getProps(['startAngle', 'endAngle'], useFinalPosition);\n    const {angle} = getAngleFromPoint(element, {x: position.x, y: position.y});\n\n    if (_angleBetween(angle, startAngle, endAngle)) {\n      items.push({element, datasetIndex, index});\n    }\n  }\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position for a cartesian chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  let items = [];\n  const distanceMetric = getDistanceMetricForAxis(axis);\n  let minDistance = Number.POSITIVE_INFINITY;\n\n  function evaluationFunc(element, datasetIndex, index) {\n    const inRange = element.inRange(position.x, position.y, useFinalPosition);\n    if (intersect && !inRange) {\n      return;\n    }\n\n    const center = element.getCenterPoint(useFinalPosition);\n    const pointInArea = !!includeInvisible || chart.isPointInArea(center);\n    if (!pointInArea && !inRange) {\n      return;\n    }\n\n    const distance = distanceMetric(position, center);\n    if (distance < minDistance) {\n      items = [{element, datasetIndex, index}];\n      minDistance = distance;\n    } else if (distance === minDistance) {\n      // Can have multiple items at the same distance in which case we sort by size\n      items.push({element, datasetIndex, index});\n    }\n  }\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position considering all visible items in the chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return [];\n  }\n\n  return axis === 'r' && !intersect\n    ? getNearestRadialItems(chart, position, axis, useFinalPosition)\n    : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\n}\n\n/**\n * Helper function to get the items matching along the given X or Y axis\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axis to match\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @return {InteractionItem[]} the nearest items\n */\nfunction getAxisItems(chart, position, axis, intersect, useFinalPosition) {\n  const items = [];\n  const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\n  let intersectsItem = false;\n\n  evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index) => {\n    if (element[rangeMethod](position[axis], useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n      intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\n    }\n  });\n\n  // If we want to trigger on an intersect and we don't have any items\n  // that intersect the position, return nothing\n  if (intersect && !intersectsItem) {\n    return [];\n  }\n  return items;\n}\n\n/**\n * Contains interaction related functions\n * @namespace Chart.Interaction\n */\nexport default {\n  // Part of the public API to facilitate developers creating their own modes\n  evaluateInteractionItems,\n\n  // Helper function for different modes\n  modes: {\n    /**\n\t\t * Returns items at the same index. If the options.intersect parameter is true, we only return items if we intersect something\n\t\t * If the options.intersect mode is false, we find the nearest item and return the items at the same index as that item\n\t\t * @function Chart.Interaction.modes.index\n\t\t * @since v2.4.0\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    index(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      // Default axis for index mode is 'x' to match old behaviour\n      const axis = options.axis || 'x';\n      const includeInvisible = options.includeInvisible || false;\n      const items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible)\n        : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n      const elements = [];\n\n      if (!items.length) {\n        return [];\n      }\n\n      chart.getSortedVisibleDatasetMetas().forEach((meta) => {\n        const index = items[0].index;\n        const element = meta.data[index];\n\n        // don't count items that are skipped (null data)\n        if (element && !element.skip) {\n          elements.push({element, datasetIndex: meta.index, index});\n        }\n      });\n\n      return elements;\n    },\n\n    /**\n\t\t * Returns items in the same dataset. If the options.intersect parameter is true, we only return items if we intersect something\n\t\t * If the options.intersect is false, we find the nearest item and return the items in that dataset\n\t\t * @function Chart.Interaction.modes.dataset\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    dataset(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      let items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) :\n        getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n\n      if (items.length > 0) {\n        const datasetIndex = items[0].datasetIndex;\n        const data = chart.getDatasetMeta(datasetIndex).data;\n        items = [];\n        for (let i = 0; i < data.length; ++i) {\n          items.push({element: data[i], datasetIndex, index: i});\n        }\n      }\n\n      return items;\n    },\n\n    /**\n\t\t * Point mode returns all elements that hit test based on the event position\n\t\t * of the event\n\t\t * @function Chart.Interaction.modes.intersect\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    point(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\n    },\n\n    /**\n\t\t * nearest mode returns the element closest to the point\n\t\t * @function Chart.Interaction.modes.intersect\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    nearest(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\n    },\n\n    /**\n\t\t * x mode returns the elements that hit-test at the current x coordinate\n\t\t * @function Chart.Interaction.modes.x\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    x(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\n    },\n\n    /**\n\t\t * y mode returns the elements that hit-test at the current y coordinate\n\t\t * @function Chart.Interaction.modes.y\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    y(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\n    }\n  }\n};\n","import {defined, each, isObject} from '../helpers/helpers.core.js';\nimport {toPadding} from '../helpers/helpers.options.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n */\n\nconst STATIC_POSITIONS = ['left', 'top', 'right', 'bottom'];\n\nfunction filterByPosition(array, position) {\n  return array.filter(v => v.pos === position);\n}\n\nfunction filterDynamicPositionByAxis(array, axis) {\n  return array.filter(v => STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\n}\n\nfunction sortByWeight(array, reverse) {\n  return array.sort((a, b) => {\n    const v0 = reverse ? b : a;\n    const v1 = reverse ? a : b;\n    return v0.weight === v1.weight ?\n      v0.index - v1.index :\n      v0.weight - v1.weight;\n  });\n}\n\nfunction wrapBoxes(boxes) {\n  const layoutBoxes = [];\n  let i, ilen, box, pos, stack, stackWeight;\n\n  for (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {\n    box = boxes[i];\n    ({position: pos, options: {stack, stackWeight = 1}} = box);\n    layoutBoxes.push({\n      index: i,\n      box,\n      pos,\n      horizontal: box.isHorizontal(),\n      weight: box.weight,\n      stack: stack && (pos + stack),\n      stackWeight\n    });\n  }\n  return layoutBoxes;\n}\n\nfunction buildStacks(layouts) {\n  const stacks = {};\n  for (const wrap of layouts) {\n    const {stack, pos, stackWeight} = wrap;\n    if (!stack || !STATIC_POSITIONS.includes(pos)) {\n      continue;\n    }\n    const _stack = stacks[stack] || (stacks[stack] = {count: 0, placed: 0, weight: 0, size: 0});\n    _stack.count++;\n    _stack.weight += stackWeight;\n  }\n  return stacks;\n}\n\n/**\n * store dimensions used instead of available chartArea in fitBoxes\n **/\nfunction setLayoutDims(layouts, params) {\n  const stacks = buildStacks(layouts);\n  const {vBoxMaxWidth, hBoxMaxHeight} = params;\n  let i, ilen, layout;\n  for (i = 0, ilen = layouts.length; i < ilen; ++i) {\n    layout = layouts[i];\n    const {fullSize} = layout.box;\n    const stack = stacks[layout.stack];\n    const factor = stack && layout.stackWeight / stack.weight;\n    if (layout.horizontal) {\n      layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\n      layout.height = hBoxMaxHeight;\n    } else {\n      layout.width = vBoxMaxWidth;\n      layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\n    }\n  }\n  return stacks;\n}\n\nfunction buildLayoutBoxes(boxes) {\n  const layoutBoxes = wrapBoxes(boxes);\n  const fullSize = sortByWeight(layoutBoxes.filter(wrap => wrap.box.fullSize), true);\n  const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\n  const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\n  const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\n  const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\n  const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\n  const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\n\n  return {\n    fullSize,\n    leftAndTop: left.concat(top),\n    rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\n    chartArea: filterByPosition(layoutBoxes, 'chartArea'),\n    vertical: left.concat(right).concat(centerVertical),\n    horizontal: top.concat(bottom).concat(centerHorizontal)\n  };\n}\n\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\n  return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\n}\n\nfunction updateMaxPadding(maxPadding, boxPadding) {\n  maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\n  maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\n  maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\n  maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\n}\n\nfunction updateDims(chartArea, params, layout, stacks) {\n  const {pos, box} = layout;\n  const maxPadding = chartArea.maxPadding;\n\n  // dynamically placed boxes size is not considered\n  if (!isObject(pos)) {\n    if (layout.size) {\n      // this layout was already counted for, lets first reduce old size\n      chartArea[pos] -= layout.size;\n    }\n    const stack = stacks[layout.stack] || {size: 0, count: 1};\n    stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\n    layout.size = stack.size / stack.count;\n    chartArea[pos] += layout.size;\n  }\n\n  if (box.getPadding) {\n    updateMaxPadding(maxPadding, box.getPadding());\n  }\n\n  const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\n  const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\n  const widthChanged = newWidth !== chartArea.w;\n  const heightChanged = newHeight !== chartArea.h;\n  chartArea.w = newWidth;\n  chartArea.h = newHeight;\n\n  // return booleans on the changes per direction\n  return layout.horizontal\n    ? {same: widthChanged, other: heightChanged}\n    : {same: heightChanged, other: widthChanged};\n}\n\nfunction handleMaxPadding(chartArea) {\n  const maxPadding = chartArea.maxPadding;\n\n  function updatePos(pos) {\n    const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\n    chartArea[pos] += change;\n    return change;\n  }\n  chartArea.y += updatePos('top');\n  chartArea.x += updatePos('left');\n  updatePos('right');\n  updatePos('bottom');\n}\n\nfunction getMargins(horizontal, chartArea) {\n  const maxPadding = chartArea.maxPadding;\n\n  function marginForPositions(positions) {\n    const margin = {left: 0, top: 0, right: 0, bottom: 0};\n    positions.forEach((pos) => {\n      margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\n    });\n    return margin;\n  }\n\n  return horizontal\n    ? marginForPositions(['left', 'right'])\n    : marginForPositions(['top', 'bottom']);\n}\n\nfunction fitBoxes(boxes, chartArea, params, stacks) {\n  const refitBoxes = [];\n  let i, ilen, layout, box, refit, changed;\n\n  for (i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i) {\n    layout = boxes[i];\n    box = layout.box;\n\n    box.update(\n      layout.width || chartArea.w,\n      layout.height || chartArea.h,\n      getMargins(layout.horizontal, chartArea)\n    );\n    const {same, other} = updateDims(chartArea, params, layout, stacks);\n\n    // Dimensions changed and there were non full width boxes before this\n    // -> we have to refit those\n    refit |= same && refitBoxes.length;\n\n    // Chart area changed in the opposite direction\n    changed = changed || other;\n\n    if (!box.fullSize) { // fullSize boxes don't need to be re-fitted in any case\n      refitBoxes.push(layout);\n    }\n  }\n\n  return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\n}\n\nfunction setBoxDims(box, left, top, width, height) {\n  box.top = top;\n  box.left = left;\n  box.right = left + width;\n  box.bottom = top + height;\n  box.width = width;\n  box.height = height;\n}\n\nfunction placeBoxes(boxes, chartArea, params, stacks) {\n  const userPadding = params.padding;\n  let {x, y} = chartArea;\n\n  for (const layout of boxes) {\n    const box = layout.box;\n    const stack = stacks[layout.stack] || {count: 1, placed: 0, weight: 1};\n    const weight = (layout.stackWeight / stack.weight) || 1;\n    if (layout.horizontal) {\n      const width = chartArea.w * weight;\n      const height = stack.size || box.height;\n      if (defined(stack.start)) {\n        y = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\n      } else {\n        setBoxDims(box, chartArea.left + stack.placed, y, width, height);\n      }\n      stack.start = y;\n      stack.placed += width;\n      y = box.bottom;\n    } else {\n      const height = chartArea.h * weight;\n      const width = stack.size || box.width;\n      if (defined(stack.start)) {\n        x = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, x, userPadding.top, width, params.outerHeight - userPadding.bottom - userPadding.top);\n      } else {\n        setBoxDims(box, x, chartArea.top + stack.placed, width, height);\n      }\n      stack.start = x;\n      stack.placed += height;\n      x = box.right;\n    }\n  }\n\n  chartArea.x = x;\n  chartArea.y = y;\n}\n\n/**\n * @interface LayoutItem\n * @typedef {object} LayoutItem\n * @prop {string} position - The position of the item in the chart layout. Possible values are\n * 'left', 'top', 'right', 'bottom', and 'chartArea'\n * @prop {number} weight - The weight used to sort the item. Higher weights are further away from the chart area\n * @prop {boolean} fullSize - if true, and the item is horizontal, then push vertical boxes down\n * @prop {function} isHorizontal - returns true if the layout item is horizontal (ie. top or bottom)\n * @prop {function} update - Takes two parameters: width and height. Returns size of item\n * @prop {function} draw - Draws the element\n * @prop {function} [getPadding] -  Returns an object with padding on the edges\n * @prop {number} width - Width of item. Must be valid after update()\n * @prop {number} height - Height of item. Must be valid after update()\n * @prop {number} left - Left edge of the item. Set by layout system and cannot be used in update\n * @prop {number} top - Top edge of the item. Set by layout system and cannot be used in update\n * @prop {number} right - Right edge of the item. Set by layout system and cannot be used in update\n * @prop {number} bottom - Bottom edge of the item. Set by layout system and cannot be used in update\n */\n\n// The layout service is very self explanatory.  It's responsible for the layout within a chart.\n// Scales, Legends and Plugins all rely on the layout service and can easily register to be placed anywhere they need\n// It is this service's responsibility of carrying out that layout.\nexport default {\n\n  /**\n\t * Register a box to a chart.\n\t * A box is simply a reference to an object that requires layout. eg. Scales, Legend, Title.\n\t * @param {Chart} chart - the chart to use\n\t * @param {LayoutItem} item - the item to add to be laid out\n\t */\n  addBox(chart, item) {\n    if (!chart.boxes) {\n      chart.boxes = [];\n    }\n\n    // initialize item with default values\n    item.fullSize = item.fullSize || false;\n    item.position = item.position || 'top';\n    item.weight = item.weight || 0;\n    // @ts-ignore\n    item._layers = item._layers || function() {\n      return [{\n        z: 0,\n        draw(chartArea) {\n          item.draw(chartArea);\n        }\n      }];\n    };\n\n    chart.boxes.push(item);\n  },\n\n  /**\n\t * Remove a layoutItem from a chart\n\t * @param {Chart} chart - the chart to remove the box from\n\t * @param {LayoutItem} layoutItem - the item to remove from the layout\n\t */\n  removeBox(chart, layoutItem) {\n    const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\n    if (index !== -1) {\n      chart.boxes.splice(index, 1);\n    }\n  },\n\n  /**\n\t * Sets (or updates) options on the given `item`.\n\t * @param {Chart} chart - the chart in which the item lives (or will be added to)\n\t * @param {LayoutItem} item - the item to configure with the given options\n\t * @param {object} options - the new item options.\n\t */\n  configure(chart, item, options) {\n    item.fullSize = options.fullSize;\n    item.position = options.position;\n    item.weight = options.weight;\n  },\n\n  /**\n\t * Fits boxes of the given chart into the given size by having each box measure itself\n\t * then running a fitting algorithm\n\t * @param {Chart} chart - the chart\n\t * @param {number} width - the width to fit into\n\t * @param {number} height - the height to fit into\n   * @param {number} minPadding - minimum padding required for each side of chart area\n\t */\n  update(chart, width, height, minPadding) {\n    if (!chart) {\n      return;\n    }\n\n    const padding = toPadding(chart.options.layout.padding);\n    const availableWidth = Math.max(width - padding.width, 0);\n    const availableHeight = Math.max(height - padding.height, 0);\n    const boxes = buildLayoutBoxes(chart.boxes);\n    const verticalBoxes = boxes.vertical;\n    const horizontalBoxes = boxes.horizontal;\n\n    // Before any changes are made, notify boxes that an update is about to being\n    // This is used to clear any cached data (e.g. scale limits)\n    each(chart.boxes, box => {\n      if (typeof box.beforeLayout === 'function') {\n        box.beforeLayout();\n      }\n    });\n\n    // Essentially we now have any number of boxes on each of the 4 sides.\n    // Our canvas looks like the following.\n    // The areas L1 and L2 are the left axes. R1 is the right axis, T1 is the top axis and\n    // B1 is the bottom axis\n    // There are also 4 quadrant-like locations (left to right instead of clockwise) reserved for chart overlays\n    // These locations are single-box locations only, when trying to register a chartArea location that is already taken,\n    // an error will be thrown.\n    //\n    // |----------------------------------------------------|\n    // |                  T1 (Full Width)                   |\n    // |----------------------------------------------------|\n    // |    |    |                 T2                  |    |\n    // |    |----|-------------------------------------|----|\n    // |    |    | C1 |                           | C2 |    |\n    // |    |    |----|                           |----|    |\n    // |    |    |                                     |    |\n    // | L1 | L2 |           ChartArea (C0)            | R1 |\n    // |    |    |                                     |    |\n    // |    |    |----|                           |----|    |\n    // |    |    | C3 |                           | C4 |    |\n    // |    |----|-------------------------------------|----|\n    // |    |    |                 B1                  |    |\n    // |----------------------------------------------------|\n    // |                  B2 (Full Width)                   |\n    // |----------------------------------------------------|\n    //\n\n    const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap) =>\n      wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\n\n    const params = Object.freeze({\n      outerWidth: width,\n      outerHeight: height,\n      padding,\n      availableWidth,\n      availableHeight,\n      vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\n      hBoxMaxHeight: availableHeight / 2\n    });\n    const maxPadding = Object.assign({}, padding);\n    updateMaxPadding(maxPadding, toPadding(minPadding));\n    const chartArea = Object.assign({\n      maxPadding,\n      w: availableWidth,\n      h: availableHeight,\n      x: padding.left,\n      y: padding.top\n    }, padding);\n\n    const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\n\n    // First fit the fullSize boxes, to reduce probability of re-fitting.\n    fitBoxes(boxes.fullSize, chartArea, params, stacks);\n\n    // Then fit vertical boxes\n    fitBoxes(verticalBoxes, chartArea, params, stacks);\n\n    // Then fit horizontal boxes\n    if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\n      // if the area changed, re-fit vertical boxes\n      fitBoxes(verticalBoxes, chartArea, params, stacks);\n    }\n\n    handleMaxPadding(chartArea);\n\n    // Finally place the boxes to correct coordinates\n    placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\n\n    // Move to opposite side of chart\n    chartArea.x += chartArea.w;\n    chartArea.y += chartArea.h;\n\n    placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\n\n    chart.chartArea = {\n      left: chartArea.left,\n      top: chartArea.top,\n      right: chartArea.left + chartArea.w,\n      bottom: chartArea.top + chartArea.h,\n      height: chartArea.h,\n      width: chartArea.w,\n    };\n\n    // Finally update boxes in chartArea (radial scale for example)\n    each(boxes.chartArea, (layout) => {\n      const box = layout.box;\n      Object.assign(box, chart.chartArea);\n      box.update(chartArea.w, chartArea.h, {left: 0, top: 0, right: 0, bottom: 0});\n    });\n  }\n};\n","\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\n/**\n * Abstract class that allows abstracting platform dependencies away from the chart.\n */\nexport default class BasePlatform {\n  /**\n\t * Called at chart construction time, returns a context2d instance implementing\n\t * the [W3C Canvas 2D Context API standard]{@link https://www.w3.org/TR/2dcontext/}.\n\t * @param {HTMLCanvasElement} canvas - The canvas from which to acquire context (platform specific)\n\t * @param {number} [aspectRatio] - The chart options\n\t */\n  acquireContext(canvas, aspectRatio) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Called at chart destruction time, releases any resources associated to the context\n\t * previously returned by the acquireContext() method.\n\t * @param {CanvasRenderingContext2D} context - The context2d instance\n\t * @returns {boolean} true if the method succeeded, else false\n\t */\n  releaseContext(context) { // eslint-disable-line no-unused-vars\n    return false;\n  }\n\n  /**\n\t * Registers the specified listener on the given chart.\n\t * @param {Chart} chart - Chart from which to listen for event\n\t * @param {string} type - The ({@link ChartEvent}) type to listen for\n\t * @param {function} listener - Receives a notification (an object that implements\n\t * the {@link ChartEvent} interface) when an event of the specified type occurs.\n\t */\n  addEventListener(chart, type, listener) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Removes the specified listener previously registered with addEventListener.\n\t * @param {Chart} chart - Chart from which to remove the listener\n\t * @param {string} type - The ({@link ChartEvent}) type to remove\n\t * @param {function} listener - The listener function to remove from the event target.\n\t */\n  removeEventListener(chart, type, listener) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * @returns {number} the current devicePixelRatio of the device this platform is connected to.\n\t */\n  getDevicePixelRatio() {\n    return 1;\n  }\n\n  /**\n\t * Returns the maximum size in pixels of given canvas element.\n\t * @param {HTMLCanvasElement} element\n\t * @param {number} [width] - content width of parent element\n\t * @param {number} [height] - content height of parent element\n\t * @param {number} [aspectRatio] - aspect ratio to maintain\n\t */\n  getMaximumSize(element, width, height, aspectRatio) {\n    width = Math.max(0, width || element.width);\n    height = height || element.height;\n    return {\n      width,\n      height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\n    };\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @returns {boolean} true if the canvas is attached to the platform, false if not.\n\t */\n  isAttached(canvas) { // eslint-disable-line no-unused-vars\n    return true;\n  }\n\n  /**\n   * Updates config with platform specific requirements\n   * @param {import('../core/core.config.js').default} config\n   */\n  updateConfig(config) { // eslint-disable-line no-unused-vars\n    // no-op\n  }\n}\n","/**\n * Platform fallback implementation (minimal).\n * @see https://github.com/chartjs/Chart.js/pull/4591#issuecomment-319575939\n */\n\nimport BasePlatform from './platform.base.js';\n\n/**\n * Platform class for charts without access to the DOM or to many element properties\n * This platform is used by default for any chart passed an OffscreenCanvas.\n * @extends BasePlatform\n */\nexport default class BasicPlatform extends BasePlatform {\n  acquireContext(item) {\n    // To prevent canvas fingerprinting, some add-ons undefine the getContext\n    // method, for example: https://github.com/kkapsner/CanvasBlocker\n    // https://github.com/chartjs/Chart.js/issues/2807\n    return item && item.getContext && item.getContext('2d') || null;\n  }\n  updateConfig(config) {\n    config.options.animation = false;\n  }\n}\n","/**\n * Chart.Platform implementation for targeting a web browser\n */\n\nimport BasePlatform from './platform.base.js';\nimport {_getParentNode, getRelativePosition, supportsEventListenerOptions, readUsedSize, getMaximumSize} from '../helpers/helpers.dom.js';\nimport {throttled} from '../helpers/helpers.extras.js';\nimport {isNullOrUndef} from '../helpers/helpers.core.js';\n\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\nconst EXPANDO_KEY = '$chartjs';\n\n/**\n * DOM event types -> Chart.js event types.\n * Note: only events with different types are mapped.\n * @see https://developer.mozilla.org/en-US/docs/Web/Events\n */\nconst EVENT_TYPES = {\n  touchstart: 'mousedown',\n  touchmove: 'mousemove',\n  touchend: 'mouseup',\n  pointerenter: 'mouseenter',\n  pointerdown: 'mousedown',\n  pointermove: 'mousemove',\n  pointerup: 'mouseup',\n  pointerleave: 'mouseout',\n  pointerout: 'mouseout'\n};\n\nconst isNullOrEmpty = value => value === null || value === '';\n/**\n * Initializes the canvas style and render size without modifying the canvas display size,\n * since responsiveness is handled by the controller.resize() method. The config is used\n * to determine the aspect ratio to apply in case no explicit height has been specified.\n * @param {HTMLCanvasElement} canvas\n * @param {number} [aspectRatio]\n */\nfunction initCanvas(canvas, aspectRatio) {\n  const style = canvas.style;\n\n  // NOTE(SB) canvas.getAttribute('width') !== canvas.width: in the first case it\n  // returns null or '' if no explicit value has been set to the canvas attribute.\n  const renderHeight = canvas.getAttribute('height');\n  const renderWidth = canvas.getAttribute('width');\n\n  // Chart.js modifies some canvas values that we want to restore on destroy\n  canvas[EXPANDO_KEY] = {\n    initial: {\n      height: renderHeight,\n      width: renderWidth,\n      style: {\n        display: style.display,\n        height: style.height,\n        width: style.width\n      }\n    }\n  };\n\n  // Force canvas to display as block to avoid extra space caused by inline\n  // elements, which would interfere with the responsive resize process.\n  // https://github.com/chartjs/Chart.js/issues/2538\n  style.display = style.display || 'block';\n  // Include possible borders in the size\n  style.boxSizing = style.boxSizing || 'border-box';\n\n  if (isNullOrEmpty(renderWidth)) {\n    const displayWidth = readUsedSize(canvas, 'width');\n    if (displayWidth !== undefined) {\n      canvas.width = displayWidth;\n    }\n  }\n\n  if (isNullOrEmpty(renderHeight)) {\n    if (canvas.style.height === '') {\n      // If no explicit render height and style height, let's apply the aspect ratio,\n      // which one can be specified by the user but also by charts as default option\n      // (i.e. options.aspectRatio). If not specified, use canvas aspect ratio of 2.\n      canvas.height = canvas.width / (aspectRatio || 2);\n    } else {\n      const displayHeight = readUsedSize(canvas, 'height');\n      if (displayHeight !== undefined) {\n        canvas.height = displayHeight;\n      }\n    }\n  }\n\n  return canvas;\n}\n\n// Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\n// https://github.com/chartjs/Chart.js/issues/4287\nconst eventListenerOptions = supportsEventListenerOptions ? {passive: true} : false;\n\nfunction addListener(node, type, listener) {\n  node.addEventListener(type, listener, eventListenerOptions);\n}\n\nfunction removeListener(chart, type, listener) {\n  chart.canvas.removeEventListener(type, listener, eventListenerOptions);\n}\n\nfunction fromNativeEvent(event, chart) {\n  const type = EVENT_TYPES[event.type] || event.type;\n  const {x, y} = getRelativePosition(event, chart);\n  return {\n    type,\n    chart,\n    native: event,\n    x: x !== undefined ? x : null,\n    y: y !== undefined ? y : null,\n  };\n}\n\nfunction nodeListContains(nodeList, canvas) {\n  for (const node of nodeList) {\n    if (node === canvas || node.contains(canvas)) {\n      return true;\n    }\n  }\n}\n\nfunction createAttachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.addedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\n\nfunction createDetachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.removedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\n\nconst drpListeningCharts = new Map();\nlet oldDevicePixelRatio = 0;\n\nfunction onWindowResize() {\n  const dpr = window.devicePixelRatio;\n  if (dpr === oldDevicePixelRatio) {\n    return;\n  }\n  oldDevicePixelRatio = dpr;\n  drpListeningCharts.forEach((resize, chart) => {\n    if (chart.currentDevicePixelRatio !== dpr) {\n      resize();\n    }\n  });\n}\n\nfunction listenDevicePixelRatioChanges(chart, resize) {\n  if (!drpListeningCharts.size) {\n    window.addEventListener('resize', onWindowResize);\n  }\n  drpListeningCharts.set(chart, resize);\n}\n\nfunction unlistenDevicePixelRatioChanges(chart) {\n  drpListeningCharts.delete(chart);\n  if (!drpListeningCharts.size) {\n    window.removeEventListener('resize', onWindowResize);\n  }\n}\n\nfunction createResizeObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const container = canvas && _getParentNode(canvas);\n  if (!container) {\n    return;\n  }\n  const resize = throttled((width, height) => {\n    const w = container.clientWidth;\n    listener(width, height);\n    if (w < container.clientWidth) {\n      // If the container size shrank during chart resize, let's assume\n      // scrollbar appeared. So we resize again with the scrollbar visible -\n      // effectively making chart smaller and the scrollbar hidden again.\n      // Because we are inside `throttled`, and currently `ticking`, scroll\n      // events are ignored during this whole 2 resize process.\n      // If we assumed wrong and something else happened, we are resizing\n      // twice in a frame (potential performance issue)\n      listener();\n    }\n  }, window);\n\n  // @ts-ignore until https://github.com/microsoft/TypeScript/issues/37861 implemented\n  const observer = new ResizeObserver(entries => {\n    const entry = entries[0];\n    const width = entry.contentRect.width;\n    const height = entry.contentRect.height;\n    // When its container's display is set to 'none' the callback will be called with a\n    // size of (0, 0), which will cause the chart to lose its original height, so skip\n    // resizing in such case.\n    if (width === 0 && height === 0) {\n      return;\n    }\n    resize(width, height);\n  });\n  observer.observe(container);\n  listenDevicePixelRatioChanges(chart, resize);\n\n  return observer;\n}\n\nfunction releaseObserver(chart, type, observer) {\n  if (observer) {\n    observer.disconnect();\n  }\n  if (type === 'resize') {\n    unlistenDevicePixelRatioChanges(chart);\n  }\n}\n\nfunction createProxyAndListen(chart, type, listener) {\n  const canvas = chart.canvas;\n  const proxy = throttled((event) => {\n    // This case can occur if the chart is destroyed while waiting\n    // for the throttled function to occur. We prevent crashes by checking\n    // for a destroyed chart\n    if (chart.ctx !== null) {\n      listener(fromNativeEvent(event, chart));\n    }\n  }, chart);\n\n  addListener(canvas, type, proxy);\n\n  return proxy;\n}\n\n/**\n * Platform class for charts that can access the DOM and global window/document properties\n * @extends BasePlatform\n */\nexport default class DomPlatform extends BasePlatform {\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @param {number} [aspectRatio]\n\t * @return {CanvasRenderingContext2D|null}\n\t */\n  acquireContext(canvas, aspectRatio) {\n    // To prevent canvas fingerprinting, some add-ons undefine the getContext\n    // method, for example: https://github.com/kkapsner/CanvasBlocker\n    // https://github.com/chartjs/Chart.js/issues/2807\n    const context = canvas && canvas.getContext && canvas.getContext('2d');\n\n    // `instanceof HTMLCanvasElement/CanvasRenderingContext2D` fails when the canvas is\n    // inside an iframe or when running in a protected environment. We could guess the\n    // types from their toString() value but let's keep things flexible and assume it's\n    // a sufficient condition if the canvas has a context2D which has canvas as `canvas`.\n    // https://github.com/chartjs/Chart.js/issues/3887\n    // https://github.com/chartjs/Chart.js/issues/4102\n    // https://github.com/chartjs/Chart.js/issues/4152\n    if (context && context.canvas === canvas) {\n      // Load platform resources on first chart creation, to make it possible to\n      // import the library before setting platform options.\n      initCanvas(canvas, aspectRatio);\n      return context;\n    }\n\n    return null;\n  }\n\n  /**\n\t * @param {CanvasRenderingContext2D} context\n\t */\n  releaseContext(context) {\n    const canvas = context.canvas;\n    if (!canvas[EXPANDO_KEY]) {\n      return false;\n    }\n\n    const initial = canvas[EXPANDO_KEY].initial;\n    ['height', 'width'].forEach((prop) => {\n      const value = initial[prop];\n      if (isNullOrUndef(value)) {\n        canvas.removeAttribute(prop);\n      } else {\n        canvas.setAttribute(prop, value);\n      }\n    });\n\n    const style = initial.style || {};\n    Object.keys(style).forEach((key) => {\n      canvas.style[key] = style[key];\n    });\n\n    // The canvas render size might have been changed (and thus the state stack discarded),\n    // we can't use save() and restore() to restore the initial state. So make sure that at\n    // least the canvas context is reset to the default state by setting the canvas width.\n    // https://www.w3.org/TR/2011/WD-html5-20110525/the-canvas-element.html\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width;\n\n    delete canvas[EXPANDO_KEY];\n    return true;\n  }\n\n  /**\n\t *\n\t * @param {Chart} chart\n\t * @param {string} type\n\t * @param {function} listener\n\t */\n  addEventListener(chart, type, listener) {\n    // Can have only one listener per type, so make sure previous is removed\n    this.removeEventListener(chart, type);\n\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const handlers = {\n      attach: createAttachObserver,\n      detach: createDetachObserver,\n      resize: createResizeObserver\n    };\n    const handler = handlers[type] || createProxyAndListen;\n    proxies[type] = handler(chart, type, listener);\n  }\n\n\n  /**\n\t * @param {Chart} chart\n\t * @param {string} type\n\t */\n  removeEventListener(chart, type) {\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const proxy = proxies[type];\n\n    if (!proxy) {\n      return;\n    }\n\n    const handlers = {\n      attach: releaseObserver,\n      detach: releaseObserver,\n      resize: releaseObserver\n    };\n    const handler = handlers[type] || removeListener;\n    handler(chart, type, proxy);\n    proxies[type] = undefined;\n  }\n\n  getDevicePixelRatio() {\n    return window.devicePixelRatio;\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @param {number} [width] - content width of parent element\n\t * @param {number} [height] - content height of parent element\n\t * @param {number} [aspectRatio] - aspect ratio to maintain\n\t */\n  getMaximumSize(canvas, width, height, aspectRatio) {\n    return getMaximumSize(canvas, width, height, aspectRatio);\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t */\n  isAttached(canvas) {\n    const container = _getParentNode(canvas);\n    return !!(container && container.isConnected);\n  }\n}\n","import {_isDomSupported} from '../helpers/index.js';\nimport BasePlatform from './platform.base.js';\nimport BasicPlatform from './platform.basic.js';\nimport DomPlatform from './platform.dom.js';\n\nexport function _detectPlatform(canvas) {\n  if (!_isDomSupported() || (typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas)) {\n    return BasicPlatform;\n  }\n  return DomPlatform;\n}\n\nexport {BasePlatform, BasicPlatform, DomPlatform};\n","import type {AnyObject} from '../types/basic.js';\nimport type {Point} from '../types/geometric.js';\nimport type {Animation} from '../types/animation.js';\nimport {isNumber} from '../helpers/helpers.math.js';\n\nexport default class Element<T = AnyObject, O = AnyObject> {\n\n  static defaults = {};\n  static defaultRoutes = undefined;\n\n  x: number;\n  y: number;\n  active = false;\n  options: O;\n  $animations: Record<keyof T, Animation>;\n\n  tooltipPosition(useFinalPosition: boolean): Point {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y} as Point;\n  }\n\n  hasValue() {\n    return isNumber(this.x) && isNumber(this.y);\n  }\n\n  /**\n   * Gets the current or final value of each prop. Can return extra properties (whole object).\n   * @param props - properties to get\n   * @param [final] - get the final value (animation target)\n   */\n  getProps<P extends (keyof T)[]>(props: P, final?: boolean): Pick<T, P[number]>;\n  getProps<P extends string>(props: P[], final?: boolean): Partial<Record<P, unknown>>;\n  getProps(props: string[], final?: boolean): Partial<Record<string, unknown>> {\n    const anims = this.$animations;\n    if (!final || !anims) {\n      // let's not create an object, if not needed\n      return this as Record<string, unknown>;\n    }\n    const ret: Record<string, unknown> = {};\n    props.forEach((prop) => {\n      ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop as string];\n    });\n    return ret;\n  }\n}\n","import {isNullOrUndef, valueOrDefault} from '../helpers/helpers.core.js';\nimport {_factorize} from '../helpers/helpers.math.js';\n\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef {{value:number | string, label?:string, major?:boolean, $context?:any}} Tick\n */\n\n/**\n * Returns a subset of ticks to be plotted to avoid overlapping labels.\n * @param {import('./core.scale.js').default} scale\n * @param {Tick[]} ticks\n * @return {Tick[]}\n * @private\n */\nexport function autoSkip(scale, ticks) {\n  const tickOpts = scale.options.ticks;\n  const determinedMaxTicks = determineMaxTicks(scale);\n  const ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);\n  const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\n  const numMajorIndices = majorIndices.length;\n  const first = majorIndices[0];\n  const last = majorIndices[numMajorIndices - 1];\n  const newTicks = [];\n\n  // If there are too many major ticks to display them all\n  if (numMajorIndices > ticksLimit) {\n    skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\n    return newTicks;\n  }\n\n  const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\n\n  if (numMajorIndices > 0) {\n    let i, ilen;\n    const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\n    skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\n    for (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {\n      skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\n    }\n    skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\n    return newTicks;\n  }\n  skip(ticks, newTicks, spacing);\n  return newTicks;\n}\n\nfunction determineMaxTicks(scale) {\n  const offset = scale.options.offset;\n  const tickLength = scale._tickSize();\n  const maxScale = scale._length / tickLength + (offset ? 0 : 1);\n  const maxChart = scale._maxLength / tickLength;\n  return Math.floor(Math.min(maxScale, maxChart));\n}\n\n/**\n * @param {number[]} majorIndices\n * @param {Tick[]} ticks\n * @param {number} ticksLimit\n */\nfunction calculateSpacing(majorIndices, ticks, ticksLimit) {\n  const evenMajorSpacing = getEvenSpacing(majorIndices);\n  const spacing = ticks.length / ticksLimit;\n\n  // If the major ticks are evenly spaced apart, place the minor ticks\n  // so that they divide the major ticks into even chunks\n  if (!evenMajorSpacing) {\n    return Math.max(spacing, 1);\n  }\n\n  const factors = _factorize(evenMajorSpacing);\n  for (let i = 0, ilen = factors.length - 1; i < ilen; i++) {\n    const factor = factors[i];\n    if (factor > spacing) {\n      return factor;\n    }\n  }\n  return Math.max(spacing, 1);\n}\n\n/**\n * @param {Tick[]} ticks\n */\nfunction getMajorIndices(ticks) {\n  const result = [];\n  let i, ilen;\n  for (i = 0, ilen = ticks.length; i < ilen; i++) {\n    if (ticks[i].major) {\n      result.push(i);\n    }\n  }\n  return result;\n}\n\n/**\n * @param {Tick[]} ticks\n * @param {Tick[]} newTicks\n * @param {number[]} majorIndices\n * @param {number} spacing\n */\nfunction skipMajors(ticks, newTicks, majorIndices, spacing) {\n  let count = 0;\n  let next = majorIndices[0];\n  let i;\n\n  spacing = Math.ceil(spacing);\n  for (i = 0; i < ticks.length; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = majorIndices[count * spacing];\n    }\n  }\n}\n\n/**\n * @param {Tick[]} ticks\n * @param {Tick[]} newTicks\n * @param {number} spacing\n * @param {number} [majorStart]\n * @param {number} [majorEnd]\n */\nfunction skip(ticks, newTicks, spacing, majorStart, majorEnd) {\n  const start = valueOrDefault(majorStart, 0);\n  const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\n  let count = 0;\n  let length, i, next;\n\n  spacing = Math.ceil(spacing);\n  if (majorEnd) {\n    length = majorEnd - majorStart;\n    spacing = length / Math.floor(length / spacing);\n  }\n\n  next = start;\n\n  while (next < 0) {\n    count++;\n    next = Math.round(start + count * spacing);\n  }\n\n  for (i = Math.max(start, 0); i < end; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = Math.round(start + count * spacing);\n    }\n  }\n}\n\n\n/**\n * @param {number[]} arr\n */\nfunction getEvenSpacing(arr) {\n  const len = arr.length;\n  let i, diff;\n\n  if (len < 2) {\n    return false;\n  }\n\n  for (diff = arr[0], i = 1; i < len; ++i) {\n    if (arr[i] - arr[i - 1] !== diff) {\n      return false;\n    }\n  }\n  return diff;\n}\n","import Element from './core.element.js';\nimport {_alignPixel, _measureText, renderText, clipArea, unclipArea} from '../helpers/helpers.canvas.js';\nimport {callback as call, each, finiteOrDefault, isArray, isFinite, isNullOrUndef, isObject, valueOrDefault} from '../helpers/helpers.core.js';\nimport {toDegrees, toRadians, _int16Range, _limitValue, HALF_PI} from '../helpers/helpers.math.js';\nimport {_alignStartEnd, _toLeftRightCenter} from '../helpers/helpers.extras.js';\nimport {createContext, toFont, toPadding, _addGrace} from '../helpers/helpers.options.js';\nimport {autoSkip} from './core.scale.autoskip.js';\n\nconst reverseAlign = (align) => align === 'left' ? 'right' : align === 'right' ? 'left' : align;\nconst offsetFromEdge = (scale, edge, offset) => edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\nconst getTicksLimit = (ticksLength, maxTicksLimit) => Math.min(maxTicksLimit || ticksLength, ticksLength);\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef {{value:number | string, label?:string, major?:boolean, $context?:any}} Tick\n */\n\n/**\n * Returns a new array containing numItems from arr\n * @param {any[]} arr\n * @param {number} numItems\n */\nfunction sample(arr, numItems) {\n  const result = [];\n  const increment = arr.length / numItems;\n  const len = arr.length;\n  let i = 0;\n\n  for (; i < len; i += increment) {\n    result.push(arr[Math.floor(i)]);\n  }\n  return result;\n}\n\n/**\n * @param {Scale} scale\n * @param {number} index\n * @param {boolean} offsetGridLines\n */\nfunction getPixelForGridLine(scale, index, offsetGridLines) {\n  const length = scale.ticks.length;\n  const validIndex = Math.min(index, length - 1);\n  const start = scale._startPixel;\n  const end = scale._endPixel;\n  const epsilon = 1e-6; // 1e-6 is margin in pixels for accumulated error.\n  let lineValue = scale.getPixelForTick(validIndex);\n  let offset;\n\n  if (offsetGridLines) {\n    if (length === 1) {\n      offset = Math.max(lineValue - start, end - lineValue);\n    } else if (index === 0) {\n      offset = (scale.getPixelForTick(1) - lineValue) / 2;\n    } else {\n      offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\n    }\n    lineValue += validIndex < index ? offset : -offset;\n\n    // Return undefined if the pixel is out of the range\n    if (lineValue < start - epsilon || lineValue > end + epsilon) {\n      return;\n    }\n  }\n  return lineValue;\n}\n\n/**\n * @param {object} caches\n * @param {number} length\n */\nfunction garbageCollect(caches, length) {\n  each(caches, (cache) => {\n    const gc = cache.gc;\n    const gcLen = gc.length / 2;\n    let i;\n    if (gcLen > length) {\n      for (i = 0; i < gcLen; ++i) {\n        delete cache.data[gc[i]];\n      }\n      gc.splice(0, gcLen);\n    }\n  });\n}\n\n/**\n * @param {object} options\n */\nfunction getTickMarkLength(options) {\n  return options.drawTicks ? options.tickLength : 0;\n}\n\n/**\n * @param {object} options\n */\nfunction getTitleHeight(options, fallback) {\n  if (!options.display) {\n    return 0;\n  }\n\n  const font = toFont(options.font, fallback);\n  const padding = toPadding(options.padding);\n  const lines = isArray(options.text) ? options.text.length : 1;\n\n  return (lines * font.lineHeight) + padding.height;\n}\n\nfunction createScaleContext(parent, scale) {\n  return createContext(parent, {\n    scale,\n    type: 'scale'\n  });\n}\n\nfunction createTickContext(parent, index, tick) {\n  return createContext(parent, {\n    tick,\n    index,\n    type: 'tick'\n  });\n}\n\nfunction titleAlign(align, position, reverse) {\n  let ret = _toLeftRightCenter(align);\n  if ((reverse && position !== 'right') || (!reverse && position === 'right')) {\n    ret = reverseAlign(ret);\n  }\n  return ret;\n}\n\nfunction titleArgs(scale, offset, position, align) {\n  const {top, left, bottom, right, chart} = scale;\n  const {chartArea, scales} = chart;\n  let rotation = 0;\n  let maxWidth, titleX, titleY;\n  const height = bottom - top;\n  const width = right - left;\n\n  if (scale.isHorizontal()) {\n    titleX = _alignStartEnd(align, left, right);\n\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\n    } else if (position === 'center') {\n      titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\n    } else {\n      titleY = offsetFromEdge(scale, position, offset);\n    }\n    maxWidth = right - left;\n  } else {\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleX = scales[positionAxisID].getPixelForValue(value) - width + offset;\n    } else if (position === 'center') {\n      titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\n    } else {\n      titleX = offsetFromEdge(scale, position, offset);\n    }\n    titleY = _alignStartEnd(align, bottom, top);\n    rotation = position === 'left' ? -HALF_PI : HALF_PI;\n  }\n  return {titleX, titleY, maxWidth, rotation};\n}\n\nexport default class Scale extends Element {\n\n  // eslint-disable-next-line max-statements\n  constructor(cfg) {\n    super();\n\n    /** @type {string} */\n    this.id = cfg.id;\n    /** @type {string} */\n    this.type = cfg.type;\n    /** @type {any} */\n    this.options = undefined;\n    /** @type {CanvasRenderingContext2D} */\n    this.ctx = cfg.ctx;\n    /** @type {Chart} */\n    this.chart = cfg.chart;\n\n    // implements box\n    /** @type {number} */\n    this.top = undefined;\n    /** @type {number} */\n    this.bottom = undefined;\n    /** @type {number} */\n    this.left = undefined;\n    /** @type {number} */\n    this.right = undefined;\n    /** @type {number} */\n    this.width = undefined;\n    /** @type {number} */\n    this.height = undefined;\n    this._margins = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    };\n    /** @type {number} */\n    this.maxWidth = undefined;\n    /** @type {number} */\n    this.maxHeight = undefined;\n    /** @type {number} */\n    this.paddingTop = undefined;\n    /** @type {number} */\n    this.paddingBottom = undefined;\n    /** @type {number} */\n    this.paddingLeft = undefined;\n    /** @type {number} */\n    this.paddingRight = undefined;\n\n    // scale-specific properties\n    /** @type {string=} */\n    this.axis = undefined;\n    /** @type {number=} */\n    this.labelRotation = undefined;\n    this.min = undefined;\n    this.max = undefined;\n    this._range = undefined;\n    /** @type {Tick[]} */\n    this.ticks = [];\n    /** @type {object[]|null} */\n    this._gridLineItems = null;\n    /** @type {object[]|null} */\n    this._labelItems = null;\n    /** @type {object|null} */\n    this._labelSizes = null;\n    this._length = 0;\n    this._maxLength = 0;\n    this._longestTextCache = {};\n    /** @type {number} */\n    this._startPixel = undefined;\n    /** @type {number} */\n    this._endPixel = undefined;\n    this._reversePixels = false;\n    this._userMax = undefined;\n    this._userMin = undefined;\n    this._suggestedMax = undefined;\n    this._suggestedMin = undefined;\n    this._ticksLength = 0;\n    this._borderValue = 0;\n    this._cache = {};\n    this._dataLimitsCached = false;\n    this.$context = undefined;\n  }\n\n  /**\n\t * @param {any} options\n\t * @since 3.0\n\t */\n  init(options) {\n    this.options = options.setContext(this.getContext());\n\n    this.axis = options.axis;\n\n    // parse min/max value, so we can properly determine min/max for other scales\n    this._userMin = this.parse(options.min);\n    this._userMax = this.parse(options.max);\n    this._suggestedMin = this.parse(options.suggestedMin);\n    this._suggestedMax = this.parse(options.suggestedMax);\n  }\n\n  /**\n\t * Parse a supported input value to internal representation.\n\t * @param {*} raw\n\t * @param {number} [index]\n\t * @since 3.0\n\t */\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    return raw;\n  }\n\n  /**\n\t * @return {{min: number, max: number, minDefined: boolean, maxDefined: boolean}}\n\t * @protected\n\t * @since 3.0\n\t */\n  getUserBounds() {\n    let {_userMin, _userMax, _suggestedMin, _suggestedMax} = this;\n    _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\n    _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\n    _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\n    _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\n    return {\n      min: finiteOrDefault(_userMin, _suggestedMin),\n      max: finiteOrDefault(_userMax, _suggestedMax),\n      minDefined: isFinite(_userMin),\n      maxDefined: isFinite(_userMax)\n    };\n  }\n\n  /**\n\t * @param {boolean} canStack\n\t * @return {{min: number, max: number}}\n\t * @protected\n\t * @since 3.0\n\t */\n  getMinMax(canStack) {\n    // eslint-disable-next-line prefer-const\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n    let range;\n\n    if (minDefined && maxDefined) {\n      return {min, max};\n    }\n\n    const metas = this.getMatchingVisibleMetas();\n    for (let i = 0, ilen = metas.length; i < ilen; ++i) {\n      range = metas[i].controller.getMinMax(this, canStack);\n      if (!minDefined) {\n        min = Math.min(min, range.min);\n      }\n      if (!maxDefined) {\n        max = Math.max(max, range.max);\n      }\n    }\n\n    // Make sure min <= max when only min or max is defined by user and the data is outside that range\n    min = maxDefined && min > max ? max : min;\n    max = minDefined && min > max ? min : max;\n\n    return {\n      min: finiteOrDefault(min, finiteOrDefault(max, min)),\n      max: finiteOrDefault(max, finiteOrDefault(min, max))\n    };\n  }\n\n  /**\n\t * Get the padding needed for the scale\n\t * @return {{top: number, left: number, bottom: number, right: number}} the necessary padding\n\t * @private\n\t */\n  getPadding() {\n    return {\n      left: this.paddingLeft || 0,\n      top: this.paddingTop || 0,\n      right: this.paddingRight || 0,\n      bottom: this.paddingBottom || 0\n    };\n  }\n\n  /**\n\t * Returns the scale tick objects\n\t * @return {Tick[]}\n\t * @since 2.7\n\t */\n  getTicks() {\n    return this.ticks;\n  }\n\n  /**\n\t * @return {string[]}\n\t */\n  getLabels() {\n    const data = this.chart.data;\n    return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\n  }\n\n  /**\n   * @return {import('../types.js').LabelItem[]}\n   */\n  getLabelItems(chartArea = this.chart.chartArea) {\n    const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\n    return items;\n  }\n\n  // When a new layout is created, reset the data limits cache\n  beforeLayout() {\n    this._cache = {};\n    this._dataLimitsCached = false;\n  }\n\n  // These methods are ordered by lifecycle. Utilities then follow.\n  // Any function defined here is inherited by all scale types.\n  // Any function can be extended by the scale type\n\n  beforeUpdate() {\n    call(this.options.beforeUpdate, [this]);\n  }\n\n  /**\n\t * @param {number} maxWidth - the max width in pixels\n\t * @param {number} maxHeight - the max height in pixels\n\t * @param {{top: number, left: number, bottom: number, right: number}} margins - the space between the edge of the other scales and edge of the chart\n\t *   This space comes from two sources:\n\t *     - padding - space that's required to show the labels at the edges of the scale\n\t *     - thickness of scales or legends in another orientation\n\t */\n  update(maxWidth, maxHeight, margins) {\n    const {beginAtZero, grace, ticks: tickOpts} = this.options;\n    const sampleSize = tickOpts.sampleSize;\n\n    // Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n    this.beforeUpdate();\n\n    // Absorb the master measurements\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins = Object.assign({\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }, margins);\n\n    this.ticks = null;\n    this._labelSizes = null;\n    this._gridLineItems = null;\n    this._labelItems = null;\n\n    // Dimensions\n    this.beforeSetDimensions();\n    this.setDimensions();\n    this.afterSetDimensions();\n\n    this._maxLength = this.isHorizontal()\n      ? this.width + margins.left + margins.right\n      : this.height + margins.top + margins.bottom;\n\n    // Data min/max\n    if (!this._dataLimitsCached) {\n      this.beforeDataLimits();\n      this.determineDataLimits();\n      this.afterDataLimits();\n      this._range = _addGrace(this, grace, beginAtZero);\n      this._dataLimitsCached = true;\n    }\n\n    this.beforeBuildTicks();\n\n    this.ticks = this.buildTicks() || [];\n\n    // Allow modification of ticks in callback.\n    this.afterBuildTicks();\n\n    // Compute tick rotation and fit using a sampled subset of labels\n    // We generally don't need to compute the size of every single label for determining scale size\n    const samplingEnabled = sampleSize < this.ticks.length;\n    this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\n\n    // configure is called twice, once here, once from core.controller.updateLayout.\n    // Here we haven't been positioned yet, but dimensions are correct.\n    // Variables set in configure are needed for calculateLabelRotation, and\n    // it's ok that coordinates are not correct there, only dimensions matter.\n    this.configure();\n\n    // Tick Rotation\n    this.beforeCalculateLabelRotation();\n    this.calculateLabelRotation(); // Preconditions: number of ticks and sizes of largest labels must be calculated beforehand\n    this.afterCalculateLabelRotation();\n\n    // Auto-skip\n    if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\n      this.ticks = autoSkip(this, this.ticks);\n      this._labelSizes = null;\n      this.afterAutoSkip();\n    }\n\n    if (samplingEnabled) {\n      // Generate labels using all non-skipped ticks\n      this._convertTicksToLabels(this.ticks);\n    }\n\n    this.beforeFit();\n    this.fit(); // Preconditions: label rotation and label sizes must be calculated beforehand\n    this.afterFit();\n\n    // IMPORTANT: after this point, we consider that `this.ticks` will NEVER change!\n\n    this.afterUpdate();\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    let reversePixels = this.options.reverse;\n    let startPixel, endPixel;\n\n    if (this.isHorizontal()) {\n      startPixel = this.left;\n      endPixel = this.right;\n    } else {\n      startPixel = this.top;\n      endPixel = this.bottom;\n      // by default vertical scales are from bottom to top, so pixels are reversed\n      reversePixels = !reversePixels;\n    }\n    this._startPixel = startPixel;\n    this._endPixel = endPixel;\n    this._reversePixels = reversePixels;\n    this._length = endPixel - startPixel;\n    this._alignToPixels = this.options.alignToPixels;\n  }\n\n  afterUpdate() {\n    call(this.options.afterUpdate, [this]);\n  }\n\n  //\n\n  beforeSetDimensions() {\n    call(this.options.beforeSetDimensions, [this]);\n  }\n  setDimensions() {\n    // Set the unconstrained dimension before label rotation\n    if (this.isHorizontal()) {\n      // Reset position before calculating rotation\n      this.width = this.maxWidth;\n      this.left = 0;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n\n      // Reset position before calculating rotation\n      this.top = 0;\n      this.bottom = this.height;\n    }\n\n    // Reset padding\n    this.paddingLeft = 0;\n    this.paddingTop = 0;\n    this.paddingRight = 0;\n    this.paddingBottom = 0;\n  }\n  afterSetDimensions() {\n    call(this.options.afterSetDimensions, [this]);\n  }\n\n  _callHooks(name) {\n    this.chart.notifyPlugins(name, this.getContext());\n    call(this.options[name], [this]);\n  }\n\n  // Data limits\n  beforeDataLimits() {\n    this._callHooks('beforeDataLimits');\n  }\n  determineDataLimits() {}\n  afterDataLimits() {\n    this._callHooks('afterDataLimits');\n  }\n\n  //\n  beforeBuildTicks() {\n    this._callHooks('beforeBuildTicks');\n  }\n  /**\n\t * @return {object[]} the ticks\n\t */\n  buildTicks() {\n    return [];\n  }\n  afterBuildTicks() {\n    this._callHooks('afterBuildTicks');\n  }\n\n  beforeTickToLabelConversion() {\n    call(this.options.beforeTickToLabelConversion, [this]);\n  }\n  /**\n\t * Convert ticks to label strings\n\t * @param {Tick[]} ticks\n\t */\n  generateTickLabels(ticks) {\n    const tickOpts = this.options.ticks;\n    let i, ilen, tick;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      tick = ticks[i];\n      tick.label = call(tickOpts.callback, [tick.value, i, ticks], this);\n    }\n  }\n  afterTickToLabelConversion() {\n    call(this.options.afterTickToLabelConversion, [this]);\n  }\n\n  //\n\n  beforeCalculateLabelRotation() {\n    call(this.options.beforeCalculateLabelRotation, [this]);\n  }\n  calculateLabelRotation() {\n    const options = this.options;\n    const tickOpts = options.ticks;\n    const numTicks = getTicksLimit(this.ticks.length, options.ticks.maxTicksLimit);\n    const minRotation = tickOpts.minRotation || 0;\n    const maxRotation = tickOpts.maxRotation;\n    let labelRotation = minRotation;\n    let tickWidth, maxHeight, maxLabelDiagonal;\n\n    if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\n      this.labelRotation = minRotation;\n      return;\n    }\n\n    const labelSizes = this._getLabelSizes();\n    const maxLabelWidth = labelSizes.widest.width;\n    const maxLabelHeight = labelSizes.highest.height;\n\n    // Estimate the width of each grid based on the canvas width, the maximum\n    // label width and the number of tick intervals\n    const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\n    tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\n\n    // Allow 3 pixels x2 padding either side for label readability\n    if (maxLabelWidth + 6 > tickWidth) {\n      tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\n      maxHeight = this.maxHeight - getTickMarkLength(options.grid)\n\t\t\t\t- tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\n      maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\n      labelRotation = toDegrees(Math.min(\n        Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)),\n        Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))\n      ));\n      labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\n    }\n\n    this.labelRotation = labelRotation;\n  }\n  afterCalculateLabelRotation() {\n    call(this.options.afterCalculateLabelRotation, [this]);\n  }\n  afterAutoSkip() {}\n\n  //\n\n  beforeFit() {\n    call(this.options.beforeFit, [this]);\n  }\n  fit() {\n    // Reset\n    const minSize = {\n      width: 0,\n      height: 0\n    };\n\n    const {chart, options: {ticks: tickOpts, title: titleOpts, grid: gridOpts}} = this;\n    const display = this._isVisible();\n    const isHorizontal = this.isHorizontal();\n\n    if (display) {\n      const titleHeight = getTitleHeight(titleOpts, chart.options.font);\n      if (isHorizontal) {\n        minSize.width = this.maxWidth;\n        minSize.height = getTickMarkLength(gridOpts) + titleHeight;\n      } else {\n        minSize.height = this.maxHeight; // fill all the height\n        minSize.width = getTickMarkLength(gridOpts) + titleHeight;\n      }\n\n      // Don't bother fitting the ticks if we are not showing the labels\n      if (tickOpts.display && this.ticks.length) {\n        const {first, last, widest, highest} = this._getLabelSizes();\n        const tickPadding = tickOpts.padding * 2;\n        const angleRadians = toRadians(this.labelRotation);\n        const cos = Math.cos(angleRadians);\n        const sin = Math.sin(angleRadians);\n\n        if (isHorizontal) {\n        // A horizontal axis is more constrained by the height.\n          const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\n          minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\n        } else {\n        // A vertical axis is more constrained by the width. Labels are the\n        // dominant factor here, so get that length first and account for padding\n          const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\n\n          minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\n        }\n        this._calculatePadding(first, last, sin, cos);\n      }\n    }\n\n    this._handleMargins();\n\n    if (isHorizontal) {\n      this.width = this._length = chart.width - this._margins.left - this._margins.right;\n      this.height = minSize.height;\n    } else {\n      this.width = minSize.width;\n      this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\n    }\n  }\n\n  _calculatePadding(first, last, sin, cos) {\n    const {ticks: {align, padding}, position} = this.options;\n    const isRotated = this.labelRotation !== 0;\n    const labelsBelowTicks = position !== 'top' && this.axis === 'x';\n\n    if (this.isHorizontal()) {\n      const offsetLeft = this.getPixelForTick(0) - this.left;\n      const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\n      let paddingLeft = 0;\n      let paddingRight = 0;\n\n      // Ensure that our ticks are always inside the canvas. When rotated, ticks are right aligned\n      // which means that the right padding is dominated by the font height\n      if (isRotated) {\n        if (labelsBelowTicks) {\n          paddingLeft = cos * first.width;\n          paddingRight = sin * last.height;\n        } else {\n          paddingLeft = sin * first.height;\n          paddingRight = cos * last.width;\n        }\n      } else if (align === 'start') {\n        paddingRight = last.width;\n      } else if (align === 'end') {\n        paddingLeft = first.width;\n      } else if (align !== 'inner') {\n        paddingLeft = first.width / 2;\n        paddingRight = last.width / 2;\n      }\n\n      // Adjust padding taking into account changes in offsets\n      this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\n      this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\n    } else {\n      let paddingTop = last.height / 2;\n      let paddingBottom = first.height / 2;\n\n      if (align === 'start') {\n        paddingTop = 0;\n        paddingBottom = first.height;\n      } else if (align === 'end') {\n        paddingTop = last.height;\n        paddingBottom = 0;\n      }\n\n      this.paddingTop = paddingTop + padding;\n      this.paddingBottom = paddingBottom + padding;\n    }\n  }\n\n  /**\n\t * Handle margins and padding interactions\n\t * @private\n\t */\n  _handleMargins() {\n    if (this._margins) {\n      this._margins.left = Math.max(this.paddingLeft, this._margins.left);\n      this._margins.top = Math.max(this.paddingTop, this._margins.top);\n      this._margins.right = Math.max(this.paddingRight, this._margins.right);\n      this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\n    }\n  }\n\n  afterFit() {\n    call(this.options.afterFit, [this]);\n  }\n\n  // Shared Methods\n  /**\n\t * @return {boolean}\n\t */\n  isHorizontal() {\n    const {axis, position} = this.options;\n    return position === 'top' || position === 'bottom' || axis === 'x';\n  }\n  /**\n\t * @return {boolean}\n\t */\n  isFullSize() {\n    return this.options.fullSize;\n  }\n\n  /**\n\t * @param {Tick[]} ticks\n\t * @private\n\t */\n  _convertTicksToLabels(ticks) {\n    this.beforeTickToLabelConversion();\n\n    this.generateTickLabels(ticks);\n\n    // Ticks should be skipped when callback returns null or undef, so lets remove those.\n    let i, ilen;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      if (isNullOrUndef(ticks[i].label)) {\n        ticks.splice(i, 1);\n        ilen--;\n        i--;\n      }\n    }\n\n    this.afterTickToLabelConversion();\n  }\n\n  /**\n\t * @return {{ first: object, last: object, widest: object, highest: object, widths: Array, heights: array }}\n\t * @private\n\t */\n  _getLabelSizes() {\n    let labelSizes = this._labelSizes;\n\n    if (!labelSizes) {\n      const sampleSize = this.options.ticks.sampleSize;\n      let ticks = this.ticks;\n      if (sampleSize < ticks.length) {\n        ticks = sample(ticks, sampleSize);\n      }\n\n      this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length, this.options.ticks.maxTicksLimit);\n    }\n\n    return labelSizes;\n  }\n\n  /**\n\t * Returns {width, height, offset} objects for the first, last, widest, highest tick\n\t * labels where offset indicates the anchor point offset from the top in pixels.\n\t * @return {{ first: object, last: object, widest: object, highest: object, widths: Array, heights: array }}\n\t * @private\n\t */\n  _computeLabelSizes(ticks, length, maxTicksLimit) {\n    const {ctx, _longestTextCache: caches} = this;\n    const widths = [];\n    const heights = [];\n    const increment = Math.floor(length / getTicksLimit(length, maxTicksLimit));\n    let widestLabelSize = 0;\n    let highestLabelSize = 0;\n    let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\n\n    for (i = 0; i < length; i += increment) {\n      label = ticks[i].label;\n      tickFont = this._resolveTickFontOptions(i);\n      ctx.font = fontString = tickFont.string;\n      cache = caches[fontString] = caches[fontString] || {data: {}, gc: []};\n      lineHeight = tickFont.lineHeight;\n      width = height = 0;\n      // Undefined labels and arrays should not be measured\n      if (!isNullOrUndef(label) && !isArray(label)) {\n        width = _measureText(ctx, cache.data, cache.gc, width, label);\n        height = lineHeight;\n      } else if (isArray(label)) {\n        // if it is an array let's measure each element\n        for (j = 0, jlen = label.length; j < jlen; ++j) {\n          nestedLabel = label[j];\n          // Undefined labels and arrays should not be measured\n          if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\n            width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\n            height += lineHeight;\n          }\n        }\n      }\n      widths.push(width);\n      heights.push(height);\n      widestLabelSize = Math.max(width, widestLabelSize);\n      highestLabelSize = Math.max(height, highestLabelSize);\n    }\n    garbageCollect(caches, length);\n\n    const widest = widths.indexOf(widestLabelSize);\n    const highest = heights.indexOf(highestLabelSize);\n\n    const valueAt = (idx) => ({width: widths[idx] || 0, height: heights[idx] || 0});\n\n    return {\n      first: valueAt(0),\n      last: valueAt(length - 1),\n      widest: valueAt(widest),\n      highest: valueAt(highest),\n      widths,\n      heights,\n    };\n  }\n\n  /**\n\t * Used to get the label to display in the tooltip for the given value\n\t * @param {*} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    return value;\n  }\n\n  /**\n\t * Returns the location of the given data point. Value can either be an index or a numerical value\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {*} value\n\t * @param {number} [index]\n\t * @return {number}\n\t */\n  getPixelForValue(value, index) { // eslint-disable-line no-unused-vars\n    return NaN;\n  }\n\n  /**\n\t * Used to get the data value from a given pixel. This is the inverse of getPixelForValue\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} pixel\n\t * @return {*}\n\t */\n  getValueForPixel(pixel) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Returns the location of the tick at the given index\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} index\n\t * @return {number}\n\t */\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n\n  /**\n\t * Utility for getting the pixel location of a percentage of scale\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} decimal\n\t * @return {number}\n\t */\n  getPixelForDecimal(decimal) {\n    if (this._reversePixels) {\n      decimal = 1 - decimal;\n    }\n\n    const pixel = this._startPixel + decimal * this._length;\n    return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getDecimalForPixel(pixel) {\n    const decimal = (pixel - this._startPixel) / this._length;\n    return this._reversePixels ? 1 - decimal : decimal;\n  }\n\n  /**\n\t * Returns the pixel for the minimum chart value\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @return {number}\n\t */\n  getBasePixel() {\n    return this.getPixelForValue(this.getBaseValue());\n  }\n\n  /**\n\t * @return {number}\n\t */\n  getBaseValue() {\n    const {min, max} = this;\n\n    return min < 0 && max < 0 ? max :\n      min > 0 && max > 0 ? min :\n      0;\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext(index) {\n    const ticks = this.ticks || [];\n\n    if (index >= 0 && index < ticks.length) {\n      const tick = ticks[index];\n      return tick.$context ||\n\t\t\t\t(tick.$context = createTickContext(this.getContext(), index, tick));\n    }\n    return this.$context ||\n\t\t\t(this.$context = createScaleContext(this.chart.getContext(), this));\n  }\n\n  /**\n\t * @return {number}\n\t * @private\n\t */\n  _tickSize() {\n    const optionTicks = this.options.ticks;\n\n    // Calculate space needed by label in axis direction.\n    const rot = toRadians(this.labelRotation);\n    const cos = Math.abs(Math.cos(rot));\n    const sin = Math.abs(Math.sin(rot));\n\n    const labelSizes = this._getLabelSizes();\n    const padding = optionTicks.autoSkipPadding || 0;\n    const w = labelSizes ? labelSizes.widest.width + padding : 0;\n    const h = labelSizes ? labelSizes.highest.height + padding : 0;\n\n    // Calculate space needed for 1 tick in axis direction.\n    return this.isHorizontal()\n      ? h * cos > w * sin ? w / cos : h / sin\n      : h * sin < w * cos ? h / cos : w / sin;\n  }\n\n  /**\n\t * @return {boolean}\n\t * @private\n\t */\n  _isVisible() {\n    const display = this.options.display;\n\n    if (display !== 'auto') {\n      return !!display;\n    }\n\n    return this.getMatchingVisibleMetas().length > 0;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeGridLineItems(chartArea) {\n    const axis = this.axis;\n    const chart = this.chart;\n    const options = this.options;\n    const {grid, position, border} = options;\n    const offset = grid.offset;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const ticksLength = ticks.length + (offset ? 1 : 0);\n    const tl = getTickMarkLength(grid);\n    const items = [];\n\n    const borderOpts = border.setContext(this.getContext());\n    const axisWidth = borderOpts.display ? borderOpts.width : 0;\n    const axisHalfWidth = axisWidth / 2;\n    const alignBorderValue = function(pixel) {\n      return _alignPixel(chart, pixel, axisWidth);\n    };\n    let borderValue, i, lineValue, alignedLineValue;\n    let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\n\n    if (position === 'top') {\n      borderValue = alignBorderValue(this.bottom);\n      ty1 = this.bottom - tl;\n      ty2 = borderValue - axisHalfWidth;\n      y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\n      y2 = chartArea.bottom;\n    } else if (position === 'bottom') {\n      borderValue = alignBorderValue(this.top);\n      y1 = chartArea.top;\n      y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = this.top + tl;\n    } else if (position === 'left') {\n      borderValue = alignBorderValue(this.right);\n      tx1 = this.right - tl;\n      tx2 = borderValue - axisHalfWidth;\n      x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\n      x2 = chartArea.right;\n    } else if (position === 'right') {\n      borderValue = alignBorderValue(this.left);\n      x1 = chartArea.left;\n      x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\n      tx1 = borderValue + axisHalfWidth;\n      tx2 = this.left + tl;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n\n      y1 = chartArea.top;\n      y2 = chartArea.bottom;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = ty1 + tl;\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n\n      tx1 = borderValue - axisHalfWidth;\n      tx2 = tx1 - tl;\n      x1 = chartArea.left;\n      x2 = chartArea.right;\n    }\n\n    const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\n    const step = Math.max(1, Math.ceil(ticksLength / limit));\n    for (i = 0; i < ticksLength; i += step) {\n      const context = this.getContext(i);\n      const optsAtIndex = grid.setContext(context);\n      const optsAtIndexBorder = border.setContext(context);\n\n      const lineWidth = optsAtIndex.lineWidth;\n      const lineColor = optsAtIndex.color;\n      const borderDash = optsAtIndexBorder.dash || [];\n      const borderDashOffset = optsAtIndexBorder.dashOffset;\n\n      const tickWidth = optsAtIndex.tickWidth;\n      const tickColor = optsAtIndex.tickColor;\n      const tickBorderDash = optsAtIndex.tickBorderDash || [];\n      const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\n\n      lineValue = getPixelForGridLine(this, i, offset);\n\n      // Skip if the pixel is out of the range\n      if (lineValue === undefined) {\n        continue;\n      }\n\n      alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\n\n      if (isHorizontal) {\n        tx1 = tx2 = x1 = x2 = alignedLineValue;\n      } else {\n        ty1 = ty2 = y1 = y2 = alignedLineValue;\n      }\n\n      items.push({\n        tx1,\n        ty1,\n        tx2,\n        ty2,\n        x1,\n        y1,\n        x2,\n        y2,\n        width: lineWidth,\n        color: lineColor,\n        borderDash,\n        borderDashOffset,\n        tickWidth,\n        tickColor,\n        tickBorderDash,\n        tickBorderDashOffset,\n      });\n    }\n\n    this._ticksLength = ticksLength;\n    this._borderValue = borderValue;\n\n    return items;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeLabelItems(chartArea) {\n    const axis = this.axis;\n    const options = this.options;\n    const {position, ticks: optionTicks} = options;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const {align, crossAlign, padding, mirror} = optionTicks;\n    const tl = getTickMarkLength(options.grid);\n    const tickAndPadding = tl + padding;\n    const hTickAndPadding = mirror ? -padding : tickAndPadding;\n    const rotation = -toRadians(this.labelRotation);\n    const items = [];\n    let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\n    let textBaseline = 'middle';\n\n    if (position === 'top') {\n      y = this.bottom - hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'bottom') {\n      y = this.top + hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'left') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (position === 'right') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        y = ((chartArea.top + chartArea.bottom) / 2) + tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\n      }\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        x = ((chartArea.left + chartArea.right) / 2) - tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        x = this.chart.scales[positionAxisID].getPixelForValue(value);\n      }\n      textAlign = this._getYAxisLabelAlignment(tl).textAlign;\n    }\n\n    if (axis === 'y') {\n      if (align === 'start') {\n        textBaseline = 'top';\n      } else if (align === 'end') {\n        textBaseline = 'bottom';\n      }\n    }\n\n    const labelSizes = this._getLabelSizes();\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      label = tick.label;\n\n      const optsAtIndex = optionTicks.setContext(this.getContext(i));\n      pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\n      font = this._resolveTickFontOptions(i);\n      lineHeight = font.lineHeight;\n      lineCount = isArray(label) ? label.length : 1;\n      const halfCount = lineCount / 2;\n      const color = optsAtIndex.color;\n      const strokeColor = optsAtIndex.textStrokeColor;\n      const strokeWidth = optsAtIndex.textStrokeWidth;\n      let tickTextAlign = textAlign;\n\n      if (isHorizontal) {\n        x = pixel;\n\n        if (textAlign === 'inner') {\n          if (i === ilen - 1) {\n            tickTextAlign = !this.options.reverse ? 'right' : 'left';\n          } else if (i === 0) {\n            tickTextAlign = !this.options.reverse ? 'left' : 'right';\n          } else {\n            tickTextAlign = 'center';\n          }\n        }\n\n        if (position === 'top') {\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = -lineCount * lineHeight + lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\n          } else {\n            textOffset = -labelSizes.highest.height + lineHeight / 2;\n          }\n        } else {\n          // eslint-disable-next-line no-lonely-if\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\n          } else {\n            textOffset = labelSizes.highest.height - lineCount * lineHeight;\n          }\n        }\n        if (mirror) {\n          textOffset *= -1;\n        }\n        if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {\n          x += (lineHeight / 2) * Math.sin(rotation);\n        }\n      } else {\n        y = pixel;\n        textOffset = (1 - lineCount) * lineHeight / 2;\n      }\n\n      let backdrop;\n\n      if (optsAtIndex.showLabelBackdrop) {\n        const labelPadding = toPadding(optsAtIndex.backdropPadding);\n        const height = labelSizes.heights[i];\n        const width = labelSizes.widths[i];\n\n        let top = textOffset - labelPadding.top;\n        let left = 0 - labelPadding.left;\n\n        switch (textBaseline) {\n        case 'middle':\n          top -= height / 2;\n          break;\n        case 'bottom':\n          top -= height;\n          break;\n        default:\n          break;\n        }\n\n        switch (textAlign) {\n        case 'center':\n          left -= width / 2;\n          break;\n        case 'right':\n          left -= width;\n          break;\n        default:\n          break;\n        }\n\n        backdrop = {\n          left,\n          top,\n          width: width + labelPadding.width,\n          height: height + labelPadding.height,\n\n          color: optsAtIndex.backdropColor,\n        };\n      }\n\n      items.push({\n        label,\n        font,\n        textOffset,\n        options: {\n          rotation,\n          color,\n          strokeColor,\n          strokeWidth,\n          textAlign: tickTextAlign,\n          textBaseline,\n          translation: [x, y],\n          backdrop,\n        }\n      });\n    }\n\n    return items;\n  }\n\n  _getXAxisLabelAlignment() {\n    const {position, ticks} = this.options;\n    const rotation = -toRadians(this.labelRotation);\n\n    if (rotation) {\n      return position === 'top' ? 'left' : 'right';\n    }\n\n    let align = 'center';\n\n    if (ticks.align === 'start') {\n      align = 'left';\n    } else if (ticks.align === 'end') {\n      align = 'right';\n    } else if (ticks.align === 'inner') {\n      align = 'inner';\n    }\n\n    return align;\n  }\n\n  _getYAxisLabelAlignment(tl) {\n    const {position, ticks: {crossAlign, mirror, padding}} = this.options;\n    const labelSizes = this._getLabelSizes();\n    const tickAndPadding = tl + padding;\n    const widest = labelSizes.widest.width;\n\n    let textAlign;\n    let x;\n\n    if (position === 'left') {\n      if (mirror) {\n        x = this.right + padding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += (widest / 2);\n        } else {\n          textAlign = 'right';\n          x += widest;\n        }\n      } else {\n        x = this.right - tickAndPadding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x = this.left;\n        }\n      }\n    } else if (position === 'right') {\n      if (mirror) {\n        x = this.left + padding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x -= widest;\n        }\n      } else {\n        x = this.left + tickAndPadding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += widest / 2;\n        } else {\n          textAlign = 'right';\n          x = this.right;\n        }\n      }\n    } else {\n      textAlign = 'right';\n    }\n\n    return {textAlign, x};\n  }\n\n  /**\n\t * @private\n\t */\n  _computeLabelArea() {\n    if (this.options.ticks.mirror) {\n      return;\n    }\n\n    const chart = this.chart;\n    const position = this.options.position;\n\n    if (position === 'left' || position === 'right') {\n      return {top: 0, left: this.left, bottom: chart.height, right: this.right};\n    } if (position === 'top' || position === 'bottom') {\n      return {top: this.top, left: 0, bottom: this.bottom, right: chart.width};\n    }\n  }\n\n  /**\n   * @protected\n   */\n  drawBackground() {\n    const {ctx, options: {backgroundColor}, left, top, width, height} = this;\n    if (backgroundColor) {\n      ctx.save();\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(left, top, width, height);\n      ctx.restore();\n    }\n  }\n\n  getLineWidthForValue(value) {\n    const grid = this.options.grid;\n    if (!this._isVisible() || !grid.display) {\n      return 0;\n    }\n    const ticks = this.ticks;\n    const index = ticks.findIndex(t => t.value === value);\n    if (index >= 0) {\n      const opts = grid.setContext(this.getContext(index));\n      return opts.lineWidth;\n    }\n    return 0;\n  }\n\n  /**\n\t * @protected\n\t */\n  drawGrid(chartArea) {\n    const grid = this.options.grid;\n    const ctx = this.ctx;\n    const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\n    let i, ilen;\n\n    const drawLine = (p1, p2, style) => {\n      if (!style.width || !style.color) {\n        return;\n      }\n      ctx.save();\n      ctx.lineWidth = style.width;\n      ctx.strokeStyle = style.color;\n      ctx.setLineDash(style.borderDash || []);\n      ctx.lineDashOffset = style.borderDashOffset;\n\n      ctx.beginPath();\n      ctx.moveTo(p1.x, p1.y);\n      ctx.lineTo(p2.x, p2.y);\n      ctx.stroke();\n      ctx.restore();\n    };\n\n    if (grid.display) {\n      for (i = 0, ilen = items.length; i < ilen; ++i) {\n        const item = items[i];\n\n        if (grid.drawOnChartArea) {\n          drawLine(\n            {x: item.x1, y: item.y1},\n            {x: item.x2, y: item.y2},\n            item\n          );\n        }\n\n        if (grid.drawTicks) {\n          drawLine(\n            {x: item.tx1, y: item.ty1},\n            {x: item.tx2, y: item.ty2},\n            {\n              color: item.tickColor,\n              width: item.tickWidth,\n              borderDash: item.tickBorderDash,\n              borderDashOffset: item.tickBorderDashOffset\n            }\n          );\n        }\n      }\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBorder() {\n    const {chart, ctx, options: {border, grid}} = this;\n    const borderOpts = border.setContext(this.getContext());\n    const axisWidth = border.display ? borderOpts.width : 0;\n    if (!axisWidth) {\n      return;\n    }\n    const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\n    const borderValue = this._borderValue;\n    let x1, x2, y1, y2;\n\n    if (this.isHorizontal()) {\n      x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\n      x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\n      y1 = y2 = borderValue;\n    } else {\n      y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\n      y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\n      x1 = x2 = borderValue;\n    }\n    ctx.save();\n    ctx.lineWidth = borderOpts.width;\n    ctx.strokeStyle = borderOpts.color;\n\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n\n    ctx.restore();\n  }\n\n  /**\n\t * @protected\n\t */\n  drawLabels(chartArea) {\n    const optionTicks = this.options.ticks;\n\n    if (!optionTicks.display) {\n      return;\n    }\n\n    const ctx = this.ctx;\n\n    const area = this._computeLabelArea();\n    if (area) {\n      clipArea(ctx, area);\n    }\n\n    const items = this.getLabelItems(chartArea);\n    for (const item of items) {\n      const renderTextOptions = item.options;\n      const tickFont = item.font;\n      const label = item.label;\n      const y = item.textOffset;\n      renderText(ctx, label, 0, y, tickFont, renderTextOptions);\n    }\n\n    if (area) {\n      unclipArea(ctx);\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {\n    const {ctx, options: {position, title, reverse}} = this;\n\n    if (!title.display) {\n      return;\n    }\n\n    const font = toFont(title.font);\n    const padding = toPadding(title.padding);\n    const align = title.align;\n    let offset = font.lineHeight / 2;\n\n    if (position === 'bottom' || position === 'center' || isObject(position)) {\n      offset += padding.bottom;\n      if (isArray(title.text)) {\n        offset += font.lineHeight * (title.text.length - 1);\n      }\n    } else {\n      offset += padding.top;\n    }\n\n    const {titleX, titleY, maxWidth, rotation} = titleArgs(this, offset, position, align);\n\n    renderText(ctx, title.text, 0, 0, font, {\n      color: title.color,\n      maxWidth,\n      rotation,\n      textAlign: titleAlign(align, position, reverse),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n\n  draw(chartArea) {\n    if (!this._isVisible()) {\n      return;\n    }\n\n    this.drawBackground();\n    this.drawGrid(chartArea);\n    this.drawBorder();\n    this.drawTitle();\n    this.drawLabels(chartArea);\n  }\n\n  /**\n\t * @return {object[]}\n\t * @private\n\t */\n  _layers() {\n    const opts = this.options;\n    const tz = opts.ticks && opts.ticks.z || 0;\n    const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\n    const bz = valueOrDefault(opts.border && opts.border.z, 0);\n\n    if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\n      // backward compatibility: draw has been overridden by custom scale\n      return [{\n        z: tz,\n        draw: (chartArea) => {\n          this.draw(chartArea);\n        }\n      }];\n    }\n\n    return [{\n      z: gz,\n      draw: (chartArea) => {\n        this.drawBackground();\n        this.drawGrid(chartArea);\n        this.drawTitle();\n      }\n    }, {\n      z: bz,\n      draw: () => {\n        this.drawBorder();\n      }\n    }, {\n      z: tz,\n      draw: (chartArea) => {\n        this.drawLabels(chartArea);\n      }\n    }];\n  }\n\n  /**\n\t * Returns visible dataset metas that are attached to this scale\n\t * @param {string} [type] - if specified, also filter by dataset type\n\t * @return {object[]}\n\t */\n  getMatchingVisibleMetas(type) {\n    const metas = this.chart.getSortedVisibleDatasetMetas();\n    const axisID = this.axis + 'AxisID';\n    const result = [];\n    let i, ilen;\n\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      const meta = metas[i];\n      if (meta[axisID] === this.id && (!type || meta.type === type)) {\n        result.push(meta);\n      }\n    }\n    return result;\n  }\n\n  /**\n\t * @param {number} index\n\t * @return {object}\n\t * @protected\n \t */\n  _resolveTickFontOptions(index) {\n    const opts = this.options.ticks.setContext(this.getContext(index));\n    return toFont(opts.font);\n  }\n\n  /**\n   * @protected\n   */\n  _maxDigits() {\n    const fontSize = this._resolveTickFontOptions(0).lineHeight;\n    return (this.isHorizontal() ? this.width : this.height) / fontSize;\n  }\n}\n","import {merge} from '../helpers/index.js';\nimport defaults, {overrides} from './core.defaults.js';\n\n/**\n * @typedef {{id: string, defaults: any, overrides?: any, defaultRoutes: any}} IChartComponent\n */\n\nexport default class TypedRegistry {\n  constructor(type, scope, override) {\n    this.type = type;\n    this.scope = scope;\n    this.override = override;\n    this.items = Object.create(null);\n  }\n\n  isForType(type) {\n    return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\n  }\n\n  /**\n\t * @param {IChartComponent} item\n\t * @returns {string} The scope where items defaults were registered to.\n\t */\n  register(item) {\n    const proto = Object.getPrototypeOf(item);\n    let parentScope;\n\n    if (isIChartComponent(proto)) {\n      // Make sure the parent is registered and note the scope where its defaults are.\n      parentScope = this.register(proto);\n    }\n\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope + '.' + id;\n\n    if (!id) {\n      throw new Error('class does not have id: ' + item);\n    }\n\n    if (id in items) {\n      // already registered\n      return scope;\n    }\n\n    items[id] = item;\n    registerDefaults(item, scope, parentScope);\n    if (this.override) {\n      defaults.override(item.id, item.overrides);\n    }\n\n    return scope;\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {object?}\n\t */\n  get(id) {\n    return this.items[id];\n  }\n\n  /**\n\t * @param {IChartComponent} item\n\t */\n  unregister(item) {\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope;\n\n    if (id in items) {\n      delete items[id];\n    }\n\n    if (scope && id in defaults[scope]) {\n      delete defaults[scope][id];\n      if (this.override) {\n        delete overrides[id];\n      }\n    }\n  }\n}\n\nfunction registerDefaults(item, scope, parentScope) {\n  // Inherit the parent's defaults and keep existing defaults\n  const itemDefaults = merge(Object.create(null), [\n    parentScope ? defaults.get(parentScope) : {},\n    defaults.get(scope),\n    item.defaults\n  ]);\n\n  defaults.set(scope, itemDefaults);\n\n  if (item.defaultRoutes) {\n    routeDefaults(scope, item.defaultRoutes);\n  }\n\n  if (item.descriptors) {\n    defaults.describe(scope, item.descriptors);\n  }\n}\n\nfunction routeDefaults(scope, routes) {\n  Object.keys(routes).forEach(property => {\n    const propertyParts = property.split('.');\n    const sourceName = propertyParts.pop();\n    const sourceScope = [scope].concat(propertyParts).join('.');\n    const parts = routes[property].split('.');\n    const targetName = parts.pop();\n    const targetScope = parts.join('.');\n    defaults.route(sourceScope, sourceName, targetScope, targetName);\n  });\n}\n\nfunction isIChartComponent(proto) {\n  return 'id' in proto && 'defaults' in proto;\n}\n","import DatasetController from './core.datasetController.js';\nimport Element from './core.element.js';\nimport Scale from './core.scale.js';\nimport TypedRegistry from './core.typedRegistry.js';\nimport {each, callback as call, _capitalize} from '../helpers/helpers.core.js';\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Registry {\n  constructor() {\n    this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\n    this.elements = new TypedRegistry(Element, 'elements');\n    this.plugins = new TypedRegistry(Object, 'plugins');\n    this.scales = new TypedRegistry(Scale, 'scales');\n    // Order is important, Scale has Element in prototype chain,\n    // so Scales must be before Elements. Plugins are a fallback, so not listed here.\n    this._typedRegistries = [this.controllers, this.scales, this.elements];\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  add(...args) {\n    this._each('register', args);\n  }\n\n  remove(...args) {\n    this._each('unregister', args);\n  }\n\n  /**\n\t * @param  {...typeof DatasetController} args\n\t */\n  addControllers(...args) {\n    this._each('register', args, this.controllers);\n  }\n\n  /**\n\t * @param  {...typeof Element} args\n\t */\n  addElements(...args) {\n    this._each('register', args, this.elements);\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  addPlugins(...args) {\n    this._each('register', args, this.plugins);\n  }\n\n  /**\n\t * @param  {...typeof Scale} args\n\t */\n  addScales(...args) {\n    this._each('register', args, this.scales);\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof DatasetController}\n\t */\n  getController(id) {\n    return this._get(id, this.controllers, 'controller');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof Element}\n\t */\n  getElement(id) {\n    return this._get(id, this.elements, 'element');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {object}\n\t */\n  getPlugin(id) {\n    return this._get(id, this.plugins, 'plugin');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof Scale}\n\t */\n  getScale(id) {\n    return this._get(id, this.scales, 'scale');\n  }\n\n  /**\n\t * @param  {...typeof DatasetController} args\n\t */\n  removeControllers(...args) {\n    this._each('unregister', args, this.controllers);\n  }\n\n  /**\n\t * @param  {...typeof Element} args\n\t */\n  removeElements(...args) {\n    this._each('unregister', args, this.elements);\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  removePlugins(...args) {\n    this._each('unregister', args, this.plugins);\n  }\n\n  /**\n\t * @param  {...typeof Scale} args\n\t */\n  removeScales(...args) {\n    this._each('unregister', args, this.scales);\n  }\n\n  /**\n\t * @private\n\t */\n  _each(method, args, typedRegistry) {\n    [...args].forEach(arg => {\n      const reg = typedRegistry || this._getRegistryForType(arg);\n      if (typedRegistry || reg.isForType(arg) || (reg === this.plugins && arg.id)) {\n        this._exec(method, reg, arg);\n      } else {\n        // Handle loopable args\n        // Use case:\n        //  import * as plugins from './plugins.js';\n        //  Chart.register(plugins);\n        each(arg, item => {\n          // If there are mixed types in the loopable, make sure those are\n          // registered in correct registry\n          // Use case: (treemap exporting controller, elements etc)\n          //  import * as treemap from 'chartjs-chart-treemap.js';\n          //  Chart.register(treemap);\n\n          const itemReg = typedRegistry || this._getRegistryForType(item);\n          this._exec(method, itemReg, item);\n        });\n      }\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _exec(method, registry, component) {\n    const camelMethod = _capitalize(method);\n    call(component['before' + camelMethod], [], component); // beforeRegister / beforeUnregister\n    registry[method](component);\n    call(component['after' + camelMethod], [], component); // afterRegister / afterUnregister\n  }\n\n  /**\n\t * @private\n\t */\n  _getRegistryForType(type) {\n    for (let i = 0; i < this._typedRegistries.length; i++) {\n      const reg = this._typedRegistries[i];\n      if (reg.isForType(type)) {\n        return reg;\n      }\n    }\n    // plugins is the fallback registry\n    return this.plugins;\n  }\n\n  /**\n\t * @private\n\t */\n  _get(id, typedRegistry, type) {\n    const item = typedRegistry.get(id);\n    if (item === undefined) {\n      throw new Error('\"' + id + '\" is not a registered ' + type + '.');\n    }\n    return item;\n  }\n\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Registry();\n","import registry from './core.registry.js';\nimport {callback as callCallback, isNullOrUndef, valueOrDefault} from '../helpers/helpers.core.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../plugins/plugin.tooltip.js').default } Tooltip\n */\n\n/**\n * @callback filterCallback\n * @param {{plugin: object, options: object}} value\n * @param {number} [index]\n * @param {array} [array]\n * @param {object} [thisArg]\n * @return {boolean}\n */\n\n\nexport default class PluginService {\n  constructor() {\n    this._init = [];\n  }\n\n  /**\n\t * Calls enabled plugins for `chart` on the specified hook and with the given args.\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\n\t * returned value can be used, for instance, to interrupt the current action.\n\t * @param {Chart} chart - The chart instance for which plugins should be called.\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\n\t * @param {object} [args] - Extra arguments to apply to the hook call.\n   * @param {filterCallback} [filter] - Filtering function for limiting which plugins are notified\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\n\t */\n  notify(chart, hook, args, filter) {\n    if (hook === 'beforeInit') {\n      this._init = this._createDescriptors(chart, true);\n      this._notify(this._init, chart, 'install');\n    }\n\n    const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\n    const result = this._notify(descriptors, chart, hook, args);\n\n    if (hook === 'afterDestroy') {\n      this._notify(descriptors, chart, 'stop');\n      this._notify(this._init, chart, 'uninstall');\n    }\n    return result;\n  }\n\n  /**\n\t * @private\n\t */\n  _notify(descriptors, chart, hook, args) {\n    args = args || {};\n    for (const descriptor of descriptors) {\n      const plugin = descriptor.plugin;\n      const method = plugin[hook];\n      const params = [chart, args, descriptor.options];\n      if (callCallback(method, params, plugin) === false && args.cancelable) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  invalidate() {\n    // When plugins are registered, there is the possibility of a double\n    // invalidate situation. In this case, we only want to invalidate once.\n    // If we invalidate multiple times, the `_oldCache` is lost and all of the\n    // plugins are restarted without being correctly stopped.\n    // See https://github.com/chartjs/Chart.js/issues/8147\n    if (!isNullOrUndef(this._cache)) {\n      this._oldCache = this._cache;\n      this._cache = undefined;\n    }\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @private\n\t */\n  _descriptors(chart) {\n    if (this._cache) {\n      return this._cache;\n    }\n\n    const descriptors = this._cache = this._createDescriptors(chart);\n\n    this._notifyStateChanges(chart);\n\n    return descriptors;\n  }\n\n  _createDescriptors(chart, all) {\n    const config = chart && chart.config;\n    const options = valueOrDefault(config.options && config.options.plugins, {});\n    const plugins = allPlugins(config);\n    // options === false => all plugins are disabled\n    return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @private\n\t */\n  _notifyStateChanges(chart) {\n    const previousDescriptors = this._oldCache || [];\n    const descriptors = this._cache;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.plugin.id === y.plugin.id));\n    this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\n    this._notify(diff(descriptors, previousDescriptors), chart, 'start');\n  }\n}\n\n/**\n * @param {import('./core.config.js').default} config\n */\nfunction allPlugins(config) {\n  const localIds = {};\n  const plugins = [];\n  const keys = Object.keys(registry.plugins.items);\n  for (let i = 0; i < keys.length; i++) {\n    plugins.push(registry.getPlugin(keys[i]));\n  }\n\n  const local = config.plugins || [];\n  for (let i = 0; i < local.length; i++) {\n    const plugin = local[i];\n\n    if (plugins.indexOf(plugin) === -1) {\n      plugins.push(plugin);\n      localIds[plugin.id] = true;\n    }\n  }\n\n  return {plugins, localIds};\n}\n\nfunction getOpts(options, all) {\n  if (!all && options === false) {\n    return null;\n  }\n  if (options === true) {\n    return {};\n  }\n  return options;\n}\n\nfunction createDescriptors(chart, {plugins, localIds}, options, all) {\n  const result = [];\n  const context = chart.getContext();\n\n  for (const plugin of plugins) {\n    const id = plugin.id;\n    const opts = getOpts(options[id], all);\n    if (opts === null) {\n      continue;\n    }\n    result.push({\n      plugin,\n      options: pluginOpts(chart.config, {plugin, local: localIds[id]}, opts, context)\n    });\n  }\n\n  return result;\n}\n\nfunction pluginOpts(config, {plugin, local}, opts, context) {\n  const keys = config.pluginScopeKeys(plugin);\n  const scopes = config.getOptionScopes(opts, keys);\n  if (local && plugin.defaults) {\n    // make sure plugin defaults are in scopes for local (not registered) plugins\n    scopes.push(plugin.defaults);\n  }\n  return config.createResolver(scopes, context, [''], {\n    // These are just defaults that plugins can override\n    scriptable: false,\n    indexable: false,\n    allKeys: true\n  });\n}\n","import defaults, {overrides, descriptors} from './core.defaults.js';\nimport {mergeIf, resolveObjectKey, isArray, isFunction, valueOrDefault, isObject} from '../helpers/helpers.core.js';\nimport {_attachContext, _createResolver, _descriptors} from '../helpers/helpers.config.js';\n\nexport function getIndexAxis(type, options) {\n  const datasetDefaults = defaults.datasets[type] || {};\n  const datasetOptions = (options.datasets || {})[type] || {};\n  return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\n}\n\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\n  let axis = id;\n  if (id === '_index_') {\n    axis = indexAxis;\n  } else if (id === '_value_') {\n    axis = indexAxis === 'x' ? 'y' : 'x';\n  }\n  return axis;\n}\n\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\n  return axis === indexAxis ? '_index_' : '_value_';\n}\n\nfunction axisFromPosition(position) {\n  if (position === 'top' || position === 'bottom') {\n    return 'x';\n  }\n  if (position === 'left' || position === 'right') {\n    return 'y';\n  }\n}\n\nexport function determineAxis(id, scaleOptions) {\n  if (id === 'x' || id === 'y' || id === 'r') {\n    return id;\n  }\n\n  id = scaleOptions.axis\n    || axisFromPosition(scaleOptions.position)\n    || id.length > 1 && determineAxis(id[0].toLowerCase(), scaleOptions);\n\n  if (id) {\n    return id;\n  }\n\n  throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`);\n}\n\nfunction mergeScaleConfig(config, options) {\n  const chartDefaults = overrides[config.type] || {scales: {}};\n  const configScales = options.scales || {};\n  const chartIndexAxis = getIndexAxis(config.type, options);\n  const scales = Object.create(null);\n\n  // First figure out first scale id's per axis.\n  Object.keys(configScales).forEach(id => {\n    const scaleConf = configScales[id];\n    if (!isObject(scaleConf)) {\n      return console.error(`Invalid scale configuration for scale: ${id}`);\n    }\n    if (scaleConf._proxy) {\n      return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\n    }\n    const axis = determineAxis(id, scaleConf);\n    const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\n    const defaultScaleOptions = chartDefaults.scales || {};\n    scales[id] = mergeIf(Object.create(null), [{axis}, scaleConf, defaultScaleOptions[axis], defaultScaleOptions[defaultId]]);\n  });\n\n  // Then merge dataset defaults to scale configs\n  config.data.datasets.forEach(dataset => {\n    const type = dataset.type || config.type;\n    const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\n    const datasetDefaults = overrides[type] || {};\n    const defaultScaleOptions = datasetDefaults.scales || {};\n    Object.keys(defaultScaleOptions).forEach(defaultID => {\n      const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\n      const id = dataset[axis + 'AxisID'] || axis;\n      scales[id] = scales[id] || Object.create(null);\n      mergeIf(scales[id], [{axis}, configScales[id], defaultScaleOptions[defaultID]]);\n    });\n  });\n\n  // apply scale defaults, if not overridden by dataset defaults\n  Object.keys(scales).forEach(key => {\n    const scale = scales[key];\n    mergeIf(scale, [defaults.scales[scale.type], defaults.scale]);\n  });\n\n  return scales;\n}\n\nfunction initOptions(config) {\n  const options = config.options || (config.options = {});\n\n  options.plugins = valueOrDefault(options.plugins, {});\n  options.scales = mergeScaleConfig(config, options);\n}\n\nfunction initData(data) {\n  data = data || {};\n  data.datasets = data.datasets || [];\n  data.labels = data.labels || [];\n  return data;\n}\n\nfunction initConfig(config) {\n  config = config || {};\n  config.data = initData(config.data);\n\n  initOptions(config);\n\n  return config;\n}\n\nconst keyCache = new Map();\nconst keysCached = new Set();\n\nfunction cachedKeys(cacheKey, generate) {\n  let keys = keyCache.get(cacheKey);\n  if (!keys) {\n    keys = generate();\n    keyCache.set(cacheKey, keys);\n    keysCached.add(keys);\n  }\n  return keys;\n}\n\nconst addIfFound = (set, obj, key) => {\n  const opts = resolveObjectKey(obj, key);\n  if (opts !== undefined) {\n    set.add(opts);\n  }\n};\n\nexport default class Config {\n  constructor(config) {\n    this._config = initConfig(config);\n    this._scopeCache = new Map();\n    this._resolverCache = new Map();\n  }\n\n  get platform() {\n    return this._config.platform;\n  }\n\n  get type() {\n    return this._config.type;\n  }\n\n  set type(type) {\n    this._config.type = type;\n  }\n\n  get data() {\n    return this._config.data;\n  }\n\n  set data(data) {\n    this._config.data = initData(data);\n  }\n\n  get options() {\n    return this._config.options;\n  }\n\n  set options(options) {\n    this._config.options = options;\n  }\n\n  get plugins() {\n    return this._config.plugins;\n  }\n\n  update() {\n    const config = this._config;\n    this.clearCache();\n    initOptions(config);\n  }\n\n  clearCache() {\n    this._scopeCache.clear();\n    this._resolverCache.clear();\n  }\n\n  /**\n   * Returns the option scope keys for resolving dataset options.\n   * These keys do not include the dataset itself, because it is not under options.\n   * @param {string} datasetType\n   * @return {string[][]}\n   */\n  datasetScopeKeys(datasetType) {\n    return cachedKeys(datasetType,\n      () => [[\n        `datasets.${datasetType}`,\n        ''\n      ]]);\n  }\n\n  /**\n   * Returns the option scope keys for resolving dataset animation options.\n   * These keys do not include the dataset itself, because it is not under options.\n   * @param {string} datasetType\n   * @param {string} transition\n   * @return {string[][]}\n   */\n  datasetAnimationScopeKeys(datasetType, transition) {\n    return cachedKeys(`${datasetType}.transition.${transition}`,\n      () => [\n        [\n          `datasets.${datasetType}.transitions.${transition}`,\n          `transitions.${transition}`,\n        ],\n        // The following are used for looking up the `animations` and `animation` keys\n        [\n          `datasets.${datasetType}`,\n          ''\n        ]\n      ]);\n  }\n\n  /**\n   * Returns the options scope keys for resolving element options that belong\n   * to an dataset. These keys do not include the dataset itself, because it\n   * is not under options.\n   * @param {string} datasetType\n   * @param {string} elementType\n   * @return {string[][]}\n   */\n  datasetElementScopeKeys(datasetType, elementType) {\n    return cachedKeys(`${datasetType}-${elementType}`,\n      () => [[\n        `datasets.${datasetType}.elements.${elementType}`,\n        `datasets.${datasetType}`,\n        `elements.${elementType}`,\n        ''\n      ]]);\n  }\n\n  /**\n   * Returns the options scope keys for resolving plugin options.\n   * @param {{id: string, additionalOptionScopes?: string[]}} plugin\n   * @return {string[][]}\n   */\n  pluginScopeKeys(plugin) {\n    const id = plugin.id;\n    const type = this.type;\n    return cachedKeys(`${type}-plugin-${id}`,\n      () => [[\n        `plugins.${id}`,\n        ...plugin.additionalOptionScopes || [],\n      ]]);\n  }\n\n  /**\n   * @private\n   */\n  _cachedScopes(mainScope, resetCache) {\n    const _scopeCache = this._scopeCache;\n    let cache = _scopeCache.get(mainScope);\n    if (!cache || resetCache) {\n      cache = new Map();\n      _scopeCache.set(mainScope, cache);\n    }\n    return cache;\n  }\n\n  /**\n   * Resolves the objects from options and defaults for option value resolution.\n   * @param {object} mainScope - The main scope object for options\n   * @param {string[][]} keyLists - The arrays of keys in resolution order\n   * @param {boolean} [resetCache] - reset the cache for this mainScope\n   */\n  getOptionScopes(mainScope, keyLists, resetCache) {\n    const {options, type} = this;\n    const cache = this._cachedScopes(mainScope, resetCache);\n    const cached = cache.get(keyLists);\n    if (cached) {\n      return cached;\n    }\n\n    const scopes = new Set();\n\n    keyLists.forEach(keys => {\n      if (mainScope) {\n        scopes.add(mainScope);\n        keys.forEach(key => addIfFound(scopes, mainScope, key));\n      }\n      keys.forEach(key => addIfFound(scopes, options, key));\n      keys.forEach(key => addIfFound(scopes, overrides[type] || {}, key));\n      keys.forEach(key => addIfFound(scopes, defaults, key));\n      keys.forEach(key => addIfFound(scopes, descriptors, key));\n    });\n\n    const array = Array.from(scopes);\n    if (array.length === 0) {\n      array.push(Object.create(null));\n    }\n    if (keysCached.has(keyLists)) {\n      cache.set(keyLists, array);\n    }\n    return array;\n  }\n\n  /**\n   * Returns the option scopes for resolving chart options\n   * @return {object[]}\n   */\n  chartOptionScopes() {\n    const {options, type} = this;\n\n    return [\n      options,\n      overrides[type] || {},\n      defaults.datasets[type] || {}, // https://github.com/chartjs/Chart.js/issues/8531\n      {type},\n      defaults,\n      descriptors\n    ];\n  }\n\n  /**\n   * @param {object[]} scopes\n   * @param {string[]} names\n   * @param {function|object} context\n   * @param {string[]} [prefixes]\n   * @return {object}\n   */\n  resolveNamedOptions(scopes, names, context, prefixes = ['']) {\n    const result = {$shared: true};\n    const {resolver, subPrefixes} = getResolver(this._resolverCache, scopes, prefixes);\n    let options = resolver;\n    if (needContext(resolver, names)) {\n      result.$shared = false;\n      context = isFunction(context) ? context() : context;\n      // subResolver is passed to scriptable options. It should not resolve to hover options.\n      const subResolver = this.createResolver(scopes, context, subPrefixes);\n      options = _attachContext(resolver, context, subResolver);\n    }\n\n    for (const prop of names) {\n      result[prop] = options[prop];\n    }\n    return result;\n  }\n\n  /**\n   * @param {object[]} scopes\n   * @param {object} [context]\n   * @param {string[]} [prefixes]\n   * @param {{scriptable: boolean, indexable: boolean, allKeys?: boolean}} [descriptorDefaults]\n   */\n  createResolver(scopes, context, prefixes = [''], descriptorDefaults) {\n    const {resolver} = getResolver(this._resolverCache, scopes, prefixes);\n    return isObject(context)\n      ? _attachContext(resolver, context, undefined, descriptorDefaults)\n      : resolver;\n  }\n}\n\nfunction getResolver(resolverCache, scopes, prefixes) {\n  let cache = resolverCache.get(scopes);\n  if (!cache) {\n    cache = new Map();\n    resolverCache.set(scopes, cache);\n  }\n  const cacheKey = prefixes.join();\n  let cached = cache.get(cacheKey);\n  if (!cached) {\n    const resolver = _createResolver(scopes, prefixes);\n    cached = {\n      resolver,\n      subPrefixes: prefixes.filter(p => !p.toLowerCase().includes('hover'))\n    };\n    cache.set(cacheKey, cached);\n  }\n  return cached;\n}\n\nconst hasFunction = value => isObject(value)\n  && Object.getOwnPropertyNames(value).reduce((acc, key) => acc || isFunction(value[key]), false);\n\nfunction needContext(proxy, names) {\n  const {isScriptable, isIndexable} = _descriptors(proxy);\n\n  for (const prop of names) {\n    const scriptable = isScriptable(prop);\n    const indexable = isIndexable(prop);\n    const value = (indexable || scriptable) && proxy[prop];\n    if ((scriptable && (isFunction(value) || hasFunction(value)))\n      || (indexable && isArray(value))) {\n      return true;\n    }\n  }\n  return false;\n}\n","import animator from './core.animator.js';\nimport defaults, {overrides} from './core.defaults.js';\nimport Interaction from './core.interaction.js';\nimport layouts from './core.layouts.js';\nimport {_detectPlatform} from '../platform/index.js';\nimport PluginService from './core.plugins.js';\nimport registry from './core.registry.js';\nimport Config, {determineAxis, getIndexAxis} from './core.config.js';\nimport {retinaScale, _isDomSupported} from '../helpers/helpers.dom.js';\nimport {each, callback as callCallback, uid, valueOrDefault, _elementsEqual, isNullOrUndef, setsEqual, defined, isFunction, _isClickEvent} from '../helpers/helpers.core.js';\nimport {clearCanvas, clipArea, createContext, unclipArea, _isPointInArea} from '../helpers/index.js';\n// @ts-ignore\nimport {version} from '../../package.json';\nimport {debounce} from '../helpers/helpers.extras.js';\n\n/**\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../types/index.js').Point } Point\n */\n\nconst KNOWN_POSITIONS = ['top', 'bottom', 'left', 'right', 'chartArea'];\nfunction positionIsHorizontal(position, axis) {\n  return position === 'top' || position === 'bottom' || (KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x');\n}\n\nfunction compare2Level(l1, l2) {\n  return function(a, b) {\n    return a[l1] === b[l1]\n      ? a[l2] - b[l2]\n      : a[l1] - b[l1];\n  };\n}\n\nfunction onAnimationsComplete(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n\n  chart.notifyPlugins('afterRender');\n  callCallback(animationOptions && animationOptions.onComplete, [context], chart);\n}\n\nfunction onAnimationProgress(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n  callCallback(animationOptions && animationOptions.onProgress, [context], chart);\n}\n\n/**\n * Chart.js can take a string id of a canvas element, a 2d context, or a canvas element itself.\n * Attempt to unwrap the item passed into the chart constructor so that it is a canvas element (if possible).\n */\nfunction getCanvas(item) {\n  if (_isDomSupported() && typeof item === 'string') {\n    item = document.getElementById(item);\n  } else if (item && item.length) {\n    // Support for array based queries (such as jQuery)\n    item = item[0];\n  }\n\n  if (item && item.canvas) {\n    // Support for any object associated to a canvas (including a context2d)\n    item = item.canvas;\n  }\n  return item;\n}\n\nconst instances = {};\nconst getChart = (key) => {\n  const canvas = getCanvas(key);\n  return Object.values(instances).filter((c) => c.canvas === canvas).pop();\n};\n\nfunction moveNumericKeys(obj, start, move) {\n  const keys = Object.keys(obj);\n  for (const key of keys) {\n    const intKey = +key;\n    if (intKey >= start) {\n      const value = obj[key];\n      delete obj[key];\n      if (move > 0 || intKey > start) {\n        obj[intKey + move] = value;\n      }\n    }\n  }\n}\n\n/**\n * @param {ChartEvent} e\n * @param {ChartEvent|null} lastEvent\n * @param {boolean} inChartArea\n * @param {boolean} isClick\n * @returns {ChartEvent|null}\n */\nfunction determineLastEvent(e, lastEvent, inChartArea, isClick) {\n  if (!inChartArea || e.type === 'mouseout') {\n    return null;\n  }\n  if (isClick) {\n    return lastEvent;\n  }\n  return e;\n}\n\nfunction getDatasetArea(meta) {\n  const {xScale, yScale} = meta;\n  if (xScale && yScale) {\n    return {\n      left: xScale.left,\n      right: xScale.right,\n      top: yScale.top,\n      bottom: yScale.bottom\n    };\n  }\n}\n\nclass Chart {\n\n  static defaults = defaults;\n  static instances = instances;\n  static overrides = overrides;\n  static registry = registry;\n  static version = version;\n  static getChart = getChart;\n\n  static register(...items) {\n    registry.add(...items);\n    invalidatePlugins();\n  }\n\n  static unregister(...items) {\n    registry.remove(...items);\n    invalidatePlugins();\n  }\n\n  // eslint-disable-next-line max-statements\n  constructor(item, userConfig) {\n    const config = this.config = new Config(userConfig);\n    const initialCanvas = getCanvas(item);\n    const existingChart = getChart(initialCanvas);\n    if (existingChart) {\n      throw new Error(\n        'Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' +\n\t\t\t\t' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.'\n      );\n    }\n\n    const options = config.createResolver(config.chartOptionScopes(), this.getContext());\n\n    this.platform = new (config.platform || _detectPlatform(initialCanvas))();\n    this.platform.updateConfig(config);\n\n    const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\n    const canvas = context && context.canvas;\n    const height = canvas && canvas.height;\n    const width = canvas && canvas.width;\n\n    this.id = uid();\n    this.ctx = context;\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this._options = options;\n    // Store the previously used aspect ratio to determine if a resize\n    // is needed during updates. Do this after _options is set since\n    // aspectRatio uses a getter\n    this._aspectRatio = this.aspectRatio;\n    this._layers = [];\n    this._metasets = [];\n    this._stacks = undefined;\n    this.boxes = [];\n    this.currentDevicePixelRatio = undefined;\n    this.chartArea = undefined;\n    this._active = [];\n    this._lastEvent = undefined;\n    this._listeners = {};\n    /** @type {?{attach?: function, detach?: function, resize?: function}} */\n    this._responsiveListeners = undefined;\n    this._sortedMetasets = [];\n    this.scales = {};\n    this._plugins = new PluginService();\n    this.$proxies = {};\n    this._hiddenIndices = {};\n    this.attached = false;\n    this._animationsDisabled = undefined;\n    this.$context = undefined;\n    this._doResize = debounce(mode => this.update(mode), options.resizeDelay || 0);\n    this._dataChanges = [];\n\n    // Add the chart instance to the global namespace\n    instances[this.id] = this;\n\n    if (!context || !canvas) {\n      // The given item is not a compatible context2d element, let's return before finalizing\n      // the chart initialization but after setting basic chart / controller properties that\n      // can help to figure out that the chart is not valid (e.g chart.canvas !== null);\n      // https://github.com/chartjs/Chart.js/issues/2807\n      console.error(\"Failed to create chart: can't acquire context from the given item\");\n      return;\n    }\n\n    animator.listen(this, 'complete', onAnimationsComplete);\n    animator.listen(this, 'progress', onAnimationProgress);\n\n    this._initialize();\n    if (this.attached) {\n      this.update();\n    }\n  }\n\n  get aspectRatio() {\n    const {options: {aspectRatio, maintainAspectRatio}, width, height, _aspectRatio} = this;\n    if (!isNullOrUndef(aspectRatio)) {\n      // If aspectRatio is defined in options, use that.\n      return aspectRatio;\n    }\n\n    if (maintainAspectRatio && _aspectRatio) {\n      // If maintainAspectRatio is truthly and we had previously determined _aspectRatio, use that\n      return _aspectRatio;\n    }\n\n    // Calculate\n    return height ? width / height : null;\n  }\n\n  get data() {\n    return this.config.data;\n  }\n\n  set data(data) {\n    this.config.data = data;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  set options(options) {\n    this.config.options = options;\n  }\n\n  get registry() {\n    return registry;\n  }\n\n  /**\n\t * @private\n\t */\n  _initialize() {\n    // Before init plugin notification\n    this.notifyPlugins('beforeInit');\n\n    if (this.options.responsive) {\n      this.resize();\n    } else {\n      retinaScale(this, this.options.devicePixelRatio);\n    }\n\n    this.bindEvents();\n\n    // After init plugin notification\n    this.notifyPlugins('afterInit');\n\n    return this;\n  }\n\n  clear() {\n    clearCanvas(this.canvas, this.ctx);\n    return this;\n  }\n\n  stop() {\n    animator.stop(this);\n    return this;\n  }\n\n  /**\n\t * Resize the chart to its container or to explicit dimensions.\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n  resize(width, height) {\n    if (!animator.running(this)) {\n      this._resize(width, height);\n    } else {\n      this._resizeBeforeDraw = {width, height};\n    }\n  }\n\n  _resize(width, height) {\n    const options = this.options;\n    const canvas = this.canvas;\n    const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\n    const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\n    const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\n    const mode = this.width ? 'resize' : 'attach';\n\n    this.width = newSize.width;\n    this.height = newSize.height;\n    this._aspectRatio = this.aspectRatio;\n    if (!retinaScale(this, newRatio, true)) {\n      return;\n    }\n\n    this.notifyPlugins('resize', {size: newSize});\n\n    callCallback(options.onResize, [this, newSize], this);\n\n    if (this.attached) {\n      if (this._doResize(mode)) {\n        // The resize update is delayed, only draw without updating.\n        this.render();\n      }\n    }\n  }\n\n  ensureScalesHaveIDs() {\n    const options = this.options;\n    const scalesOptions = options.scales || {};\n\n    each(scalesOptions, (axisOptions, axisID) => {\n      axisOptions.id = axisID;\n    });\n  }\n\n  /**\n\t * Builds a map of scale ID to scale object for future lookup.\n\t */\n  buildOrUpdateScales() {\n    const options = this.options;\n    const scaleOpts = options.scales;\n    const scales = this.scales;\n    const updated = Object.keys(scales).reduce((obj, id) => {\n      obj[id] = false;\n      return obj;\n    }, {});\n    let items = [];\n\n    if (scaleOpts) {\n      items = items.concat(\n        Object.keys(scaleOpts).map((id) => {\n          const scaleOptions = scaleOpts[id];\n          const axis = determineAxis(id, scaleOptions);\n          const isRadial = axis === 'r';\n          const isHorizontal = axis === 'x';\n          return {\n            options: scaleOptions,\n            dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\n            dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\n          };\n        })\n      );\n    }\n\n    each(items, (item) => {\n      const scaleOptions = item.options;\n      const id = scaleOptions.id;\n      const axis = determineAxis(id, scaleOptions);\n      const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n\n      if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\n        scaleOptions.position = item.dposition;\n      }\n\n      updated[id] = true;\n      let scale = null;\n      if (id in scales && scales[id].type === scaleType) {\n        scale = scales[id];\n      } else {\n        const scaleClass = registry.getScale(scaleType);\n        scale = new scaleClass({\n          id,\n          type: scaleType,\n          ctx: this.ctx,\n          chart: this\n        });\n        scales[scale.id] = scale;\n      }\n\n      scale.init(scaleOptions, options);\n    });\n    // clear up discarded scales\n    each(updated, (hasUpdated, id) => {\n      if (!hasUpdated) {\n        delete scales[id];\n      }\n    });\n\n    each(scales, (scale) => {\n      layouts.configure(this, scale, scale.options);\n      layouts.addBox(this, scale);\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _updateMetasets() {\n    const metasets = this._metasets;\n    const numData = this.data.datasets.length;\n    const numMeta = metasets.length;\n\n    metasets.sort((a, b) => a.index - b.index);\n    if (numMeta > numData) {\n      for (let i = numData; i < numMeta; ++i) {\n        this._destroyDatasetMeta(i);\n      }\n      metasets.splice(numData, numMeta - numData);\n    }\n    this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\n  }\n\n  /**\n\t * @private\n\t */\n  _removeUnreferencedMetasets() {\n    const {_metasets: metasets, data: {datasets}} = this;\n    if (metasets.length > datasets.length) {\n      delete this._stacks;\n    }\n    metasets.forEach((meta, index) => {\n      if (datasets.filter(x => x === meta._dataset).length === 0) {\n        this._destroyDatasetMeta(index);\n      }\n    });\n  }\n\n  buildOrUpdateControllers() {\n    const newControllers = [];\n    const datasets = this.data.datasets;\n    let i, ilen;\n\n    this._removeUnreferencedMetasets();\n\n    for (i = 0, ilen = datasets.length; i < ilen; i++) {\n      const dataset = datasets[i];\n      let meta = this.getDatasetMeta(i);\n      const type = dataset.type || this.config.type;\n\n      if (meta.type && meta.type !== type) {\n        this._destroyDatasetMeta(i);\n        meta = this.getDatasetMeta(i);\n      }\n      meta.type = type;\n      meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\n      meta.order = dataset.order || 0;\n      meta.index = i;\n      meta.label = '' + dataset.label;\n      meta.visible = this.isDatasetVisible(i);\n\n      if (meta.controller) {\n        meta.controller.updateIndex(i);\n        meta.controller.linkScales();\n      } else {\n        const ControllerClass = registry.getController(type);\n        const {datasetElementType, dataElementType} = defaults.datasets[type];\n        Object.assign(ControllerClass, {\n          dataElementType: registry.getElement(dataElementType),\n          datasetElementType: datasetElementType && registry.getElement(datasetElementType)\n        });\n        meta.controller = new ControllerClass(this, i);\n        newControllers.push(meta.controller);\n      }\n    }\n\n    this._updateMetasets();\n    return newControllers;\n  }\n\n  /**\n\t * Reset the elements of all datasets\n\t * @private\n\t */\n  _resetElements() {\n    each(this.data.datasets, (dataset, datasetIndex) => {\n      this.getDatasetMeta(datasetIndex).controller.reset();\n    }, this);\n  }\n\n  /**\n\t* Resets the chart back to its state before the initial animation\n\t*/\n  reset() {\n    this._resetElements();\n    this.notifyPlugins('reset');\n  }\n\n  update(mode) {\n    const config = this.config;\n\n    config.update();\n    const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\n    const animsDisabled = this._animationsDisabled = !options.animation;\n\n    this._updateScales();\n    this._checkEventBindings();\n    this._updateHiddenIndices();\n\n    // plugins options references might have change, let's invalidate the cache\n    // https://github.com/chartjs/Chart.js/issues/5111#issuecomment-355934167\n    this._plugins.invalidate();\n\n    if (this.notifyPlugins('beforeUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n\n    // Make sure dataset controllers are updated and new controllers are reset\n    const newControllers = this.buildOrUpdateControllers();\n\n    this.notifyPlugins('beforeElementsUpdate');\n\n    // Make sure all dataset controllers have correct meta data counts\n    let minPadding = 0;\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; i++) {\n      const {controller} = this.getDatasetMeta(i);\n      const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\n      // New controllers will be reset after the layout pass, so we only want to modify\n      // elements added to new datasets\n      controller.buildOrUpdateElements(reset);\n      minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\n    }\n    minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\n    this._updateLayout(minPadding);\n\n    // Only reset the controllers if we have animations\n    if (!animsDisabled) {\n      // Can only reset the new controllers after the scales have been updated\n      // Reset is done to get the starting point for the initial animation\n      each(newControllers, (controller) => {\n        controller.reset();\n      });\n    }\n\n    this._updateDatasets(mode);\n\n    // Do this before render so that any plugins that need final scale updates can use it\n    this.notifyPlugins('afterUpdate', {mode});\n\n    this._layers.sort(compare2Level('z', '_idx'));\n\n    // Replay last event from before update, or set hover styles on active elements\n    const {_active, _lastEvent} = this;\n    if (_lastEvent) {\n      this._eventHandler(_lastEvent, true);\n    } else if (_active.length) {\n      this._updateHoverStyles(_active, _active, true);\n    }\n\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  _updateScales() {\n    each(this.scales, (scale) => {\n      layouts.removeBox(this, scale);\n    });\n\n    this.ensureScalesHaveIDs();\n    this.buildOrUpdateScales();\n  }\n\n  /**\n   * @private\n   */\n  _checkEventBindings() {\n    const options = this.options;\n    const existingEvents = new Set(Object.keys(this._listeners));\n    const newEvents = new Set(options.events);\n\n    if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\n      // The configured events have changed. Rebind.\n      this.unbindEvents();\n      this.bindEvents();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _updateHiddenIndices() {\n    const {_hiddenIndices} = this;\n    const changes = this._getUniformDataChanges() || [];\n    for (const {method, start, count} of changes) {\n      const move = method === '_removeElements' ? -count : count;\n      moveNumericKeys(_hiddenIndices, start, move);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _getUniformDataChanges() {\n    const _dataChanges = this._dataChanges;\n    if (!_dataChanges || !_dataChanges.length) {\n      return;\n    }\n\n    this._dataChanges = [];\n    const datasetCount = this.data.datasets.length;\n    const makeSet = (idx) => new Set(\n      _dataChanges\n        .filter(c => c[0] === idx)\n        .map((c, i) => i + ',' + c.splice(1).join(','))\n    );\n\n    const changeSet = makeSet(0);\n    for (let i = 1; i < datasetCount; i++) {\n      if (!setsEqual(changeSet, makeSet(i))) {\n        return;\n      }\n    }\n    return Array.from(changeSet)\n      .map(c => c.split(','))\n      .map(a => ({method: a[1], start: +a[2], count: +a[3]}));\n  }\n\n  /**\n\t * Updates the chart layout unless a plugin returns `false` to the `beforeLayout`\n\t * hook, in which case, plugins will not be called on `afterLayout`.\n\t * @private\n\t */\n  _updateLayout(minPadding) {\n    if (this.notifyPlugins('beforeLayout', {cancelable: true}) === false) {\n      return;\n    }\n\n    layouts.update(this, this.width, this.height, minPadding);\n\n    const area = this.chartArea;\n    const noArea = area.width <= 0 || area.height <= 0;\n\n    this._layers = [];\n    each(this.boxes, (box) => {\n      if (noArea && box.position === 'chartArea') {\n        // Skip drawing and configuring chartArea boxes when chartArea is zero or negative\n        return;\n      }\n\n      // configure is called twice, once in core.scale.update and once here.\n      // Here the boxes are fully updated and at their final positions.\n      if (box.configure) {\n        box.configure();\n      }\n      this._layers.push(...box._layers());\n    }, this);\n\n    this._layers.forEach((item, index) => {\n      item._idx = index;\n    });\n\n    this.notifyPlugins('afterLayout');\n  }\n\n  /**\n\t * Updates all datasets unless a plugin returns `false` to the `beforeDatasetsUpdate`\n\t * hook, in which case, plugins will not be called on `afterDatasetsUpdate`.\n\t * @private\n\t */\n  _updateDatasets(mode) {\n    if (this.notifyPlugins('beforeDatasetsUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this.getDatasetMeta(i).controller.configure();\n    }\n\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._updateDataset(i, isFunction(mode) ? mode({datasetIndex: i}) : mode);\n    }\n\n    this.notifyPlugins('afterDatasetsUpdate', {mode});\n  }\n\n  /**\n\t * Updates dataset at index unless a plugin returns `false` to the `beforeDatasetUpdate`\n\t * hook, in which case, plugins will not be called on `afterDatasetUpdate`.\n\t * @private\n\t */\n  _updateDataset(index, mode) {\n    const meta = this.getDatasetMeta(index);\n    const args = {meta, index, mode, cancelable: true};\n\n    if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\n      return;\n    }\n\n    meta.controller._update(mode);\n\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetUpdate', args);\n  }\n\n  render() {\n    if (this.notifyPlugins('beforeRender', {cancelable: true}) === false) {\n      return;\n    }\n\n    if (animator.has(this)) {\n      if (this.attached && !animator.running(this)) {\n        animator.start(this);\n      }\n    } else {\n      this.draw();\n      onAnimationsComplete({chart: this});\n    }\n  }\n\n  draw() {\n    let i;\n    if (this._resizeBeforeDraw) {\n      const {width, height} = this._resizeBeforeDraw;\n      this._resize(width, height);\n      this._resizeBeforeDraw = null;\n    }\n    this.clear();\n\n    if (this.width <= 0 || this.height <= 0) {\n      return;\n    }\n\n    if (this.notifyPlugins('beforeDraw', {cancelable: true}) === false) {\n      return;\n    }\n\n    // Because of plugin hooks (before/afterDatasetsDraw), datasets can't\n    // currently be part of layers. Instead, we draw\n    // layers <= 0 before(default, backward compat), and the rest after\n    const layers = this._layers;\n    for (i = 0; i < layers.length && layers[i].z <= 0; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n\n    this._drawDatasets();\n\n    // Rest of layers\n    for (; i < layers.length; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n\n    this.notifyPlugins('afterDraw');\n  }\n\n  /**\n\t * @private\n\t */\n  _getSortedDatasetMetas(filterVisible) {\n    const metasets = this._sortedMetasets;\n    const result = [];\n    let i, ilen;\n\n    for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n      const meta = metasets[i];\n      if (!filterVisible || meta.visible) {\n        result.push(meta);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n\t * Gets the visible dataset metas in drawing order\n\t * @return {object[]}\n\t */\n  getSortedVisibleDatasetMetas() {\n    return this._getSortedDatasetMetas(true);\n  }\n\n  /**\n\t * Draws all datasets unless a plugin returns `false` to the `beforeDatasetsDraw`\n\t * hook, in which case, plugins will not be called on `afterDatasetsDraw`.\n\t * @private\n\t */\n  _drawDatasets() {\n    if (this.notifyPlugins('beforeDatasetsDraw', {cancelable: true}) === false) {\n      return;\n    }\n\n    const metasets = this.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      this._drawDataset(metasets[i]);\n    }\n\n    this.notifyPlugins('afterDatasetsDraw');\n  }\n\n  /**\n\t * Draws dataset at index unless a plugin returns `false` to the `beforeDatasetDraw`\n\t * hook, in which case, plugins will not be called on `afterDatasetDraw`.\n\t * @private\n\t */\n  _drawDataset(meta) {\n    const ctx = this.ctx;\n    const clip = meta._clip;\n    const useClip = !clip.disabled;\n    const area = getDatasetArea(meta) || this.chartArea;\n    const args = {\n      meta,\n      index: meta.index,\n      cancelable: true\n    };\n\n    if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\n      return;\n    }\n\n    if (useClip) {\n      clipArea(ctx, {\n        left: clip.left === false ? 0 : area.left - clip.left,\n        right: clip.right === false ? this.width : area.right + clip.right,\n        top: clip.top === false ? 0 : area.top - clip.top,\n        bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom\n      });\n    }\n\n    meta.controller.draw();\n\n    if (useClip) {\n      unclipArea(ctx);\n    }\n\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetDraw', args);\n  }\n\n  /**\n   * Checks whether the given point is in the chart area.\n   * @param {Point} point - in relative coordinates (see, e.g., getRelativePosition)\n   * @returns {boolean}\n   */\n  isPointInArea(point) {\n    return _isPointInArea(point, this.chartArea, this._minPadding);\n  }\n\n  getElementsAtEventForMode(e, mode, options, useFinalPosition) {\n    const method = Interaction.modes[mode];\n    if (typeof method === 'function') {\n      return method(this, e, options, useFinalPosition);\n    }\n\n    return [];\n  }\n\n  getDatasetMeta(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    const metasets = this._metasets;\n    let meta = metasets.filter(x => x && x._dataset === dataset).pop();\n\n    if (!meta) {\n      meta = {\n        type: null,\n        data: [],\n        dataset: null,\n        controller: null,\n        hidden: null,\t\t\t// See isDatasetVisible() comment\n        xAxisID: null,\n        yAxisID: null,\n        order: dataset && dataset.order || 0,\n        index: datasetIndex,\n        _dataset: dataset,\n        _parsed: [],\n        _sorted: false\n      };\n      metasets.push(meta);\n    }\n\n    return meta;\n  }\n\n  getContext() {\n    return this.$context || (this.$context = createContext(null, {chart: this, type: 'chart'}));\n  }\n\n  getVisibleDatasetCount() {\n    return this.getSortedVisibleDatasetMetas().length;\n  }\n\n  isDatasetVisible(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    if (!dataset) {\n      return false;\n    }\n\n    const meta = this.getDatasetMeta(datasetIndex);\n\n    // meta.hidden is a per chart dataset hidden flag override with 3 states: if true or false,\n    // the dataset.hidden value is ignored, else if null, the dataset hidden state is returned.\n    return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\n  }\n\n  setDatasetVisibility(datasetIndex, visible) {\n    const meta = this.getDatasetMeta(datasetIndex);\n    meta.hidden = !visible;\n  }\n\n  toggleDataVisibility(index) {\n    this._hiddenIndices[index] = !this._hiddenIndices[index];\n  }\n\n  getDataVisibility(index) {\n    return !this._hiddenIndices[index];\n  }\n\n  /**\n\t * @private\n\t */\n  _updateVisibility(datasetIndex, dataIndex, visible) {\n    const mode = visible ? 'show' : 'hide';\n    const meta = this.getDatasetMeta(datasetIndex);\n    const anims = meta.controller._resolveAnimations(undefined, mode);\n\n    if (defined(dataIndex)) {\n      meta.data[dataIndex].hidden = !visible;\n      this.update();\n    } else {\n      this.setDatasetVisibility(datasetIndex, visible);\n      // Animate visible state, so hide animation can be seen. This could be handled better if update / updateDataset returned a Promise.\n      anims.update(meta, {visible});\n      this.update((ctx) => ctx.datasetIndex === datasetIndex ? mode : undefined);\n    }\n  }\n\n  hide(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, false);\n  }\n\n  show(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, true);\n  }\n\n  /**\n\t * @private\n\t */\n  _destroyDatasetMeta(datasetIndex) {\n    const meta = this._metasets[datasetIndex];\n    if (meta && meta.controller) {\n      meta.controller._destroy();\n    }\n    delete this._metasets[datasetIndex];\n  }\n\n  _stop() {\n    let i, ilen;\n    this.stop();\n    animator.remove(this);\n\n    for (i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._destroyDatasetMeta(i);\n    }\n  }\n\n  destroy() {\n    this.notifyPlugins('beforeDestroy');\n    const {canvas, ctx} = this;\n\n    this._stop();\n    this.config.clearCache();\n\n    if (canvas) {\n      this.unbindEvents();\n      clearCanvas(canvas, ctx);\n      this.platform.releaseContext(ctx);\n      this.canvas = null;\n      this.ctx = null;\n    }\n\n    delete instances[this.id];\n\n    this.notifyPlugins('afterDestroy');\n  }\n\n  toBase64Image(...args) {\n    return this.canvas.toDataURL(...args);\n  }\n\n  /**\n\t * @private\n\t */\n  bindEvents() {\n    this.bindUserEvents();\n    if (this.options.responsive) {\n      this.bindResponsiveEvents();\n    } else {\n      this.attached = true;\n    }\n  }\n\n  /**\n   * @private\n   */\n  bindUserEvents() {\n    const listeners = this._listeners;\n    const platform = this.platform;\n\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n\n    const listener = (e, x, y) => {\n      e.offsetX = x;\n      e.offsetY = y;\n      this._eventHandler(e);\n    };\n\n    each(this.options.events, (type) => _add(type, listener));\n  }\n\n  /**\n   * @private\n   */\n  bindResponsiveEvents() {\n    if (!this._responsiveListeners) {\n      this._responsiveListeners = {};\n    }\n    const listeners = this._responsiveListeners;\n    const platform = this.platform;\n\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n    const _remove = (type, listener) => {\n      if (listeners[type]) {\n        platform.removeEventListener(this, type, listener);\n        delete listeners[type];\n      }\n    };\n\n    const listener = (width, height) => {\n      if (this.canvas) {\n        this.resize(width, height);\n      }\n    };\n\n    let detached; // eslint-disable-line prefer-const\n    const attached = () => {\n      _remove('attach', attached);\n\n      this.attached = true;\n      this.resize();\n\n      _add('resize', listener);\n      _add('detach', detached);\n    };\n\n    detached = () => {\n      this.attached = false;\n\n      _remove('resize', listener);\n\n      // Stop animating and remove metasets, so when re-attached, the animations start from beginning.\n      this._stop();\n      this._resize(0, 0);\n\n      _add('attach', attached);\n    };\n\n    if (platform.isAttached(this.canvas)) {\n      attached();\n    } else {\n      detached();\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  unbindEvents() {\n    each(this._listeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._listeners = {};\n\n    each(this._responsiveListeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._responsiveListeners = undefined;\n  }\n\n  updateHoverStyle(items, mode, enabled) {\n    const prefix = enabled ? 'set' : 'remove';\n    let meta, item, i, ilen;\n\n    if (mode === 'dataset') {\n      meta = this.getDatasetMeta(items[0].datasetIndex);\n      meta.controller['_' + prefix + 'DatasetHoverStyle']();\n    }\n\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      item = items[i];\n      const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\n      if (controller) {\n        controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\n      }\n    }\n  }\n\n  /**\n\t * Get active (hovered) elements\n\t * @returns array\n\t */\n  getActiveElements() {\n    return this._active || [];\n  }\n\n  /**\n\t * Set active (hovered) elements\n\t * @param {array} activeElements New active data points\n\t */\n  setActiveElements(activeElements) {\n    const lastActive = this._active || [];\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.getDatasetMeta(datasetIndex);\n      if (!meta) {\n        throw new Error('No dataset found at index ' + datasetIndex);\n      }\n\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(active, lastActive);\n\n    if (changed) {\n      this._active = active;\n      // Make sure we don't use the previous mouse event to override the active elements in update.\n      this._lastEvent = null;\n      this._updateHoverStyles(active, lastActive);\n    }\n  }\n\n  /**\n\t * Calls enabled plugins on the specified hook and with the given args.\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\n\t * returned value can be used, for instance, to interrupt the current action.\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\n\t * @param {Object} [args] - Extra arguments to apply to the hook call.\n   * @param {import('./core.plugins.js').filterCallback} [filter] - Filtering function for limiting which plugins are notified\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\n\t */\n  notifyPlugins(hook, args, filter) {\n    return this._plugins.notify(this, hook, args, filter);\n  }\n\n  /**\n   * Check if a plugin with the specific ID is registered and enabled\n   * @param {string} pluginId - The ID of the plugin of which to check if it is enabled\n   * @returns {boolean}\n   */\n  isPluginEnabled(pluginId) {\n    return this._plugins._cache.filter(p => p.plugin.id === pluginId).length === 1;\n  }\n\n  /**\n\t * @private\n\t */\n  _updateHoverStyles(active, lastActive, replay) {\n    const hoverOptions = this.options.hover;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.datasetIndex === y.datasetIndex && x.index === y.index));\n    const deactivated = diff(lastActive, active);\n    const activated = replay ? active : diff(active, lastActive);\n\n    if (deactivated.length) {\n      this.updateHoverStyle(deactivated, hoverOptions.mode, false);\n    }\n\n    if (activated.length && hoverOptions.mode) {\n      this.updateHoverStyle(activated, hoverOptions.mode, true);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _eventHandler(e, replay) {\n    const args = {\n      event: e,\n      replay,\n      cancelable: true,\n      inChartArea: this.isPointInArea(e)\n    };\n    const eventFilter = (plugin) => (plugin.options.events || this.options.events).includes(e.native.type);\n\n    if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\n      return;\n    }\n\n    const changed = this._handleEvent(e, replay, args.inChartArea);\n\n    args.cancelable = false;\n    this.notifyPlugins('afterEvent', args, eventFilter);\n\n    if (changed || args.changed) {\n      this.render();\n    }\n\n    return this;\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e the event to handle\n\t * @param {boolean} [replay] - true if the event was replayed by `update`\n   * @param {boolean} [inChartArea] - true if the event is inside chartArea\n\t * @return {boolean} true if the chart needs to re-render\n\t * @private\n\t */\n  _handleEvent(e, replay, inChartArea) {\n    const {_active: lastActive = [], options} = this;\n\n    // If the event is replayed from `update`, we should evaluate with the final positions.\n    //\n    // The `replay`:\n    // It's the last event (excluding click) that has occurred before `update`.\n    // So mouse has not moved. It's also over the chart, because there is a `replay`.\n    //\n    // The why:\n    // If animations are active, the elements haven't moved yet compared to state before update.\n    // But if they will, we are activating the elements that would be active, if this check\n    // was done after the animations have completed. => \"final positions\".\n    // If there is no animations, the \"final\" and \"current\" positions are equal.\n    // This is done so we do not have to evaluate the active elements each animation frame\n    // - it would be expensive.\n    const useFinalPosition = replay;\n    const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\n    const isClick = _isClickEvent(e);\n    const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\n\n    if (inChartArea) {\n      // Set _lastEvent to null while we are processing the event handlers.\n      // This prevents recursion if the handler calls chart.update()\n      this._lastEvent = null;\n\n      // Invoke onHover hook\n      callCallback(options.onHover, [e, active, this], this);\n\n      if (isClick) {\n        callCallback(options.onClick, [e, active, this], this);\n      }\n    }\n\n    const changed = !_elementsEqual(active, lastActive);\n    if (changed || replay) {\n      this._active = active;\n      this._updateHoverStyles(active, lastActive, replay);\n    }\n\n    this._lastEvent = lastEvent;\n\n    return changed;\n  }\n\n  /**\n   * @param {ChartEvent} e - The event\n   * @param {import('../types/index.js').ActiveElement[]} lastActive - Previously active elements\n   * @param {boolean} inChartArea - Is the envent inside chartArea\n   * @param {boolean} useFinalPosition - Should the evaluation be done with current or final (after animation) element positions\n   * @returns {import('../types/index.js').ActiveElement[]} - The active elements\n   * @pravate\n   */\n  _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\n    if (e.type === 'mouseout') {\n      return [];\n    }\n\n    if (!inChartArea) {\n      // Let user control the active elements outside chartArea. Eg. using Legend.\n      return lastActive;\n    }\n\n    const hoverOptions = this.options.hover;\n    return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\n  }\n}\n\n// @ts-ignore\nfunction invalidatePlugins() {\n  return each(Chart.instances, (chart) => chart._plugins.invalidate());\n}\n\nexport default Chart;\n","import Element from '../core/core.element.js';\nimport {_angleBetween, getAngleFromPoint, TAU, HALF_PI, valueOrDefault} from '../helpers/index.js';\nimport {PI, _isBetween, _limitValue} from '../helpers/helpers.math.js';\nimport {_readValueToProps} from '../helpers/helpers.options.js';\nimport type {ArcOptions, Point} from '../types/index.js';\n\n\nfunction clipArc(ctx: CanvasRenderingContext2D, element: ArcElement, endAngle: number) {\n  const {startAngle, pixelMargin, x, y, outerRadius, innerRadius} = element;\n  let angleMargin = pixelMargin / outerRadius;\n\n  // Draw an inner border by clipping the arc and drawing a double-width border\n  // Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\n  ctx.beginPath();\n  ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\n  if (innerRadius > pixelMargin) {\n    angleMargin = pixelMargin / innerRadius;\n    ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\n  } else {\n    ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\n  }\n  ctx.closePath();\n  ctx.clip();\n}\n\nfunction toRadiusCorners(value) {\n  return _readValueToProps(value, ['outerStart', 'outerEnd', 'innerStart', 'innerEnd']);\n}\n\n/**\n * Parse border radius from the provided options\n */\nfunction parseBorderRadius(arc: ArcElement, innerRadius: number, outerRadius: number, angleDelta: number) {\n  const o = toRadiusCorners(arc.options.borderRadius);\n  const halfThickness = (outerRadius - innerRadius) / 2;\n  const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\n\n  // Outer limits are complicated. We want to compute the available angular distance at\n  // a radius of outerRadius - borderRadius because for small angular distances, this term limits.\n  // We compute at r = outerRadius - borderRadius because this circle defines the center of the border corners.\n  //\n  // If the borderRadius is large, that value can become negative.\n  // This causes the outer borders to lose their radius entirely, which is rather unexpected. To solve that, if borderRadius > outerRadius\n  // we know that the thickness term will dominate and compute the limits at that point\n  const computeOuterLimit = (val) => {\n    const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\n    return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\n  };\n\n  return {\n    outerStart: computeOuterLimit(o.outerStart),\n    outerEnd: computeOuterLimit(o.outerEnd),\n    innerStart: _limitValue(o.innerStart, 0, innerLimit),\n    innerEnd: _limitValue(o.innerEnd, 0, innerLimit),\n  };\n}\n\n/**\n * Convert (r, 𝜃) to (x, y)\n */\nfunction rThetaToXY(r: number, theta: number, x: number, y: number) {\n  return {\n    x: x + r * Math.cos(theta),\n    y: y + r * Math.sin(theta),\n  };\n}\n\n\n/**\n * Path the arc, respecting border radius by separating into left and right halves.\n *\n *   Start      End\n *\n *    1--->a--->2    Outer\n *   /           \\\n *   8           3\n *   |           |\n *   |           |\n *   7           4\n *   \\           /\n *    6<---b<---5    Inner\n */\nfunction pathArc(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  end: number,\n  circular: boolean,\n) {\n  const {x, y, startAngle: start, pixelMargin, innerRadius: innerR} = element;\n\n  const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\n  const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\n\n  let spacingOffset = 0;\n  const alpha = end - start;\n\n  if (spacing) {\n    // When spacing is present, it is the same for all items\n    // So we adjust the start and end angle of the arc such that\n    // the distance is the same as it would be without the spacing\n    const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\n    const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\n    const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\n    const adjustedAngle = avNogSpacingRadius !== 0 ? (alpha * avNogSpacingRadius) / (avNogSpacingRadius + spacing) : alpha;\n    spacingOffset = (alpha - adjustedAngle) / 2;\n  }\n\n  const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\n  const angleOffset = (alpha - beta) / 2;\n  const startAngle = start + angleOffset + spacingOffset;\n  const endAngle = end - angleOffset - spacingOffset;\n  const {outerStart, outerEnd, innerStart, innerEnd} = parseBorderRadius(element, innerRadius, outerRadius, endAngle - startAngle);\n\n  const outerStartAdjustedRadius = outerRadius - outerStart;\n  const outerEndAdjustedRadius = outerRadius - outerEnd;\n  const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\n  const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\n\n  const innerStartAdjustedRadius = innerRadius + innerStart;\n  const innerEndAdjustedRadius = innerRadius + innerEnd;\n  const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\n  const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\n\n  ctx.beginPath();\n\n  if (circular) {\n    // The first arc segments from point 1 to point a to point 2\n    const outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;\n    ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);\n    ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);\n\n    // The corner segment from point 2 to point 3\n    if (outerEnd > 0) {\n      const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\n    }\n\n    // The line from point 3 to point 4\n    const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\n    ctx.lineTo(p4.x, p4.y);\n\n    // The corner segment from point 4 to point 5\n    if (innerEnd > 0) {\n      const pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\n    }\n\n    // The inner arc from point 5 to point b to point 6\n    const innerMidAdjustedAngle = ((endAngle - (innerEnd / innerRadius)) + (startAngle + (innerStart / innerRadius))) / 2;\n    ctx.arc(x, y, innerRadius, endAngle - (innerEnd / innerRadius), innerMidAdjustedAngle, true);\n    ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + (innerStart / innerRadius), true);\n\n    // The corner segment from point 6 to point 7\n    if (innerStart > 0) {\n      const pCenter = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\n    }\n\n    // The line from point 7 to point 8\n    const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\n    ctx.lineTo(p8.x, p8.y);\n\n    // The corner segment from point 8 to point 1\n    if (outerStart > 0) {\n      const pCenter = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\n    }\n  } else {\n    ctx.moveTo(x, y);\n\n    const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\n    const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerStartX, outerStartY);\n\n    const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\n    const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerEndX, outerEndY);\n  }\n\n  ctx.closePath();\n}\n\nfunction drawArc(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  circular: boolean,\n) {\n  const {fullCircles, startAngle, circumference} = element;\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.fill();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + (circumference % TAU || TAU);\n    }\n  }\n  pathArc(ctx, element, offset, spacing, endAngle, circular);\n  ctx.fill();\n  return endAngle;\n}\n\nfunction drawBorder(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  circular: boolean,\n) {\n  const {fullCircles, startAngle, circumference, options} = element;\n  const {borderWidth, borderJoinStyle} = options;\n  const inner = options.borderAlign === 'inner';\n\n  if (!borderWidth) {\n    return;\n  }\n\n  if (inner) {\n    ctx.lineWidth = borderWidth * 2;\n    ctx.lineJoin = borderJoinStyle || 'round';\n  } else {\n    ctx.lineWidth = borderWidth;\n    ctx.lineJoin = borderJoinStyle || 'bevel';\n  }\n\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.stroke();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + (circumference % TAU || TAU);\n    }\n  }\n\n  if (inner) {\n    clipArc(ctx, element, endAngle);\n  }\n\n  if (!fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    ctx.stroke();\n  }\n}\n\nexport interface ArcProps extends Point {\n  startAngle: number;\n  endAngle: number;\n  innerRadius: number;\n  outerRadius: number;\n  circumference: number;\n}\n\nexport default class ArcElement extends Element<ArcProps, ArcOptions> {\n\n  static id = 'arc';\n\n  static defaults = {\n    borderAlign: 'center',\n    borderColor: '#fff',\n    borderJoinStyle: undefined,\n    borderRadius: 0,\n    borderWidth: 2,\n    offset: 0,\n    spacing: 0,\n    angle: undefined,\n    circular: true,\n  };\n\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor'\n  };\n\n  circumference: number;\n  endAngle: number;\n  fullCircles: number;\n  innerRadius: number;\n  outerRadius: number;\n  pixelMargin: number;\n  startAngle: number;\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.circumference = undefined;\n    this.startAngle = undefined;\n    this.endAngle = undefined;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.pixelMargin = 0;\n    this.fullCircles = 0;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  inRange(chartX: number, chartY: number, useFinalPosition: boolean) {\n    const point = this.getProps(['x', 'y'], useFinalPosition);\n    const {angle, distance} = getAngleFromPoint(point, {x: chartX, y: chartY});\n    const {startAngle, endAngle, innerRadius, outerRadius, circumference} = this.getProps([\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius',\n      'circumference'\n    ], useFinalPosition);\n    const rAdjust = this.options.spacing / 2;\n    const _circumference = valueOrDefault(circumference, endAngle - startAngle);\n    const betweenAngles = _circumference >= TAU || _angleBetween(angle, startAngle, endAngle);\n    const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\n\n    return (betweenAngles && withinRadius);\n  }\n\n  getCenterPoint(useFinalPosition: boolean) {\n    const {x, y, startAngle, endAngle, innerRadius, outerRadius} = this.getProps([\n      'x',\n      'y',\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius'\n    ], useFinalPosition);\n    const {offset, spacing} = this.options;\n    const halfAngle = (startAngle + endAngle) / 2;\n    const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\n    return {\n      x: x + Math.cos(halfAngle) * halfRadius,\n      y: y + Math.sin(halfAngle) * halfRadius\n    };\n  }\n\n  tooltipPosition(useFinalPosition: boolean) {\n    return this.getCenterPoint(useFinalPosition);\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    const {options, circumference} = this;\n    const offset = (options.offset || 0) / 4;\n    const spacing = (options.spacing || 0) / 2;\n    const circular = options.circular;\n    this.pixelMargin = (options.borderAlign === 'inner') ? 0.33 : 0;\n    this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\n\n    if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\n      return;\n    }\n\n    ctx.save();\n\n    const halfAngle = (this.startAngle + this.endAngle) / 2;\n    ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);\n    const fix = 1 - Math.sin(Math.min(PI, circumference || 0));\n    const radiusOffset = offset * fix;\n\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n\n    drawArc(ctx, this, radiusOffset, spacing, circular);\n    drawBorder(ctx, this, radiusOffset, spacing, circular);\n\n    ctx.restore();\n  }\n}\n","import Element from '../core/core.element.js';\nimport {_bezierInterpolation, _pointInLine, _steppedInterpolation} from '../helpers/helpers.interpolation.js';\nimport {_computeSegments, _boundSegments} from '../helpers/helpers.segment.js';\nimport {_steppedLineTo, _bezierCurveTo} from '../helpers/helpers.canvas.js';\nimport {_updateBezierControlPoints} from '../helpers/helpers.curve.js';\nimport {valueOrDefault} from '../helpers/index.js';\n\n/**\n * @typedef { import('./element.point.js').default } PointElement\n */\n\nfunction setStyle(ctx, options, style = options) {\n  ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\n  ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\n  ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\n  ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\n  ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\n  ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\n}\n\nfunction lineTo(ctx, previous, target) {\n  ctx.lineTo(target.x, target.y);\n}\n\nfunction getLineMethod(options) {\n  if (options.stepped) {\n    return _steppedLineTo;\n  }\n\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierCurveTo;\n  }\n\n  return lineTo;\n}\n\nfunction pathVars(points, segment, params = {}) {\n  const count = points.length;\n  const {start: paramsStart = 0, end: paramsEnd = count - 1} = params;\n  const {start: segmentStart, end: segmentEnd} = segment;\n  const start = Math.max(paramsStart, segmentStart);\n  const end = Math.min(paramsEnd, segmentEnd);\n  const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\n\n  return {\n    count,\n    start,\n    loop: segment.loop,\n    ilen: end < start && !outside ? count + end - start : end - start\n  };\n}\n\n/**\n * Create path from points, grouping by truncated x-coordinate\n * Points need to be in order by x-coordinate for this to work efficiently\n * @param {CanvasRenderingContext2D|Path2D} ctx - Context\n * @param {LineElement} line\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} params\n * @param {boolean} params.move - move to starting point (vs line to it)\n * @param {boolean} params.reverse - path the segment from end to start\n * @param {number} params.start - limit segment to points starting from `start` index\n * @param {number} params.end - limit segment to points ending at `start` + `count` index\n */\nfunction pathSegment(ctx, line, segment, params) {\n  const {points, options} = line;\n  const {count, start, loop, ilen} = pathVars(points, segment, params);\n  const lineMethod = getLineMethod(options);\n  // eslint-disable-next-line prefer-const\n  let {move = true, reverse} = params || {};\n  let i, point, prev;\n\n  for (i = 0; i <= ilen; ++i) {\n    point = points[(start + (reverse ? ilen - i : i)) % count];\n\n    if (point.skip) {\n      // If there is a skipped point inside a segment, spanGaps must be true\n      continue;\n    } else if (move) {\n      ctx.moveTo(point.x, point.y);\n      move = false;\n    } else {\n      lineMethod(ctx, prev, point, reverse, options.stepped);\n    }\n\n    prev = point;\n  }\n\n  if (loop) {\n    point = points[(start + (reverse ? ilen : 0)) % count];\n    lineMethod(ctx, prev, point, reverse, options.stepped);\n  }\n\n  return !!loop;\n}\n\n/**\n * Create path from points, grouping by truncated x-coordinate\n * Points need to be in order by x-coordinate for this to work efficiently\n * @param {CanvasRenderingContext2D|Path2D} ctx - Context\n * @param {LineElement} line\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} params\n * @param {boolean} params.move - move to starting point (vs line to it)\n * @param {boolean} params.reverse - path the segment from end to start\n * @param {number} params.start - limit segment to points starting from `start` index\n * @param {number} params.end - limit segment to points ending at `start` + `count` index\n */\nfunction fastPathSegment(ctx, line, segment, params) {\n  const points = line.points;\n  const {count, start, ilen} = pathVars(points, segment, params);\n  const {move = true, reverse} = params || {};\n  let avgX = 0;\n  let countX = 0;\n  let i, point, prevX, minY, maxY, lastY;\n\n  const pointIndex = (index) => (start + (reverse ? ilen - index : index)) % count;\n  const drawX = () => {\n    if (minY !== maxY) {\n      // Draw line to maxY and minY, using the average x-coordinate\n      ctx.lineTo(avgX, maxY);\n      ctx.lineTo(avgX, minY);\n      // Line to y-value of last point in group. So the line continues\n      // from correct position. Not using move, to have solid path.\n      ctx.lineTo(avgX, lastY);\n    }\n  };\n\n  if (move) {\n    point = points[pointIndex(0)];\n    ctx.moveTo(point.x, point.y);\n  }\n\n  for (i = 0; i <= ilen; ++i) {\n    point = points[pointIndex(i)];\n\n    if (point.skip) {\n      // If there is a skipped point inside a segment, spanGaps must be true\n      continue;\n    }\n\n    const x = point.x;\n    const y = point.y;\n    const truncX = x | 0; // truncated x-coordinate\n\n    if (truncX === prevX) {\n      // Determine `minY` / `maxY` and `avgX` while we stay within same x-position\n      if (y < minY) {\n        minY = y;\n      } else if (y > maxY) {\n        maxY = y;\n      }\n      // For first point in group, countX is `0`, so average will be `x` / 1.\n      avgX = (countX * avgX + x) / ++countX;\n    } else {\n      drawX();\n      // Draw line to next x-position, using the first (or only)\n      // y-value in that group\n      ctx.lineTo(x, y);\n\n      prevX = truncX;\n      countX = 0;\n      minY = maxY = y;\n    }\n    // Keep track of the last y-value in group\n    lastY = y;\n  }\n  drawX();\n}\n\n/**\n * @param {LineElement} line - the line\n * @returns {function}\n * @private\n */\nfunction _getSegmentMethod(line) {\n  const opts = line.options;\n  const borderDash = opts.borderDash && opts.borderDash.length;\n  const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\n  return useFastPath ? fastPathSegment : pathSegment;\n}\n\n/**\n * @private\n */\nfunction _getInterpolationMethod(options) {\n  if (options.stepped) {\n    return _steppedInterpolation;\n  }\n\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierInterpolation;\n  }\n\n  return _pointInLine;\n}\n\nfunction strokePathWithCache(ctx, line, start, count) {\n  let path = line._path;\n  if (!path) {\n    path = line._path = new Path2D();\n    if (line.path(path, start, count)) {\n      path.closePath();\n    }\n  }\n  setStyle(ctx, line.options);\n  ctx.stroke(path);\n}\n\nfunction strokePathDirect(ctx, line, start, count) {\n  const {segments, options} = line;\n  const segmentMethod = _getSegmentMethod(line);\n\n  for (const segment of segments) {\n    setStyle(ctx, options, segment.style);\n    ctx.beginPath();\n    if (segmentMethod(ctx, line, segment, {start, end: start + count - 1})) {\n      ctx.closePath();\n    }\n    ctx.stroke();\n  }\n}\n\nconst usePath2D = typeof Path2D === 'function';\n\nfunction draw(ctx, line, start, count) {\n  if (usePath2D && !line.options.segment) {\n    strokePathWithCache(ctx, line, start, count);\n  } else {\n    strokePathDirect(ctx, line, start, count);\n  }\n}\n\nexport default class LineElement extends Element {\n\n  static id = 'line';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderCapStyle: 'butt',\n    borderDash: [],\n    borderDashOffset: 0,\n    borderJoinStyle: 'miter',\n    borderWidth: 3,\n    capBezierPoints: true,\n    cubicInterpolationMode: 'default',\n    fill: false,\n    spanGaps: false,\n    stepped: false,\n    tension: 0,\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n\n  static descriptors = {\n    _scriptable: true,\n    _indexable: (name) => name !== 'borderDash' && name !== 'fill',\n  };\n\n\n  constructor(cfg) {\n    super();\n\n    this.animated = true;\n    this.options = undefined;\n    this._chart = undefined;\n    this._loop = undefined;\n    this._fullLoop = undefined;\n    this._path = undefined;\n    this._points = undefined;\n    this._segments = undefined;\n    this._decimated = false;\n    this._pointsUpdated = false;\n    this._datasetIndex = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  updateControlPoints(chartArea, indexAxis) {\n    const options = this.options;\n    if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\n      const loop = options.spanGaps ? this._loop : this._fullLoop;\n      _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\n      this._pointsUpdated = true;\n    }\n  }\n\n  set points(points) {\n    this._points = points;\n    delete this._segments;\n    delete this._path;\n    this._pointsUpdated = false;\n  }\n\n  get points() {\n    return this._points;\n  }\n\n  get segments() {\n    return this._segments || (this._segments = _computeSegments(this, this.options.segment));\n  }\n\n  /**\n\t * First non-skipped point on this line\n\t * @returns {PointElement|undefined}\n\t */\n  first() {\n    const segments = this.segments;\n    const points = this.points;\n    return segments.length && points[segments[0].start];\n  }\n\n  /**\n\t * Last non-skipped point on this line\n\t * @returns {PointElement|undefined}\n\t */\n  last() {\n    const segments = this.segments;\n    const points = this.points;\n    const count = segments.length;\n    return count && points[segments[count - 1].end];\n  }\n\n  /**\n\t * Interpolate a point in this line at the same value on `property` as\n\t * the reference `point` provided\n\t * @param {PointElement} point - the reference point\n\t * @param {string} property - the property to match on\n\t * @returns {PointElement|undefined}\n\t */\n  interpolate(point, property) {\n    const options = this.options;\n    const value = point[property];\n    const points = this.points;\n    const segments = _boundSegments(this, {property, start: value, end: value});\n\n    if (!segments.length) {\n      return;\n    }\n\n    const result = [];\n    const _interpolate = _getInterpolationMethod(options);\n    let i, ilen;\n    for (i = 0, ilen = segments.length; i < ilen; ++i) {\n      const {start, end} = segments[i];\n      const p1 = points[start];\n      const p2 = points[end];\n      if (p1 === p2) {\n        result.push(p1);\n        continue;\n      }\n      const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\n      const interpolated = _interpolate(p1, p2, t, options.stepped);\n      interpolated[property] = point[property];\n      result.push(interpolated);\n    }\n    return result.length === 1 ? result[0] : result;\n  }\n\n  /**\n\t * Append a segment of this line to current path.\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {object} segment\n\t * @param {number} segment.start - start index of the segment, referring the points array\n \t * @param {number} segment.end - end index of the segment, referring the points array\n \t * @param {boolean} segment.loop - indicates that the segment is a loop\n\t * @param {object} params\n\t * @param {boolean} params.move - move to starting point (vs line to it)\n\t * @param {boolean} params.reverse - path the segment from end to start\n\t * @param {number} params.start - limit segment to points starting from `start` index\n\t * @param {number} params.end - limit segment to points ending at `start` + `count` index\n\t * @returns {undefined|boolean} - true if the segment is a full loop (path should be closed)\n\t */\n  pathSegment(ctx, segment, params) {\n    const segmentMethod = _getSegmentMethod(this);\n    return segmentMethod(ctx, this, segment, params);\n  }\n\n  /**\n\t * Append all segments of this line to current path.\n\t * @param {CanvasRenderingContext2D|Path2D} ctx\n\t * @param {number} [start]\n\t * @param {number} [count]\n\t * @returns {undefined|boolean} - true if line is a full loop (path should be closed)\n\t */\n  path(ctx, start, count) {\n    const segments = this.segments;\n    const segmentMethod = _getSegmentMethod(this);\n    let loop = this._loop;\n\n    start = start || 0;\n    count = count || (this.points.length - start);\n\n    for (const segment of segments) {\n      loop &= segmentMethod(ctx, this, segment, {start, end: start + count - 1});\n    }\n    return !!loop;\n  }\n\n  /**\n\t * Draw\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {object} chartArea\n\t * @param {number} [start]\n\t * @param {number} [count]\n\t */\n  draw(ctx, chartArea, start, count) {\n    const options = this.options || {};\n    const points = this.points || [];\n\n    if (points.length && options.borderWidth) {\n      ctx.save();\n\n      draw(ctx, this, start, count);\n\n      ctx.restore();\n    }\n\n    if (this.animated) {\n      // When line is animated, the control points and path are not cached.\n      this._pointsUpdated = false;\n      this._path = undefined;\n    }\n  }\n}\n","import Element from '../core/core.element.js';\nimport {drawPoint, _isPointInArea} from '../helpers/helpers.canvas.js';\nimport type {\n  CartesianParsedData,\n  ChartArea,\n  Point,\n  PointHoverOptions,\n  PointOptions,\n} from '../types/index.js';\n\nfunction inRange(el: PointElement, pos: number, axis: 'x' | 'y', useFinalPosition?: boolean) {\n  const options = el.options;\n  const {[axis]: value} = el.getProps([axis], useFinalPosition);\n\n  return (Math.abs(pos - value) < options.radius + options.hitRadius);\n}\n\nexport type PointProps = Point\n\nexport default class PointElement extends Element<PointProps, PointOptions & PointHoverOptions> {\n\n  static id = 'point';\n\n  parsed: CartesianParsedData;\n  skip?: boolean;\n  stop?: boolean;\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderWidth: 1,\n    hitRadius: 1,\n    hoverBorderWidth: 1,\n    hoverRadius: 4,\n    pointStyle: 'circle',\n    radius: 3,\n    rotation: 0\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.parsed = undefined;\n    this.skip = undefined;\n    this.stop = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  inRange(mouseX: number, mouseY: number, useFinalPosition?: boolean) {\n    const options = this.options;\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return ((Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2)) < Math.pow(options.hitRadius + options.radius, 2));\n  }\n\n  inXRange(mouseX: number, useFinalPosition?: boolean) {\n    return inRange(this, mouseX, 'x', useFinalPosition);\n  }\n\n  inYRange(mouseY: number, useFinalPosition?: boolean) {\n    return inRange(this, mouseY, 'y', useFinalPosition);\n  }\n\n  getCenterPoint(useFinalPosition?: boolean) {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y};\n  }\n\n  size(options?: Partial<PointOptions & PointHoverOptions>) {\n    options = options || this.options || {};\n    let radius = options.radius || 0;\n    radius = Math.max(radius, radius && options.hoverRadius || 0);\n    const borderWidth = radius && options.borderWidth || 0;\n    return (radius + borderWidth) * 2;\n  }\n\n  draw(ctx: CanvasRenderingContext2D, area: ChartArea) {\n    const options = this.options;\n\n    if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\n      return;\n    }\n\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n    ctx.fillStyle = options.backgroundColor;\n    drawPoint(ctx, options, this.x, this.y);\n  }\n\n  getRange() {\n    const options = this.options || {};\n    // @ts-expect-error Fallbacks should never be hit in practice\n    return options.radius + options.hitRadius;\n  }\n}\n","import Element from '../core/core.element.js';\nimport {isObject, _isBetween, _limitValue} from '../helpers/index.js';\nimport {addRoundedRectPath} from '../helpers/helpers.canvas.js';\nimport {toTRBL, toTRBLCorners} from '../helpers/helpers.options.js';\n\n/** @typedef {{ x: number, y: number, base: number, horizontal: boolean, width: number, height: number }} BarProps */\n\n/**\n * Helper function to get the bounds of the bar regardless of the orientation\n * @param {BarElement} bar the bar\n * @param {boolean} [useFinalPosition]\n * @return {object} bounds of the bar\n * @private\n */\nfunction getBarBounds(bar, useFinalPosition) {\n  const {x, y, base, width, height} = /** @type {BarProps} */ (bar.getProps(['x', 'y', 'base', 'width', 'height'], useFinalPosition));\n\n  let left, right, top, bottom, half;\n\n  if (bar.horizontal) {\n    half = height / 2;\n    left = Math.min(x, base);\n    right = Math.max(x, base);\n    top = y - half;\n    bottom = y + half;\n  } else {\n    half = width / 2;\n    left = x - half;\n    right = x + half;\n    top = Math.min(y, base);\n    bottom = Math.max(y, base);\n  }\n\n  return {left, top, right, bottom};\n}\n\nfunction skipOrLimit(skip, value, min, max) {\n  return skip ? 0 : _limitValue(value, min, max);\n}\n\nfunction parseBorderWidth(bar, maxW, maxH) {\n  const value = bar.options.borderWidth;\n  const skip = bar.borderSkipped;\n  const o = toTRBL(value);\n\n  return {\n    t: skipOrLimit(skip.top, o.top, 0, maxH),\n    r: skipOrLimit(skip.right, o.right, 0, maxW),\n    b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\n    l: skipOrLimit(skip.left, o.left, 0, maxW)\n  };\n}\n\nfunction parseBorderRadius(bar, maxW, maxH) {\n  const {enableBorderRadius} = bar.getProps(['enableBorderRadius']);\n  const value = bar.options.borderRadius;\n  const o = toTRBLCorners(value);\n  const maxR = Math.min(maxW, maxH);\n  const skip = bar.borderSkipped;\n\n  // If the value is an object, assume the user knows what they are doing\n  // and apply as directed.\n  const enableBorder = enableBorderRadius || isObject(value);\n\n  return {\n    topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\n    topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\n    bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\n    bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\n  };\n}\n\nfunction boundingRects(bar) {\n  const bounds = getBarBounds(bar);\n  const width = bounds.right - bounds.left;\n  const height = bounds.bottom - bounds.top;\n  const border = parseBorderWidth(bar, width / 2, height / 2);\n  const radius = parseBorderRadius(bar, width / 2, height / 2);\n\n  return {\n    outer: {\n      x: bounds.left,\n      y: bounds.top,\n      w: width,\n      h: height,\n      radius\n    },\n    inner: {\n      x: bounds.left + border.l,\n      y: bounds.top + border.t,\n      w: width - border.l - border.r,\n      h: height - border.t - border.b,\n      radius: {\n        topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\n        topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\n        bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\n        bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r)),\n      }\n    }\n  };\n}\n\nfunction inRange(bar, x, y, useFinalPosition) {\n  const skipX = x === null;\n  const skipY = y === null;\n  const skipBoth = skipX && skipY;\n  const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\n\n  return bounds\n\t\t&& (skipX || _isBetween(x, bounds.left, bounds.right))\n\t\t&& (skipY || _isBetween(y, bounds.top, bounds.bottom));\n}\n\nfunction hasRadius(radius) {\n  return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\n}\n\n/**\n * Add a path of a rectangle to the current sub-path\n * @param {CanvasRenderingContext2D} ctx Context\n * @param {*} rect Bounding rect\n */\nfunction addNormalRectPath(ctx, rect) {\n  ctx.rect(rect.x, rect.y, rect.w, rect.h);\n}\n\nfunction inflateRect(rect, amount, refRect = {}) {\n  const x = rect.x !== refRect.x ? -amount : 0;\n  const y = rect.y !== refRect.y ? -amount : 0;\n  const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\n  const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\n  return {\n    x: rect.x + x,\n    y: rect.y + y,\n    w: rect.w + w,\n    h: rect.h + h,\n    radius: rect.radius\n  };\n}\n\nexport default class BarElement extends Element {\n\n  static id = 'bar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderSkipped: 'start',\n    borderWidth: 0,\n    borderRadius: 0,\n    inflateAmount: 'auto',\n    pointStyle: undefined\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.horizontal = undefined;\n    this.base = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.inflateAmount = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  draw(ctx) {\n    const {inflateAmount, options: {borderColor, backgroundColor}} = this;\n    const {inner, outer} = boundingRects(this);\n    const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\n\n    ctx.save();\n\n    if (outer.w !== inner.w || outer.h !== inner.h) {\n      ctx.beginPath();\n      addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\n      ctx.clip();\n      addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\n      ctx.fillStyle = borderColor;\n      ctx.fill('evenodd');\n    }\n\n    ctx.beginPath();\n    addRectPath(ctx, inflateRect(inner, inflateAmount));\n    ctx.fillStyle = backgroundColor;\n    ctx.fill();\n\n    ctx.restore();\n  }\n\n  inRange(mouseX, mouseY, useFinalPosition) {\n    return inRange(this, mouseX, mouseY, useFinalPosition);\n  }\n\n  inXRange(mouseX, useFinalPosition) {\n    return inRange(this, mouseX, null, useFinalPosition);\n  }\n\n  inYRange(mouseY, useFinalPosition) {\n    return inRange(this, null, mouseY, useFinalPosition);\n  }\n\n  getCenterPoint(useFinalPosition) {\n    const {x, y, base, horizontal} = /** @type {BarProps} */ (this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition));\n    return {\n      x: horizontal ? (x + base) / 2 : x,\n      y: horizontal ? y : (y + base) / 2\n    };\n  }\n\n  getRange(axis) {\n    return axis === 'x' ? this.width / 2 : this.height / 2;\n  }\n}\n","/**\n * Plugin based on discussion from the following Chart.js issues:\n * @see https://github.com/chartjs/Chart.js/issues/2380#issuecomment-279961569\n * @see https://github.com/chartjs/Chart.js/issues/2440#issuecomment-256461897\n */\n\nimport LineElement from '../../elements/element.line.js';\nimport {_drawfill} from './filler.drawing.js';\nimport {_shouldApplyFill} from './filler.helper.js';\nimport {_decodeFill, _resolveTarget} from './filler.options.js';\n\nexport default {\n  id: 'filler',\n\n  afterDatasetsUpdate(chart, _args, options) {\n    const count = (chart.data.datasets || []).length;\n    const sources = [];\n    let meta, i, line, source;\n\n    for (i = 0; i < count; ++i) {\n      meta = chart.getDatasetMeta(i);\n      line = meta.dataset;\n      source = null;\n\n      if (line && line.options && line instanceof LineElement) {\n        source = {\n          visible: chart.isDatasetVisible(i),\n          index: i,\n          fill: _decodeFill(line, i, count),\n          chart,\n          axis: meta.controller.options.indexAxis,\n          scale: meta.vScale,\n          line,\n        };\n      }\n\n      meta.$filler = source;\n      sources.push(source);\n    }\n\n    for (i = 0; i < count; ++i) {\n      source = sources[i];\n      if (!source || source.fill === false) {\n        continue;\n      }\n\n      source.fill = _resolveTarget(sources, i, options.propagate);\n    }\n  },\n\n  beforeDraw(chart, _args, options) {\n    const draw = options.drawTime === 'beforeDraw';\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    const area = chart.chartArea;\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      const source = metasets[i].$filler;\n      if (!source) {\n        continue;\n      }\n\n      source.line.updateControlPoints(area, source.axis);\n      if (draw && source.fill) {\n        _drawfill(chart.ctx, source, area);\n      }\n    }\n  },\n\n  beforeDatasetsDraw(chart, _args, options) {\n    if (options.drawTime !== 'beforeDatasetsDraw') {\n      return;\n    }\n\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      const source = metasets[i].$filler;\n\n      if (_shouldApplyFill(source)) {\n        _drawfill(chart.ctx, source, chart.chartArea);\n      }\n    }\n  },\n\n  beforeDatasetDraw(chart, args, options) {\n    const source = args.meta.$filler;\n\n    if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {\n      return;\n    }\n\n    _drawfill(chart.ctx, source, chart.chartArea);\n  },\n\n  defaults: {\n    propagate: true,\n    drawTime: 'beforeDatasetDraw'\n  }\n};\n","import defaults from '../core/core.defaults.js';\nimport Element from '../core/core.element.js';\nimport layouts from '../core/core.layouts.js';\nimport {addRoundedRectPath, drawPointLegend, renderText} from '../helpers/helpers.canvas.js';\nimport {\n  _isBetween,\n  callback as call,\n  clipArea,\n  getRtlAdapter,\n  overrideTextDirection,\n  restoreTextDirection,\n  toFont,\n  toPadding,\n  unclipArea,\n  valueOrDefault,\n} from '../helpers/index.js';\nimport {_alignStartEnd, _textX, _toLeftRightCenter} from '../helpers/helpers.extras.js';\nimport {toTRBLCorners} from '../helpers/helpers.options.js';\n\n/**\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n */\n\nconst getBoxSize = (labelOpts, fontSize) => {\n  let {boxHeight = fontSize, boxWidth = fontSize} = labelOpts;\n\n  if (labelOpts.usePointStyle) {\n    boxHeight = Math.min(boxHeight, fontSize);\n    boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);\n  }\n\n  return {\n    boxWidth,\n    boxHeight,\n    itemHeight: Math.max(fontSize, boxHeight)\n  };\n};\n\nconst itemsEqual = (a, b) => a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;\n\nexport class Legend extends Element {\n\n  /**\n\t * @param {{ ctx: any; options: any; chart: any; }} config\n\t */\n  constructor(config) {\n    super();\n\n    this._added = false;\n\n    // Contains hit boxes for each dataset (in dataset order)\n    this.legendHitBoxes = [];\n\n    /**\n \t\t * @private\n \t\t */\n    this._hoveredItem = null;\n\n    // Are we in doughnut mode which has a different data type\n    this.doughnutMode = false;\n\n    this.chart = config.chart;\n    this.options = config.options;\n    this.ctx = config.ctx;\n    this.legendItems = undefined;\n    this.columnSizes = undefined;\n    this.lineWidths = undefined;\n    this.maxHeight = undefined;\n    this.maxWidth = undefined;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this._margins = undefined;\n    this.position = undefined;\n    this.weight = undefined;\n    this.fullSize = undefined;\n  }\n\n  update(maxWidth, maxHeight, margins) {\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins;\n\n    this.setDimensions();\n    this.buildLabels();\n    this.fit();\n  }\n\n  setDimensions() {\n    if (this.isHorizontal()) {\n      this.width = this.maxWidth;\n      this.left = this._margins.left;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n      this.top = this._margins.top;\n      this.bottom = this.height;\n    }\n  }\n\n  buildLabels() {\n    const labelOpts = this.options.labels || {};\n    let legendItems = call(labelOpts.generateLabels, [this.chart], this) || [];\n\n    if (labelOpts.filter) {\n      legendItems = legendItems.filter((item) => labelOpts.filter(item, this.chart.data));\n    }\n\n    if (labelOpts.sort) {\n      legendItems = legendItems.sort((a, b) => labelOpts.sort(a, b, this.chart.data));\n    }\n\n    if (this.options.reverse) {\n      legendItems.reverse();\n    }\n\n    this.legendItems = legendItems;\n  }\n\n  fit() {\n    const {options, ctx} = this;\n\n    // The legend may not be displayed for a variety of reasons including\n    // the fact that the defaults got set to `false`.\n    // When the legend is not displayed, there are no guarantees that the options\n    // are correctly formatted so we need to bail out as early as possible.\n    if (!options.display) {\n      this.width = this.height = 0;\n      return;\n    }\n\n    const labelOpts = options.labels;\n    const labelFont = toFont(labelOpts.font);\n    const fontSize = labelFont.size;\n    const titleHeight = this._computeTitleHeight();\n    const {boxWidth, itemHeight} = getBoxSize(labelOpts, fontSize);\n\n    let width, height;\n\n    ctx.font = labelFont.string;\n\n    if (this.isHorizontal()) {\n      width = this.maxWidth; // fill all the width\n      height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;\n    } else {\n      height = this.maxHeight; // fill all the height\n      width = this._fitCols(titleHeight, labelFont, boxWidth, itemHeight) + 10;\n    }\n\n    this.width = Math.min(width, options.maxWidth || this.maxWidth);\n    this.height = Math.min(height, options.maxHeight || this.maxHeight);\n  }\n\n  /**\n\t * @private\n\t */\n  _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {\n    const {ctx, maxWidth, options: {labels: {padding}}} = this;\n    const hitboxes = this.legendHitBoxes = [];\n    // Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\n    const lineWidths = this.lineWidths = [0];\n    const lineHeight = itemHeight + padding;\n    let totalHeight = titleHeight;\n\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n\n    let row = -1;\n    let top = -lineHeight;\n    this.legendItems.forEach((legendItem, i) => {\n      const itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n\n      if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {\n        totalHeight += lineHeight;\n        lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\n        top += lineHeight;\n        row++;\n      }\n\n      hitboxes[i] = {left: 0, top, row, width: itemWidth, height: itemHeight};\n\n      lineWidths[lineWidths.length - 1] += itemWidth + padding;\n    });\n\n    return totalHeight;\n  }\n\n  _fitCols(titleHeight, labelFont, boxWidth, _itemHeight) {\n    const {ctx, maxHeight, options: {labels: {padding}}} = this;\n    const hitboxes = this.legendHitBoxes = [];\n    const columnSizes = this.columnSizes = [];\n    const heightLimit = maxHeight - titleHeight;\n\n    let totalWidth = padding;\n    let currentColWidth = 0;\n    let currentColHeight = 0;\n\n    let left = 0;\n    let col = 0;\n\n    this.legendItems.forEach((legendItem, i) => {\n      const {itemWidth, itemHeight} = calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight);\n\n      // If too tall, go to new column\n      if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {\n        totalWidth += currentColWidth + padding;\n        columnSizes.push({width: currentColWidth, height: currentColHeight}); // previous column size\n        left += currentColWidth + padding;\n        col++;\n        currentColWidth = currentColHeight = 0;\n      }\n\n      // Store the hitbox width and height here. Final position will be updated in `draw`\n      hitboxes[i] = {left, top: currentColHeight, col, width: itemWidth, height: itemHeight};\n\n      // Get max width\n      currentColWidth = Math.max(currentColWidth, itemWidth);\n      currentColHeight += itemHeight + padding;\n    });\n\n    totalWidth += currentColWidth;\n    columnSizes.push({width: currentColWidth, height: currentColHeight}); // previous column size\n\n    return totalWidth;\n  }\n\n  adjustHitBoxes() {\n    if (!this.options.display) {\n      return;\n    }\n    const titleHeight = this._computeTitleHeight();\n    const {legendHitBoxes: hitboxes, options: {align, labels: {padding}, rtl}} = this;\n    const rtlHelper = getRtlAdapter(rtl, this.left, this.width);\n    if (this.isHorizontal()) {\n      let row = 0;\n      let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n      for (const hitbox of hitboxes) {\n        if (row !== hitbox.row) {\n          row = hitbox.row;\n          left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n        }\n        hitbox.top += this.top + titleHeight + padding;\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);\n        left += hitbox.width + padding;\n      }\n    } else {\n      let col = 0;\n      let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n      for (const hitbox of hitboxes) {\n        if (hitbox.col !== col) {\n          col = hitbox.col;\n          top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n        }\n        hitbox.top = top;\n        hitbox.left += this.left + padding;\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox.left), hitbox.width);\n        top += hitbox.height + padding;\n      }\n    }\n  }\n\n  isHorizontal() {\n    return this.options.position === 'top' || this.options.position === 'bottom';\n  }\n\n  draw() {\n    if (this.options.display) {\n      const ctx = this.ctx;\n      clipArea(ctx, this);\n\n      this._draw();\n\n      unclipArea(ctx);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _draw() {\n    const {options: opts, columnSizes, lineWidths, ctx} = this;\n    const {align, labels: labelOpts} = opts;\n    const defaultColor = defaults.color;\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n    const labelFont = toFont(labelOpts.font);\n    const {padding} = labelOpts;\n    const fontSize = labelFont.size;\n    const halfFontSize = fontSize / 2;\n    let cursor;\n\n    this.drawTitle();\n\n    // Canvas setup\n    ctx.textAlign = rtlHelper.textAlign('left');\n    ctx.textBaseline = 'middle';\n    ctx.lineWidth = 0.5;\n    ctx.font = labelFont.string;\n\n    const {boxWidth, boxHeight, itemHeight} = getBoxSize(labelOpts, fontSize);\n\n    // current position\n    const drawLegendBox = function(x, y, legendItem) {\n      if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {\n        return;\n      }\n\n      // Set the ctx for the box\n      ctx.save();\n\n      const lineWidth = valueOrDefault(legendItem.lineWidth, 1);\n      ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\n      ctx.lineCap = valueOrDefault(legendItem.lineCap, 'butt');\n      ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);\n      ctx.lineJoin = valueOrDefault(legendItem.lineJoin, 'miter');\n      ctx.lineWidth = lineWidth;\n      ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\n\n      ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));\n\n      if (labelOpts.usePointStyle) {\n        // Recalculate x and y for drawPoint() because its expecting\n        // x and y to be center of figure (instead of top left)\n        const drawOptions = {\n          radius: boxHeight * Math.SQRT2 / 2,\n          pointStyle: legendItem.pointStyle,\n          rotation: legendItem.rotation,\n          borderWidth: lineWidth\n        };\n        const centerX = rtlHelper.xPlus(x, boxWidth / 2);\n        const centerY = y + halfFontSize;\n\n        // Draw pointStyle as legend symbol\n        drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);\n      } else {\n        // Draw box as legend symbol\n        // Adjust position when boxHeight < fontSize (want it centered)\n        const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);\n        const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);\n        const borderRadius = toTRBLCorners(legendItem.borderRadius);\n\n        ctx.beginPath();\n\n        if (Object.values(borderRadius).some(v => v !== 0)) {\n          addRoundedRectPath(ctx, {\n            x: xBoxLeft,\n            y: yBoxTop,\n            w: boxWidth,\n            h: boxHeight,\n            radius: borderRadius,\n          });\n        } else {\n          ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);\n        }\n\n        ctx.fill();\n        if (lineWidth !== 0) {\n          ctx.stroke();\n        }\n      }\n\n      ctx.restore();\n    };\n\n    const fillText = function(x, y, legendItem) {\n      renderText(ctx, legendItem.text, x, y + (itemHeight / 2), labelFont, {\n        strikethrough: legendItem.hidden,\n        textAlign: rtlHelper.textAlign(legendItem.textAlign)\n      });\n    };\n\n    // Horizontal\n    const isHorizontal = this.isHorizontal();\n    const titleHeight = this._computeTitleHeight();\n    if (isHorizontal) {\n      cursor = {\n        x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),\n        y: this.top + padding + titleHeight,\n        line: 0\n      };\n    } else {\n      cursor = {\n        x: this.left + padding,\n        y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),\n        line: 0\n      };\n    }\n\n    overrideTextDirection(this.ctx, opts.textDirection);\n\n    const lineHeight = itemHeight + padding;\n    this.legendItems.forEach((legendItem, i) => {\n      ctx.strokeStyle = legendItem.fontColor; // for strikethrough effect\n      ctx.fillStyle = legendItem.fontColor; // render in correct colour\n\n      const textWidth = ctx.measureText(legendItem.text).width;\n      const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));\n      const width = boxWidth + halfFontSize + textWidth;\n      let x = cursor.x;\n      let y = cursor.y;\n\n      rtlHelper.setWidth(this.width);\n\n      if (isHorizontal) {\n        if (i > 0 && x + width + padding > this.right) {\n          y = cursor.y += lineHeight;\n          cursor.line++;\n          x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);\n        }\n      } else if (i > 0 && y + lineHeight > this.bottom) {\n        x = cursor.x = x + columnSizes[cursor.line].width + padding;\n        cursor.line++;\n        y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);\n      }\n\n      const realX = rtlHelper.x(x);\n\n      drawLegendBox(realX, y, legendItem);\n\n      x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);\n\n      // Fill the actual label\n      fillText(rtlHelper.x(x), y, legendItem);\n\n      if (isHorizontal) {\n        cursor.x += width + padding;\n      } else if (typeof legendItem.text !== 'string') {\n        const fontLineHeight = labelFont.lineHeight;\n        cursor.y += calculateLegendItemHeight(legendItem, fontLineHeight);\n      } else {\n        cursor.y += lineHeight;\n      }\n    });\n\n    restoreTextDirection(this.ctx, opts.textDirection);\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {\n    const opts = this.options;\n    const titleOpts = opts.title;\n    const titleFont = toFont(titleOpts.font);\n    const titlePadding = toPadding(titleOpts.padding);\n\n    if (!titleOpts.display) {\n      return;\n    }\n\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n    const ctx = this.ctx;\n    const position = titleOpts.position;\n    const halfFontSize = titleFont.size / 2;\n    const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;\n    let y;\n\n    // These defaults are used when the legend is vertical.\n    // When horizontal, they are computed below.\n    let left = this.left;\n    let maxWidth = this.width;\n\n    if (this.isHorizontal()) {\n      // Move left / right so that the title is above the legend lines\n      maxWidth = Math.max(...this.lineWidths);\n      y = this.top + topPaddingPlusHalfFontSize;\n      left = _alignStartEnd(opts.align, left, this.right - maxWidth);\n    } else {\n      // Move down so that the title is above the legend stack in every alignment\n      const maxHeight = this.columnSizes.reduce((acc, size) => Math.max(acc, size.height), 0);\n      y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());\n    }\n\n    // Now that we know the left edge of the inner legend box, compute the correct\n    // X coordinate from the title alignment\n    const x = _alignStartEnd(position, left, left + maxWidth);\n\n    // Canvas setup\n    ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));\n    ctx.textBaseline = 'middle';\n    ctx.strokeStyle = titleOpts.color;\n    ctx.fillStyle = titleOpts.color;\n    ctx.font = titleFont.string;\n\n    renderText(ctx, titleOpts.text, x, y, titleFont);\n  }\n\n  /**\n\t * @private\n\t */\n  _computeTitleHeight() {\n    const titleOpts = this.options.title;\n    const titleFont = toFont(titleOpts.font);\n    const titlePadding = toPadding(titleOpts.padding);\n    return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;\n  }\n\n  /**\n\t * @private\n\t */\n  _getLegendItemAt(x, y) {\n    let i, hitBox, lh;\n\n    if (_isBetween(x, this.left, this.right)\n      && _isBetween(y, this.top, this.bottom)) {\n      // See if we are touching one of the dataset boxes\n      lh = this.legendHitBoxes;\n      for (i = 0; i < lh.length; ++i) {\n        hitBox = lh[i];\n\n        if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width)\n          && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {\n          // Touching an element\n          return this.legendItems[i];\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e - The event to handle\n\t */\n  handleEvent(e) {\n    const opts = this.options;\n    if (!isListened(e.type, opts)) {\n      return;\n    }\n\n    // Chart event already has relative position in it\n    const hoveredItem = this._getLegendItemAt(e.x, e.y);\n\n    if (e.type === 'mousemove' || e.type === 'mouseout') {\n      const previous = this._hoveredItem;\n      const sameItem = itemsEqual(previous, hoveredItem);\n      if (previous && !sameItem) {\n        call(opts.onLeave, [e, previous, this], this);\n      }\n\n      this._hoveredItem = hoveredItem;\n\n      if (hoveredItem && !sameItem) {\n        call(opts.onHover, [e, hoveredItem, this], this);\n      }\n    } else if (hoveredItem) {\n      call(opts.onClick, [e, hoveredItem, this], this);\n    }\n  }\n}\n\nfunction calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight) {\n  const itemWidth = calculateItemWidth(legendItem, boxWidth, labelFont, ctx);\n  const itemHeight = calculateItemHeight(_itemHeight, legendItem, labelFont.lineHeight);\n  return {itemWidth, itemHeight};\n}\n\nfunction calculateItemWidth(legendItem, boxWidth, labelFont, ctx) {\n  let legendItemText = legendItem.text;\n  if (legendItemText && typeof legendItemText !== 'string') {\n    legendItemText = legendItemText.reduce((a, b) => a.length > b.length ? a : b);\n  }\n  return boxWidth + (labelFont.size / 2) + ctx.measureText(legendItemText).width;\n}\n\nfunction calculateItemHeight(_itemHeight, legendItem, fontLineHeight) {\n  let itemHeight = _itemHeight;\n  if (typeof legendItem.text !== 'string') {\n    itemHeight = calculateLegendItemHeight(legendItem, fontLineHeight);\n  }\n  return itemHeight;\n}\n\nfunction calculateLegendItemHeight(legendItem, fontLineHeight) {\n  const labelHeight = legendItem.text ? legendItem.text.length + 0.5 : 0;\n  return fontLineHeight * labelHeight;\n}\n\nfunction isListened(type, opts) {\n  if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {\n    return true;\n  }\n  if (opts.onClick && (type === 'click' || type === 'mouseup')) {\n    return true;\n  }\n  return false;\n}\n\nexport default {\n  id: 'legend',\n\n  /**\n\t * For tests\n\t * @private\n\t */\n  _element: Legend,\n\n  start(chart, _args, options) {\n    const legend = chart.legend = new Legend({ctx: chart.ctx, options, chart});\n    layouts.configure(chart, legend, options);\n    layouts.addBox(chart, legend);\n  },\n\n  stop(chart) {\n    layouts.removeBox(chart, chart.legend);\n    delete chart.legend;\n  },\n\n  // During the beforeUpdate step, the layout configuration needs to run\n  // This ensures that if the legend position changes (via an option update)\n  // the layout system respects the change. See https://github.com/chartjs/Chart.js/issues/7527\n  beforeUpdate(chart, _args, options) {\n    const legend = chart.legend;\n    layouts.configure(chart, legend, options);\n    legend.options = options;\n  },\n\n  // The labels need to be built after datasets are updated to ensure that colors\n  // and other styling are correct. See https://github.com/chartjs/Chart.js/issues/6968\n  afterUpdate(chart) {\n    const legend = chart.legend;\n    legend.buildLabels();\n    legend.adjustHitBoxes();\n  },\n\n\n  afterEvent(chart, args) {\n    if (!args.replay) {\n      chart.legend.handleEvent(args.event);\n    }\n  },\n\n  defaults: {\n    display: true,\n    position: 'top',\n    align: 'center',\n    fullSize: true,\n    reverse: false,\n    weight: 1000,\n\n    // a callback that will handle\n    onClick(e, legendItem, legend) {\n      const index = legendItem.datasetIndex;\n      const ci = legend.chart;\n      if (ci.isDatasetVisible(index)) {\n        ci.hide(index);\n        legendItem.hidden = true;\n      } else {\n        ci.show(index);\n        legendItem.hidden = false;\n      }\n    },\n\n    onHover: null,\n    onLeave: null,\n\n    labels: {\n      color: (ctx) => ctx.chart.options.color,\n      boxWidth: 40,\n      padding: 10,\n      // Generates labels shown in the legend\n      // Valid properties to return:\n      // text : text to display\n      // fillStyle : fill of coloured box\n      // strokeStyle: stroke of coloured box\n      // hidden : if this legend item refers to a hidden item\n      // lineCap : cap style for line\n      // lineDash\n      // lineDashOffset :\n      // lineJoin :\n      // lineWidth :\n      generateLabels(chart) {\n        const datasets = chart.data.datasets;\n        const {labels: {usePointStyle, pointStyle, textAlign, color, useBorderRadius, borderRadius}} = chart.legend.options;\n\n        return chart._getSortedDatasetMetas().map((meta) => {\n          const style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\n          const borderWidth = toPadding(style.borderWidth);\n\n          return {\n            text: datasets[meta.index].label,\n            fillStyle: style.backgroundColor,\n            fontColor: color,\n            hidden: !meta.visible,\n            lineCap: style.borderCapStyle,\n            lineDash: style.borderDash,\n            lineDashOffset: style.borderDashOffset,\n            lineJoin: style.borderJoinStyle,\n            lineWidth: (borderWidth.width + borderWidth.height) / 4,\n            strokeStyle: style.borderColor,\n            pointStyle: pointStyle || style.pointStyle,\n            rotation: style.rotation,\n            textAlign: textAlign || style.textAlign,\n            borderRadius: useBorderRadius && (borderRadius || style.borderRadius),\n\n            // Below is extra data used for toggling the datasets\n            datasetIndex: meta.index\n          };\n        }, this);\n      }\n    },\n\n    title: {\n      color: (ctx) => ctx.chart.options.color,\n      display: false,\n      position: 'center',\n      text: '',\n    }\n  },\n\n  descriptors: {\n    _scriptable: (name) => !name.startsWith('on'),\n    labels: {\n      _scriptable: (name) => !['generateLabels', 'filter', 'sort'].includes(name),\n    }\n  },\n};\n","import {Title} from './plugin.title.js';\nimport layouts from '../core/core.layouts.js';\n\nconst map = new WeakMap();\n\nexport default {\n  id: 'subtitle',\n\n  start(chart, _args, options) {\n    const title = new Title({\n      ctx: chart.ctx,\n      options,\n      chart\n    });\n\n    layouts.configure(chart, title, options);\n    layouts.addBox(chart, title);\n    map.set(chart, title);\n  },\n\n  stop(chart) {\n    layouts.removeBox(chart, map.get(chart));\n    map.delete(chart);\n  },\n\n  beforeUpdate(chart, _args, options) {\n    const title = map.get(chart);\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'normal',\n    },\n    fullSize: true,\n    padding: 0,\n    position: 'top',\n    text: '',\n    weight: 1500         // by default greater than legend (1000) and smaller than title (2000)\n  },\n\n  defaultRoutes: {\n    color: 'color'\n  },\n\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n","import Element from '../core/core.element.js';\nimport layouts from '../core/core.layouts.js';\nimport {PI, isArray, toPadding, toFont} from '../helpers/index.js';\nimport {_toLeftRightCenter, _alignStartEnd} from '../helpers/helpers.extras.js';\nimport {renderText} from '../helpers/helpers.canvas.js';\n\nexport class Title extends Element {\n  /**\n\t * @param {{ ctx: any; options: any; chart: any; }} config\n\t */\n  constructor(config) {\n    super();\n\n    this.chart = config.chart;\n    this.options = config.options;\n    this.ctx = config.ctx;\n    this._padding = undefined;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.position = undefined;\n    this.weight = undefined;\n    this.fullSize = undefined;\n  }\n\n  update(maxWidth, maxHeight) {\n    const opts = this.options;\n\n    this.left = 0;\n    this.top = 0;\n\n    if (!opts.display) {\n      this.width = this.height = this.right = this.bottom = 0;\n      return;\n    }\n\n    this.width = this.right = maxWidth;\n    this.height = this.bottom = maxHeight;\n\n    const lineCount = isArray(opts.text) ? opts.text.length : 1;\n    this._padding = toPadding(opts.padding);\n    const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;\n\n    if (this.isHorizontal()) {\n      this.height = textSize;\n    } else {\n      this.width = textSize;\n    }\n  }\n\n  isHorizontal() {\n    const pos = this.options.position;\n    return pos === 'top' || pos === 'bottom';\n  }\n\n  _drawArgs(offset) {\n    const {top, left, bottom, right, options} = this;\n    const align = options.align;\n    let rotation = 0;\n    let maxWidth, titleX, titleY;\n\n    if (this.isHorizontal()) {\n      titleX = _alignStartEnd(align, left, right);\n      titleY = top + offset;\n      maxWidth = right - left;\n    } else {\n      if (options.position === 'left') {\n        titleX = left + offset;\n        titleY = _alignStartEnd(align, bottom, top);\n        rotation = PI * -0.5;\n      } else {\n        titleX = right - offset;\n        titleY = _alignStartEnd(align, top, bottom);\n        rotation = PI * 0.5;\n      }\n      maxWidth = bottom - top;\n    }\n    return {titleX, titleY, maxWidth, rotation};\n  }\n\n  draw() {\n    const ctx = this.ctx;\n    const opts = this.options;\n\n    if (!opts.display) {\n      return;\n    }\n\n    const fontOpts = toFont(opts.font);\n    const lineHeight = fontOpts.lineHeight;\n    const offset = lineHeight / 2 + this._padding.top;\n    const {titleX, titleY, maxWidth, rotation} = this._drawArgs(offset);\n\n    renderText(ctx, opts.text, 0, 0, fontOpts, {\n      color: opts.color,\n      maxWidth,\n      rotation,\n      textAlign: _toLeftRightCenter(opts.align),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n}\n\nfunction createTitle(chart, titleOpts) {\n  const title = new Title({\n    ctx: chart.ctx,\n    options: titleOpts,\n    chart\n  });\n\n  layouts.configure(chart, title, titleOpts);\n  layouts.addBox(chart, title);\n  chart.titleBlock = title;\n}\n\nexport default {\n  id: 'title',\n\n  /**\n\t * For tests\n\t * @private\n\t */\n  _element: Title,\n\n  start(chart, _args, options) {\n    createTitle(chart, options);\n  },\n\n  stop(chart) {\n    const titleBlock = chart.titleBlock;\n    layouts.removeBox(chart, titleBlock);\n    delete chart.titleBlock;\n  },\n\n  beforeUpdate(chart, _args, options) {\n    const title = chart.titleBlock;\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'bold',\n    },\n    fullSize: true,\n    padding: 10,\n    position: 'top',\n    text: '',\n    weight: 2000         // by default greater than legend (1000) to be above\n  },\n\n  defaultRoutes: {\n    color: 'color'\n  },\n\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n","import Animations from '../core/core.animations.js';\nimport Element from '../core/core.element.js';\nimport {addRoundedRectPath} from '../helpers/helpers.canvas.js';\nimport {each, noop, isNullOrUndef, isArray, _elementsEqual, isObject} from '../helpers/helpers.core.js';\nimport {toFont, toPadding, toTRBLCorners} from '../helpers/helpers.options.js';\nimport {getRtlAdapter, overrideTextDirection, restoreTextDirection} from '../helpers/helpers.rtl.js';\nimport {distanceBetweenPoints, _limitValue} from '../helpers/helpers.math.js';\nimport {createContext, drawPoint} from '../helpers/index.js';\n\n/**\n * @typedef { import('../platform/platform.base.js').Chart } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../types/index.js').ActiveElement } ActiveElement\n * @typedef { import('../core/core.interaction.js').InteractionItem } InteractionItem\n */\n\nconst positioners = {\n  /**\n\t * Average mode places the tooltip at the average position of the elements shown\n\t */\n  average(items) {\n    if (!items.length) {\n      return false;\n    }\n\n    let i, len;\n    let x = 0;\n    let y = 0;\n    let count = 0;\n\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const pos = el.tooltipPosition();\n        x += pos.x;\n        y += pos.y;\n        ++count;\n      }\n    }\n\n    return {\n      x: x / count,\n      y: y / count\n    };\n  },\n\n  /**\n\t * Gets the tooltip position nearest of the item nearest to the event position\n\t */\n  nearest(items, eventPosition) {\n    if (!items.length) {\n      return false;\n    }\n\n    let x = eventPosition.x;\n    let y = eventPosition.y;\n    let minDistance = Number.POSITIVE_INFINITY;\n    let i, len, nearestElement;\n\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const center = el.getCenterPoint();\n        const d = distanceBetweenPoints(eventPosition, center);\n\n        if (d < minDistance) {\n          minDistance = d;\n          nearestElement = el;\n        }\n      }\n    }\n\n    if (nearestElement) {\n      const tp = nearestElement.tooltipPosition();\n      x = tp.x;\n      y = tp.y;\n    }\n\n    return {\n      x,\n      y\n    };\n  }\n};\n\n// Helper to push or concat based on if the 2nd parameter is an array or not\nfunction pushOrConcat(base, toPush) {\n  if (toPush) {\n    if (isArray(toPush)) {\n      // base = base.concat(toPush);\n      Array.prototype.push.apply(base, toPush);\n    } else {\n      base.push(toPush);\n    }\n  }\n\n  return base;\n}\n\n/**\n * Returns array of strings split by newline\n * @param {*} str - The value to split by newline.\n * @returns {string|string[]} value if newline present - Returned from String split() method\n * @function\n */\nfunction splitNewlines(str) {\n  if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n    return str.split('\\n');\n  }\n  return str;\n}\n\n\n/**\n * Private helper to create a tooltip item model\n * @param {Chart} chart\n * @param {ActiveElement} item - {element, index, datasetIndex} to create the tooltip item for\n * @return new tooltip item\n */\nfunction createTooltipItem(chart, item) {\n  const {element, datasetIndex, index} = item;\n  const controller = chart.getDatasetMeta(datasetIndex).controller;\n  const {label, value} = controller.getLabelAndValue(index);\n\n  return {\n    chart,\n    label,\n    parsed: controller.getParsed(index),\n    raw: chart.data.datasets[datasetIndex].data[index],\n    formattedValue: value,\n    dataset: controller.getDataset(),\n    dataIndex: index,\n    datasetIndex,\n    element\n  };\n}\n\n/**\n * Get the size of the tooltip\n */\nfunction getTooltipSize(tooltip, options) {\n  const ctx = tooltip.chart.ctx;\n  const {body, footer, title} = tooltip;\n  const {boxWidth, boxHeight} = options;\n  const bodyFont = toFont(options.bodyFont);\n  const titleFont = toFont(options.titleFont);\n  const footerFont = toFont(options.footerFont);\n  const titleLineCount = title.length;\n  const footerLineCount = footer.length;\n  const bodyLineItemCount = body.length;\n\n  const padding = toPadding(options.padding);\n  let height = padding.height;\n  let width = 0;\n\n  // Count of all lines in the body\n  let combinedBodyLength = body.reduce((count, bodyItem) => count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\n  combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\n\n  if (titleLineCount) {\n    height += titleLineCount * titleFont.lineHeight\n\t\t\t+ (titleLineCount - 1) * options.titleSpacing\n\t\t\t+ options.titleMarginBottom;\n  }\n  if (combinedBodyLength) {\n    // Body lines may include some extra height depending on boxHeight\n    const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\n    height += bodyLineItemCount * bodyLineHeight\n\t\t\t+ (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight\n\t\t\t+ (combinedBodyLength - 1) * options.bodySpacing;\n  }\n  if (footerLineCount) {\n    height += options.footerMarginTop\n\t\t\t+ footerLineCount * footerFont.lineHeight\n\t\t\t+ (footerLineCount - 1) * options.footerSpacing;\n  }\n\n  // Title width\n  let widthPadding = 0;\n  const maxLineWidth = function(line) {\n    width = Math.max(width, ctx.measureText(line).width + widthPadding);\n  };\n\n  ctx.save();\n\n  ctx.font = titleFont.string;\n  each(tooltip.title, maxLineWidth);\n\n  // Body width\n  ctx.font = bodyFont.string;\n  each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\n\n  // Body lines may include some extra width due to the color box\n  widthPadding = options.displayColors ? (boxWidth + 2 + options.boxPadding) : 0;\n  each(body, (bodyItem) => {\n    each(bodyItem.before, maxLineWidth);\n    each(bodyItem.lines, maxLineWidth);\n    each(bodyItem.after, maxLineWidth);\n  });\n\n  // Reset back to 0\n  widthPadding = 0;\n\n  // Footer width\n  ctx.font = footerFont.string;\n  each(tooltip.footer, maxLineWidth);\n\n  ctx.restore();\n\n  // Add padding\n  width += padding.width;\n\n  return {width, height};\n}\n\nfunction determineYAlign(chart, size) {\n  const {y, height} = size;\n\n  if (y < height / 2) {\n    return 'top';\n  } else if (y > (chart.height - height / 2)) {\n    return 'bottom';\n  }\n  return 'center';\n}\n\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\n  const {x, width} = size;\n  const caret = options.caretSize + options.caretPadding;\n  if (xAlign === 'left' && x + width + caret > chart.width) {\n    return true;\n  }\n\n  if (xAlign === 'right' && x - width - caret < 0) {\n    return true;\n  }\n}\n\nfunction determineXAlign(chart, options, size, yAlign) {\n  const {x, width} = size;\n  const {width: chartWidth, chartArea: {left, right}} = chart;\n  let xAlign = 'center';\n\n  if (yAlign === 'center') {\n    xAlign = x <= (left + right) / 2 ? 'left' : 'right';\n  } else if (x <= width / 2) {\n    xAlign = 'left';\n  } else if (x >= chartWidth - width / 2) {\n    xAlign = 'right';\n  }\n\n  if (doesNotFitWithAlign(xAlign, chart, options, size)) {\n    xAlign = 'center';\n  }\n\n  return xAlign;\n}\n\n/**\n * Helper to get the alignment of a tooltip given the size\n */\nfunction determineAlignment(chart, options, size) {\n  const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\n\n  return {\n    xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\n    yAlign\n  };\n}\n\nfunction alignX(size, xAlign) {\n  let {x, width} = size;\n  if (xAlign === 'right') {\n    x -= width;\n  } else if (xAlign === 'center') {\n    x -= (width / 2);\n  }\n  return x;\n}\n\nfunction alignY(size, yAlign, paddingAndSize) {\n  // eslint-disable-next-line prefer-const\n  let {y, height} = size;\n  if (yAlign === 'top') {\n    y += paddingAndSize;\n  } else if (yAlign === 'bottom') {\n    y -= height + paddingAndSize;\n  } else {\n    y -= (height / 2);\n  }\n  return y;\n}\n\n/**\n * Helper to get the location a tooltip needs to be placed at given the initial position (via the vm) and the size and alignment\n */\nfunction getBackgroundPoint(options, size, alignment, chart) {\n  const {caretSize, caretPadding, cornerRadius} = options;\n  const {xAlign, yAlign} = alignment;\n  const paddingAndSize = caretSize + caretPadding;\n  const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n\n  let x = alignX(size, xAlign);\n  const y = alignY(size, yAlign, paddingAndSize);\n\n  if (yAlign === 'center') {\n    if (xAlign === 'left') {\n      x += paddingAndSize;\n    } else if (xAlign === 'right') {\n      x -= paddingAndSize;\n    }\n  } else if (xAlign === 'left') {\n    x -= Math.max(topLeft, bottomLeft) + caretSize;\n  } else if (xAlign === 'right') {\n    x += Math.max(topRight, bottomRight) + caretSize;\n  }\n\n  return {\n    x: _limitValue(x, 0, chart.width - size.width),\n    y: _limitValue(y, 0, chart.height - size.height)\n  };\n}\n\nfunction getAlignedX(tooltip, align, options) {\n  const padding = toPadding(options.padding);\n\n  return align === 'center'\n    ? tooltip.x + tooltip.width / 2\n    : align === 'right'\n      ? tooltip.x + tooltip.width - padding.right\n      : tooltip.x + padding.left;\n}\n\n/**\n * Helper to build before and after body lines\n */\nfunction getBeforeAfterBodyLines(callback) {\n  return pushOrConcat([], splitNewlines(callback));\n}\n\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\n  return createContext(parent, {\n    tooltip,\n    tooltipItems,\n    type: 'tooltip'\n  });\n}\n\nfunction overrideCallbacks(callbacks, context) {\n  const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\n  return override ? callbacks.override(override) : callbacks;\n}\n\nconst defaultCallbacks = {\n  // Args are: (tooltipItems, data)\n  beforeTitle: noop,\n  title(tooltipItems) {\n    if (tooltipItems.length > 0) {\n      const item = tooltipItems[0];\n      const labels = item.chart.data.labels;\n      const labelCount = labels ? labels.length : 0;\n\n      if (this && this.options && this.options.mode === 'dataset') {\n        return item.dataset.label || '';\n      } else if (item.label) {\n        return item.label;\n      } else if (labelCount > 0 && item.dataIndex < labelCount) {\n        return labels[item.dataIndex];\n      }\n    }\n\n    return '';\n  },\n  afterTitle: noop,\n\n  // Args are: (tooltipItems, data)\n  beforeBody: noop,\n\n  // Args are: (tooltipItem, data)\n  beforeLabel: noop,\n  label(tooltipItem) {\n    if (this && this.options && this.options.mode === 'dataset') {\n      return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\n    }\n\n    let label = tooltipItem.dataset.label || '';\n\n    if (label) {\n      label += ': ';\n    }\n    const value = tooltipItem.formattedValue;\n    if (!isNullOrUndef(value)) {\n      label += value;\n    }\n    return label;\n  },\n  labelColor(tooltipItem) {\n    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n    const options = meta.controller.getStyle(tooltipItem.dataIndex);\n    return {\n      borderColor: options.borderColor,\n      backgroundColor: options.backgroundColor,\n      borderWidth: options.borderWidth,\n      borderDash: options.borderDash,\n      borderDashOffset: options.borderDashOffset,\n      borderRadius: 0,\n    };\n  },\n  labelTextColor() {\n    return this.options.bodyColor;\n  },\n  labelPointStyle(tooltipItem) {\n    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n    const options = meta.controller.getStyle(tooltipItem.dataIndex);\n    return {\n      pointStyle: options.pointStyle,\n      rotation: options.rotation,\n    };\n  },\n  afterLabel: noop,\n\n  // Args are: (tooltipItems, data)\n  afterBody: noop,\n\n  // Args are: (tooltipItems, data)\n  beforeFooter: noop,\n  footer: noop,\n  afterFooter: noop\n};\n\n/**\n * Invoke callback from object with context and arguments.\n * If callback returns `undefined`, then will be invoked default callback.\n * @param {Record<keyof typeof defaultCallbacks, Function>} callbacks\n * @param {keyof typeof defaultCallbacks} name\n * @param {*} ctx\n * @param {*} arg\n * @returns {any}\n */\nfunction invokeCallbackWithFallback(callbacks, name, ctx, arg) {\n  const result = callbacks[name].call(ctx, arg);\n\n  if (typeof result === 'undefined') {\n    return defaultCallbacks[name].call(ctx, arg);\n  }\n\n  return result;\n}\n\nexport class Tooltip extends Element {\n\n  /**\n   * @namespace Chart.Tooltip.positioners\n   */\n  static positioners = positioners;\n\n  constructor(config) {\n    super();\n\n    this.opacity = 0;\n    this._active = [];\n    this._eventPosition = undefined;\n    this._size = undefined;\n    this._cachedAnimations = undefined;\n    this._tooltipItems = [];\n    this.$animations = undefined;\n    this.$context = undefined;\n    this.chart = config.chart;\n    this.options = config.options;\n    this.dataPoints = undefined;\n    this.title = undefined;\n    this.beforeBody = undefined;\n    this.body = undefined;\n    this.afterBody = undefined;\n    this.footer = undefined;\n    this.xAlign = undefined;\n    this.yAlign = undefined;\n    this.x = undefined;\n    this.y = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this.caretX = undefined;\n    this.caretY = undefined;\n    // TODO: V4, make this private, rename to `_labelStyles`, and combine with `labelPointStyles`\n    // and `labelTextColors` to create a single variable\n    this.labelColors = undefined;\n    this.labelPointStyles = undefined;\n    this.labelTextColors = undefined;\n  }\n\n  initialize(options) {\n    this.options = options;\n    this._cachedAnimations = undefined;\n    this.$context = undefined;\n  }\n\n  /**\n\t * @private\n\t */\n  _resolveAnimations() {\n    const cached = this._cachedAnimations;\n\n    if (cached) {\n      return cached;\n    }\n\n    const chart = this.chart;\n    const options = this.options.setContext(this.getContext());\n    const opts = options.enabled && chart.options.animation && options.animations;\n    const animations = new Animations(this.chart, opts);\n    if (opts._cacheable) {\n      this._cachedAnimations = Object.freeze(animations);\n    }\n\n    return animations;\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext() {\n    return this.$context ||\n\t\t\t(this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\n  }\n\n  getTitle(context, options) {\n    const {callbacks} = options;\n\n    const beforeTitle = invokeCallbackWithFallback(callbacks, 'beforeTitle', this, context);\n    const title = invokeCallbackWithFallback(callbacks, 'title', this, context);\n    const afterTitle = invokeCallbackWithFallback(callbacks, 'afterTitle', this, context);\n\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n    lines = pushOrConcat(lines, splitNewlines(title));\n    lines = pushOrConcat(lines, splitNewlines(afterTitle));\n\n    return lines;\n  }\n\n  getBeforeBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(\n      invokeCallbackWithFallback(options.callbacks, 'beforeBody', this, tooltipItems)\n    );\n  }\n\n  getBody(tooltipItems, options) {\n    const {callbacks} = options;\n    const bodyItems = [];\n\n    each(tooltipItems, (context) => {\n      const bodyItem = {\n        before: [],\n        lines: [],\n        after: []\n      };\n      const scoped = overrideCallbacks(callbacks, context);\n      pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, 'beforeLabel', this, context)));\n      pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, 'label', this, context));\n      pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, 'afterLabel', this, context)));\n\n      bodyItems.push(bodyItem);\n    });\n\n    return bodyItems;\n  }\n\n  getAfterBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(\n      invokeCallbackWithFallback(options.callbacks, 'afterBody', this, tooltipItems)\n    );\n  }\n\n  // Get the footer and beforeFooter and afterFooter lines\n  getFooter(tooltipItems, options) {\n    const {callbacks} = options;\n\n    const beforeFooter = invokeCallbackWithFallback(callbacks, 'beforeFooter', this, tooltipItems);\n    const footer = invokeCallbackWithFallback(callbacks, 'footer', this, tooltipItems);\n    const afterFooter = invokeCallbackWithFallback(callbacks, 'afterFooter', this, tooltipItems);\n\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n    lines = pushOrConcat(lines, splitNewlines(footer));\n    lines = pushOrConcat(lines, splitNewlines(afterFooter));\n\n    return lines;\n  }\n\n  /**\n\t * @private\n\t */\n  _createItems(options) {\n    const active = this._active;\n    const data = this.chart.data;\n    const labelColors = [];\n    const labelPointStyles = [];\n    const labelTextColors = [];\n    let tooltipItems = [];\n    let i, len;\n\n    for (i = 0, len = active.length; i < len; ++i) {\n      tooltipItems.push(createTooltipItem(this.chart, active[i]));\n    }\n\n    // If the user provided a filter function, use it to modify the tooltip items\n    if (options.filter) {\n      tooltipItems = tooltipItems.filter((element, index, array) => options.filter(element, index, array, data));\n    }\n\n    // If the user provided a sorting function, use it to modify the tooltip items\n    if (options.itemSort) {\n      tooltipItems = tooltipItems.sort((a, b) => options.itemSort(a, b, data));\n    }\n\n    // Determine colors for boxes\n    each(tooltipItems, (context) => {\n      const scoped = overrideCallbacks(options.callbacks, context);\n      labelColors.push(invokeCallbackWithFallback(scoped, 'labelColor', this, context));\n      labelPointStyles.push(invokeCallbackWithFallback(scoped, 'labelPointStyle', this, context));\n      labelTextColors.push(invokeCallbackWithFallback(scoped, 'labelTextColor', this, context));\n    });\n\n    this.labelColors = labelColors;\n    this.labelPointStyles = labelPointStyles;\n    this.labelTextColors = labelTextColors;\n    this.dataPoints = tooltipItems;\n    return tooltipItems;\n  }\n\n  update(changed, replay) {\n    const options = this.options.setContext(this.getContext());\n    const active = this._active;\n    let properties;\n    let tooltipItems = [];\n\n    if (!active.length) {\n      if (this.opacity !== 0) {\n        properties = {\n          opacity: 0\n        };\n      }\n    } else {\n      const position = positioners[options.position].call(this, active, this._eventPosition);\n      tooltipItems = this._createItems(options);\n\n      this.title = this.getTitle(tooltipItems, options);\n      this.beforeBody = this.getBeforeBody(tooltipItems, options);\n      this.body = this.getBody(tooltipItems, options);\n      this.afterBody = this.getAfterBody(tooltipItems, options);\n      this.footer = this.getFooter(tooltipItems, options);\n\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, size);\n      const alignment = determineAlignment(this.chart, options, positionAndSize);\n      const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\n\n      this.xAlign = alignment.xAlign;\n      this.yAlign = alignment.yAlign;\n\n      properties = {\n        opacity: 1,\n        x: backgroundPoint.x,\n        y: backgroundPoint.y,\n        width: size.width,\n        height: size.height,\n        caretX: position.x,\n        caretY: position.y\n      };\n    }\n\n    this._tooltipItems = tooltipItems;\n    this.$context = undefined;\n\n    if (properties) {\n      this._resolveAnimations().update(this, properties);\n    }\n\n    if (changed && options.external) {\n      options.external.call(this, {chart: this.chart, tooltip: this, replay});\n    }\n  }\n\n  drawCaret(tooltipPoint, ctx, size, options) {\n    const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\n\n    ctx.lineTo(caretPosition.x1, caretPosition.y1);\n    ctx.lineTo(caretPosition.x2, caretPosition.y2);\n    ctx.lineTo(caretPosition.x3, caretPosition.y3);\n  }\n\n  getCaretPosition(tooltipPoint, size, options) {\n    const {xAlign, yAlign} = this;\n    const {caretSize, cornerRadius} = options;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n    const {x: ptX, y: ptY} = tooltipPoint;\n    const {width, height} = size;\n    let x1, x2, x3, y1, y2, y3;\n\n    if (yAlign === 'center') {\n      y2 = ptY + (height / 2);\n\n      if (xAlign === 'left') {\n        x1 = ptX;\n        x2 = x1 - caretSize;\n\n        // Left draws bottom -> top, this y1 is on the bottom\n        y1 = y2 + caretSize;\n        y3 = y2 - caretSize;\n      } else {\n        x1 = ptX + width;\n        x2 = x1 + caretSize;\n\n        // Right draws top -> bottom, thus y1 is on the top\n        y1 = y2 - caretSize;\n        y3 = y2 + caretSize;\n      }\n\n      x3 = x1;\n    } else {\n      if (xAlign === 'left') {\n        x2 = ptX + Math.max(topLeft, bottomLeft) + (caretSize);\n      } else if (xAlign === 'right') {\n        x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\n      } else {\n        x2 = this.caretX;\n      }\n\n      if (yAlign === 'top') {\n        y1 = ptY;\n        y2 = y1 - caretSize;\n\n        // Top draws left -> right, thus x1 is on the left\n        x1 = x2 - caretSize;\n        x3 = x2 + caretSize;\n      } else {\n        y1 = ptY + height;\n        y2 = y1 + caretSize;\n\n        // Bottom draws right -> left, thus x1 is on the right\n        x1 = x2 + caretSize;\n        x3 = x2 - caretSize;\n      }\n      y3 = y1;\n    }\n    return {x1, x2, x3, y1, y2, y3};\n  }\n\n  drawTitle(pt, ctx, options) {\n    const title = this.title;\n    const length = title.length;\n    let titleFont, titleSpacing, i;\n\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n      pt.x = getAlignedX(this, options.titleAlign, options);\n\n      ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\n      ctx.textBaseline = 'middle';\n\n      titleFont = toFont(options.titleFont);\n      titleSpacing = options.titleSpacing;\n\n      ctx.fillStyle = options.titleColor;\n      ctx.font = titleFont.string;\n\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\n        pt.y += titleFont.lineHeight + titleSpacing; // Line Height and spacing\n\n        if (i + 1 === length) {\n          pt.y += options.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\n        }\n      }\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _drawColorBox(ctx, pt, i, rtlHelper, options) {\n    const labelColors = this.labelColors[i];\n    const labelPointStyle = this.labelPointStyles[i];\n    const {boxHeight, boxWidth, boxPadding} = options;\n    const bodyFont = toFont(options.bodyFont);\n    const colorX = getAlignedX(this, 'left', options);\n    const rtlColorX = rtlHelper.x(colorX);\n    const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\n    const colorY = pt.y + yOffSet;\n\n    if (options.usePointStyle) {\n      const drawOptions = {\n        radius: Math.min(boxWidth, boxHeight) / 2, // fit the circle in the box\n        pointStyle: labelPointStyle.pointStyle,\n        rotation: labelPointStyle.rotation,\n        borderWidth: 1\n      };\n      // Recalculate x and y for drawPoint() because its expecting\n      // x and y to be center of figure (instead of top left)\n      const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\n      const centerY = colorY + boxHeight / 2;\n\n      // Fill the point with white so that colours merge nicely if the opacity is < 1\n      ctx.strokeStyle = options.multiKeyBackground;\n      ctx.fillStyle = options.multiKeyBackground;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n\n      // Draw the point\n      ctx.strokeStyle = labelColors.borderColor;\n      ctx.fillStyle = labelColors.backgroundColor;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n    } else {\n      // Border\n      ctx.lineWidth = isObject(labelColors.borderWidth) ? Math.max(...Object.values(labelColors.borderWidth)) : (labelColors.borderWidth || 1); // TODO, v4 remove fallback\n      ctx.strokeStyle = labelColors.borderColor;\n      ctx.setLineDash(labelColors.borderDash || []);\n      ctx.lineDashOffset = labelColors.borderDashOffset || 0;\n\n      // Fill a white rect so that colours merge nicely if the opacity is < 1\n      const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth - boxPadding);\n      const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - boxPadding - 2);\n      const borderRadius = toTRBLCorners(labelColors.borderRadius);\n\n      if (Object.values(borderRadius).some(v => v !== 0)) {\n        ctx.beginPath();\n        ctx.fillStyle = options.multiKeyBackground;\n        addRoundedRectPath(ctx, {\n          x: outerX,\n          y: colorY,\n          w: boxWidth,\n          h: boxHeight,\n          radius: borderRadius,\n        });\n        ctx.fill();\n        ctx.stroke();\n\n        // Inner square\n        ctx.fillStyle = labelColors.backgroundColor;\n        ctx.beginPath();\n        addRoundedRectPath(ctx, {\n          x: innerX,\n          y: colorY + 1,\n          w: boxWidth - 2,\n          h: boxHeight - 2,\n          radius: borderRadius,\n        });\n        ctx.fill();\n      } else {\n        // Normal rect\n        ctx.fillStyle = options.multiKeyBackground;\n        ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\n        ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\n        // Inner square\n        ctx.fillStyle = labelColors.backgroundColor;\n        ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\n      }\n    }\n\n    // restore fillStyle\n    ctx.fillStyle = this.labelTextColors[i];\n  }\n\n  drawBody(pt, ctx, options) {\n    const {body} = this;\n    const {bodySpacing, bodyAlign, displayColors, boxHeight, boxWidth, boxPadding} = options;\n    const bodyFont = toFont(options.bodyFont);\n    let bodyLineHeight = bodyFont.lineHeight;\n    let xLinePadding = 0;\n\n    const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n    const fillLineOfText = function(line) {\n      ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\n      pt.y += bodyLineHeight + bodySpacing;\n    };\n\n    const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\n    let bodyItem, textColor, lines, i, j, ilen, jlen;\n\n    ctx.textAlign = bodyAlign;\n    ctx.textBaseline = 'middle';\n    ctx.font = bodyFont.string;\n\n    pt.x = getAlignedX(this, bodyAlignForCalculation, options);\n\n    // Before body lines\n    ctx.fillStyle = options.bodyColor;\n    each(this.beforeBody, fillLineOfText);\n\n    xLinePadding = displayColors && bodyAlignForCalculation !== 'right'\n      ? bodyAlign === 'center' ? (boxWidth / 2 + boxPadding) : (boxWidth + 2 + boxPadding)\n      : 0;\n\n    // Draw body lines now\n    for (i = 0, ilen = body.length; i < ilen; ++i) {\n      bodyItem = body[i];\n      textColor = this.labelTextColors[i];\n\n      ctx.fillStyle = textColor;\n      each(bodyItem.before, fillLineOfText);\n\n      lines = bodyItem.lines;\n      // Draw Legend-like boxes if needed\n      if (displayColors && lines.length) {\n        this._drawColorBox(ctx, pt, i, rtlHelper, options);\n        bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\n      }\n\n      for (j = 0, jlen = lines.length; j < jlen; ++j) {\n        fillLineOfText(lines[j]);\n        // Reset for any lines that don't include colorbox\n        bodyLineHeight = bodyFont.lineHeight;\n      }\n\n      each(bodyItem.after, fillLineOfText);\n    }\n\n    // Reset back to 0 for after body\n    xLinePadding = 0;\n    bodyLineHeight = bodyFont.lineHeight;\n\n    // After body lines\n    each(this.afterBody, fillLineOfText);\n    pt.y -= bodySpacing; // Remove last body spacing\n  }\n\n  drawFooter(pt, ctx, options) {\n    const footer = this.footer;\n    const length = footer.length;\n    let footerFont, i;\n\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n      pt.x = getAlignedX(this, options.footerAlign, options);\n      pt.y += options.footerMarginTop;\n\n      ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\n      ctx.textBaseline = 'middle';\n\n      footerFont = toFont(options.footerFont);\n\n      ctx.fillStyle = options.footerColor;\n      ctx.font = footerFont.string;\n\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\n        pt.y += footerFont.lineHeight + options.footerSpacing;\n      }\n    }\n  }\n\n  drawBackground(pt, ctx, tooltipSize, options) {\n    const {xAlign, yAlign} = this;\n    const {x, y} = pt;\n    const {width, height} = tooltipSize;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(options.cornerRadius);\n\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n\n    ctx.beginPath();\n    ctx.moveTo(x + topLeft, y);\n    if (yAlign === 'top') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width - topRight, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\n    if (yAlign === 'center' && xAlign === 'right') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width, y + height - bottomRight);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\n    if (yAlign === 'bottom') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + bottomLeft, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\n    if (yAlign === 'center' && xAlign === 'left') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x, y + topLeft);\n    ctx.quadraticCurveTo(x, y, x + topLeft, y);\n    ctx.closePath();\n\n    ctx.fill();\n\n    if (options.borderWidth > 0) {\n      ctx.stroke();\n    }\n  }\n\n  /**\n\t * Update x/y animation targets when _active elements are animating too\n\t * @private\n\t */\n  _updateAnimationTarget(options) {\n    const chart = this.chart;\n    const anims = this.$animations;\n    const animX = anims && anims.x;\n    const animY = anims && anims.y;\n    if (animX || animY) {\n      const position = positioners[options.position].call(this, this._active, this._eventPosition);\n      if (!position) {\n        return;\n      }\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, this._size);\n      const alignment = determineAlignment(chart, options, positionAndSize);\n      const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\n      if (animX._to !== point.x || animY._to !== point.y) {\n        this.xAlign = alignment.xAlign;\n        this.yAlign = alignment.yAlign;\n        this.width = size.width;\n        this.height = size.height;\n        this.caretX = position.x;\n        this.caretY = position.y;\n        this._resolveAnimations().update(this, point);\n      }\n    }\n  }\n\n  /**\n   * Determine if the tooltip will draw anything\n   * @returns {boolean} True if the tooltip will render\n   */\n  _willRender() {\n    return !!this.opacity;\n  }\n\n  draw(ctx) {\n    const options = this.options.setContext(this.getContext());\n    let opacity = this.opacity;\n\n    if (!opacity) {\n      return;\n    }\n\n    this._updateAnimationTarget(options);\n\n    const tooltipSize = {\n      width: this.width,\n      height: this.height\n    };\n    const pt = {\n      x: this.x,\n      y: this.y\n    };\n\n    // IE11/Edge does not like very small opacities, so snap to 0\n    opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\n\n    const padding = toPadding(options.padding);\n\n    // Truthy/falsey value for empty tooltip\n    const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\n\n    if (options.enabled && hasTooltipContent) {\n      ctx.save();\n      ctx.globalAlpha = opacity;\n\n      // Draw Background\n      this.drawBackground(pt, ctx, tooltipSize, options);\n\n      overrideTextDirection(ctx, options.textDirection);\n\n      pt.y += padding.top;\n\n      // Titles\n      this.drawTitle(pt, ctx, options);\n\n      // Body\n      this.drawBody(pt, ctx, options);\n\n      // Footer\n      this.drawFooter(pt, ctx, options);\n\n      restoreTextDirection(ctx, options.textDirection);\n\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * Get active elements in the tooltip\n\t * @returns {Array} Array of elements that are active in the tooltip\n\t */\n  getActiveElements() {\n    return this._active || [];\n  }\n\n  /**\n\t * Set active elements in the tooltip\n\t * @param {array} activeElements Array of active datasetIndex/index pairs.\n\t * @param {object} eventPosition Synthetic event position used in positioning\n\t */\n  setActiveElements(activeElements, eventPosition) {\n    const lastActive = this._active;\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.chart.getDatasetMeta(datasetIndex);\n\n      if (!meta) {\n        throw new Error('Cannot find a dataset at index ' + datasetIndex);\n      }\n\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(lastActive, active);\n    const positionChanged = this._positionChanged(active, eventPosition);\n\n    if (changed || positionChanged) {\n      this._active = active;\n      this._eventPosition = eventPosition;\n      this._ignoreReplayEvents = true;\n      this.update(true);\n    }\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e - The event to handle\n\t * @param {boolean} [replay] - This is a replayed event (from update)\n\t * @param {boolean} [inChartArea] - The event is inside chartArea\n\t * @returns {boolean} true if the tooltip changed\n\t */\n  handleEvent(e, replay, inChartArea = true) {\n    if (replay && this._ignoreReplayEvents) {\n      return false;\n    }\n    this._ignoreReplayEvents = false;\n\n    const options = this.options;\n    const lastActive = this._active || [];\n    const active = this._getActiveElements(e, lastActive, replay, inChartArea);\n\n    // When there are multiple items shown, but the tooltip position is nearest mode\n    // an update may need to be made because our position may have changed even though\n    // the items are the same as before.\n    const positionChanged = this._positionChanged(active, e);\n\n    // Remember Last Actives\n    const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\n\n    // Only handle target event on tooltip change\n    if (changed) {\n      this._active = active;\n\n      if (options.enabled || options.external) {\n        this._eventPosition = {\n          x: e.x,\n          y: e.y\n        };\n\n        this.update(true, replay);\n      }\n    }\n\n    return changed;\n  }\n\n  /**\n\t * Helper for determining the active elements for event\n\t * @param {ChartEvent} e - The event to handle\n\t * @param {InteractionItem[]} lastActive - Previously active elements\n\t * @param {boolean} [replay] - This is a replayed event (from update)\n\t * @param {boolean} [inChartArea] - The event is inside chartArea\n\t * @returns {InteractionItem[]} - Active elements\n\t * @private\n\t */\n  _getActiveElements(e, lastActive, replay, inChartArea) {\n    const options = this.options;\n\n    if (e.type === 'mouseout') {\n      return [];\n    }\n\n    if (!inChartArea) {\n      // Let user control the active elements outside chartArea. Eg. using Legend.\n      return lastActive;\n    }\n\n    // Find Active Elements for tooltips\n    const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\n\n    if (options.reverse) {\n      active.reverse();\n    }\n\n    return active;\n  }\n\n  /**\n\t * Determine if the active elements + event combination changes the\n\t * tooltip position\n\t * @param {array} active - Active elements\n\t * @param {ChartEvent} e - Event that triggered the position change\n\t * @returns {boolean} True if the position has changed\n\t */\n  _positionChanged(active, e) {\n    const {caretX, caretY, options} = this;\n    const position = positioners[options.position].call(this, active, e);\n    return position !== false && (caretX !== position.x || caretY !== position.y);\n  }\n}\n\nexport default {\n  id: 'tooltip',\n  _element: Tooltip,\n  positioners,\n\n  afterInit(chart, _args, options) {\n    if (options) {\n      chart.tooltip = new Tooltip({chart, options});\n    }\n  },\n\n  beforeUpdate(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n\n  reset(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n\n  afterDraw(chart) {\n    const tooltip = chart.tooltip;\n\n    if (tooltip && tooltip._willRender()) {\n      const args = {\n        tooltip\n      };\n\n      if (chart.notifyPlugins('beforeTooltipDraw', {...args, cancelable: true}) === false) {\n        return;\n      }\n\n      tooltip.draw(chart.ctx);\n\n      chart.notifyPlugins('afterTooltipDraw', args);\n    }\n  },\n\n  afterEvent(chart, args) {\n    if (chart.tooltip) {\n      // If the event is replayed from `update`, we should evaluate with the final positions.\n      const useFinalPosition = args.replay;\n      if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\n        // notify chart about the change, so it will render\n        args.changed = true;\n      }\n    }\n  },\n\n  defaults: {\n    enabled: true,\n    external: null,\n    position: 'average',\n    backgroundColor: 'rgba(0,0,0,0.8)',\n    titleColor: '#fff',\n    titleFont: {\n      weight: 'bold',\n    },\n    titleSpacing: 2,\n    titleMarginBottom: 6,\n    titleAlign: 'left',\n    bodyColor: '#fff',\n    bodySpacing: 2,\n    bodyFont: {\n    },\n    bodyAlign: 'left',\n    footerColor: '#fff',\n    footerSpacing: 2,\n    footerMarginTop: 6,\n    footerFont: {\n      weight: 'bold',\n    },\n    footerAlign: 'left',\n    padding: 6,\n    caretPadding: 2,\n    caretSize: 5,\n    cornerRadius: 6,\n    boxHeight: (ctx, opts) => opts.bodyFont.size,\n    boxWidth: (ctx, opts) => opts.bodyFont.size,\n    multiKeyBackground: '#fff',\n    displayColors: true,\n    boxPadding: 0,\n    borderColor: 'rgba(0,0,0,0)',\n    borderWidth: 0,\n    animation: {\n      duration: 400,\n      easing: 'easeOutQuart',\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'width', 'height', 'caretX', 'caretY'],\n      },\n      opacity: {\n        easing: 'linear',\n        duration: 200\n      }\n    },\n    callbacks: defaultCallbacks\n  },\n\n  defaultRoutes: {\n    bodyFont: 'font',\n    footerFont: 'font',\n    titleFont: 'font'\n  },\n\n  descriptors: {\n    _scriptable: (name) => name !== 'filter' && name !== 'itemSort' && name !== 'external',\n    _indexable: false,\n    callbacks: {\n      _scriptable: false,\n      _indexable: false,\n    },\n    animation: {\n      _fallback: false\n    },\n    animations: {\n      _fallback: 'animation'\n    }\n  },\n\n  // Resolve additionally from `interaction` options and defaults.\n  additionalOptionScopes: ['interaction']\n};\n","import Scale from '../core/core.scale.js';\nimport {isNullOrUndef, valueOrDefault, _limitValue} from '../helpers/index.js';\n\nconst addIfString = (labels, raw, index, addedLabels) => {\n  if (typeof raw === 'string') {\n    index = labels.push(raw) - 1;\n    addedLabels.unshift({index, label: raw});\n  } else if (isNaN(raw)) {\n    index = null;\n  }\n  return index;\n};\n\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\n  const first = labels.indexOf(raw);\n  if (first === -1) {\n    return addIfString(labels, raw, index, addedLabels);\n  }\n  const last = labels.lastIndexOf(raw);\n  return first !== last ? index : first;\n}\n\nconst validIndex = (index, max) => index === null ? null : _limitValue(Math.round(index), 0, max);\n\nfunction _getLabelForValue(value) {\n  const labels = this.getLabels();\n\n  if (value >= 0 && value < labels.length) {\n    return labels[value];\n  }\n  return value;\n}\n\nexport default class CategoryScale extends Scale {\n\n  static id = 'category';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: _getLabelForValue\n    }\n  };\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this._startValue = undefined;\n    this._valueRange = 0;\n    this._addedLabels = [];\n  }\n\n  init(scaleOptions) {\n    const added = this._addedLabels;\n    if (added.length) {\n      const labels = this.getLabels();\n      for (const {index, label} of added) {\n        if (labels[index] === label) {\n          labels.splice(index, 1);\n        }\n      }\n      this._addedLabels = [];\n    }\n    super.init(scaleOptions);\n  }\n\n  parse(raw, index) {\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    const labels = this.getLabels();\n    index = isFinite(index) && labels[index] === raw ? index\n      : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\n    return validIndex(index, labels.length - 1);\n  }\n\n  determineDataLimits() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this.getMinMax(true);\n\n    if (this.options.bounds === 'ticks') {\n      if (!minDefined) {\n        min = 0;\n      }\n      if (!maxDefined) {\n        max = this.getLabels().length - 1;\n      }\n    }\n\n    this.min = min;\n    this.max = max;\n  }\n\n  buildTicks() {\n    const min = this.min;\n    const max = this.max;\n    const offset = this.options.offset;\n    const ticks = [];\n    let labels = this.getLabels();\n\n    // If we are viewing some subset of labels, slice the original array\n    labels = (min === 0 && max === labels.length - 1) ? labels : labels.slice(min, max + 1);\n\n    this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\n    this._startValue = this.min - (offset ? 0.5 : 0);\n\n    for (let value = min; value <= max; value++) {\n      ticks.push({value});\n    }\n    return ticks;\n  }\n\n  getLabelForValue(value) {\n    return _getLabelForValue.call(this, value);\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    super.configure();\n\n    if (!this.isHorizontal()) {\n      // For backward compatibility, vertical category scale reverse is inverted.\n      this._reversePixels = !this._reversePixels;\n    }\n  }\n\n  // Used to get data value locations. Value can either be an index or a numerical value\n  getPixelForValue(value) {\n    if (typeof value !== 'number') {\n      value = this.parse(value);\n    }\n\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n\n  // Must override base implementation because it calls getPixelForValue\n  // and category scale can have duplicate values\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n\n  getValueForPixel(pixel) {\n    return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\n  }\n\n  getBasePixel() {\n    return this.bottom;\n  }\n}\n","import {isNullOrUndef} from '../helpers/helpers.core.js';\nimport {almostEquals, almostWhole, niceNum, _decimalPlaces, _setMinAndMaxByKey, sign, toRadians} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\n\n/**\n * Generate a set of linear ticks for an axis\n * 1. If generationOptions.min, generationOptions.max, and generationOptions.step are defined:\n *    if (max - min) / step is an integer, ticks are generated as [min, min + step, ..., max]\n *    Note that the generationOptions.maxCount setting is respected in this scenario\n *\n * 2. If generationOptions.min, generationOptions.max, and generationOptions.count is defined\n *    spacing = (max - min) / count\n *    Ticks are generated as [min, min + spacing, ..., max]\n *\n * 3. If generationOptions.count is defined\n *    spacing = (niceMax - niceMin) / count\n *\n * 4. Compute optimal spacing of ticks using niceNum algorithm\n *\n * @param generationOptions the options used to generate the ticks\n * @param dataRange the range of the data\n * @returns {object[]} array of tick objects\n */\nfunction generateTicks(generationOptions, dataRange) {\n  const ticks = [];\n  // To get a \"nice\" value for the tick spacing, we will use the appropriately named\n  // \"nice number\" algorithm. See https://stackoverflow.com/questions/8506881/nice-label-algorithm-for-charts-with-minimum-ticks\n  // for details.\n\n  const MIN_SPACING = 1e-14;\n  const {bounds, step, min, max, precision, count, maxTicks, maxDigits, includeBounds} = generationOptions;\n  const unit = step || 1;\n  const maxSpaces = maxTicks - 1;\n  const {min: rmin, max: rmax} = dataRange;\n  const minDefined = !isNullOrUndef(min);\n  const maxDefined = !isNullOrUndef(max);\n  const countDefined = !isNullOrUndef(count);\n  const minSpacing = (rmax - rmin) / (maxDigits + 1);\n  let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\n  let factor, niceMin, niceMax, numSpaces;\n\n  // Beyond MIN_SPACING floating point numbers being to lose precision\n  // such that we can't do the math necessary to generate ticks\n  if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\n    return [{value: rmin}, {value: rmax}];\n  }\n\n  numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\n  if (numSpaces > maxSpaces) {\n    // If the calculated num of spaces exceeds maxNumSpaces, recalculate it\n    spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\n  }\n\n  if (!isNullOrUndef(precision)) {\n    // If the user specified a precision, round to that number of decimal places\n    factor = Math.pow(10, precision);\n    spacing = Math.ceil(spacing * factor) / factor;\n  }\n\n  if (bounds === 'ticks') {\n    niceMin = Math.floor(rmin / spacing) * spacing;\n    niceMax = Math.ceil(rmax / spacing) * spacing;\n  } else {\n    niceMin = rmin;\n    niceMax = rmax;\n  }\n\n  if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\n    // Case 1: If min, max and stepSize are set and they make an evenly spaced scale use it.\n    // spacing = step;\n    // numSpaces = (max - min) / spacing;\n    // Note that we round here to handle the case where almostWhole translated an FP error\n    numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\n    spacing = (max - min) / numSpaces;\n    niceMin = min;\n    niceMax = max;\n  } else if (countDefined) {\n    // Cases 2 & 3, we have a count specified. Handle optional user defined edges to the range.\n    // Sometimes these are no-ops, but it makes the code a lot clearer\n    // and when a user defined range is specified, we want the correct ticks\n    niceMin = minDefined ? min : niceMin;\n    niceMax = maxDefined ? max : niceMax;\n    numSpaces = count - 1;\n    spacing = (niceMax - niceMin) / numSpaces;\n  } else {\n    // Case 4\n    numSpaces = (niceMax - niceMin) / spacing;\n\n    // If very close to our rounded value, use it.\n    if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n      numSpaces = Math.round(numSpaces);\n    } else {\n      numSpaces = Math.ceil(numSpaces);\n    }\n  }\n\n  // The spacing will have changed in cases 1, 2, and 3 so the factor cannot be computed\n  // until this point\n  const decimalPlaces = Math.max(\n    _decimalPlaces(spacing),\n    _decimalPlaces(niceMin)\n  );\n  factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\n  niceMin = Math.round(niceMin * factor) / factor;\n  niceMax = Math.round(niceMax * factor) / factor;\n\n  let j = 0;\n  if (minDefined) {\n    if (includeBounds && niceMin !== min) {\n      ticks.push({value: min});\n\n      if (niceMin < min) {\n        j++; // Skip niceMin\n      }\n      // If the next nice tick is close to min, skip it\n      if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\n        j++;\n      }\n    } else if (niceMin < min) {\n      j++;\n    }\n  }\n\n  for (; j < numSpaces; ++j) {\n    ticks.push({value: Math.round((niceMin + j * spacing) * factor) / factor});\n  }\n\n  if (maxDefined && includeBounds && niceMax !== max) {\n    // If the previous tick is too close to max, replace it with max, else add max\n    if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\n      ticks[ticks.length - 1].value = max;\n    } else {\n      ticks.push({value: max});\n    }\n  } else if (!maxDefined || niceMax === max) {\n    ticks.push({value: niceMax});\n  }\n\n  return ticks;\n}\n\nfunction relativeLabelSize(value, minSpacing, {horizontal, minRotation}) {\n  const rad = toRadians(minRotation);\n  const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\n  const length = 0.75 * minSpacing * ('' + value).length;\n  return Math.min(minSpacing / ratio, length);\n}\n\nexport default class LinearScaleBase extends Scale {\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.start = undefined;\n    /** @type {number} */\n    this.end = undefined;\n    /** @type {number} */\n    this._startValue = undefined;\n    /** @type {number} */\n    this._endValue = undefined;\n    this._valueRange = 0;\n  }\n\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\n      return null;\n    }\n\n    return +raw;\n  }\n\n  handleTickRangeOptions() {\n    const {beginAtZero} = this.options;\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this;\n\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n\n    if (beginAtZero) {\n      const minSign = sign(min);\n      const maxSign = sign(max);\n\n      if (minSign < 0 && maxSign < 0) {\n        setMax(0);\n      } else if (minSign > 0 && maxSign > 0) {\n        setMin(0);\n      }\n    }\n\n    if (min === max) {\n      let offset = max === 0 ? 1 : Math.abs(max * 0.05);\n\n      setMax(max + offset);\n\n      if (!beginAtZero) {\n        setMin(min - offset);\n      }\n    }\n    this.min = min;\n    this.max = max;\n  }\n\n  getTickLimit() {\n    const tickOpts = this.options.ticks;\n    // eslint-disable-next-line prefer-const\n    let {maxTicksLimit, stepSize} = tickOpts;\n    let maxTicks;\n\n    if (stepSize) {\n      maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\n      if (maxTicks > 1000) {\n        console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\n        maxTicks = 1000;\n      }\n    } else {\n      maxTicks = this.computeTickLimit();\n      maxTicksLimit = maxTicksLimit || 11;\n    }\n\n    if (maxTicksLimit) {\n      maxTicks = Math.min(maxTicksLimit, maxTicks);\n    }\n\n    return maxTicks;\n  }\n\n  /**\n\t * @protected\n\t */\n  computeTickLimit() {\n    return Number.POSITIVE_INFINITY;\n  }\n\n  buildTicks() {\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n\n    // Figure out what the max number of ticks we can support it is based on the size of\n    // the axis area. For now, we say that the minimum tick spacing in pixels must be 40\n    // We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\n    // the graph. Make sure we always have at least 2 ticks\n    let maxTicks = this.getTickLimit();\n    maxTicks = Math.max(2, maxTicks);\n\n    const numericGeneratorOptions = {\n      maxTicks,\n      bounds: opts.bounds,\n      min: opts.min,\n      max: opts.max,\n      precision: tickOpts.precision,\n      step: tickOpts.stepSize,\n      count: tickOpts.count,\n      maxDigits: this._maxDigits(),\n      horizontal: this.isHorizontal(),\n      minRotation: tickOpts.minRotation || 0,\n      includeBounds: tickOpts.includeBounds !== false\n    };\n    const dataRange = this._range || this;\n    const ticks = generateTicks(numericGeneratorOptions, dataRange);\n\n    // At this point, we need to update our max and min given the tick values,\n    // since we probably have expanded the range of the scale\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n\n    if (opts.reverse) {\n      ticks.reverse();\n\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n\n    return ticks;\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    const ticks = this.ticks;\n    let start = this.min;\n    let end = this.max;\n\n    super.configure();\n\n    if (this.options.offset && ticks.length) {\n      const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\n      start -= offset;\n      end += offset;\n    }\n    this._startValue = start;\n    this._endValue = end;\n    this._valueRange = end - start;\n  }\n\n  getLabelForValue(value) {\n    return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n}\n","import {isFinite} from '../helpers/helpers.core.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\nimport {toRadians} from '../helpers/index.js';\n\nexport default class LinearScale extends LinearScaleBase {\n\n  static id = 'linear';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: Ticks.formatters.numeric\n    }\n  };\n\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n\n    this.min = isFinite(min) ? min : 0;\n    this.max = isFinite(max) ? max : 1;\n\n    // Common base implementation to handle min, max, beginAtZero\n    this.handleTickRangeOptions();\n  }\n\n  /**\n\t * Returns the maximum number of ticks based on the scale dimension\n\t * @protected\n \t */\n  computeTickLimit() {\n    const horizontal = this.isHorizontal();\n    const length = horizontal ? this.width : this.height;\n    const minRotation = toRadians(this.options.ticks.minRotation);\n    const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\n    const tickFont = this._resolveTickFontOptions(0);\n    return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\n  }\n\n  // Utils\n  getPixelForValue(value) {\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n\n  getValueForPixel(pixel) {\n    return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\n  }\n}\n","import {finiteOrDefault, isFinite} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {_setMinAndMaxByKey, log10} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\n\nconst log10Floor = v => Math.floor(log10(v));\nconst changeExponent = (v, m) => Math.pow(10, log10Floor(v) + m);\n\nfunction isMajor(tickVal) {\n  const remain = tickVal / (Math.pow(10, log10Floor(tickVal)));\n  return remain === 1;\n}\n\nfunction steps(min, max, rangeExp) {\n  const rangeStep = Math.pow(10, rangeExp);\n  const start = Math.floor(min / rangeStep);\n  const end = Math.ceil(max / rangeStep);\n  return end - start;\n}\n\nfunction startExp(min, max) {\n  const range = max - min;\n  let rangeExp = log10Floor(range);\n  while (steps(min, max, rangeExp) > 10) {\n    rangeExp++;\n  }\n  while (steps(min, max, rangeExp) < 10) {\n    rangeExp--;\n  }\n  return Math.min(rangeExp, log10Floor(min));\n}\n\n\n/**\n * Generate a set of logarithmic ticks\n * @param generationOptions the options used to generate the ticks\n * @param dataRange the range of the data\n * @returns {object[]} array of tick objects\n */\nfunction generateTicks(generationOptions, {min, max}) {\n  min = finiteOrDefault(generationOptions.min, min);\n  const ticks = [];\n  const minExp = log10Floor(min);\n  let exp = startExp(min, max);\n  let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\n  const stepSize = Math.pow(10, exp);\n  const base = minExp > exp ? Math.pow(10, minExp) : 0;\n  const start = Math.round((min - base) * precision) / precision;\n  const offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;\n  let significand = Math.floor((start - offset) / Math.pow(10, exp));\n  let value = finiteOrDefault(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);\n  while (value < max) {\n    ticks.push({value, major: isMajor(value), significand});\n    if (significand >= 10) {\n      significand = significand < 15 ? 15 : 20;\n    } else {\n      significand++;\n    }\n    if (significand >= 20) {\n      exp++;\n      significand = 2;\n      precision = exp >= 0 ? 1 : precision;\n    }\n    value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;\n  }\n  const lastTick = finiteOrDefault(generationOptions.max, value);\n  ticks.push({value: lastTick, major: isMajor(lastTick), significand});\n\n  return ticks;\n}\n\nexport default class LogarithmicScale extends Scale {\n\n  static id = 'logarithmic';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: Ticks.formatters.logarithmic,\n      major: {\n        enabled: true\n      }\n    }\n  };\n\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.start = undefined;\n    /** @type {number} */\n    this.end = undefined;\n    /** @type {number} */\n    this._startValue = undefined;\n    this._valueRange = 0;\n  }\n\n  parse(raw, index) {\n    const value = LinearScaleBase.prototype.parse.apply(this, [raw, index]);\n    if (value === 0) {\n      this._zero = true;\n      return undefined;\n    }\n    return isFinite(value) && value > 0 ? value : null;\n  }\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n\n    this.min = isFinite(min) ? Math.max(0, min) : null;\n    this.max = isFinite(max) ? Math.max(0, max) : null;\n\n    if (this.options.beginAtZero) {\n      this._zero = true;\n    }\n\n    // if data has `0` in it or `beginAtZero` is true, min (non zero) value is at bottom\n    // of scale, and it does not equal suggestedMin, lower the min bound by one exp.\n    if (this._zero && this.min !== this._suggestedMin && !isFinite(this._userMin)) {\n      this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);\n    }\n\n    this.handleTickRangeOptions();\n  }\n\n  handleTickRangeOptions() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let min = this.min;\n    let max = this.max;\n\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n\n    if (min === max) {\n      if (min <= 0) { // includes null\n        setMin(1);\n        setMax(10);\n      } else {\n        setMin(changeExponent(min, -1));\n        setMax(changeExponent(max, +1));\n      }\n    }\n    if (min <= 0) {\n      setMin(changeExponent(max, -1));\n    }\n    if (max <= 0) {\n\n      setMax(changeExponent(min, +1));\n    }\n\n    this.min = min;\n    this.max = max;\n  }\n\n  buildTicks() {\n    const opts = this.options;\n\n    const generationOptions = {\n      min: this._userMin,\n      max: this._userMax\n    };\n    const ticks = generateTicks(generationOptions, this);\n\n    // At this point, we need to update our max and min given the tick values,\n    // since we probably have expanded the range of the scale\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n\n    if (opts.reverse) {\n      ticks.reverse();\n\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n\n    return ticks;\n  }\n\n  /**\n\t * @param {number} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    return value === undefined\n      ? '0'\n      : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    const start = this.min;\n\n    super.configure();\n\n    this._startValue = log10(start);\n    this._valueRange = log10(this.max) - log10(start);\n  }\n\n  getPixelForValue(value) {\n    if (value === undefined || value === 0) {\n      value = this.min;\n    }\n    if (value === null || isNaN(value)) {\n      return NaN;\n    }\n    return this.getPixelForDecimal(value === this.min\n      ? 0\n      : (log10(value) - this._startValue) / this._valueRange);\n  }\n\n  getValueForPixel(pixel) {\n    const decimal = this.getDecimalForPixel(pixel);\n    return Math.pow(10, this._startValue + decimal * this._valueRange);\n  }\n}\n","import defaults from '../core/core.defaults.js';\nimport {_longestText, addRoundedRectPath, renderText} from '../helpers/helpers.canvas.js';\nimport {HALF_PI, TAU, toDegrees, toRadians, _normalizeAngle, PI} from '../helpers/helpers.math.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\nimport {valueOrDefault, isArray, isFinite, callback as callCallback, isNullOrUndef} from '../helpers/helpers.core.js';\nimport {createContext, toFont, toPadding, toTRBLCorners} from '../helpers/helpers.options.js';\n\nfunction getTickBackdropHeight(opts) {\n  const tickOpts = opts.ticks;\n\n  if (tickOpts.display && opts.display) {\n    const padding = toPadding(tickOpts.backdropPadding);\n    return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\n  }\n  return 0;\n}\n\nfunction measureLabelSize(ctx, font, label) {\n  label = isArray(label) ? label : [label];\n  return {\n    w: _longestText(ctx, font.string, label),\n    h: label.length * font.lineHeight\n  };\n}\n\nfunction determineLimits(angle, pos, size, min, max) {\n  if (angle === min || angle === max) {\n    return {\n      start: pos - (size / 2),\n      end: pos + (size / 2)\n    };\n  } else if (angle < min || angle > max) {\n    return {\n      start: pos - size,\n      end: pos\n    };\n  }\n\n  return {\n    start: pos,\n    end: pos + size\n  };\n}\n\n/**\n * Helper function to fit a radial linear scale with point labels\n */\nfunction fitWithPointLabels(scale) {\n\n  // Right, this is really confusing and there is a lot of maths going on here\n  // The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\n  //\n  // Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\n  //\n  // Solution:\n  //\n  // We assume the radius of the polygon is half the size of the canvas at first\n  // at each index we check if the text overlaps.\n  //\n  // Where it does, we store that angle and that index.\n  //\n  // After finding the largest index and angle we calculate how much we need to remove\n  // from the shape radius to move the point inwards by that x.\n  //\n  // We average the left and right distances to get the maximum shape radius that can fit in the box\n  // along with labels.\n  //\n  // Once we have that, we can find the centre point for the chart, by taking the x text protrusion\n  // on each side, removing that from the size, halving it and adding the left x protrusion width.\n  //\n  // This will mean we have a shape fitted to the canvas, as large as it can be with the labels\n  // and position it in the most space efficient manner\n  //\n  // https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\n\n  // Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\n  // Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\n  const orig = {\n    l: scale.left + scale._padding.left,\n    r: scale.right - scale._padding.right,\n    t: scale.top + scale._padding.top,\n    b: scale.bottom - scale._padding.bottom\n  };\n  const limits = Object.assign({}, orig);\n  const labelSizes = [];\n  const padding = [];\n  const valueCount = scale._pointLabels.length;\n  const pointLabelOpts = scale.options.pointLabels;\n  const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\n\n  for (let i = 0; i < valueCount; i++) {\n    const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\n    padding[i] = opts.padding;\n    const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\n    const plFont = toFont(opts.font);\n    const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\n    labelSizes[i] = textSize;\n\n    const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\n    const angle = Math.round(toDegrees(angleRadians));\n    const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\n    const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\n    updateLimits(limits, orig, angleRadians, hLimits, vLimits);\n  }\n\n  scale.setCenterPoint(\n    orig.l - limits.l,\n    limits.r - orig.r,\n    orig.t - limits.t,\n    limits.b - orig.b\n  );\n\n  // Now that text size is determined, compute the full positions\n  scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\n}\n\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\n  const sin = Math.abs(Math.sin(angle));\n  const cos = Math.abs(Math.cos(angle));\n  let x = 0;\n  let y = 0;\n  if (hLimits.start < orig.l) {\n    x = (orig.l - hLimits.start) / sin;\n    limits.l = Math.min(limits.l, orig.l - x);\n  } else if (hLimits.end > orig.r) {\n    x = (hLimits.end - orig.r) / sin;\n    limits.r = Math.max(limits.r, orig.r + x);\n  }\n  if (vLimits.start < orig.t) {\n    y = (orig.t - vLimits.start) / cos;\n    limits.t = Math.min(limits.t, orig.t - y);\n  } else if (vLimits.end > orig.b) {\n    y = (vLimits.end - orig.b) / cos;\n    limits.b = Math.max(limits.b, orig.b + y);\n  }\n}\n\nfunction buildPointLabelItems(scale, labelSizes, padding) {\n  const items = [];\n  const valueCount = scale._pointLabels.length;\n  const opts = scale.options;\n  const extra = getTickBackdropHeight(opts) / 2;\n  const outerDistance = scale.drawingArea;\n  const additionalAngle = opts.pointLabels.centerPointLabels ? PI / valueCount : 0;\n\n  for (let i = 0; i < valueCount; i++) {\n    const pointLabelPosition = scale.getPointPosition(i, outerDistance + extra + padding[i], additionalAngle);\n    const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\n    const size = labelSizes[i];\n    const y = yForAngle(pointLabelPosition.y, size.h, angle);\n    const textAlign = getTextAlignForAngle(angle);\n    const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\n\n    items.push({\n      // Text position\n      x: pointLabelPosition.x,\n      y,\n\n      // Text rendering data\n      textAlign,\n\n      // Bounding box\n      left,\n      top: y,\n      right: left + size.w,\n      bottom: y + size.h\n    });\n  }\n  return items;\n}\n\nfunction getTextAlignForAngle(angle) {\n  if (angle === 0 || angle === 180) {\n    return 'center';\n  } else if (angle < 180) {\n    return 'left';\n  }\n\n  return 'right';\n}\n\nfunction leftForTextAlign(x, w, align) {\n  if (align === 'right') {\n    x -= w;\n  } else if (align === 'center') {\n    x -= (w / 2);\n  }\n  return x;\n}\n\nfunction yForAngle(y, h, angle) {\n  if (angle === 90 || angle === 270) {\n    y -= (h / 2);\n  } else if (angle > 270 || angle < 90) {\n    y -= h;\n  }\n  return y;\n}\n\nfunction drawPointLabels(scale, labelCount) {\n  const {ctx, options: {pointLabels}} = scale;\n\n  for (let i = labelCount - 1; i >= 0; i--) {\n    const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\n    const plFont = toFont(optsAtIndex.font);\n    const {x, y, textAlign, left, top, right, bottom} = scale._pointLabelItems[i];\n    const {backdropColor} = optsAtIndex;\n\n    if (!isNullOrUndef(backdropColor)) {\n      const borderRadius = toTRBLCorners(optsAtIndex.borderRadius);\n      const padding = toPadding(optsAtIndex.backdropPadding);\n      ctx.fillStyle = backdropColor;\n\n      const backdropLeft = left - padding.left;\n      const backdropTop = top - padding.top;\n      const backdropWidth = right - left + padding.width;\n      const backdropHeight = bottom - top + padding.height;\n\n      if (Object.values(borderRadius).some(v => v !== 0)) {\n        ctx.beginPath();\n        addRoundedRectPath(ctx, {\n          x: backdropLeft,\n          y: backdropTop,\n          w: backdropWidth,\n          h: backdropHeight,\n          radius: borderRadius,\n        });\n        ctx.fill();\n      } else {\n        ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\n      }\n    }\n\n    renderText(\n      ctx,\n      scale._pointLabels[i],\n      x,\n      y + (plFont.lineHeight / 2),\n      plFont,\n      {\n        color: optsAtIndex.color,\n        textAlign: textAlign,\n        textBaseline: 'middle'\n      }\n    );\n  }\n}\n\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\n  const {ctx} = scale;\n  if (circular) {\n    // Draw circular arcs between the points\n    ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\n  } else {\n    // Draw straight lines connecting each index\n    let pointPosition = scale.getPointPosition(0, radius);\n    ctx.moveTo(pointPosition.x, pointPosition.y);\n\n    for (let i = 1; i < labelCount; i++) {\n      pointPosition = scale.getPointPosition(i, radius);\n      ctx.lineTo(pointPosition.x, pointPosition.y);\n    }\n  }\n}\n\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {\n  const ctx = scale.ctx;\n  const circular = gridLineOpts.circular;\n\n  const {color, lineWidth} = gridLineOpts;\n\n  if ((!circular && !labelCount) || !color || !lineWidth || radius < 0) {\n    return;\n  }\n\n  ctx.save();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = lineWidth;\n  ctx.setLineDash(borderOpts.dash);\n  ctx.lineDashOffset = borderOpts.dashOffset;\n\n  ctx.beginPath();\n  pathRadiusLine(scale, radius, circular, labelCount);\n  ctx.closePath();\n  ctx.stroke();\n  ctx.restore();\n}\n\nfunction createPointLabelContext(parent, index, label) {\n  return createContext(parent, {\n    label,\n    index,\n    type: 'pointLabel'\n  });\n}\n\nexport default class RadialLinearScale extends LinearScaleBase {\n\n  static id = 'radialLinear';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    display: true,\n\n    // Boolean - Whether to animate scaling the chart from the centre\n    animate: true,\n    position: 'chartArea',\n\n    angleLines: {\n      display: true,\n      lineWidth: 1,\n      borderDash: [],\n      borderDashOffset: 0.0\n    },\n\n    grid: {\n      circular: false\n    },\n\n    startAngle: 0,\n\n    // label settings\n    ticks: {\n      // Boolean - Show a backdrop to the scale label\n      showLabelBackdrop: true,\n\n      callback: Ticks.formatters.numeric\n    },\n\n    pointLabels: {\n      backdropColor: undefined,\n\n      // Number - The backdrop padding above & below the label in pixels\n      backdropPadding: 2,\n\n      // Boolean - if true, show point labels\n      display: true,\n\n      // Number - Point label font size in pixels\n      font: {\n        size: 10\n      },\n\n      // Function - Used to convert point labels\n      callback(label) {\n        return label;\n      },\n\n      // Number - Additionl padding between scale and pointLabel\n      padding: 5,\n\n      // Boolean - if true, center point labels to slices in polar chart\n      centerPointLabels: false\n    }\n  };\n\n  static defaultRoutes = {\n    'angleLines.color': 'borderColor',\n    'pointLabels.color': 'color',\n    'ticks.color': 'color'\n  };\n\n  static descriptors = {\n    angleLines: {\n      _fallback: 'grid'\n    }\n  };\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.xCenter = undefined;\n    /** @type {number} */\n    this.yCenter = undefined;\n    /** @type {number} */\n    this.drawingArea = undefined;\n    /** @type {string[]} */\n    this._pointLabels = [];\n    this._pointLabelItems = [];\n  }\n\n  setDimensions() {\n    // Set the unconstrained dimension before label rotation\n    const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\n    const w = this.width = this.maxWidth - padding.width;\n    const h = this.height = this.maxHeight - padding.height;\n    this.xCenter = Math.floor(this.left + w / 2 + padding.left);\n    this.yCenter = Math.floor(this.top + h / 2 + padding.top);\n    this.drawingArea = Math.floor(Math.min(w, h) / 2);\n  }\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(false);\n\n    this.min = isFinite(min) && !isNaN(min) ? min : 0;\n    this.max = isFinite(max) && !isNaN(max) ? max : 0;\n\n    // Common base implementation to handle min, max, beginAtZero\n    this.handleTickRangeOptions();\n  }\n\n  /**\n\t * Returns the maximum number of ticks based on the scale dimension\n\t * @protected\n\t */\n  computeTickLimit() {\n    return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\n  }\n\n  generateTickLabels(ticks) {\n    LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\n\n    // Point labels\n    this._pointLabels = this.getLabels()\n      .map((value, index) => {\n        const label = callCallback(this.options.pointLabels.callback, [value, index], this);\n        return label || label === 0 ? label : '';\n      })\n      .filter((v, i) => this.chart.getDataVisibility(i));\n  }\n\n  fit() {\n    const opts = this.options;\n\n    if (opts.display && opts.pointLabels.display) {\n      fitWithPointLabels(this);\n    } else {\n      this.setCenterPoint(0, 0, 0, 0);\n    }\n  }\n\n  setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\n    this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\n    this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\n    this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\n  }\n\n  getIndexAngle(index) {\n    const angleMultiplier = TAU / (this._pointLabels.length || 1);\n    const startAngle = this.options.startAngle || 0;\n\n    return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\n  }\n\n  getDistanceFromCenterForValue(value) {\n    if (isNullOrUndef(value)) {\n      return NaN;\n    }\n\n    // Take into account half font size + the yPadding of the top value\n    const scalingFactor = this.drawingArea / (this.max - this.min);\n    if (this.options.reverse) {\n      return (this.max - value) * scalingFactor;\n    }\n    return (value - this.min) * scalingFactor;\n  }\n\n  getValueForDistanceFromCenter(distance) {\n    if (isNullOrUndef(distance)) {\n      return NaN;\n    }\n\n    const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\n    return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\n  }\n\n  getPointLabelContext(index) {\n    const pointLabels = this._pointLabels || [];\n\n    if (index >= 0 && index < pointLabels.length) {\n      const pointLabel = pointLabels[index];\n      return createPointLabelContext(this.getContext(), index, pointLabel);\n    }\n  }\n\n  getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\n    const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\n    return {\n      x: Math.cos(angle) * distanceFromCenter + this.xCenter,\n      y: Math.sin(angle) * distanceFromCenter + this.yCenter,\n      angle\n    };\n  }\n\n  getPointPositionForValue(index, value) {\n    return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n  }\n\n  getBasePosition(index) {\n    return this.getPointPositionForValue(index || 0, this.getBaseValue());\n  }\n\n  getPointLabelPosition(index) {\n    const {left, top, right, bottom} = this._pointLabelItems[index];\n    return {\n      left,\n      top,\n      right,\n      bottom,\n    };\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBackground() {\n    const {backgroundColor, grid: {circular}} = this.options;\n    if (backgroundColor) {\n      const ctx = this.ctx;\n      ctx.save();\n      ctx.beginPath();\n      pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\n      ctx.closePath();\n      ctx.fillStyle = backgroundColor;\n      ctx.fill();\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawGrid() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const {angleLines, grid, border} = opts;\n    const labelCount = this._pointLabels.length;\n\n    let i, offset, position;\n\n    if (opts.pointLabels.display) {\n      drawPointLabels(this, labelCount);\n    }\n\n    if (grid.display) {\n      this.ticks.forEach((tick, index) => {\n        if (index !== 0) {\n          offset = this.getDistanceFromCenterForValue(tick.value);\n          const context = this.getContext(index);\n          const optsAtIndex = grid.setContext(context);\n          const optsAtIndexBorder = border.setContext(context);\n\n          drawRadiusLine(this, optsAtIndex, offset, labelCount, optsAtIndexBorder);\n        }\n      });\n    }\n\n    if (angleLines.display) {\n      ctx.save();\n\n      for (i = labelCount - 1; i >= 0; i--) {\n        const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\n        const {color, lineWidth} = optsAtIndex;\n\n        if (!lineWidth || !color) {\n          continue;\n        }\n\n        ctx.lineWidth = lineWidth;\n        ctx.strokeStyle = color;\n\n        ctx.setLineDash(optsAtIndex.borderDash);\n        ctx.lineDashOffset = optsAtIndex.borderDashOffset;\n\n        offset = this.getDistanceFromCenterForValue(opts.ticks.reverse ? this.min : this.max);\n        position = this.getPointPosition(i, offset);\n        ctx.beginPath();\n        ctx.moveTo(this.xCenter, this.yCenter);\n        ctx.lineTo(position.x, position.y);\n        ctx.stroke();\n      }\n\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBorder() {}\n\n  /**\n\t * @protected\n\t */\n  drawLabels() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n\n    if (!tickOpts.display) {\n      return;\n    }\n\n    const startAngle = this.getIndexAngle(0);\n    let offset, width;\n\n    ctx.save();\n    ctx.translate(this.xCenter, this.yCenter);\n    ctx.rotate(startAngle);\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    this.ticks.forEach((tick, index) => {\n      if (index === 0 && !opts.reverse) {\n        return;\n      }\n\n      const optsAtIndex = tickOpts.setContext(this.getContext(index));\n      const tickFont = toFont(optsAtIndex.font);\n      offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\n\n      if (optsAtIndex.showLabelBackdrop) {\n        ctx.font = tickFont.string;\n        width = ctx.measureText(tick.label).width;\n        ctx.fillStyle = optsAtIndex.backdropColor;\n\n        const padding = toPadding(optsAtIndex.backdropPadding);\n        ctx.fillRect(\n          -width / 2 - padding.left,\n          -offset - tickFont.size / 2 - padding.top,\n          width + padding.width,\n          tickFont.size + padding.height\n        );\n      }\n\n      renderText(ctx, tick.label, 0, -offset, tickFont, {\n        color: optsAtIndex.color,\n      });\n    });\n\n    ctx.restore();\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {}\n}\n","import adapters from '../core/core.adapters.js';\nimport {callback as call, isFinite, isNullOrUndef, mergeIf, valueOrDefault} from '../helpers/helpers.core.js';\nimport {toRadians, isNumber, _limitValue} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport {_arrayUnique, _filterBetween, _lookup} from '../helpers/helpers.collection.js';\n\n/**\n * @typedef { import('../core/core.adapters.js').TimeUnit } Unit\n * @typedef {{common: boolean, size: number, steps?: number}} Interval\n * @typedef { import('../core/core.adapters.js').DateAdapter } DateAdapter\n */\n\n/**\n * @type {Object<Unit, Interval>}\n */\nconst INTERVALS = {\n  millisecond: {common: true, size: 1, steps: 1000},\n  second: {common: true, size: 1000, steps: 60},\n  minute: {common: true, size: 60000, steps: 60},\n  hour: {common: true, size: 3600000, steps: 24},\n  day: {common: true, size: 86400000, steps: 30},\n  week: {common: false, size: 604800000, steps: 4},\n  month: {common: true, size: 2.628e9, steps: 12},\n  quarter: {common: false, size: 7.884e9, steps: 4},\n  year: {common: true, size: 3.154e10}\n};\n\n/**\n * @type {Unit[]}\n */\nconst UNITS = /** @type Unit[] */ /* #__PURE__ */ (Object.keys(INTERVALS));\n\n/**\n * @param {number} a\n * @param {number} b\n */\nfunction sorter(a, b) {\n  return a - b;\n}\n\n/**\n * @param {TimeScale} scale\n * @param {*} input\n * @return {number}\n */\nfunction parse(scale, input) {\n  if (isNullOrUndef(input)) {\n    return null;\n  }\n\n  const adapter = scale._adapter;\n  const {parser, round, isoWeekday} = scale._parseOpts;\n  let value = input;\n\n  if (typeof parser === 'function') {\n    value = parser(value);\n  }\n\n  // Only parse if its not a timestamp already\n  if (!isFinite(value)) {\n    value = typeof parser === 'string'\n      ? adapter.parse(value, /** @type {Unit} */ (parser))\n      : adapter.parse(value);\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (round) {\n    value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true)\n      ? adapter.startOf(value, 'isoWeek', isoWeekday)\n      : adapter.startOf(value, round);\n  }\n\n  return +value;\n}\n\n/**\n * Figures out what unit results in an appropriate number of auto-generated ticks\n * @param {Unit} minUnit\n * @param {number} min\n * @param {number} max\n * @param {number} capacity\n * @return {object}\n */\nfunction determineUnitForAutoTicks(minUnit, min, max, capacity) {\n  const ilen = UNITS.length;\n\n  for (let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {\n    const interval = INTERVALS[UNITS[i]];\n    const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\n\n    if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\n      return UNITS[i];\n    }\n  }\n\n  return UNITS[ilen - 1];\n}\n\n/**\n * Figures out what unit to format a set of ticks with\n * @param {TimeScale} scale\n * @param {number} numTicks\n * @param {Unit} minUnit\n * @param {number} min\n * @param {number} max\n * @return {Unit}\n */\nfunction determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\n  for (let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {\n    const unit = UNITS[i];\n    if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\n      return unit;\n    }\n  }\n\n  return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\n}\n\n/**\n * @param {Unit} unit\n * @return {object}\n */\nfunction determineMajorUnit(unit) {\n  for (let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {\n    if (INTERVALS[UNITS[i]].common) {\n      return UNITS[i];\n    }\n  }\n}\n\n/**\n * @param {object} ticks\n * @param {number} time\n * @param {number[]} [timestamps] - if defined, snap to these timestamps\n */\nfunction addTick(ticks, time, timestamps) {\n  if (!timestamps) {\n    ticks[time] = true;\n  } else if (timestamps.length) {\n    const {lo, hi} = _lookup(timestamps, time);\n    const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\n    ticks[timestamp] = true;\n  }\n}\n\n/**\n * @param {TimeScale} scale\n * @param {object[]} ticks\n * @param {object} map\n * @param {Unit} majorUnit\n * @return {object[]}\n */\nfunction setMajorTicks(scale, ticks, map, majorUnit) {\n  const adapter = scale._adapter;\n  const first = +adapter.startOf(ticks[0].value, majorUnit);\n  const last = ticks[ticks.length - 1].value;\n  let major, index;\n\n  for (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {\n    index = map[major];\n    if (index >= 0) {\n      ticks[index].major = true;\n    }\n  }\n  return ticks;\n}\n\n/**\n * @param {TimeScale} scale\n * @param {number[]} values\n * @param {Unit|undefined} [majorUnit]\n * @return {object[]}\n */\nfunction ticksFromTimestamps(scale, values, majorUnit) {\n  const ticks = [];\n  /** @type {Object<number,object>} */\n  const map = {};\n  const ilen = values.length;\n  let i, value;\n\n  for (i = 0; i < ilen; ++i) {\n    value = values[i];\n    map[value] = i;\n\n    ticks.push({\n      value,\n      major: false\n    });\n  }\n\n  // We set the major ticks separately from the above loop because calling startOf for every tick\n  // is expensive when there is a large number of ticks\n  return (ilen === 0 || !majorUnit) ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\n}\n\nexport default class TimeScale extends Scale {\n\n  static id = 'time';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 2.7.0\n     */\n    bounds: 'data',\n\n    adapters: {},\n    time: {\n      parser: false, // false == a pattern string from or a custom callback that converts its argument to a timestamp\n      unit: false, // false == automatic or override with week, month, year, etc.\n      round: false, // none, or override with week, month, year, etc.\n      isoWeekday: false, // override week start day\n      minUnit: 'millisecond',\n      displayFormats: {}\n    },\n    ticks: {\n      /**\n       * Ticks generation input values:\n       * - 'auto': generates \"optimal\" ticks based on scale size and time options.\n       * - 'data': generates ticks from data (including labels from data {t|x|y} objects).\n       * - 'labels': generates ticks from user given `data.labels` values ONLY.\n       * @see https://github.com/chartjs/Chart.js/pull/4507\n       * @since 2.7.0\n       */\n      source: 'auto',\n\n      callback: false,\n\n      major: {\n        enabled: false\n      }\n    }\n  };\n\n  /**\n\t * @param {object} props\n\t */\n  constructor(props) {\n    super(props);\n\n    /** @type {{data: number[], labels: number[], all: number[]}} */\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n\n    /** @type {Unit} */\n    this._unit = 'day';\n    /** @type {Unit=} */\n    this._majorUnit = undefined;\n    this._offsets = {};\n    this._normalized = false;\n    this._parseOpts = undefined;\n  }\n\n  init(scaleOpts, opts = {}) {\n    const time = scaleOpts.time || (scaleOpts.time = {});\n    /** @type {DateAdapter} */\n    const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\n\n    adapter.init(opts);\n\n    // Backward compatibility: before introducing adapter, `displayFormats` was\n    // supposed to contain *all* unit/string pairs but this can't be resolved\n    // when loading the scale (adapters are loaded afterward), so let's populate\n    // missing formats on update\n    mergeIf(time.displayFormats, adapter.formats());\n\n    this._parseOpts = {\n      parser: time.parser,\n      round: time.round,\n      isoWeekday: time.isoWeekday\n    };\n\n    super.init(scaleOpts);\n\n    this._normalized = opts.normalized;\n  }\n\n  /**\n\t * @param {*} raw\n\t * @param {number?} [index]\n\t * @return {number}\n\t */\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    if (raw === undefined) {\n      return null;\n    }\n    return parse(this, raw);\n  }\n\n  beforeLayout() {\n    super.beforeLayout();\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n  }\n\n  determineDataLimits() {\n    const options = this.options;\n    const adapter = this._adapter;\n    const unit = options.time.unit || 'day';\n    // eslint-disable-next-line prefer-const\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n\n    /**\n\t\t * @param {object} bounds\n\t\t */\n    function _applyBounds(bounds) {\n      if (!minDefined && !isNaN(bounds.min)) {\n        min = Math.min(min, bounds.min);\n      }\n      if (!maxDefined && !isNaN(bounds.max)) {\n        max = Math.max(max, bounds.max);\n      }\n    }\n\n    // If we have user provided `min` and `max` labels / data bounds can be ignored\n    if (!minDefined || !maxDefined) {\n      // Labels are always considered, when user did not force bounds\n      _applyBounds(this._getLabelBounds());\n\n      // If `bounds` is `'ticks'` and `ticks.source` is `'labels'`,\n      // data bounds are ignored (and don't need to be determined)\n      if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\n        _applyBounds(this.getMinMax(false));\n      }\n    }\n\n    min = isFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\n    max = isFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\n\n    // Make sure that max is strictly higher than min (required by the timeseries lookup table)\n    this.min = Math.min(min, max - 1);\n    this.max = Math.max(min + 1, max);\n  }\n\n  /**\n\t * @private\n\t */\n  _getLabelBounds() {\n    const arr = this.getLabelTimestamps();\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n\n    if (arr.length) {\n      min = arr[0];\n      max = arr[arr.length - 1];\n    }\n    return {min, max};\n  }\n\n  /**\n\t * @return {object[]}\n\t */\n  buildTicks() {\n    const options = this.options;\n    const timeOpts = options.time;\n    const tickOpts = options.ticks;\n    const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\n\n    if (options.bounds === 'ticks' && timestamps.length) {\n      this.min = this._userMin || timestamps[0];\n      this.max = this._userMax || timestamps[timestamps.length - 1];\n    }\n\n    const min = this.min;\n    const max = this.max;\n\n    const ticks = _filterBetween(timestamps, min, max);\n\n    // PRIVATE\n    // determineUnitForFormatting relies on the number of ticks so we don't use it when\n    // autoSkip is enabled because we don't yet know what the final number of ticks will be\n    this._unit = timeOpts.unit || (tickOpts.autoSkip\n      ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min))\n      : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\n    this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined\n      : determineMajorUnit(this._unit);\n    this.initOffsets(timestamps);\n\n    if (options.reverse) {\n      ticks.reverse();\n    }\n\n    return ticksFromTimestamps(this, ticks, this._majorUnit);\n  }\n\n  afterAutoSkip() {\n    // Offsets for bar charts need to be handled with the auto skipped\n    // ticks. Once ticks have been skipped, we re-compute the offsets.\n    if (this.options.offsetAfterAutoskip) {\n      this.initOffsets(this.ticks.map(tick => +tick.value));\n    }\n  }\n\n  /**\n\t * Returns the start and end offsets from edges in the form of {start, end}\n\t * where each value is a relative width to the scale and ranges between 0 and 1.\n\t * They add extra margins on the both sides by scaling down the original scale.\n\t * Offsets are added when the `offset` option is true.\n\t * @param {number[]} timestamps\n\t * @protected\n\t */\n  initOffsets(timestamps = []) {\n    let start = 0;\n    let end = 0;\n    let first, last;\n\n    if (this.options.offset && timestamps.length) {\n      first = this.getDecimalForValue(timestamps[0]);\n      if (timestamps.length === 1) {\n        start = 1 - first;\n      } else {\n        start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\n      }\n      last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\n      if (timestamps.length === 1) {\n        end = last;\n      } else {\n        end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\n      }\n    }\n    const limit = timestamps.length < 3 ? 0.5 : 0.25;\n    start = _limitValue(start, 0, limit);\n    end = _limitValue(end, 0, limit);\n\n    this._offsets = {start, end, factor: 1 / (start + 1 + end)};\n  }\n\n  /**\n\t * Generates a maximum of `capacity` timestamps between min and max, rounded to the\n\t * `minor` unit using the given scale time `options`.\n\t * Important: this method can return ticks outside the min and max range, it's the\n\t * responsibility of the calling code to clamp values if needed.\n\t * @private\n\t */\n  _generate() {\n    const adapter = this._adapter;\n    const min = this.min;\n    const max = this.max;\n    const options = this.options;\n    const timeOpts = options.time;\n    // @ts-ignore\n    const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\n    const stepSize = valueOrDefault(options.ticks.stepSize, 1);\n    const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\n    const hasWeekday = isNumber(weekday) || weekday === true;\n    const ticks = {};\n    let first = min;\n    let time, count;\n\n    // For 'week' unit, handle the first day of week option\n    if (hasWeekday) {\n      first = +adapter.startOf(first, 'isoWeek', weekday);\n    }\n\n    // Align first ticks on unit\n    first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\n\n    // Prevent browser from freezing in case user options request millions of milliseconds\n    if (adapter.diff(max, min, minor) > 100000 * stepSize) {\n      throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\n    }\n\n    const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\n    for (time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++) {\n      addTick(ticks, time, timestamps);\n    }\n\n    if (time === max || options.bounds === 'ticks' || count === 1) {\n      addTick(ticks, time, timestamps);\n    }\n\n    // @ts-ignore\n    return Object.keys(ticks).sort((a, b) => a - b).map(x => +x);\n  }\n\n  /**\n\t * @param {number} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    const adapter = this._adapter;\n    const timeOpts = this.options.time;\n\n    if (timeOpts.tooltipFormat) {\n      return adapter.format(value, timeOpts.tooltipFormat);\n    }\n    return adapter.format(value, timeOpts.displayFormats.datetime);\n  }\n\n  /**\n\t * @param {number} value\n\t * @param {string|undefined} format\n\t * @return {string}\n\t */\n  format(value, format) {\n    const options = this.options;\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const fmt = format || formats[unit];\n    return this._adapter.format(value, fmt);\n  }\n\n  /**\n\t * Function to format an individual tick mark\n\t * @param {number} time\n\t * @param {number} index\n\t * @param {object[]} ticks\n\t * @param {string|undefined} [format]\n\t * @return {string}\n\t * @private\n\t */\n  _tickFormatFunction(time, index, ticks, format) {\n    const options = this.options;\n    const formatter = options.ticks.callback;\n\n    if (formatter) {\n      return call(formatter, [time, index, ticks], this);\n    }\n\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const majorUnit = this._majorUnit;\n    const minorFormat = unit && formats[unit];\n    const majorFormat = majorUnit && formats[majorUnit];\n    const tick = ticks[index];\n    const major = majorUnit && majorFormat && tick && tick.major;\n\n    return this._adapter.format(time, format || (major ? majorFormat : minorFormat));\n  }\n\n  /**\n\t * @param {object[]} ticks\n\t */\n  generateTickLabels(ticks) {\n    let i, ilen, tick;\n\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      tick.label = this._tickFormatFunction(tick.value, i, ticks);\n    }\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getDecimalForValue(value) {\n    return value === null ? NaN : (value - this.min) / (this.max - this.min);\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getPixelForValue(value) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForValue(value);\n    return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return this.min + pos * (this.max - this.min);\n  }\n\n  /**\n\t * @param {string} label\n\t * @return {{w:number, h:number}}\n\t * @private\n\t */\n  _getLabelSize(label) {\n    const ticksOpts = this.options.ticks;\n    const tickLabelWidth = this.ctx.measureText(label).width;\n    const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\n    const cosRotation = Math.cos(angle);\n    const sinRotation = Math.sin(angle);\n    const tickFontSize = this._resolveTickFontOptions(0).size;\n\n    return {\n      w: (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation),\n      h: (tickLabelWidth * sinRotation) + (tickFontSize * cosRotation)\n    };\n  }\n\n  /**\n\t * @param {number} exampleTime\n\t * @return {number}\n\t * @private\n\t */\n  _getLabelCapacity(exampleTime) {\n    const timeOpts = this.options.time;\n    const displayFormats = timeOpts.displayFormats;\n\n    // pick the longest format (milliseconds) for guestimation\n    const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\n    const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [exampleTime], this._majorUnit), format);\n    const size = this._getLabelSize(exampleLabel);\n    // subtract 1 - if offset then there's one less label than tick\n    // if not offset then one half label padding is added to each end leaving room for one less label\n    const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\n    return capacity > 0 ? capacity : 1;\n  }\n\n  /**\n\t * @protected\n\t */\n  getDataTimestamps() {\n    let timestamps = this._cache.data || [];\n    let i, ilen;\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const metas = this.getMatchingVisibleMetas();\n\n    if (this._normalized && metas.length) {\n      return (this._cache.data = metas[0].controller.getAllParsedValues(this));\n    }\n\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\n    }\n\n    return (this._cache.data = this.normalize(timestamps));\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelTimestamps() {\n    const timestamps = this._cache.labels || [];\n    let i, ilen;\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const labels = this.getLabels();\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\n      timestamps.push(parse(this, labels[i]));\n    }\n\n    return (this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps));\n  }\n\n  /**\n\t * @param {number[]} values\n\t * @protected\n\t */\n  normalize(values) {\n    // It seems to be somewhat faster to do sorting first\n    return _arrayUnique(values.sort(sorter));\n  }\n}\n","import TimeScale from './scale.time.js';\nimport {_lookupByKey} from '../helpers/helpers.collection.js';\n\n/**\n * Linearly interpolates the given source `val` using the table. If value is out of bounds, values\n * at edges are used for the interpolation.\n * @param {object} table\n * @param {number} val\n * @param {boolean} [reverse] lookup time based on position instead of vice versa\n * @return {object}\n */\nfunction interpolate(table, val, reverse) {\n  let lo = 0;\n  let hi = table.length - 1;\n  let prevSource, nextSource, prevTarget, nextTarget;\n  if (reverse) {\n    if (val >= table[lo].pos && val <= table[hi].pos) {\n      ({lo, hi} = _lookupByKey(table, 'pos', val));\n    }\n    ({pos: prevSource, time: prevTarget} = table[lo]);\n    ({pos: nextSource, time: nextTarget} = table[hi]);\n  } else {\n    if (val >= table[lo].time && val <= table[hi].time) {\n      ({lo, hi} = _lookupByKey(table, 'time', val));\n    }\n    ({time: prevSource, pos: prevTarget} = table[lo]);\n    ({time: nextSource, pos: nextTarget} = table[hi]);\n  }\n\n  const span = nextSource - prevSource;\n  return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\n}\n\nclass TimeSeriesScale extends TimeScale {\n\n  static id = 'timeseries';\n\n  /**\n   * @type {any}\n   */\n  static defaults = TimeScale.defaults;\n\n  /**\n\t * @param {object} props\n\t */\n  constructor(props) {\n    super(props);\n\n    /** @type {object[]} */\n    this._table = [];\n    /** @type {number} */\n    this._minPos = undefined;\n    /** @type {number} */\n    this._tableRange = undefined;\n  }\n\n  /**\n\t * @protected\n\t */\n  initOffsets() {\n    const timestamps = this._getTimestampsForTable();\n    const table = this._table = this.buildLookupTable(timestamps);\n    this._minPos = interpolate(table, this.min);\n    this._tableRange = interpolate(table, this.max) - this._minPos;\n    super.initOffsets(timestamps);\n  }\n\n  /**\n\t * Returns an array of {time, pos} objects used to interpolate a specific `time` or position\n\t * (`pos`) on the scale, by searching entries before and after the requested value. `pos` is\n\t * a decimal between 0 and 1: 0 being the start of the scale (left or top) and 1 the other\n\t * extremity (left + width or top + height). Note that it would be more optimized to directly\n\t * store pre-computed pixels, but the scale dimensions are not guaranteed at the time we need\n\t * to create the lookup table. The table ALWAYS contains at least two items: min and max.\n\t * @param {number[]} timestamps\n\t * @return {object[]}\n\t * @protected\n\t */\n  buildLookupTable(timestamps) {\n    const {min, max} = this;\n    const items = [];\n    const table = [];\n    let i, ilen, prev, curr, next;\n\n    for (i = 0, ilen = timestamps.length; i < ilen; ++i) {\n      curr = timestamps[i];\n      if (curr >= min && curr <= max) {\n        items.push(curr);\n      }\n    }\n\n    if (items.length < 2) {\n      // In case there is less that 2 timestamps between min and max, the scale is defined by min and max\n      return [\n        {time: min, pos: 0},\n        {time: max, pos: 1}\n      ];\n    }\n\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      next = items[i + 1];\n      prev = items[i - 1];\n      curr = items[i];\n\n      // only add points that breaks the scale linearity\n      if (Math.round((next + prev) / 2) !== curr) {\n        table.push({time: curr, pos: i / (ilen - 1)});\n      }\n    }\n    return table;\n  }\n\n  /**\n\t * Returns all timestamps\n\t * @return {number[]}\n\t * @private\n\t */\n  _getTimestampsForTable() {\n    let timestamps = this._cache.all || [];\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const data = this.getDataTimestamps();\n    const label = this.getLabelTimestamps();\n    if (data.length && label.length) {\n      // If combining labels and data (data might not contain all labels),\n      // we need to recheck uniqueness and sort\n      timestamps = this.normalize(data.concat(label));\n    } else {\n      timestamps = data.length ? data : label;\n    }\n    timestamps = this._cache.all = timestamps;\n\n    return timestamps;\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getDecimalForValue(value) {\n    return (interpolate(this._table, value) - this._minPos) / this._tableRange;\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\n  }\n}\n\nexport default TimeSeriesScale;\n","import type { MouseEvent } from 'react';\nimport type {\n  ChartType,\n  ChartData,\n  DefaultDataPoint,\n  ChartDataset,\n  ChartOptions,\n  Chart,\n} from 'chart.js';\n\nimport type { ForwardedRef } from './types.js';\n\nconst defaultDatasetIdKey = 'label';\n\nexport function reforwardRef<T>(ref: ForwardedRef<T>, value: T) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\n\nexport function setOptions<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(chart: Chart<TType, TData, TLabel>, nextOptions: ChartOptions<TType>) {\n  const options = chart.options;\n\n  if (options && nextOptions) {\n    Object.assign(options, nextOptions);\n  }\n}\n\nexport function setLabels<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextLabels: TLabel[] | undefined\n) {\n  currentData.labels = nextLabels;\n}\n\nexport function setDatasets<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextDatasets: ChartDataset<TType, TData>[],\n  datasetIdKey = defaultDatasetIdKey\n) {\n  const addedDatasets: ChartDataset<TType, TData>[] = [];\n\n  currentData.datasets = nextDatasets.map(\n    (nextDataset: Record<string, unknown>) => {\n      // given the new set, find it's current match\n      const currentDataset = currentData.datasets.find(\n        (dataset: Record<string, unknown>) =>\n          dataset[datasetIdKey] === nextDataset[datasetIdKey]\n      );\n\n      // There is no original to update, so simply add new one\n      if (\n        !currentDataset ||\n        !nextDataset.data ||\n        addedDatasets.includes(currentDataset)\n      ) {\n        return { ...nextDataset } as ChartDataset<TType, TData>;\n      }\n\n      addedDatasets.push(currentDataset);\n\n      Object.assign(currentDataset, nextDataset);\n\n      return currentDataset;\n    }\n  );\n}\n\nexport function cloneData<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(data: ChartData<TType, TData, TLabel>, datasetIdKey = defaultDatasetIdKey) {\n  const nextData: ChartData<TType, TData, TLabel> = {\n    labels: [],\n    datasets: [],\n  };\n\n  setLabels(nextData, data.labels);\n  setDatasets(nextData, data.datasets, datasetIdKey);\n\n  return nextData;\n}\n\n/**\n * Get dataset from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getDatasetAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'dataset',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get single dataset element from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'nearest',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get all dataset elements from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementsAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'index',\n    { intersect: true },\n    false\n  );\n}\n","import React, { useEffect, useRef, forwardRef } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport type { ChartType, DefaultDataPoint } from 'chart.js';\n\nimport type { ForwardedRef, ChartProps, BaseChartComponent } from './types.js';\nimport {\n  reforwardRef,\n  cloneData,\n  setOptions,\n  setLabels,\n  setDatasets,\n} from './utils.js';\n\nfunction ChartComponent<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  props: ChartProps<TType, TData, TLabel>,\n  ref: ForwardedRef<ChartJS<TType, TData, TLabel>>\n) {\n  const {\n    height = 150,\n    width = 300,\n    redraw = false,\n    datasetIdKey,\n    type,\n    data,\n    options,\n    plugins = [],\n    fallbackContent,\n    updateMode,\n    ...canvasProps\n  } = props as ChartProps;\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const chartRef = useRef<ChartJS | null>();\n\n  const renderChart = () => {\n    if (!canvasRef.current) return;\n\n    chartRef.current = new ChartJS(canvasRef.current, {\n      type,\n      data: cloneData(data, datasetIdKey),\n      options: options && { ...options },\n      plugins,\n    });\n\n    reforwardRef(ref, chartRef.current);\n  };\n\n  const destroyChart = () => {\n    reforwardRef(ref, null);\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && options) {\n      setOptions(chartRef.current, options);\n    }\n  }, [redraw, options]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current) {\n      setLabels(chartRef.current.config.data, data.labels);\n    }\n  }, [redraw, data.labels]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && data.datasets) {\n      setDatasets(chartRef.current.config.data, data.datasets, datasetIdKey);\n    }\n  }, [redraw, data.datasets]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    if (redraw) {\n      destroyChart();\n      setTimeout(renderChart);\n    } else {\n      chartRef.current.update(updateMode);\n    }\n  }, [redraw, options, data.labels, data.datasets, updateMode]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    destroyChart();\n    setTimeout(renderChart);\n  }, [type]);\n\n  useEffect(() => {\n    renderChart();\n\n    return () => destroyChart();\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      role='img'\n      height={height}\n      width={width}\n      {...canvasProps}\n    >\n      {fallbackContent}\n    </canvas>\n  );\n}\n\nexport const Chart = forwardRef(ChartComponent) as BaseChartComponent;\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","import React, { forwardRef } from 'react';\nimport {\n  Chart as ChartJS,\n  LineController,\n  BarController,\n  RadarController,\n  DoughnutController,\n  PolarAreaController,\n  BubbleController,\n  PieController,\n  ScatterController,\n} from 'chart.js';\nimport type { ChartType, ChartComponentLike } from 'chart.js';\n\nimport type {\n  ChartProps,\n  ChartJSOrUndefined,\n  TypedChartComponent,\n} from './types.js';\nimport { Chart } from './chart.js';\n\nfunction createTypedChart<T extends ChartType>(\n  type: T,\n  registerables: ChartComponentLike\n) {\n  ChartJS.register(registerables);\n\n  return forwardRef<ChartJSOrUndefined<T>, Omit<ChartProps<T>, 'type'>>(\n    (props, ref) => <Chart {...props} ref={ref} type={type} />\n  ) as TypedChartComponent<T>;\n}\n\nexport const Line = /* #__PURE__ */ createTypedChart('line', LineController);\n\nexport const Bar = /* #__PURE__ */ createTypedChart('bar', BarController);\n\nexport const Radar = /* #__PURE__ */ createTypedChart('radar', RadarController);\n\nexport const Doughnut = /* #__PURE__ */ createTypedChart(\n  'doughnut',\n  DoughnutController\n);\n\nexport const PolarArea = /* #__PURE__ */ createTypedChart(\n  'polarArea',\n  PolarAreaController\n);\n\nexport const Bubble = /* #__PURE__ */ createTypedChart(\n  'bubble',\n  BubbleController\n);\n\nexport const Pie = /* #__PURE__ */ createTypedChart('pie', PieController);\n\nexport const Scatter = /* #__PURE__ */ createTypedChart(\n  'scatter',\n  ScatterController\n);\n"],"names":["store","_origin","validateParams","publicKey","serviceID","templateID","EmailJSResponseStatus","httpResponse","this","status","text","responseText","sendPost","url","data","headers","Promise","resolve","reject","xhr","XMLHttpRequest","addEventListener","target","responseStatus","open","Object","keys","forEach","key","setRequestHeader","send","init","origin","_userID","templatePrams","uID","params","lib_version","user_id","service_id","template_id","template_params","JSON","stringify","sendForm","form","currentForm","document","querySelector","nodeName","findHTMLForm","formData","FormData","append","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","obj","nodeInterop","__esModule","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","defineProperty","getOwnPropertyDescriptor","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","WeakMap","cacheBabelInterop","cacheNodeInterop","isMergeableObject","value","isNonNullObject","stringValue","toString","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","Symbol","for","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","val","Array","isArray","defaultArrayMerge","source","concat","map","element","arrayMerge","sourceIsArray","destination","mergeObject","all","array","Error","reduce","prev","next","global","freeSelf","self","freeGlobal","Function","root","objectProto","nativeObjectToString","symToStringTag","undefined","isOwn","tag","unmasked","e","result","nullTag","undefinedTag","getRawTag","objectToString","func","transform","arg","overArg","getPrototypeOf","objectTag","funcProto","funcToString","objectCtorString","isObjectLike","baseGetTag","proto","getPrototype","Ctor","constructor","__data__","size","other","length","eq","splice","index","assocIndexOf","pop","push","ListCache","entries","clear","entry","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","type","asyncTag","funcTag","genTag","proxyTag","isObject","maskSrcKey","uid","exec","coreJsData","reIsHostCtor","reIsNative","RegExp","replace","isMasked","isFunction","test","toSource","object","getValue","baseIsNative","getNative","nativeCreate","HASH_UNDEFINED","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","Map","isKeyable","getMapData","MapCache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","LARGE_ARRAY_SIZE","pairs","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","iteratee","objValue","baseAssignValue","props","customizer","isNew","newValue","assignValue","n","argsTag","propertyIsEnumerable","isArguments","baseIsArguments","arguments","freeExports","nodeType","freeModule","module","Buffer","isBuffer","stubFalse","MAX_SAFE_INTEGER","reIsUint","typedArrayTags","isLength","freeProcess","types","binding","nodeIsTypedArray","nodeUtil","baseUnary","baseIsTypedArray","inherited","isArr","isArg","isBuff","isType","isTypedArray","skipIndexes","baseTimes","String","isIndex","isPrototype","nativeKeys","isArrayLike","arrayLikeKeys","baseKeys","copyObject","nativeKeysIn","isProto","baseKeysIn","keysIn","allocUnsafe","buffer","isDeep","slice","copy","predicate","resIndex","nativeGetSymbols","getOwnPropertySymbols","arrayFilter","symbol","stubArray","getSymbols","values","offset","arrayPush","getSymbolsIn","keysFunc","symbolsFunc","baseGetAllKeys","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","DataView","mapCtorString","promiseCtorString","setCtorString","Set","weakMapCtorString","getTag","ArrayBuffer","ctorString","input","arrayBuffer","byteLength","Uint8Array","dataView","cloneArrayBuffer","byteOffset","reFlags","regexp","lastIndex","symbolProto","symbolValueOf","valueOf","typedArray","boolTag","dateTag","numberTag","regexpTag","stringTag","symbolTag","arrayBufferTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","cloneDataView","cloneTypedArray","cloneRegExp","cloneSymbol","objectCreate","create","baseCreate","nodeIsMap","baseIsMap","nodeIsSet","baseIsSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","cloneableTags","baseClone","bitmask","stack","isFlat","isFull","initCloneArray","copyArray","isFunc","cloneBuffer","initCloneObject","copySymbolsIn","baseAssignIn","copySymbols","baseAssign","initCloneByTag","stacked","isSet","subValue","add","isMap","getAllKeysIn","getAllKeys","arrayEach","FUNC_ERROR_TEXT","memoize","resolver","TypeError","memoized","args","apply","Cache","MAX_MEMOIZE_SIZE","rePropName","reEscapeChar","memoizeCapped","string","charCodeAt","match","number","quote","subString","INFINITY","isSymbol","symbolToString","baseToString","arrayMap","toKey","stringToPath","isProduction","process","condition","message","console","warn","x","isEmptyArray","isInteger","Math","floor","Number","isString","isEmptyChildren","children","React","isPromise","then","getIn","def","p","path","toPath","setIn","res","resVal","i","pathArray","currentPath","currentObj","nextPath","setNestedObjectValues","visited","response","k","FormikContext","displayName","Provider","Consumer","useFormikContext","formik","formikReducer","state","msg","payload","touched","isEqual","errors","isSubmitting","isValidating","field","submitCount","emptyErrors","emptyTouched","useFormik","validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit","rest","initialValues","initialErrors","initialTouched","initialStatus","isMounted","fieldRegistry","current","dispatch","runValidateHandler","maybePromisedErrors","validate","actualException","runValidationSchema","validationSchema","schema","promise","validateAt","sync","context","validateData","prepareDataForValidation","abortEarly","validateYupSchema","err","name","yupError","inner","_ref5","_i","yupToFormErrors","runSingleFieldLevelValidation","runFieldLevelValidations","fieldKeysWithValidation","filter","f","fieldValidations","fieldErrorsList","curr","runAllValidations","fieldErrors","schemaErrors","validateErrors","validateFormWithHighPriority","useEventCallback","combinedErrors","resetForm","nextState","dispatchFn","onReset","maybePromisedOnReset","imperativeMethods","validateField","maybePromise","error","registerField","unregisterField","setTouched","shouldValidate","setErrors","setValues","resolvedValues","setFieldError","setFieldValue","executeChange","eventOrTextValue","maybePath","parsed","persist","currentTarget","id","checked","outerHTML","multiple","parseFloat","isNaN","currentValue","valueProp","Boolean","currentArrayOfValues","isValueInArray","indexOf","getValueForCheckbox","from","el","selected","getSelectedValues","handleChange","eventOrPath","event","setFieldTouched","executeBlur","handleBlur","eventOrString","setFormikState","stateOrCb","setStatus","setSubmitting","submitForm","isInstanceOfError","promiseOrUndefined","executeSubmit","_errors","handleSubmit","preventDefault","stopPropagation","reason","validateForm","handleReset","getFieldMeta","initialValue","initialError","getFieldHelpers","setValue","setError","getFieldProps","nameOrOptions","isAnObject","valueState","onChange","onBlur","is","as","dirty","isValid","isPlainObject","shouldClone","useIsomorphicLayoutEffect","window","createElement","fn","ref","action","_action","move","to","copyArrayLike","swap","arrayLike","indexA","indexB","a","insert","maxIndex","parseInt","max","FieldArrayInner","_this","alterTouched","alterErrors","prevState","updateErrors","updateTouched","fieldError","fieldTouched","updateArrayField","cloneDeep","arr","unshift","remove","bind","componentDidUpdate","prevProps","tmp","render","arrayHelpers","handlePush","handlePop","handleSwap","handleMove","handleInsert","handleReplace","handleUnshift","handleRemove","component","restOfFormik","reactIs","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","caller","callee","arity","MEMO_STATICS","compare","TYPE_STATICS","getStatics","isMemo","ForwardRef","Memo","getOwnPropertyNames","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","descriptor","b","c","g","h","l","m","q","r","t","v","w","y","z","u","A","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","Fragment","Lazy","Portal","Profiler","StrictMode","Suspense","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","typeOf","maxSize","_maxSize","_size","_values","SPLIT_REGEX","DIGIT_REGEX","LEAD_DIGIT_REGEX","SPEC_CHAR_REGEX","CLEAN_QUOTES_REGEX","pathCache","setCache","getCache","normalizePath","split","part","isQuoted","str","charAt","shouldBeQuoted","hasLeadingNumber","hasSpecialChars","setter","parts","len","getter","safe","join","segments","cb","thisArg","iter","idx","isBracket","keyList","hasProp","hasElementType","equal","arrA","arrB","dateA","Date","dateB","getTime","regexpA","regexpB","reWords","words","upperFirst","toUpperCase","toLowerCase","camelCase","acc","pascalCase","snakeCase","kebabCase","sentenceCase","titleCase","toposort","nodes","edges","cursor","sorted","outgoingEdges","edge","makeOutgoingEdges","nodesHash","makeNodesHash","visit","node","predecessors","nodeRep","outgoing","child","delete","uniqueNodes","errorToString","regExpToString","SYMBOL_REGEXP","printSimpleValue","quoteStrings","printNumber","toISOString","printValue","toArray","strReg","ValidationError","errorOrErrors","isError","captureStackTrace","label","assign","_","mixed","required","defined","notNull","oneOf","notOneOf","notType","originalValue","castMsg","min","matches","email","uuid","trim","lowercase","uppercase","lessThan","moreThan","positive","negative","integer","date","boolean","isValue","noUnknown","tuple","typeLen","spec","formatError","isSchema","__isYupSchema__","Condition","refs","builder","base","parent","config","otherwise","check","every","_branch","branch","prefixes","Reference","isContext","isSibling","prefix","__isYupRef","isAbsent","createValidation","panic","skipAbsent","item","isRef","createError","overrides","nextParams","invalid","ctx","handleResult","validOrError","handleError","shouldSkip","_result","OPTIONS","lastPart","lastPartDebug","_part","isTuple","innerType","fields","parentPath","ReferenceSet","description","describe","newItems","removeItems","src","seen","Schema","deps","tests","transforms","conditions","_mutate","internalTests","_whitelist","_blacklist","exclusiveTests","_typeCheck","withMutation","typeError","strip","strict","recursive","nullable","optional","coerce","s","nonNullable","meta","before","combined","mergedSpec","merge","prevSchema","_options$strict","_options$abortEarly","_options$recursive","resolvedSchema","allowOptionality","assert","_cast","formattedValue","formattedResult","rawValue","_options","prevValue","getDefault","_value","initialTests","runTests","runOptions","fired","panicOnce","nextOnce","count","nestedErrors","originalParent","testOptions","includes","_validate","validated","validateSync","defaultValue","_getDefault","isStrict","optionality","nullability","opts","isExclusive","exclusive","dep","fromOptions","enums","whiteList","valids","resolved","resolveAll","invalids","list","findIndex","method","alias","returnsTrue","MixedSchema","BooleanSchema","_raw","rEmail","rUrl","rUUID","isTrimmed","objStringTag","create$6","StringSchema","strValue","regex","excludeEmptyString","search","isNaN$1","NumberSchema","NaN","less","more","_method","avail","truncate","isoReg","invalidDate","isDate","create$4","DateSchema","timestamp","struct","numericKeys","minutesOffset","substr","UTC","parse","parseIsoDate","INVALID_DATE","param","cast","limit","prepareParam","Infinity","some","ii","_err$path","sortByKeyOrder","parseJson","deepPartial","partial","fieldSchema","setFields","nextArray","defaultSort","create$3","ObjectSchema","_sortErrors","_nodes","_excludedEdges","shape","_options$stripUnknown","stripUnknown","intermediateValue","innerOptions","__validating","isChanged","prop","exists","fieldValue","inputValue","fieldSpec","objectErrors","asNestedTest","sort","nextFields","schemaOrRef","dft","excludedEdges","excludes","addNode","depPath","reverse","sortFields","additions","picked","fromGetter","last","deepHas","noAllow","unknownKeys","known","unknown","allow","transformKeys","_innerOptions","ArraySchema","_opts","castArray","castElement","arrayErrors","_options$originalValu2","_options$originalValu","innerTypeErrors","original","rejector","TupleSchema","schemas","itemTypes","tupleErrors","itemSchema","_get","Reflect","property","receiver","round","lim","p2b","n2b","b2n","n2p","map$1","B","C","D","E","F","hex","h1","h2","isShort","alpha","HUE_RE","hsl2rgbn","hsv2rgbn","hwb2rgbn","rgb","rgb2hsl","hueValue","calln","hsl2rgb","hue","hueParse","p1","p2","hwb2rgb","hsv2rgb","names","Z","Y","X","W","V","U","T","S","R","Q","P","O","N","M","L","K","G","H","I","J","names$1","OiceXe","antiquewEte","aqua","aquamarRe","azuY","beige","bisque","black","blanKedOmond","Xe","XeviTet","bPwn","burlywood","caMtXe","KartYuse","KocTate","cSO","cSnflowerXe","cSnsilk","crimson","cyan","xXe","xcyan","xgTMnPd","xWay","xgYF","xgYy","xkhaki","xmagFta","xTivegYF","xSange","xScEd","xYd","xsOmon","xsHgYF","xUXe","xUWay","xUgYy","xQe","xviTet","dAppRk","dApskyXe","dimWay","dimgYy","dodgerXe","fiYbrick","flSOwEte","foYstWAn","fuKsia","gaRsbSo","ghostwEte","gTd","gTMnPd","Way","gYF","gYFLw","gYy","honeyMw","hotpRk","RdianYd","Rdigo","ivSy","khaki","lavFMr","lavFMrXsh","lawngYF","NmoncEffon","ZXe","ZcSO","Zcyan","ZgTMnPdLw","ZWay","ZgYF","ZgYy","ZpRk","ZsOmon","ZsHgYF","ZskyXe","ZUWay","ZUgYy","ZstAlXe","ZLw","lime","limegYF","lRF","magFta","maPon","VaquamarRe","VXe","VScEd","VpurpN","VsHgYF","VUXe","VsprRggYF","VQe","VviTetYd","midnightXe","mRtcYam","mistyPse","moccasR","navajowEte","navy","Tdlace","Tive","TivedBb","Sange","SangeYd","ScEd","pOegTMnPd","pOegYF","pOeQe","pOeviTetYd","papayawEp","pHKpuff","peru","pRk","plum","powMrXe","purpN","YbeccapurpN","Yd","Psybrown","PyOXe","saddNbPwn","sOmon","sandybPwn","sHgYF","sHshell","siFna","silver","skyXe","UXe","UWay","UgYy","snow","sprRggYF","stAlXe","tan","teO","tEstN","tomato","Qe","viTet","JHt","wEte","wEtesmoke","Lw","LwgYF","nameParse","j","ok","nk","unpacked","tkeys","unpack","transparent","RGB_RE","pow","modHSL","ratio","fromObject","functionParse","rgbParse","Color","ret","hexParse","_rgb","_valid","hexString","hslString","color","weight","w2","c1","c2","w1","rgb1","rgb2","interpolate","deg","rotate","noop","isNullOrUndef","isNumberFinite","isFinite","finiteOrDefault","valueOrDefault","toDimension","dimension","endsWith","callback","each","loopable","_elementsEqual","a0","a1","ilen","v0","v1","datasetIndex","klen","isValidKey","_merger","tval","sval","sources","merger","mergeIf","_mergerIf","keyResolvers","o","_getKeyResolver","_splitKey","resolveObjectKey","_capitalize","setsEqual","PI","TAU","PITAU","POSITIVE_INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","sign","almostEquals","epsilon","abs","niceNum","range","roundedRange","niceRange","fraction","isNumber","_setMinAndMaxByKey","toRadians","degrees","toDegrees","radians","_decimalPlaces","isFiniteNumber","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","sqrt","angle","atan2","distance","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","start","end","sameAngleIsFullCircle","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_isBetween","_lookup","table","cmp","mid","hi","lo","_lookupByKey","ti","_rlookupByKey","arrayEvents","unlistenArrayEvents","listener","stub","_chartjs","listeners","_arrayUnique","items","requestAnimFrame","requestAnimationFrame","throttled","argsToUse","ticking","_toLeftRightCenter","align","_alignStartEnd","_getStartAndCountOfVisiblePoints","points","animationsDisabled","pointCount","_sorted","iScale","_parsed","axis","getUserBounds","minDefined","maxDefined","getPixelForValue","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","xmin","xmax","ymin","ymax","changed","atEdge","elasticIn","sin","elasticOut","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","isPatternOrGradient","getHoverColor","saturate","darken","numbers","colors","intlCache","formatNumber","num","locale","cacheKey","formatter","Intl","NumberFormat","getNumberFormat","format","formatters","numeric","tickValue","ticks","notation","chart","delta","maxTick","calculateDelta","logDelta","numDecimal","minimumFractionDigits","maximumFractionDigits","logarithmic","remain","significand","descriptors","getScope","scope","Defaults","_descriptors","_appliers","animation","backgroundColor","borderColor","datasets","devicePixelRatio","platform","getDevicePixelRatio","elements","events","font","family","style","lineHeight","hover","hoverBackgroundColor","hoverBorderColor","hoverColor","indexAxis","interaction","mode","intersect","includeInvisible","maintainAspectRatio","onHover","onClick","parsing","plugins","responsive","scale","scales","showLine","drawActiveElementsOnTop","override","route","targetScope","targetName","scopeObject","targetScopeObject","privateName","defineProperties","writable","enumerable","local","appliers","_scriptable","startsWith","_indexable","_fallback","defaults","delay","duration","easing","loop","properties","active","resize","show","animations","visible","hide","autoPadding","padding","top","right","bottom","left","display","beginAtZero","bounds","grace","grid","lineWidth","drawOnChartArea","drawTicks","tickLength","tickWidth","_ctx","tickColor","border","dash","dashOffset","width","title","minRotation","maxRotation","mirror","textStrokeWidth","textStrokeColor","autoSkip","autoSkipPadding","labelOffset","Ticks","minor","major","crossAlign","showLabelBackdrop","backdropColor","backdropPadding","_measureText","gc","longest","textWidth","measureText","_longestText","arrayOfThings","garbageCollect","save","jlen","thing","nestedThing","restore","gcLen","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","clearCanvas","canvas","getContext","resetTransform","clearRect","height","drawPoint","drawPointLegend","xOffset","yOffset","cornerRadius","xOffsetW","yOffsetW","pointStyle","rotation","radius","rad","translate","drawImage","beginPath","ellipse","arc","closePath","moveTo","lineTo","SQRT1_2","rect","fill","borderWidth","stroke","_isPointInArea","point","area","margin","clipArea","clip","unclipArea","_steppedLineTo","previous","flip","midpoint","_bezierCurveTo","bezierCurveTo","cp1x","cp2x","cp1y","cp2y","renderText","line","lines","strokeWidth","strokeColor","translation","fillStyle","textAlign","textBaseline","setRenderOpts","backdrop","drawBackdrop","strokeStyle","strokeText","maxWidth","fillText","decorateText","strikethrough","underline","metrics","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","yDecoration","decorationWidth","oldColor","fillRect","addRoundedRectPath","topLeft","bottomLeft","bottomRight","topRight","LINE_HEIGHT","FONT_STYLE","toLineHeight","numberOrZero","_readValueToProps","objProps","read","toTRBL","toTRBLCorners","toPadding","toFont","fallback","toFontString","inputs","info","cacheable","createContext","parentContext","_createResolver","scopes","rootScopes","getTarget","_resolve","toStringTag","Proxy","deleteProperty","_keys","_cached","proxy","readKey","needsSubResolver","createSubResolver","_resolveWithPrefixes","_scopes","getKeysFromAllScopes","ownKeys","storage","_storage","_attachContext","subProxy","descriptorDefaults","_cacheable","_proxy","_context","_subProxy","_stack","setContext","isScriptable","_resolveScriptable","isIndexable","_resolveArray","_resolveWithContext","allKeys","configurable","scriptable","indexable","_allKeys","resolveFallback","addScopes","parentScopes","parentFallback","_rootScopes","allScopes","addScopesFromKey","_getTarget","subGetTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","_parsing","EPSILON","getPoint","skip","getValueAxis","splineCurve","firstPoint","middlePoint","afterPoint","d01","d12","s01","s12","fa","fb","splineCurveMonotone","pointBefore","pointCurrent","valueAxis","pointsLen","deltaK","mK","pointAfter","slopeDelta","alphaK","betaK","tauK","squaredMagnitude","monotoneAdjust","iPixel","vPixel","monotoneCompute","capControlPoint","pt","_updateBezierControlPoints","controlPoints","spanGaps","cubicInterpolationMode","tension","capBezierPoints","inArea","inAreaPrev","inAreaNext","_isDomSupported","_getParentNode","domNode","parentNode","host","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","ownerDocument","defaultView","positions","getPositionedStyle","styles","suffix","pos","useOffsetPos","shadowRoot","getRelativePosition","borderBox","boxSizing","paddings","borders","touches","offsetX","offsetY","box","getBoundingClientRect","clientX","clientY","getCanvasPosition","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","maxHeight","containerSize","container","containerStyle","containerBorder","containerPadding","clientWidth","clientHeight","getContainerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","setTransform","supportsEventListenerOptions","passiveSupported","passive","removeEventListener","readUsedSize","getPropertyValue","getStyle","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","getRightToLeftAdapter","rectX","setWidth","xPlus","leftForLtr","itemWidth","getLeftToRightAdapter","_itemWidth","getRtlAdapter","rtl","overrideTextDirection","direction","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","propertyFn","between","normalize","normalizeSegment","_boundSegment","segment","startBound","endBound","getSegment","inside","subStart","shouldStart","startIsBefore","shouldStop","endIsBefore","_boundSegments","sub","splitByStyles","segmentOptions","chartContext","_chart","baseStyle","readStyle","_datasetIndex","prevStyle","addStyle","st","dir","styleChanged","p0","p0DataIndex","p1DataIndex","doSplitByStyles","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","Animator","_request","_charts","_running","_lastDate","_notify","anims","callbacks","numSteps","initial","currentStep","_refresh","_update","now","remaining","running","draw","_active","_total","tick","_getAnims","charts","complete","progress","listen","cur","_duration","stop","cancel","interpolators","factor","c0","helpersColor","valid","mix","Animation","cfg","_fn","_easing","_start","_loop","_target","_prop","_from","_to","_promises","update","elapsed","wait","promises","rej","Animations","_properties","configure","animationOptions","animatedProps","option","_animateOptions","newOptions","$shared","$animations","resolveTargetOptions","_createAnimations","anim","awaitAll","animator","scaleClip","allowedOverflow","getSortedDatasetIndices","filterVisible","metasets","_getSortedDatasetMetas","applyStack","dsIndex","otherValue","singleMode","isStacked","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","vScale","getMatchingVisibleMetas","updateStacks","controller","_cachedMeta","_stacks","iAxis","vAxis","indexScale","valueScale","getStackKey","_top","_bottom","_visualValues","getFirstScaleId","shift","clearStacks","isDirectUpdateMode","cloneIfNotShared","cached","shared","DatasetController","_cachedDataOpts","getMeta","_type","_data","_objectData","_sharedOptions","_drawStart","_drawCount","enableOptionSharing","supportsDecimation","$context","_syncList","datasetElementType","dataElementType","initialize","linkScales","_stacked","addElements","isPluginEnabled","updateIndex","dataset","getDataset","chooseId","xid","xAxisID","yid","yAxisID","rid","rAxisID","iid","iAxisID","vid","vAxisID","getScaleForId","rScale","getDatasetMeta","scaleID","_getOtherScale","reset","_destroy","_dataCheck","adata","convertObjectDataToArray","isExtensible","buildOrUpdateElements","resetNewElements","stackChanged","oldStacked","_resyncElements","scopeKeys","datasetScopeKeys","getOptionScopes","createResolver","parseArrayData","parseObjectData","parsePrimitiveData","labels","getLabels","singleScale","xAxisKey","yAxisKey","getParsed","getDataElement","updateRangeFromParsed","parsedValue","getMinMax","canStack","otherScale","hidden","createStack","NEGATIVE_INFINITY","otherMin","otherMax","_skip","getAllParsedValues","getMaxOverflow","getLabelAndValue","getLabelForValue","_clip","disabled","toClip","defaultClip","chartArea","resolveDatasetElementOptions","resolveDataElementOptions","dataIndex","raw","createDataContext","createDatasetContext","_resolveElementOptions","elementType","sharing","datasetElementScopeKeys","resolveNamedOptions","freeze","_resolveAnimations","transition","datasetAnimationScopeKeys","getSharedOptions","includeOptions","sharedOptions","_animationsDisabled","_getSharedOptions","firstOpts","previouslySharedOptions","updateSharedOptions","updateElement","_setStyle","removeHoverStyle","setHoverStyle","_removeDatasetHoverStyle","_setDatasetHoverStyle","arg1","arg2","numMeta","numData","_insertElements","_removeElements","updateElements","removed","_sync","_dataChanges","_onDataPush","_onDataPop","_onDataShift","_onDataSplice","newCount","_onDataUnshift","computeMinSampleSize","_cache","$bar","visibleMetas","getAllScaleValues","_length","updateMinAndPrev","getPixelForTick","parseValue","startValue","endValue","barStart","barEnd","_custom","parseFloatBar","parseArrayOrPrimitive","isFloatBar","custom","setBorderSkipped","borderSkipped","horizontal","borderProps","enableBorderRadius","parseEdge","orig","v2","startEnd","setInflateAmount","inflateAmount","BarController","iAxisKey","vAxisKey","bars","getBasePixel","isHorizontal","ruler","_getRuler","vpixels","head","_calculateBarValuePixels","ipixels","_calculateBarIndexPixels","center","_getStacks","grouped","skipNull","_getStackCount","_getStackIndex","pixels","barThickness","_startPixel","_endPixel","stackCount","categoryPercentage","barPercentage","baseValue","minBarLength","actualBase","floating","getDataVisibility","barSign","startPixel","getPixelForDecimal","endPixel","getValueForPixel","halfGrid","getLineWidthForValue","maxBarThickness","percent","chunk","computeFlexCategoryTraits","thickness","computeFitCategoryTraits","stackIndex","rects","_index_","_value_","BubbleController","DoughnutController","innerRadius","outerRadius","_getRotation","_getCircumference","circumference","_getRotationExtents","isDatasetVisible","arcs","spacing","getMaxBorderWidth","getMaxOffset","cutout","chartWeight","_getRingWeight","ratioX","ratioY","startAngle","endAngle","startX","startY","endX","endY","calcMax","calcMin","maxX","maxY","minX","minY","getRatioAndOffset","maxRadius","radiusLength","_getVisibleDatasetWeightTotal","total","calculateTotal","_getRingWeightOffset","_circumference","animateRotate","calculateCircumference","animationOpts","centerX","centerY","animateScale","metaData","borderAlign","hoverBorderWidth","hoverOffset","ringWeightOffset","legend","generateLabels","fontColor","legendItem","toggleDataVisibility","LineController","_dataset","_decimated","animated","maxGapLength","directUpdate","pointsCount","prevParsed","nullData","lastPoint","updateControlPoints","PolarAreaController","_updateRadius","minSize","cutoutPercentage","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getIndexAngle","defaultAngle","countVisibleElements","_computeAngle","getDistanceFromCenterForValue","angleLines","circular","pointLabels","PieController","RadarController","_fullLoop","pointPosition","getPointPositionForValue","ScatterController","registry","getElement","abstract","_date","DateAdapterBase","formats","diff","startOf","endOf","members","binarySearch","metaset","lookupMethod","_reversePixels","getRange","evaluateInteractionItems","position","handler","getSortedVisibleDatasetMetas","getIntersectItems","useFinalPosition","isPointInArea","inRange","getNearestCartesianItems","distanceMetric","useX","useY","deltaX","deltaY","getDistanceMetricForAxis","minDistance","getCenterPoint","getNearestItems","getProps","getNearestRadialItems","getAxisItems","rangeMethod","intersectsItem","modes","nearest","STATIC_POSITIONS","filterByPosition","filterDynamicPositionByAxis","sortByWeight","setLayoutDims","layouts","layout","wrap","stackWeight","placed","buildStacks","vBoxMaxWidth","hBoxMaxHeight","fullSize","availableWidth","availableHeight","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","getPadding","newWidth","outerWidth","newHeight","outerHeight","widthChanged","heightChanged","same","getMargins","marginForPositions","fitBoxes","boxes","refit","refitBoxes","setBoxDims","placeBoxes","userPadding","addBox","_layers","removeBox","layoutItem","minPadding","layoutBoxes","wrapBoxes","centerHorizontal","centerVertical","leftAndTop","rightAndBottom","vertical","buildLayoutBoxes","verticalBoxes","horizontalBoxes","beforeLayout","visibleVerticalBoxCount","updatePos","change","handleMaxPadding","BasePlatform","acquireContext","releaseContext","isAttached","updateConfig","BasicPlatform","EXPANDO_KEY","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","isNullOrEmpty","eventListenerOptions","removeListener","nodeListContains","nodeList","contains","createAttachObserver","observer","MutationObserver","trigger","addedNodes","removedNodes","observe","childList","subtree","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","createResizeObserver","ResizeObserver","contentRect","listenDevicePixelRatioChanges","releaseObserver","disconnect","unlistenDevicePixelRatioChanges","createProxyAndListen","native","fromNativeEvent","addListener","DomPlatform","renderHeight","getAttribute","renderWidth","displayWidth","displayHeight","initCanvas","removeAttribute","setAttribute","proxies","$proxies","attach","detach","isConnected","tooltipPosition","hasValue","final","tickOpts","determinedMaxTicks","_tickSize","maxScale","maxChart","_maxLength","determineMaxTicks","ticksLimit","maxTicksLimit","majorIndices","enabled","getMajorIndices","numMajorIndices","first","newTicks","ceil","skipMajors","evenMajorSpacing","getEvenSpacing","factors","_factorize","calculateSpacing","avgMajorSpacing","majorStart","majorEnd","reverseAlign","offsetFromEdge","getTicksLimit","ticksLength","sample","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","lineValue","getTickMarkLength","getTitleHeight","titleAlign","Scale","_margins","paddingTop","paddingBottom","paddingLeft","paddingRight","labelRotation","_range","_gridLineItems","_labelItems","_labelSizes","_longestTextCache","_userMax","_userMin","_suggestedMax","_suggestedMin","_ticksLength","_borderValue","_dataLimitsCached","suggestedMin","suggestedMax","metas","getTicks","xLabels","yLabels","getLabelItems","_computeLabelItems","beforeUpdate","sampleSize","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","minmax","keepZero","_addGrace","beforeBuildTicks","buildTicks","afterBuildTicks","samplingEnabled","_convertTicksToLabels","beforeCalculateLabelRotation","calculateLabelRotation","afterCalculateLabelRotation","afterAutoSkip","beforeFit","fit","afterFit","afterUpdate","reversePixels","_alignToPixels","alignToPixels","_callHooks","notifyPlugins","beforeTickToLabelConversion","generateTickLabels","afterTickToLabelConversion","maxLabelDiagonal","numTicks","_isVisible","labelSizes","_getLabelSizes","maxLabelWidth","widest","maxLabelHeight","highest","asin","titleOpts","gridOpts","titleHeight","tickPadding","angleRadians","labelHeight","labelWidth","_calculatePadding","_handleMargins","isRotated","labelsBelowTicks","offsetLeft","offsetRight","isFullSize","_computeLabelSizes","tickFont","fontString","nestedLabel","caches","widths","heights","widestLabelSize","highestLabelSize","_resolveTickFontOptions","valueAt","decimal","getDecimalForPixel","getBaseValue","createTickContext","optionTicks","rot","_computeGridLineItems","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","x1","y1","x2","y2","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","positionAxisID","step","optsAtIndex","optsAtIndexBorder","lineColor","tickBorderDash","tickBorderDashOffset","lineCount","textOffset","tickAndPadding","hTickAndPadding","_getXAxisLabelAlignment","_getYAxisLabelAlignment","halfCount","tickTextAlign","labelPadding","_computeLabelArea","drawBackground","drawGrid","drawLine","setLineDash","lineDashOffset","drawBorder","lastLineWidth","drawLabels","renderTextOptions","drawTitle","titleX","titleY","titleArgs","tz","gz","bz","axisID","_maxDigits","fontSize","TypedRegistry","isForType","isPrototypeOf","register","parentScope","isIChartComponent","itemDefaults","defaultRoutes","routes","propertyParts","sourceName","sourceScope","routeDefaults","registerDefaults","unregister","Registry","controllers","_typedRegistries","_each","addControllers","addPlugins","addScales","getController","getPlugin","getScale","removeControllers","removeElements","removePlugins","removeScales","typedRegistry","reg","_getRegistryForType","_exec","itemReg","camelMethod","PluginService","_init","notify","hook","_createDescriptors","plugin","callCallback","cancelable","invalidate","_oldCache","_notifyStateChanges","localIds","allPlugins","getOpts","pluginOpts","createDescriptors","previousDescriptors","pluginScopeKeys","getIndexAxis","datasetDefaults","determineAxis","scaleOptions","initOptions","chartDefaults","configScales","chartIndexAxis","scaleConf","defaultId","getDefaultScaleIDFromAxis","defaultScaleOptions","defaultID","getAxisFromDefaultScaleID","mergeScaleConfig","initData","keyCache","keysCached","cachedKeys","generate","addIfFound","Config","_config","initConfig","_scopeCache","_resolverCache","clearCache","datasetType","additionalOptionScopes","_cachedScopes","mainScope","resetCache","keyLists","chartOptionScopes","getResolver","subPrefixes","hasFunction","needContext","resolverCache","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l1","l2","onAnimationsComplete","onComplete","onAnimationProgress","onProgress","getCanvas","getElementById","instances","getChart","moveNumericKeys","intKey","Chart","userConfig","initialCanvas","existingChart","OffscreenCanvas","_detectPlatform","_aspectRatio","_metasets","_lastEvent","_listeners","_responsiveListeners","_sortedMetasets","_plugins","_hiddenIndices","attached","_doResize","timeout","clearTimeout","setTimeout","debounce","resizeDelay","_initialize","bindEvents","_resizeBeforeDraw","_resize","newSize","newRatio","onResize","ensureScalesHaveIDs","axisOptions","buildOrUpdateScales","scaleOpts","updated","isRadial","dposition","dtype","scaleType","hasUpdated","_updateMetasets","_destroyDatasetMeta","_removeUnreferencedMetasets","buildOrUpdateControllers","newControllers","order","ControllerClass","_resetElements","animsDisabled","_updateScales","_checkEventBindings","_updateHiddenIndices","_minPadding","_updateLayout","_updateDatasets","_eventHandler","_updateHoverStyles","existingEvents","newEvents","unbindEvents","changes","_getUniformDataChanges","datasetCount","makeSet","changeSet","noArea","_idx","_updateDataset","layers","_drawDatasets","_drawDataset","useClip","getDatasetArea","getElementsAtEventForMode","Interaction","setDatasetVisibility","_updateVisibility","_stop","destroy","toBase64Image","toDataURL","bindUserEvents","bindResponsiveEvents","_add","detached","_remove","updateHoverStyle","getActiveElements","setActiveElements","activeElements","lastActive","pluginId","replay","hoverOptions","deactivated","activated","inChartArea","eventFilter","_handleEvent","_getActiveElements","isClick","_isClickEvent","lastEvent","determineLastEvent","invalidatePlugins","parseBorderRadius","angleDelta","borderRadius","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","outerStart","outerEnd","innerStart","innerEnd","rThetaToXY","theta","pathArc","pixelMargin","innerR","spacingOffset","avNogSpacingRadius","angleOffset","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","outerMidAdjustedAngle","pCenter","p4","innerMidAdjustedAngle","p8","outerStartX","outerStartY","outerEndX","outerEndY","fullCircles","lineJoin","angleMargin","clipArc","ArcElement","chartX","chartY","rAdjust","betweenAngles","withinRadius","halfAngle","halfRadius","radiusOffset","drawArc","setStyle","lineCap","pathVars","paramsStart","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","lineMethod","stepped","getLineMethod","fastPathSegment","prevX","lastY","avgX","countX","pointIndex","drawX","truncX","_getSegmentMethod","usePath2D","Path2D","_path","strokePathWithCache","segmentMethod","strokePathDirect","LineElement","_points","_segments","_pointsUpdated","findStartAndEnd","solidSegments","_computeSegments","_interpolate","_getInterpolationMethod","interpolated","hitRadius","PointElement","mouseX","mouseY","inXRange","inYRange","hoverRadius","getBarBounds","bar","half","skipOrLimit","boundingRects","maxW","maxH","parseBorderWidth","maxR","enableBorder","outer","skipX","skipY","addNormalRectPath","inflateRect","amount","refRect","BarElement","addRectPath","getBoxSize","labelOpts","boxHeight","boxWidth","usePointStyle","pointStyleWidth","itemHeight","Legend","_added","legendHitBoxes","_hoveredItem","doughnutMode","legendItems","columnSizes","lineWidths","buildLabels","labelFont","_computeTitleHeight","_fitRows","_fitCols","hitboxes","totalHeight","row","_itemHeight","heightLimit","totalWidth","currentColWidth","currentColHeight","col","legendItemText","calculateItemWidth","fontLineHeight","calculateLegendItemHeight","calculateItemHeight","calculateItemSize","adjustHitBoxes","rtlHelper","hitbox","_draw","defaultColor","halfFontSize","textDirection","lineDash","drawOptions","SQRT2","yBoxTop","xBoxLeft","drawLegendBox","_textX","titleFont","titlePadding","topPaddingPlusHalfFontSize","_getLegendItemAt","hitBox","lh","handleEvent","onLeave","isListened","hoveredItem","sameItem","_element","_args","afterEvent","ci","useBorderRadius","positioners","average","eventPosition","nearestElement","tp","pushOrConcat","toPush","splitNewlines","createTooltipItem","getTooltipSize","tooltip","body","footer","bodyFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","after","beforeBody","afterBody","titleSpacing","titleMarginBottom","displayColors","bodySpacing","footerMarginTop","footerSpacing","widthPadding","maxLineWidth","determineXAlign","yAlign","chartWidth","xAlign","caret","caretSize","caretPadding","doesNotFitWithAlign","determineAlignment","determineYAlign","getBackgroundPoint","alignment","paddingAndSize","alignX","alignY","getAlignedX","getBeforeAfterBodyLines","overrideCallbacks","defaultCallbacks","beforeTitle","tooltipItems","labelCount","afterTitle","beforeLabel","tooltipItem","labelColor","labelTextColor","bodyColor","labelPointStyle","afterLabel","beforeFooter","afterFooter","invokeCallbackWithFallback","Tooltip","opacity","_eventPosition","_cachedAnimations","_tooltipItems","dataPoints","caretX","caretY","labelColors","labelPointStyles","labelTextColors","getTitle","getBeforeBody","getBody","bodyItems","scoped","getAfterBody","getFooter","_createItems","itemSort","positionAndSize","backgroundPoint","external","drawCaret","tooltipPoint","caretPosition","getCaretPosition","x3","y3","ptX","ptY","titleColor","_drawColorBox","colorX","rtlColorX","yOffSet","colorY","multiKeyBackground","outerX","innerX","strokeRect","drawBody","textColor","bodyAlign","bodyLineHeight","xLinePadding","fillLineOfText","bodyAlignForCalculation","drawFooter","footerAlign","footerColor","tooltipSize","quadraticCurveTo","_updateAnimationTarget","animX","animY","_willRender","hasTooltipContent","globalAlpha","positionChanged","_positionChanged","_ignoreReplayEvents","afterInit","afterDraw","addIfString","addedLabels","_getLabelForValue","CategoryScale","_startValue","_valueRange","_addedLabels","added","lastIndexOf","findOrAddLabel","generateTicks","generationOptions","dataRange","niceMin","niceMax","numSpaces","precision","maxTicks","maxDigits","includeBounds","unit","maxSpaces","rmin","rmax","countDefined","minSpacing","rounded","almostWhole","decimalPlaces","relativeLabelSize","LinearScaleBase","_endValue","handleTickRangeOptions","setMin","setMax","minSign","maxSign","getTickLimit","stepSize","computeTickLimit","LinearScale","log10Floor","changeExponent","isMajor","tickVal","steps","rangeExp","rangeStep","minExp","exp","startExp","lastTick","LogarithmicScale","_zero","getTickBackdropHeight","determineLimits","fitWithPointLabels","_padding","limits","valueCount","_pointLabels","pointLabelOpts","additionalAngle","centerPointLabels","getPointLabelContext","getPointPosition","drawingArea","plFont","textSize","updateLimits","setCenterPoint","_pointLabelItems","extra","outerDistance","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","buildPointLabelItems","hLimits","vLimits","pathRadiusLine","RadialLinearScale","leftMovement","rightMovement","topMovement","bottomMovement","scalingFactor","getValueForDistanceFromCenter","scaledDistance","pointLabel","createPointLabelContext","distanceFromCenter","getBasePosition","getPointLabelPosition","backdropLeft","backdropTop","backdropWidth","backdropHeight","drawPointLabels","gridLineOpts","drawRadiusLine","animate","INTERVALS","millisecond","common","second","minute","hour","day","week","month","quarter","year","UNITS","sorter","adapter","_adapter","_parseOpts","parser","isoWeekday","determineUnitForAutoTicks","minUnit","capacity","interval","addTick","time","timestamps","ticksFromTimestamps","majorUnit","setMajorTicks","TimeScale","_unit","_majorUnit","_offsets","_normalized","adapters","displayFormats","normalized","_applyBounds","_getLabelBounds","getLabelTimestamps","timeOpts","_generate","_filterBetween","_getLabelCapacity","determineUnitForFormatting","determineMajorUnit","initOffsets","offsetAfterAutoskip","getDecimalForValue","weekday","hasWeekday","getDataTimestamps","tooltipFormat","datetime","fmt","_tickFormatFunction","minorFormat","majorFormat","offsets","_getLabelSize","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","exampleLabel","prevSource","nextSource","prevTarget","nextTarget","span","TimeSeriesScale","_table","_minPos","_tableRange","_getTimestampsForTable","buildLookupTable","defaultDatasetIdKey","reforwardRef","setLabels","currentData","nextLabels","setDatasets","nextDatasets","datasetIdKey","addedDatasets","nextDataset","currentDataset","find","cloneData","nextData","ChartComponent","redraw","fallbackContent","updateMode","canvasProps","excluded","objectWithoutPropertiesLoose","sourceSymbolKeys","canvasRef","useRef","chartRef","renderChart","ChartJS","destroyChart","useEffect","nextOptions","setOptions","role","forwardRef","createTypedChart","registerables","Doughnut"],"sourceRoot":""}